---
docType: API
---

# ZegoMediaPlayerBlockDataHandler

## ZegoMediaPlayerBlockDataHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="mediaPlayer:blockBegin"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](../../api-reference/class#zegomediaplayer) *)mediaPlayer blockBegin:(NSString *)path;"
  desc="The callback triggered when the media player is about to throw the block data of the media resource."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerBlockDataHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](../../api-reference/class#zegomediaplayer) * | Callback player object. |
| path | NSString * | The path of the media resource. |

**Details**

The callback triggered when the media player is about to throw the block data of the media resource.

<Note title="">
- **Trigger**: The callback is generated when the media player starts playing.
- **Caution**: The callback does not actually take effect until call [setBlockDataHandler] to set.
</Note>

<Warning title="">
- **Available since**: 3.4.0
- **Restrictions**: When playing copyrighted music, this callback will be disabled by default. If necessary, please contact ZEGO technical support.
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:blockData:bufferSize"
  prototype="- (int)mediaPlayer:([ZegoMediaPlayer](../../api-reference/class#zegomediaplayer) *)mediaPlayer blockData:(unsigned char *const)buffer bufferSize:(unsigned int)bufferSize;"
  desc="The callback triggered when the media player throws the block data of the media resource."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerBlockDataHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](../../api-reference/class#zegomediaplayer) * | Callback player object. |
| buffer | unsigned char *const | The block data of the media resource. |
| bufferSize | unsigned int | Length of media resource block data. |

**Details**

The callback triggered when the media player throws the block data of the media resource.

<Note title="">
- **Trigger**: This callback will be generated after receiving the [onBlockBegin] callback.
- **Caution**: The callback does not actually take effect until call [setBlockDataHandler] to set. The buffer size before and after decryption should be consistent.
</Note>

<Warning title="">
- **Available since**: 3.4.0
- **Restrictions**: When playing copyrighted music, this callback will be disabled by default. If necessary, please contact ZEGO technical support.
</Warning>

**Return**

The size of the buffer, -1 is returned for failure.
</ParamField>

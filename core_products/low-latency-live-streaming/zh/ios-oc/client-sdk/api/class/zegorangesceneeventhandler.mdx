---
docType: API
---

# ZegoRangeSceneEventHandler

## ZegoRangeSceneEventHandler

*Declared in `ZegoExpressEventHandler.h`*

### 方法
<ParamField
  name="rangeScene:sceneStateUpdate:errorCode"
  prototype="- (void)rangeScene:([ZegoRangeScene](../../api-reference/class#zegorangescene) *)rangeScene sceneStateUpdate:([ZegoSceneState](../../api-reference/enum#zegoscenestate))state errorCode:(int)errorCode;"
  desc="场景状态变化通知"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoRangeSceneEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| rangeScene | [ZegoRangeScene](../../api-reference/class#zegorangescene) * | 触发此次回调的范围场景实例。 |
| state | [ZegoSceneState](../../api-reference/enum#zegoscenestate) | 当前场景状态。 |
| errorCode | int | 错误码，详情请参考常用 错误码文档 [https://doc-zh.zego.im/zh/4378.html](https://doc-zh.zego.im/zh/4378.html) |

**详情**

场景状态变化通知。

<Note title="">
- **通知时机**：场景状态变化。
</Note>

<Warning title="">
- **支持版本**：3.0.0 及以上。
- **使用限制**：请勿在回调线程中调用 SDK 接口。
</Warning>
</ParamField>
<ParamField
  name="rangeScene:enterView:position"
  prototype="- (void)rangeScene:([ZegoRangeScene](../../api-reference/class#zegorangescene) *)rangeScene enterView:([ZegoUser](../../api-reference/class#zegouser) *)user position:([ZegoPosition](../../api-reference/class#zegoposition) *)position;"
  desc="其他用户进入当前用户视野范围回调。"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoRangeSceneEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| rangeScene | [ZegoRangeScene](../../api-reference/class#zegorangescene) * | 触发此次回调的范围场景实例。 |
| user | [ZegoUser](../../api-reference/class#zegouser) * | 用户对象。 |
| position | [ZegoPosition](../../api-reference/class#zegoposition) * | 用户位置。 |

**详情**

其他用户进入当前用户视野范围回调。

<Note title="">
- **通知时机**：其他用户进入当前用户视野范围。
</Note>

<Warning title="">
- **支持版本**：3.0.0 及以上。
- **使用限制**：请勿在回调线程中调用 SDK 接口。
</Warning>
</ParamField>
<ParamField
  name="rangeScene:leaveView"
  prototype="- (void)rangeScene:([ZegoRangeScene](../../api-reference/class#zegorangescene) *)rangeScene leaveView:(NSString *)userID;"
  desc="其他用户离开当前用户视野范围回调通知。"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoRangeSceneEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| rangeScene | [ZegoRangeScene](../../api-reference/class#zegorangescene) * | 触发此次回调的范围场景实例。 |
| userID | NSString * | 用户 ID。 |

**详情**

其他用户离开当前用户视野范围回调通知。

<Note title="">
- **通知时机**：其他用户离开当前用户视野范围。
</Note>

<Warning title="">
- **支持版本**：3.0.0 及以上。
- **使用限制**：请勿在回调线程中调用 SDK 接口。
</Warning>
</ParamField>
<ParamField
  name="rangeScene:userStatusUpdate:position:channel:status"
  prototype="- (void)rangeScene:([ZegoRangeScene](../../api-reference/class#zegorangescene) *)rangeScene userStatusUpdate:(NSString *)userID position:([ZegoPosition](../../api-reference/class#zegoposition) *)position channel:(unsigned int)channel status:(NSData *)status;"
  desc="用户状态变更回调。"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoRangeSceneEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| rangeScene | [ZegoRangeScene](../../api-reference/class#zegorangescene) * | 触发此次回调的范围场景实例。 |
| userID | NSString * | 用户 ID。 |
| position | [ZegoPosition](../../api-reference/class#zegoposition) * | 用户当前位置。 |
| channel | unsigned int | 状态所属通道。 |
| status | NSData * | 用户当前状态数据。 |

**详情**

用户状态变更回调。

<Note title="">
- **通知时机**：用户状态变更。
</Note>

<Warning title="">
- **支持版本**：3.0.0 及以上。
- **使用限制**：请勿在回调线程中调用 SDK 接口。
- **注意事项**：本回调为高频回调，请勿在本回调中做耗时操作。
</Warning>
</ParamField>
<ParamField
  name="rangeScene:userCommandUpdate:position:channel:command"
  prototype="- (void)rangeScene:([ZegoRangeScene](../../api-reference/class#zegorangescene) *)rangeScene userCommandUpdate:(NSString *)userID position:([ZegoPosition](../../api-reference/class#zegoposition) *)position channel:(unsigned int)channel command:(NSData *)command;"
  desc="用户指令变更回调。"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoRangeSceneEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| rangeScene | [ZegoRangeScene](../../api-reference/class#zegorangescene) * | 触发此次回调的范围场景实例。 |
| userID | NSString * | 用户 ID。 |
| position | [ZegoPosition](../../api-reference/class#zegoposition) * | 用户当前位置。 |
| channel | unsigned int | 指令所属通道。 |
| command | NSData * | 用户下一步命令数据。 |

**详情**

用户指令变更回调。

<Note title="">
- **通知时机**：用户指令变更。
</Note>

<Warning title="">
- **支持版本**：3.0.0 及以上。
- **使用限制**：请勿在回调线程中调用 SDK 接口。
- **注意事项**：本回调为高频回调，请勿在本回调中做耗时操作。
</Warning>
</ParamField>
<ParamField
  name="rangeScene:customCommandUpdate"
  prototype="- (void)rangeScene:([ZegoRangeScene](../../api-reference/class#zegorangescene) *)rangeScene customCommandUpdate:(NSData *)command;"
  desc="用户自定义信令变更回调。"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoRangeSceneEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| rangeScene | [ZegoRangeScene](../../api-reference/class#zegorangescene) * | 触发此次回调的范围场景实例。 |
| command | NSData * | 用户自定义信令。 |

**详情**

用户自定义信令变更回调。

<Note title="">
- **通知时机**：用户自定义信令变更。
</Note>

<Warning title="">
- **支持版本**：3.0.0 及以上。
- **使用限制**：请勿在回调线程中调用 SDK 接口。
</Warning>
</ParamField>
<ParamField
  name="rangeScene:tokenWillExpire"
  prototype="- (void)rangeScene:([ZegoRangeScene](../../api-reference/class#zegorangescene) *)rangeScene tokenWillExpire:(int)remainTimeInSecond;"
  desc="场景 Token 鉴权将要过期的回调通知。"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoRangeSceneEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| rangeScene | [ZegoRangeScene](../../api-reference/class#zegorangescene) * | 触发此次回调的范围场景实例。 |
| remainTimeInSecond | int | token 过期前的剩余时间。 |

**详情**

场景 Token 鉴权将要过期的回调通知，请用户通过 [renewToken] 函数更新场景 Token 鉴权。

<Note title="">
- **通知时机**：在 Token 过期前 30 秒，SDK 会通过 [onSceneTokenWillExpire] 回调发出通知。
- **相关接口**：当开发者收到此回调后，可通过 [renewToken] 来更新 Token 鉴权信息。
</Note>

<Warning title="">
- **支持版本**：3.1.0 及以上。
- **使用限制**：请勿在回调线程中调用 SDK 接口。
</Warning>
</ParamField>

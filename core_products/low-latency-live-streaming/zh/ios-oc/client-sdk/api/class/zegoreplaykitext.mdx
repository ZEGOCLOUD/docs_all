---
docType: API
---

# ZegoReplayKitExt

## ZegoReplayKitExt

*Declared in `ZegoExpressDefines.h`*

### 方法
<ParamField
  name="sharedInstance"
  prototype="+ ([ZegoReplayKitExt](../../api-reference/class#zegoreplaykitext) *)sharedInstance;"
  desc="创建屏幕采集扩展单例。"
  prefixes={["static"]}
  parent_file="Declared in \`ZegoExpressDefines.h\`"
  parent_name="ZegoReplayKitExt"
  parent_type="class">
创建屏幕采集扩展单例，用于 Broadcast upload Extension 进行将采集到的屏幕数据发送给 SDK。

<Warning title="">
- **支持版本**：3.1.0 及以上。
</Warning>

扩展单例对象
</ParamField>
<ParamField
  name="setupWithDelegate:"
  prototype="- (void)setupWithDelegate:(id<[ZegoReplayKitExtHandler](../../api-reference/class#zegoreplaykitexthandler)>)delegate API_AVAILABLE(ios (12.0));"
  desc="初始化扩展进程。"
  parent_file="Declared in \`ZegoExpressDefines.h\`"
  parent_name="ZegoReplayKitExt"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| delegate | nullable id\<[ZegoReplayKitExtHandler](../../api-reference/class#zegoreplaykitexthandler)\> | 屏幕采集扩展应用事件通知回调，传 [nil] 则意味着不接收任何回调通知。 |

**详情**

如果没有开启 App Group 配置，可以使用此接口进行初始化。

<Note title="">
- **业务场景**：需要在 [RPBroadcastSampleHandler] 的实现类中的 [broadcastStartedWithSetupInfo] 方法中调用。
</Note>

<Warning title="">
- **支持版本**：3.1.0 及以上。
</Warning>
</ParamField>
<ParamField
  name="setupWithDelegate:appGroup"
  prototype="- (void)setupWithDelegate:(id<[ZegoReplayKitExtHandler](../../api-reference/class#zegoreplaykitexthandler)>)delegate appGroup:(NSString *)groupID API_AVAILABLE(ios (12.0));"
  desc="使用 App Group 进行初始化扩展进程，在屏幕共享时可以提供更好的性能与稳定性。"
  parent_file="Declared in \`ZegoExpressDefines.h\`"
  parent_name="ZegoReplayKitExt"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| delegate | nullable id\<[ZegoReplayKitExtHandler](../../api-reference/class#zegoreplaykitexthandler)\> | 屏幕采集扩展应用事件通知回调，传 [nil] 则意味着不接收任何回调通知。 |
| groupID | NSString * | 主应用和 extension 扩展应用应该归属于同一个 App Group，此处需要传入 AppGroupID。 |

**详情**

设置 AppGroupID 用于进程间共享内存，可以提高数据传输的性能与稳定性，同时必须在主 App 中启动 [startScreenCapture] 之前调用 [setAppGroupID:] 方法设置 AppGroupID。

<Note title="">
- **业务场景**：需要在 [RPBroadcastSampleHandler] 的实现类中的 [broadcastStartedWithSetupInfo] 方法中调用。
</Note>

<Warning title="">
- **支持版本**：3.3.0 及以上。
</Warning>
</ParamField>
<ParamField
  name="finished"
  prototype="- (void)finished API_AVAILABLE(ios (12.0));"
  desc="结束屏幕采集。"
  parent_file="Declared in \`ZegoExpressDefines.h\`"
  parent_name="ZegoReplayKitExt"
  parent_type="class">
<Note title="">
- **业务场景**：通过系统控制中心停止录屏时，会回调 RPBroadcastSampleHandler.broadcastFinished，在 broadcastFinished 方法中调用。
</Note>

<Warning title="">
- **支持版本**：3.1.0 及以上。
</Warning>
</ParamField>
<ParamField
  name="sendSampleBuffer:withType"
  prototype="- (void)sendSampleBuffer:(CMSampleBufferRef)sampleBuffer withType:(RPSampleBufferType)sampleBufferType API_AVAILABLE(ios (12.0));"
  desc="媒体数据发送方法"
  parent_file="Declared in \`ZegoExpressDefines.h\`"
  parent_name="ZegoReplayKitExt"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| sampleBuffer | CMSampleBufferRef | CMSampleBuffer 对象，它包含视频或音频数据。 |
| sampleBufferType | RPSampleBufferType | 确定由 RPSampleBufferType 枚举定义的样本缓冲区的类型。 |

<Note title="">
- **业务场景**：需要在 RPBroadcastSampleHandler 的实现类中的 processSampleBuffer: 方法中调用。
</Note>

<Warning title="">
- **支持版本**：3.1.0 及以上。
</Warning>
</ParamField>

openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: AI Agent API Support
    email: support@zegocloud.com

servers:
  - url: https://aigc-aiagent-api.zegotech.cn
    description: ç»Ÿä¸€æ¥å…¥åœ°å€ï¼ˆä¸åŒºåˆ†åŒºåŸŸï¼‰
  - url: https://aigc-aiagent-api-sha.zegotech.cn
    description: ä¸­å›½å¤§é™†ï¼ˆä¸Šæµ·ï¼‰

tags:
  - name: agent-configuration-management

paths:
  /:
    post:
      tags:
        - agent-configuration-management
      summary: UpdateAgent
      description: |
        é€šè¿‡å‘æœ¬æ¥å£ä¼ å…¥æ™ºèƒ½ä½“ ID å’ŒåŸºç¡€é…ç½®ï¼Œæ‚¨å¯ä»¥æ›´æ–°ä¸€ä¸ªç°æœ‰çš„æ™ºèƒ½ä½“ã€‚

        <Warning title="è­¦å‘Š">
          - å¯ä»¥åˆ†åˆ«å•ç‹¬æ›´æ–° LLMã€TTSã€ASR çš„é…ç½®ï¼Œä¹Ÿå¯ä»¥åŒæ—¶æ›´æ–°å¤šä¸ªé…ç½®ã€‚
          - LLMã€TTSã€ASR ä¸‰ä¸ªé…ç½®é¡¹æ˜¯è¦†ç›–å¼æ›´æ–°ï¼Œå³ä¼ å…¥çš„é…ç½®ä¼šè¦†ç›–åŸæœ‰çš„é…ç½®ï¼ˆæ¯”å¦‚åªè¦æ›´æ–° LLM.Model ä¹Ÿéœ€è¦ä¿è¯ LLM çš„å…¶ä»–å‚æ•°è®¾ç½®äº†æ­£ç¡®å€¼ï¼‰ã€‚
        </Warning>
      operationId: update-agent
      parameters:
        - name: Action
          in: query
          description: |
            > æ¥å£åŸå‹å‚æ•°
            >
            > https://aigc-aiagent-api.zegotech.cn?Action=UpdateAgent
          required: true
          allowEmptyValue: false
          schema:
            type: string
            enum: [UpdateAgent]
          style: form
          explode: true
        # å¼•ç”¨å…±äº«çš„å‚æ•°
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
      requestBody:
        required: true
        description: ğŸ“Œ æ³¨æ„ï¼šåªæœ‰ä¼ å…¥æœ¬æ¥å£çš„å‚æ•°æ‰ä¼šç”Ÿæ•ˆï¼Œæœªä¼ å…¥çš„å‚æ•°ä¸ä¼šæ›´æ–°ã€‚
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UpdateAgentRequest"
            example:
              AgentId: "xiaozhi"
              Name: "å°æ™º"
              LLM:
                Url: "https://ark.cn-beijing.volces.com/api/v3/chat/completions"
                ApiKey: "zego_test"
                Model: "doubao-1-5-lite-32k-250115"
                SystemPrompt: "ä½ æ˜¯å°æ™ºï¼Œæˆå¹´å¥³æ€§ï¼Œæ˜¯**å³æ„ç§‘æŠ€åˆ›é€ çš„é™ªä¼´åŠ©æ‰‹**ï¼Œä¸ŠçŸ¥å¤©æ–‡ä¸‹çŸ¥åœ°ç†ï¼Œèªæ˜ç¿æ™ºã€çƒ­æƒ…å‹å–„ã€‚"
              TTS:
                Vendor: "ByteDance"
                Params:
                  app:
                    appid: "zego_test"
                    token: "zego_test"
                    cluster: "volcano_tts"
                  audio:
                    voice_type: "zh_female_qingxinnvsheng_mars_bigtts"
      responses:
        "200":
          description: æ›´æ–°æˆåŠŸ
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UpdateAgentResponse"

components:
  schemas:
    UpdateAgentRequest:
      type: object
      required:
        - AgentId
      properties:
        AgentId:
          type: string
          description: å·²æ³¨å†Œæ™ºèƒ½ä½“çš„å”¯ä¸€æ ‡è¯†ã€‚
          example: "xiaozhi"
        Name:
          type: string
          description: æ™ºèƒ½ä½“åç§°
          maxLength: 64
          example: "å°æ™º"
        LLM:
          $ref: '../shared-components.yaml#/components/schemas/LLM'
        TTS:
          $ref: '../shared-components.yaml#/components/schemas/TTS'
        ASR:
          $ref: '../shared-components.yaml#/components/schemas/ASR'

    UpdateAgentResponse:
      type: object
      properties:
        Code:
          type: integer
          description: è¿”å›ç ï¼Œ0 è¡¨ç¤ºæˆåŠŸï¼Œå…¶ä»–å€¼è¡¨ç¤ºå¤±è´¥ã€‚è¯¦æƒ…è¯·å‚è€ƒ [è¿”å›ç ](/aiagent-server/api-reference/return-codes) è¯´æ˜ã€‚
          example: 0
        Message:
          type: string
          description: è¯·æ±‚ç»“æœè¯´æ˜
          example: "Success"
        RequestId:
          type: string
          description: è¯·æ±‚ ID
          example: "1843985617336143872"

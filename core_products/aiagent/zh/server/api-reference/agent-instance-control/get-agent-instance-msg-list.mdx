import Content from '/snippets/Reuse/MessagesStructureforAIAgentCN.mdx'

# 获取智能体实例上下文列表

---

## 描述

本接口用于在与智能体实例进行语音对话时，获取作为上下文的消息列表。

import PostPrototype from '/snippets/common/zh/server/post-prototype.mdx'

<PostPrototype link="https://aigc-aiagent-api.zegotech.cn?Action=GetAgentInstanceMsgList" />

## 请求参数

以下请求参数列表仅列出了接口请求参数和部分公共参数，完整公共参数列表请参考 [调用方式 - 公共请求参数](./../accessing-server-apis.mdx#公共请求参数)。

| 参数             | 类型    | 是否必选 | 描述                     |
|------------------|---------|----------|--------------------------|
| AgentInstanceId  | String  | 是       | 智能体实例的唯一标识。         |

## 请求示例

- 请求地址 URL：

    ```https
    https://aigc-aiagent-api.zegotech.cn?Action=GetAgentInstanceMsgList
    &<公共请求参数>
    ```

- 请求消息体：

    ```json
    {
        "AgentInstanceId": "1907616178474336256"
    }
    ```

## 响应参数

| 参数 | 类型 | 描述 |
|------|------|------|
| Code | Number | 返回码。0 表示成功，其他值表示失败。如需了解错误码及响应处理建议，请参考 [返回码](./../return-codes.mdx)。 |
| Message | String | 请求结果的说明信息。 |
| RequestId | String | 请求 ID。 |
| Data | Object | 返回数据。 |
| └Total | Number | 作为上下文的消息总数。 |
| └MessageList | Array of Object | 作为上下文的消息列表。本参数结构，请参考 [MessageList](#messagelist)。目前最多支持返回 100 条上下文消息，消息排序按照时间升序。 |

### MessageList

<Content />

## 响应示例

```json
{
    "Code": 0,
    "Message": "success",
    "RequestId": "2537521374375652066",
    "Data": {
        "Total": 4,
        "MessageList": [
            {
                "Role": "user",
                "Content": "你叫什么名字？"
            },
            {
                "Role": "assistant",
                "Content": "我叫豆包呀。"
            },
            {
                "Role": "user",
                "Content": "给我讲故事。"
            },
            {
                "Role": "assistant",
                "Content": "好呀，我给你讲一个《三只小猪》的故事吧。"
            }
        ]
    }
}
```

# 错误码

---

## AIAgentError

AIAgentError 类定义了 SDK 可能遇到的各种错误情况及其对应的错误码。

### 基础错误码

| 错误码 | 说明 | 处理建议 |
|--------|------|----------|
| `Success = 0` | 操作成功 | - |
| `InvalidParams = 900000001` | 参数无效 | 检查传入的参数是否符合要求，确保必填参数不为空且格式正确 |
| `NetworkError = 900000002` | 网络错误 | 检查网络连接状态，可尝试重新连接或稍后重试 |
| `InvalidToken = 900000003` | 令牌无效 | 检查Token是否正确，可能需要重新获取Token |
| `ServiceUnknown = 900000004` | 服务未知错误 | 服务端异常，请联系ZEGO技术支持 |
| `NetworkTimeout = 900000005` | 网络超时 | 检查网络状态，可能需要在更好的网络环境下重试 |
| `ConversationNotExist = 900000006` | 会话不存在 | 检查会话ID是否正确，可能需要重新创建会话 |
| `ConversationNotSupportMetaHuman = 900000007` | 该会话不支持数字人 | 创建支持数字人的会话类型 |

### 网关错误码

| 错误码 | 说明 | 处理建议 |
|--------|------|----------|
| `InvalidHost = 100000000` | Host错误 | 检查服务器地址配置是否正确 |
| `InvalidAppId = 100000001` | AppId格式错误 | 确认AppId格式正确，通常为数字格式 |
| `EmptyTimestamp = 100000002` | Timestamp为空 | 确保请求中包含时间戳参数 |
| `InvalidTimestamp = 100000003` | Timestamp格式错误 | 使用正确格式的Unix时间戳 |
| `SignatureExpired = 100000004` | 签名过期 | 重新生成签名，确保系统时间准确 |
| `InvalidSignature = 100000005` | 签名错误 | 检查签名算法和密钥是否正确 |
| `EmptyAction = 100000006` | Action为空 | 确保请求中包含Action参数 |
| `UnsupportedAction = 100000007` | 不支持的Action | 检查Action参数是否在支持的范围内 |
| `EmptySignatureNonce = 100000008` | SignatureNonce为空 | 确保请求中包含SignatureNonce参数 |
| `EmptySignature = 100000009` | Signature为空 | 确保请求中包含签名参数 |
| `GetServerSecretFailed = 100000010` | 获取ServerSecret失败 | 检查服务器配置，联系技术支持 |
| `GetAppConfigFailed = 100000011` | 获取App配置失败 | 检查应用配置是否正确，联系技术支持 |
| `ReadHttpBodyFailed = 100000012` | 读取HTTP包体失败 | 检查请求数据格式是否正确 |
| `EmptySignatureVersion = 100000013` | SignatureVersion为空 | 确保请求中包含SignatureVersion参数 |
| `UnsupportedSignatureVersion = 100000014` | 不支持的SignatureVersion | 使用支持的签名版本 |
| `GatewayInternalError = 100000015` | 网关内部错误 | 服务端异常，请联系ZEGO技术支持 |
| `AppEnvNotConfigured = 100000016` | App未配置正式环境 | 在控制台中配置应用的正式环境 |
| `ServiceNotActivated = 100000017` | App未开通服务 | 在控制台中开通相应的服务 |

### 业务错误码

| 错误码 | 说明 | 处理建议 |
|--------|------|----------|
| `SystemError = 410000001` | 系统错误 | 服务端异常，请联系ZEGO技术支持 |
| `InvalidRequestBody = 410000002` | 错误的请求Body | 检查请求体格式是否符合API要求 |
| `InvalidQueryParams = 410000003` | 错误的Query参数 | 检查URL查询参数是否正确 |
| `ApiCallTooFrequent = 410000004` | API调用太频繁 | 降低API调用频率，实现请求节流 |
| `AppServiceConfigError = 410000005` | APP服务配置错误 | 检查应用服务配置，联系技术支持 |
| `InsufficientWorkerNodes = 410000006` | Worker节点不足 | 服务资源不足，稍后重试或联系技术支持 |
| `RequestProcessing = 410000007` | 请求正在处理中 | 等待当前请求处理完成，避免重复请求 |
| `AppConcurrentLimitReached = 410000008` | APP对话并发数达到限制 | 减少并发请求数量或升级服务计划 |
| `InternalRpcFailed = 410001001` | 内部服务RPC失败 | 服务内部通信错误，请联系ZEGO技术支持 |
| `SessionNotExist = 410001002` | 会话信息不存在 | 检查会话ID是否正确，可能需要重新创建会话 |
| `RtcDialogueNotExist = 410001003` | RTC对话不存在 | 检查RTC对话是否已创建 |
| `UnsupportedTtsProvider = 410001004` | TTS供应商暂不支持 | 使用支持的TTS供应商 |
| `UnsupportedLlmProvider = 410001005` | LLM供应商暂不支持 | 使用支持的LLM供应商 |
| `DuplicateConversationId = 410001006` | ConversationId重复 | 使用唯一的会话ID |
| `DuplicateAgentId = 410001007` | AgentId重复 | 使用唯一的Agent ID |
| `DuplicateAgentTemplateId = 410001008` | Agent模版Id重复 | 使用唯一的模板ID |
| `AgentTemplateNotExist = 410001009` | Agent模版Id不存在 | 检查模板ID是否正确，或创建新模板 |
| `UnsupportedAsrProvider = 410001010` | ASR供应商暂不支持 | 使用支持的ASR供应商 |
| `RtcDialogueExist = 410003101` | RTC对话已存在 | 使用已存在的RTC对话或先关闭现有对话 |

## 错误消息获取

AIAgentError 类提供了一个静态方法用于获取错误码对应的错误消息：

```java
// 根据错误码获取错误消息
public static String getErrorMessage(int errorCode) {
    return ERROR_MESSAGES.getOrDefault(errorCode, "未知错误码: " + errorCode);
}
```

## 示例用法

```java
// 检查操作结果
if (result.code == AIAgentError.Success) {
    Log.d(TAG, "操作成功");
} else if (result.code == AIAgentError.InvalidParams) {
    Log.e(TAG, "参数无效");
} else if (result.code == AIAgentError.NetworkTimeout) {
    Log.e(TAG, "网络超时，请重试");
}

// 使用getErrorMessage方法获取错误信息
String errorMessage = AIAgentError.getErrorMessage(result.code);
Log.e(TAG, "操作失败: " + errorMessage);

// 处理业务错误
switch (error.code) {
    case AIAgentError.ServiceNotActivated:
        Log.e(TAG, "服务未开通，请先开通服务");
        break;
    case AIAgentError.AppConcurrentLimitReached:
        Log.e(TAG, "已达到并发限制，请稍后重试");
        break;
    case AIAgentError.UnsupportedTtsProvider:
        Log.e(TAG, "当前TTS供应商不支持");
        break;
    default:
        // 使用getErrorMessage处理未知错误
        Log.e(TAG, "未知错误：" + AIAgentError.getErrorMessage(error.code));
}
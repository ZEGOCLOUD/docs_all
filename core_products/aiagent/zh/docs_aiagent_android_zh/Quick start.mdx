import {getPlatformData} from "/snippets/utils-content-parser.js"


export const expressSDKMap = {
  'Android': <a href='https://doc-zh.zego.im/article/3575' target='_blank'>ZEGO Express SDK</a>,
  'iOS': <a href='https://doc-zh.zego.im/article/3574' target='_blank'>ZEGO Express SDK</a>,
  'Web': <a href='https://doc-zh.zego.im/article/6839' target='_blank'>ZEGO Express SDK</a>,
}

# å¿«é€Ÿå¼€å§‹

æœ¬æ–‡æ¡£ç”¨äºè¯´æ˜å¦‚ä½•å¿«é€Ÿé›†æˆå®¢æˆ·ç«¯ SDK ï¼ˆZEGO Express SDKï¼‰å¹¶å®ç°ä¸æ™ºèƒ½ä½“è¿›è¡Œè¯­éŸ³äº’åŠ¨ã€‚

## å‰ææ¡ä»¶

- å·²åœ¨ [ZEGO æ§åˆ¶å°](https://console.zego.im/) åˆ›å»ºé¡¹ç›®ï¼Œå¹¶ç”³è¯·æœ‰æ•ˆçš„ AppID å’Œ AppSignï¼Œè¯¦æƒ…è¯·å‚è€ƒ [æ§åˆ¶å° - é¡¹ç›®ä¿¡æ¯](https://doc-zh.zego.im/article/12107)ã€‚
:::if{props.platform="undefined|iOS"}
<div>
- å·²è”ç³» ZEGO æŠ€æœ¯æ”¯æŒè·å–æ”¯æŒ AI é™å™ªå’Œ AI å›å£°æ¶ˆé™¤çš„ {getPlatformData(props,expressSDKMap)}ã€‚å¹¶é›†æˆåˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚
</div>
:::
:::if{props.platform="Web"}
<div>
- å·²è”ç³» ZEGO æŠ€æœ¯æ”¯æŒè·å–æ”¯æŒ AI é™å™ªçš„ {getPlatformData(props,expressSDKMap)}ã€‚å¹¶é›†æˆåˆ°æ‚¨çš„é¡¹ç›®ä¸­ã€‚
</div>
:::
- å·²æŒ‰ [ä¸šåŠ¡åå°å¿«é€Ÿå¼€å§‹æŒ‡å¼•](/aiagent-server/quick-start) é›†æˆäº† AI Agent ç›¸å…³æœåŠ¡ç«¯ APIã€‚

## ç¤ºä¾‹ä»£ç 
ä»¥ä¸‹æ˜¯å®ç°æ ¸å¿ƒèƒ½åŠ›æ‰€éœ€è¦çš„ç¤ºä¾‹ä»£ç ï¼Œæ‚¨å¯ä»¥å‚è€ƒç¤ºä¾‹ä»£ç æ¥å®ç°è‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ã€‚

<CardGroup cols={2}>
:::if{props.platform=undefined}
<Card title="Android å®¢æˆ·ç«¯ç¤ºä¾‹ä»£ç " href="https://github.com/ZEGOCLOUD/ai_agent_quick_start/tree/master/android" target="_blank">
Android å®¢æˆ·ç«¯ç¤ºä¾‹ä»£ç ã€‚åŒ…å«æœ€åŸºæœ¬çš„ç™»å½•ã€æ¨æµã€æ‹‰æµã€é€€å‡ºæˆ¿é—´ç­‰èƒ½åŠ›ã€‚
</Card>
:::
:::if{props.platform="iOS"}
<Card title="iOS å®¢æˆ·ç«¯ç¤ºä¾‹ä»£ç " href="https://github.com/ZEGOCLOUD/ai_agent_quick_start/tree/master/ios" target="_blank">
iOS å®¢æˆ·ç«¯ç¤ºä¾‹ä»£ç ã€‚åŒ…å«æœ€åŸºæœ¬çš„ç™»å½•ã€æ¨æµã€æ‹‰æµã€é€€å‡ºæˆ¿é—´ç­‰èƒ½åŠ›ã€‚
</Card>
:::
:::if{props.platform="Web"}
<Card title="Web å®¢æˆ·ç«¯ç¤ºä¾‹ä»£ç " href="https://github.com/ZEGOCLOUD/ai_agent_quick_start/tree/master/web" target="_blank">
Web å®¢æˆ·ç«¯ç¤ºä¾‹ä»£ç ã€‚åŒ…å«æœ€åŸºæœ¬çš„ç™»å½•ã€æ¨æµã€æ‹‰æµã€é€€å‡ºæˆ¿é—´ç­‰èƒ½åŠ›ã€‚
</Card>
:::
</CardGroup>

## æ•´ä½“ä¸šåŠ¡æµç¨‹å›¾

æ‚¨éœ€è¦åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ ZEGO Express SDK å®ç°çœŸå®ç”¨æˆ·è¿›å…¥æˆ¿é—´å¹¶æ¨æµã€‚ç„¶åé€šçŸ¥ä¸šåŠ¡åå°è°ƒç”¨ AI Agent ç›¸å…³æœåŠ¡ç«¯ APIï¼Œå®ç°å°†æ™ºèƒ½ä½“åŠ å…¥æˆ¿é—´å¹¶ä¸çœŸå®ç”¨æˆ·è¿›è¡Œå®æ—¶äº’åŠ¨ã€‚

```mermaid
sequenceDiagram
    participant å®¢æˆ·ç«¯
    participant ä¸šåŠ¡åå°
    participant AI Agentåå°
    
    å®¢æˆ·ç«¯->>å®¢æˆ·ç«¯: åˆå§‹åŒ– ZEGO Express SDK
    
    å®¢æˆ·ç«¯->>ä¸šåŠ¡åå°: é€šçŸ¥ä¸šåŠ¡åå°å¼€å§‹é€šè¯
    ä¸šåŠ¡åå°->>AI Agentåå°: åˆ›å»ºæ™ºèƒ½ä½“å®ä¾‹
    AI Agentåå°-->>ä¸šåŠ¡åå°: 
    ä¸šåŠ¡åå°-->>å®¢æˆ·ç«¯: 
    
    å®¢æˆ·ç«¯->>ä¸šåŠ¡åå°: è·å– Token
    ä¸šåŠ¡åå°-->>å®¢æˆ·ç«¯: Token
    
    å®¢æˆ·ç«¯->>å®¢æˆ·ç«¯: ç”¨æˆ·ä½¿ç”¨ Token ç™»å½•æˆ¿é—´å¹¶æ¨æµ
    
    å®¢æˆ·ç«¯->>å®¢æˆ·ç«¯: ç”¨æˆ·æ‹‰æ™ºèƒ½ä½“æµ
    
    å®¢æˆ·ç«¯->>ä¸šåŠ¡åå°: é€šçŸ¥ä¸šåŠ¡åå°åœæ­¢é€šè¯
    ä¸šåŠ¡åå°->>AI Agentåå°: åˆ é™¤æ™ºèƒ½ä½“å®ä¾‹
    AI Agentåå°-->>ä¸šåŠ¡åå°: 
    ä¸šåŠ¡åå°-->>å®¢æˆ·ç«¯: 
    
    å®¢æˆ·ç«¯->>å®¢æˆ·ç«¯: ç”¨æˆ·åœæ­¢æ¨æµå¹¶é€€å‡ºæˆ¿é—´
```

## æ ¸å¿ƒèƒ½åŠ›å®ç°

### é›†æˆ ZEGO Express SDK

:::if{props.platform=undefined}

è¯·å‚è€ƒ [é›†æˆ SDK > 2.2 > æ–¹å¼2](https://doc-zh.zego.im/article/3575#2) æ‰‹åŠ¨é›†æˆ SDKã€‚é›†æˆ SDK åæŒ‰ä»¥ä¸‹æ­¥éª¤åˆå§‹åŒ– ZegoExpressEngineã€‚

<div>
<Steps>
<Step title="æ·»åŠ æƒé™å£°æ˜">
è¿›å…¥ â€œapp/src/mainâ€ ç›®å½•ï¼Œæ‰“å¼€ â€œAndroidManifest.xmlâ€ æ–‡ä»¶ï¼Œæ·»åŠ æƒé™ã€‚
```xml AndroidManifest.xml
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```
</Step>
<Step title="è¿è¡Œæ—¶ç”³è¯·å½•éŸ³æƒé™">
```java
private final ActivityResultLauncher<String> requestPermissionLauncher = registerForActivityResult(
    new ActivityResultContracts.RequestPermission(), new ActivityResultCallback<Boolean>() {
        @Override
        public void onActivityResult(Boolean isGranted) {
            if (isGranted) {
                // åŒæ„æƒé™
            }
        }
    });
//å‘èµ·è¯·æ±‚
requestPermissionLauncher.launch(Manifest.permission.RECORD_AUDIO);
```
</Step>
<Step title="åˆ›å»ºå¹¶åˆå§‹åŒ– ZegoExpressEngine">
```java {3}
ZegoEngineProfile zegoEngineProfile = new ZegoEngineProfile();
zegoEngineProfile.appID = KeyCenter.appID;
zegoEngineProfile.scenario = ZegoScenario.HIGH_QUALITY_CHATROOM;
zegoEngineProfile.application = getApplication();
ZegoExpressEngine.createEngine(zegoEngineProfile, null);
```
</Step>
</Steps>
</div>
:::

:::if{props.platform="iOS"}

è¯·å‚è€ƒ [é›†æˆ SDK > 2.2 > æ–¹å¼ä¸‰](https://doc-zh.zego.im/article/3574#2_2) æ‰‹åŠ¨é›†æˆ SDKã€‚é›†æˆ SDK åæŒ‰ä»¥ä¸‹æ­¥éª¤åˆå§‹åŒ– ZegoExpressEngineã€‚

<div>
<Steps>
<Step title="åœ¨ Info.plist æ–‡ä»¶å£°æ˜å¿…è¦çš„æƒé™">
```xml Info.plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    ...
    <key>UIBackgroundModes</key>
    <array>
        <string>audio</string>
    </array>
    <key>NSMicrophoneUsageDescription</key>
    <string>éœ€è¦è®¿é—®éº¦å…‹é£ä»¥è¿›è¡Œè¯­éŸ³èŠå¤©</string>
</dict>
</plist>
```
</Step>
<Step title="è¿è¡Œæ—¶ç”³è¯·å½•éŸ³æƒé™">
```objectivec
- (void)requestAudioPermission:(void(^)(BOOL granted))completion {
    /// éœ€è¦åœ¨é¡¹ç›®çš„ Info.plist æ–‡ä»¶ä¸­æ·»åŠ éº¦å…‹é£æƒé™çš„ä½¿ç”¨è¯´æ˜
    AVAudioSession *audioSession = [AVAudioSession sharedInstance];
    [audioSession requestRecordPermission:^(BOOL granted) {
        dispatch_async(dispatch_get_main_queue(), ^{
            completion(granted);
        });
    }];
}
```
</Step>
<Step title="åˆ›å»ºå¹¶åˆå§‹åŒ– ZegoExpressEngine">

```objectivec {4}
-(void)initZegoExpressEngine{
    ZegoEngineProfile* profile = [[ZegoEngineProfile alloc]init];
    profile.appID = kZegoPassAppId;
    profile.scenario = ZegoScenarioHighQualityChatroom; //è®¾ç½®è¯¥åœºæ™¯å¯ä»¥é¿å…ç”³è¯·ç›¸æœºæƒé™ï¼Œæ¥å…¥æ–¹åº”æŒ‰è‡ªå·±çš„ä¸šåŠ¡åœºæ™¯è®¾ç½®å…·ä½“å€¼
    
    [ZegoExpressEngine createEngineWithProfile:profile eventHandler:self];
}
```
</Step>
</Steps>
</div>

:::

:::if{props.platform="Web"}

è¯·å‚è€ƒ [é›†æˆ SDK > æ–¹å¼ 2](https://doc-zh.zego.im/article/6839#2_2) æ‰‹åŠ¨é›†æˆ SDKã€‚é›†æˆ SDK åæŒ‰ä»¥ä¸‹æ­¥éª¤åˆå§‹åŒ– ZegoExpressEngineã€‚

1 åŠ è½½AIé™å™ªæ¨¡å—

2 å®ä¾‹åŒ– ZegoExpressEngine

3 æ£€æŸ¥ç³»ç»Ÿè¦æ±‚ï¼ˆWebRTC æ”¯æŒå’Œéº¦å…‹é£æƒé™ï¼‰

```javascript {7,9,11}
import { ZegoExpressEngine } from "zego-express-engine-webrtc";
import { VoiceChanger } from "zego-express-engine-webrtc/voice-changer";

const appID = 1234567 // ä»å³æ„æ§åˆ¶å°è·å–
const server = 'xxx' // ä»å³æ„æ§åˆ¶å°è·å–
// åŠ è½½AIé™å™ªæ¨¡å—
ZegoExpressEngine.use(VoiceChanger);
// å®ä¾‹åŒ– ZegoExpressEngineä¼ å…¥appIdå’Œserverç­‰é…ç½®
const zg = new ZegoExpressEngine(appID, server);
// æ£€æŸ¥ç³»ç»Ÿè¦æ±‚
const checkSystemRequirements = async () => {
    // æ£€æµ‹æ˜¯å¦æ”¯æŒwebRTC
    const rtc_sup = await zg.checkSystemRequirements("webRTC");
    if (!rtc_sup.result) {
      // æµè§ˆå™¨ä¸æ”¯æŒwebrtc
  }
    // æ£€æµ‹æ˜¯å¦å¼€å¯éº¦å…‹é£æƒé™
    const mic_sup = await zg.checkSystemRequirements("microphone");
    if (!mic_sup.result) {
      // æœªå¼€å¯éº¦å…‹é£æƒé™
  }
}
checkSystemRequirements()
```
:::

### é€šçŸ¥ä¸šåŠ¡åå°å¼€å§‹é€šè¯

å»ºè®®å®¢æˆ·ç«¯åœ¨çœŸå®ç”¨æˆ·è¿›å…¥æˆ¿é—´å‰ï¼Œé€šçŸ¥ä¸šåŠ¡åå°å¼€å§‹é€šè¯ã€‚ä¸šåŠ¡åå°æ”¶åˆ°å¼€å§‹é€šè¯é€šçŸ¥åï¼Œä½¿ç”¨ä¸å®¢æˆ·ç«¯ç›¸åŒçš„ roomID åŠå…³è”çš„ userID å’Œ streamID åˆ›å»ºæ™ºèƒ½ä½“å®ä¾‹ï¼Œè¿™æ ·æ™ºèƒ½ä½“å°±èƒ½ä¸çœŸå®ç”¨æˆ·åœ¨åŒä¸€ä¸ªæˆ¿é—´å†…è¿›è¡Œç›¸äº’æ¨æ‹‰æµå®ç°è¯­éŸ³äº’åŠ¨ã€‚

<Accordion title="é€šçŸ¥ä¸šåŠ¡åå°çš„ç¤ºä¾‹ä»£ç " defaultOpen="false">
:::if{props.platform=undefined}
```java
// é€šçŸ¥ä¸šåŠ¡åå°å¼€å§‹é€šè¯
// TODO å®‰å“åŠ ç¤ºä¾‹
```
:::
:::if{props.platform="iOS"}
```objectivec
// é€šçŸ¥ä¸šåŠ¡åå°å¼€å§‹é€šè¯
// TODO iOSåŠ ç¤ºä¾‹
```
:::
:::if{props.platform="Web"}
```javascript
// é€šçŸ¥ä¸šåŠ¡åå°å¼€å§‹é€šè¯
async function startCall() {
  try {
    const response = await fetch(`${YOUR_SERVER_URL}/api/start`, { // YOUR_SERVER_URL ä¸ºæ‚¨çš„ä¸šåŠ¡åå°åœ°å€
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      }
    });

    const data = await response.json();
    console.log('å¼€å§‹é€šè¯ç»“æœ:', data);
    return data;
  } catch (error) {
    console.error('å¼€å§‹é€šè¯å¤±è´¥:', error);
    throw error;
  }
}
```
:::
</Accordion>

### ç”¨æˆ·è¿›å…¥æˆ¿é—´å¹¶æ¨æ‹‰æµ

çœŸå®ç”¨æˆ·ç™»å½•æˆ¿é—´åæ¨æµã€‚

:::if{props.platform="undefined|iOS"}
<Note title="æ³¨æ„">
åœ¨æ­¤åœºæ™¯ä¸‹éœ€è¦å¼€å¯ AI é™å™ªå’Œ AI å›å£°æ¶ˆé™¤ä»¥è·å¾—æ›´å¥½çš„æ•ˆæœã€‚
</Note>
:::
:::if{props.platform="Web"}
<Note title="æ³¨æ„">
åœ¨æ­¤åœºæ™¯ä¸‹éœ€è¦å¼€å¯ AI é™å™ªä»¥è·å¾—æ›´å¥½çš„æ•ˆæœã€‚
</Note>
:::

ç™»å½•ç”¨çš„ token éœ€è¦ä»æ‚¨çš„ä¸šåŠ¡åå°è·å–ï¼Œè¯·å‚è€ƒå®Œæ•´ç¤ºä¾‹ä»£ç ã€‚

<Note title="è¯´æ˜">
è¯·ç¡®ä¿ roomIDã€userIDã€streamID åœ¨ä¸€ä¸ª ZEGO APPID ä¸‹æ˜¯å”¯ä¸€çš„ã€‚
- roomID: ç”±ç”¨æˆ·è‡ªå·±å®šä¹‰ç”Ÿæˆè§„åˆ™,ä¼šç”¨æ¥ç™»å½• Express SDK çš„æˆ¿é—´ã€‚ä»…æ”¯æŒæ•°å­—ï¼Œè‹±æ–‡å­—ç¬¦ å’Œ '~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+', '=', '-', '`', ';', 'â€™', ',', '.', '\<', '\>', ''ã€‚å¦‚æœéœ€è¦ä¸ Web SDK äº’é€šï¼Œè¯·ä¸è¦ä½¿ç”¨ '%'ã€‚
- userID: é•¿åº¦ä¸è¶…è¿‡32å­—èŠ‚ã€‚ä»…æ”¯æŒæ•°å­—ï¼Œè‹±æ–‡å­—ç¬¦ å’Œ '~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')', '_', '+', '=', '-', '`', ';', 'â€™', ',', '.', '\<', '\>', '\'ã€‚å¦‚æœéœ€è¦ä¸ Web SDK äº’é€šï¼Œè¯·ä¸è¦ä½¿ç”¨ '%'ã€‚
- streamID: é•¿åº¦ä¸è¶…è¿‡256å­—èŠ‚ã€‚ä»…æ”¯æŒæ•°å­—ï¼Œè‹±æ–‡å­—ç¬¦ å’Œ '-', '_'ã€‚
</Note>

:::if{props.platform=undefined}
<CodeGroup>
```java å®¢æˆ·ç«¯ç™»å½•æˆ¿é—´å¹¶æ¨æµ {5,6,12-17,25,30}
private void loginRoom(String agentId, String userId, String userName, String token,
    IZegoRoomLoginCallback callback) {
    ZegoEngineConfig config = new ZegoEngineConfig();
    HashMap<String, String> advanceConfig = new HashMap<String, String>();
    advanceConfig.put("set_audio_volume_ducking_mode", "1");
    advanceConfig.put("enable_rnd_volume_adaptive", "true");
    config.advancedConfig = advanceConfig;
    ZegoExpressEngine.setEngineConfig(config);
    ZegoExpressEngine.getEngine().setRoomScenario(ZegoScenario.HIGH_QUALITY_CHATROOM);
    ZegoExpressEngine.getEngine().setAudioDeviceMode(ZegoAudioDeviceMode.GENERAL);

    // å¼€å¯ AI é™å™ªå’Œ AI å›å£°æ¶ˆé™¤
    ZegoExpressEngine.getEngine().enableAEC(true);
    ZegoExpressEngine.getEngine().setAECMode(ZegoAECMode.AI_AGGRESSIVE);
    ZegoExpressEngine.getEngine().enableAGC(true);
    ZegoExpressEngine.getEngine().enableANS(true);
    ZegoExpressEngine.getEngine().setANSMode(ZegoANSMode.AI_BALANCED);

    ZegoRoomConfig roomConfig = new ZegoRoomConfig();
    roomConfig.isUserStatusNotify = true;
    roomConfig.token = token;

    String roomId = generateRoomID(agentId);
    ZegoExpressEngine.getEngine()
        .loginRoom(roomId, new ZegoUser(userId, userName), roomConfig, (errorCode, extendedData) -> {
            Timber.d(
                "loginRoom() called with: errorCode = [" + errorCode + "], extendedData = [" + extendedData + "]");
            if (errorCode == 0) {
                String userSteamID = generateUserStreamID(agentId, userId);
                ZegoExpressEngine.getEngine().startPublishingStream(userSteamID);
                ZegoExpressEngine.getEngine().muteMicrophone(false);
            }
            if (callback != null) {
                callback.onRoomLoginResult(errorCode, extendedData);
            }

        });
}
```

```java å®¢æˆ·ç«¯æ‹‰æ™ºèƒ½ä½“çš„æµ {12-19}
// ç›‘å¬å›è°ƒ
void setEventHandler() {
        engine.setEventHandler(new IZegoEventHandler() {
            @Override
            // æˆ¿é—´å†…å…¶ä»–ç”¨æˆ·æ¨æµ/åœæ­¢æ¨æµæ—¶ï¼Œæˆ‘ä»¬ä¼šåœ¨è¿™é‡Œæ”¶åˆ°ç›¸åº”ç”¨æˆ·çš„éŸ³è§†é¢‘æµå¢å‡çš„é€šçŸ¥
            public void onRoomStreamUpdate(String roomID, ZegoUpdateType updateType, ArrayList<ZegoStream> streamList, JSONObject extendedData) {
                super.onRoomStreamUpdate(roomID, updateType, streamList, extendedData);
                //å½“ updateType ä¸º ZegoUpdateType.ADD æ—¶ï¼Œä»£è¡¨æœ‰éŸ³è§†é¢‘æµæ–°å¢ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥è°ƒç”¨ startPlayingStream æ¥å£æ‹‰å–æ’­æ”¾è¯¥éŸ³è§†é¢‘æµ
                if (updateType == ZegoUpdateType.ADD) {
                    // å¼€å§‹æ‹‰æµï¼Œè®¾ç½®è¿œç«¯æ‹‰æµæ¸²æŸ“è§†å›¾ï¼Œè§†å›¾æ¨¡å¼é‡‡ç”¨ SDK é»˜è®¤çš„æ¨¡å¼ï¼Œç­‰æ¯”ç¼©æ”¾å¡«å……æ•´ä¸ª View
                    ZegoStream stream = streamList.get(0);
                    // åˆ¤æ–­æ˜¯å¦æ˜¯æ™ºèƒ½ä½“æµ
                    if (stream.streamID.equals(agentStreamID)) {
                        // å¦‚ä¸‹ remoteUserView ä¸º UI ç•Œé¢ä¸Šçš„ TextureView.
                        ZegoCanvas playCanvas = new ZegoCanvas(findViewById(R.id.remoteUserView));
                        ZegoExpressEngine.getEngine().startPlayingStream(agentStreamID, playCanvas);
                    }
                }
            }
        });
}
```
</CodeGroup>
:::
:::if{props.platform="iOS"}
<CodeGroup>
```swift å®¢æˆ·ç«¯ç™»å½•æˆ¿é—´å¹¶æ¨æµ {9-11,17,20-24,35}
// è®°å½•æ™ºèƒ½ä½“
self.streamToPlay = [self getAgentStreamID];

ZegoEngineConfig* engineConfig = [[ZegoEngineConfig alloc] init];
engineConfig.advancedConfig = @{
    @"set_audio_dump_mode":@1,//å–æ¶ˆå½•åˆ¶æ–‡ä»¶å¤§å°é™åˆ¶
    @"notify_remote_device_unknown_status": @"true",
    @"notify_remote_device_init_status":@"true",
    @"enforce_audio_loopback_in_sync": @"true", /**è¯¥é…ç½®ç”¨æ¥åšåº”ç­”å»¶è¿Ÿä¼˜åŒ–çš„ï¼Œéœ€è¦é›†æˆå¯¹åº”ç‰ˆæœ¬çš„ZegoExpressEngine sdkï¼Œè¯·è”ç³»å³æ„åŒå­¦**/
    @"set_audio_volume_ducking_mode":@1,/**è¯¥é…ç½®æ˜¯ç”¨æ¥åšéŸ³é‡é—ªé¿çš„**/
    @"enable_rnd_volume_adaptive":@"true",/**è¯¥é…ç½®æ˜¯ç”¨æ¥åšæ’­æ”¾éŸ³é‡è‡ªé€‚ç”¨**/
};
[ZegoExpressEngine setEngineConfig:engineConfig];

//è¿™ä¸ªè®¾ç½®åªå½±å“AECï¼ˆå›å£°æ¶ˆé™¤ï¼‰ï¼Œæˆ‘ä»¬è¿™é‡Œè®¾ç½®ä¸ºModeGeneralï¼Œæ˜¯ä¼šèµ°æˆ‘ä»¬è‡ªç ”çš„å›å£°æ¶ˆé™¤ï¼Œè¿™æ¯”è¾ƒå¯æ§ï¼Œ
//å¦‚æœå…¶ä»–é€‰é¡¹ï¼Œå¯èƒ½ä¼šèµ°ç³»ç»Ÿçš„å›å£°æ¶ˆé™¤ï¼Œè¿™åœ¨iphoneæ‰‹æœºä¸Šæ•ˆæœå¯èƒ½ä¼šæ›´å¥½ï¼Œä½†å¦‚æœåœ¨ä¸€äº›androidæœºä¸Šæ•ˆæœå¯èƒ½ä¸å¥½
[[ZegoExpressEngine sharedEngine] setAudioDeviceMode:ZegoAudioDeviceModeGeneral];

//è¯·æ³¨æ„ï¼šå¼€å¯ AI é™å™ªå’Œ AI å›å£°æ¶ˆé™¤éœ€è¦è”ç³» ZEGO æŠ€æœ¯æ”¯æŒè·å–å¯¹åº”çš„ZegoExpressionEngine.xcframeworkï¼Œå…·å¤‡è¯¥èƒ½åŠ›çš„ç‰ˆæœ¬è¿˜æœªå‘å¸ƒ
[[ZegoExpressEngine sharedEngine] enableAGC:TRUE];
[[ZegoExpressEngine sharedEngine] enableAEC:TRUE];
[[ZegoExpressEngine sharedEngine] setAECMode:ZegoAECModeAIAggressive];
[[ZegoExpressEngine sharedEngine] enableANS:TRUE];
[[ZegoExpressEngine sharedEngine] setANSMode:ZegoANSModeAIBalanced];

// ç™»å½•æˆ¿é—´
[self loginRoom:^(int errorCode, NSDictionary *extendedData) {
    if (errorCode!=0) {
        NSString* errorMsg =[NSString stringWithFormat:@"è¿›å…¥è¯­éŸ³æˆ¿é—´å¤±è´¥:%d", errorCode];
        completion(NO, errorMsg);
        return;
    }
    
    //è¿›æˆ¿åå¼€å§‹æ¨æµ
    [self startPushlishStream];
}];
```

```objectivec å®¢æˆ·ç«¯æ‹‰æ™ºèƒ½ä½“çš„æµ {12}
//ç›‘å¬æˆ¿é—´æµä¿¡æ¯æ›´æ–°çŠ¶æ€ï¼Œæ‹‰å–æ™ºèƒ½ä½“æµæ’­æ”¾
- (void)onRoomStreamUpdate:(ZegoUpdateType)updateType
                streamList:(NSArray<ZegoStream *> *)streamList
              extendedData:(nullable NSDictionary *)extendedData
                    roomID:(NSString *)roomID{    
    if (updateType == ZegoUpdateTypeAdd) {
        for (int i=0; i<streamList.count; i++) {
            ZegoStream* item = [streamList objectAtIndex:i];
            
            if ([item.streamID isEqualToString: self.streamToPlay]) {
                NSLog(@"åŒ¹é…åˆ°ç›®æ ‡æµï¼Œå‡†å¤‡æ’­æ”¾: streamID=%@", self.streamToPlay);
                [self startPlayStream:self.streamToPlay];
                break;
            }
        }
    } else if(updateType == ZegoUpdateTypeDelete) {
        for (int i=0; i<streamList.count; i++) {
            ZegoStream* item = [streamList objectAtIndex:i];
            [[ZegoExpressEngine sharedEngine] stopPlayingStream:item.streamID];
        }
    }
}
```
</CodeGroup>

:::
:::if{props.platform="Web"}
<CodeGroup>
```javascript å®¢æˆ·ç«¯ç™»å½•æˆ¿é—´å¹¶æ¨æµ {22-25}
const userId = "" // ç™»å½• Express SDKæˆ¿é—´ç”¨æˆ·ID
const roomId = "" // RTC æˆ¿é—´ ID
const userStreamId = "" // ç”¨æˆ·æ¨æµ ID
async function enterRoom() {
  try {
    // ç”Ÿæˆ RTC Token [å‚è€ƒæ–‡æ¡£]ï¼ˆhttps://doc-zh.zego.im/article/7646ï¼‰
    const token = await Api.getToken();
    // ç™»å½•æˆ¿é—´
    await zg.loginRoom(roomId, token, {
      userID: userId,
      userName: "",
    });

    // åˆ›å»ºæœ¬åœ°éŸ³é¢‘æµ
    const localStream = await zg.createZegoStream({
      camera: {
        video: false,
        audio: true,
      },
    });
    if (localStream) {
      // æ¨é€æœ¬åœ°æµ
      await zg.startPublishingStream(userStreamId, localStream);
      // å¼€å¯Aié™å™ªï¼ˆéœ€è¦ç‰¹æ®Šç¼–åŒ…çš„ ZEGO Express SDKï¼‰
      const enableResult = await zg.enableAiDenoise(localStream, true);
      if (enableResult.errorCode === 0) {
        return zg.setAiDenoiseMode(localStream, 1);
      }
    }
  } catch (error) {
    console.error("è¿›å…¥æˆ¿é—´å¤±è´¥:", error);
    throw error;
  }
}
enterRoom()
```

```javascript å®¢æˆ·ç«¯æ‹‰æ™ºèƒ½ä½“çš„æµ {9}
// ç›‘å¬è¿œç«¯æµæ›´æ–°äº‹ä»¶
function setupEvent() {
  zg.on("roomStreamUpdate",
    async (roomID, updateType, streamList) => {
      if (updateType === "ADD" && streamList.length > 0) {
        try {
          for (const stream of streamList) {
            // æ‹‰æ™ºèƒ½ä½“æµ
            const mediaStream = await zg.startPlayingStream(stream.streamID);
            if (!mediaStream) return;
            const remoteView = await zg.createRemoteStreamView(mediaStream);
            if (remoteView) {
             // è¿™é‡Œéœ€è¦é¡µé¢ä¸Šæœ‰ä¸ªidä¸ºremoteSteamViewçš„å®¹å™¨æ¥æ”¶æ™ºèƒ½ä½“æµ [å‚è€ƒæ–‡æ¡£]ï¼ˆhttps://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~javascript_web~class~ZegoStreamViewï¼‰
              remoteView.play("remoteSteamView", {
                enableAutoplayDialog: false,
              });
            }
          }
        } catch (error) {
          console.error("æ‹‰æµå¤±è´¥:", error);
        }
      }
    }
  );
}
```
</CodeGroup>
:::

æ­å–œä½ ğŸ‰ï¼å®Œæˆè¿™ä¸€æ­¥éª¤åï¼Œæ‚¨å·²ç»æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªæ™ºèƒ½ä½“å®ä¾‹ï¼Œå¹¶å¯ä»¥ä¸çœŸå®ç”¨æˆ·è¿›è¡Œå®æ—¶äº’åŠ¨äº†ã€‚æ‚¨å¯ä»¥ç”¨è¯­éŸ³é—®æ™ºèƒ½ä½“ä»»ä½•é—®é¢˜ï¼Œæ™ºèƒ½ä½“éƒ½ä¼šç”¨è¯­éŸ³å›ç­”æ‚¨çš„é—®é¢˜ï¼

### é€€å‡ºæˆ¿é—´ç»“æŸé€šè¯

å®¢æˆ·ç«¯è°ƒç”¨é€€å‡ºç™»å½•æ¥å£é€€å‡ºæˆ¿é—´ï¼Œå¹¶åœæ­¢æ¨æ‹‰æµã€‚åŒæ—¶é€šçŸ¥ä¸šåŠ¡åå°æœ¬æ¬¡é€šè¯ç»“æŸã€‚ä¸šåŠ¡åå°æ”¶åˆ°ç»“æŸé€šè¯é€šçŸ¥åä¼šåˆ é™¤æ™ºèƒ½ä½“å®ä¾‹ï¼Œæ™ºèƒ½ä½“å®ä¾‹ä¼šè‡ªåŠ¨é€€å‡ºæˆ¿é—´å¹¶åœæ­¢æ¨æ‹‰æµã€‚è¿™æ ·ä¸€æ¬¡å®Œæ•´çš„äº’åŠ¨å°±ç»“æŸäº†ã€‚

:::if{props.platform=undefined}
```java
// é€€å‡ºæˆ¿é—´
ZegoExpressEngine.getEngine().logoutRoom();
```
:::
:::if{props.platform="iOS"}
```objectivec
// é€€å‡ºæˆ¿é—´
[[ZegoExpressEngine sharedEngine] logoutRoom];
```
:::
:::if{props.platform="Web"}
```javascript
// é€€å‡ºæˆ¿é—´
async function stopCall() {
  try {
    const response = await fetch(`${YOUR_SERVER_URL}/api/stop`, { // YOUR_SERVER_URL ä¸ºæ‚¨çš„ä¸šåŠ¡åå°åœ°å€
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      }
    });

    const data = await response.json();
    console.log('ç»“æŸé€šè¯ç»“æœ:', data);
    return data;
  } catch (error) {
    console.error('ç»“æŸé€šè¯å¤±è´¥:', error);
    throw error;
  }
}
stopCall();
zg.destroyLocalStream(localStream);
zg.logoutRoom();
```
:::


ä»¥ä¸Šå°±æ˜¯æ‚¨å®ç°ä¸æ™ºèƒ½ä½“è¿›è¡Œå®æ—¶è¯­éŸ³äº’åŠ¨çš„å®Œæ•´æ ¸å¿ƒæµç¨‹ã€‚

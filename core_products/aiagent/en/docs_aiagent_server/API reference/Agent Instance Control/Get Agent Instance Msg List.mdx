import Content from '/snippets/Reuse/MessagesStructureforAIAgentEN.mdx'

# Get Agent Instance Context

---

## Description

This API is used to get the message list as context used by the agent instance during a voice conversation.

## Request method and endpoint

- Request method: POST
- Request URL: `https://aigc-aiagent-api.zegotech.cn?Action=GetAgentInstanceMsgList`
- Transmission protocol: HTTPS
- QPS limit: 10 times/second

## Request parameters

Listed below are the parameters specific to this request and part of the common request parameters. For the complete list of common request parameters, see [Accessing Server APIs - Common request parameters](./../Accessing%20Server%20APIs.mdx#common-request-parameters).

| Parameter             | Type    | Required | Description                     |
|------------------|---------|----------|--------------------------|
| AgentInstanceId  | String  | Yes       | The unique identifier of the agent instance.         |

## Request example

- Request URL:

    ```https
    https://aigc-aiagent-api.zegotech.cn?Action=GetAgentInstanceMsgList
    &<Common request parameters>
    ```

- Request body:

    ```json
    {
        "AgentInstanceId": "1907616178474336256"
    }
    ```

## Response parameters

| Parameter | Type | Description |
|------|------|------|
| Code | Number | The return code. 0 indicates success, and other values indicate failure. For code explanations and processing suggestions, see [Return codes](./../Return%20codes.mdx). |
| Message | String | Explanation of the request result. |
| RequestId | String | Request ID. |
| Data | Object | Returned data. |
| â””MessageList | Array of Object | The message list as context. For the structure of this parameter, see [MessageList](#messagelist). Currently, the maximum number of context messages that can be returned is 100, and the messages are sorted in ascending order by time. |

### MessageList

<Content />

## Response example

```json
{
    "Code": 0,
    "Message": "success",
    "RequestId": "2537521374375652066",
    "Data": {
        "Total": 4,
        "MessageList": [
            {
                "Role": "user",
                "Content": "What's your name?"
            },
            {
                "Role": "assistant",
                "Content": "My name is Jack."
            },
            {
                "Role": "user",
                "Content": "Tell me a story."
            },
            {
                "Role": "assistant",
                "Content": "Sure, I'll tell you a story about the three little pigs."
            }
        ]
    }
}
```

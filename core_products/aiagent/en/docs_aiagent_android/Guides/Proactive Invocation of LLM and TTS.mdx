# Trigger LLM and TTS
---

Large Language Models (LLMs) do not output text and voice proactively. Therefore, developers need to trigger the AI agent to speak based on certain rules, thereby making the real-time interactions more engaging. For example, if the user has not spoken for 5 seconds, the AI agent can speak a sentence through Text-to-Speech (TTS).

To make AI Agents speak, you can:
- trigger LLM: You can simulate a user to initiate a message, thereby enabling the AI agent to output text and voice based on context.
- trigger TTS: You can make the AI agent to speak a segment of text content, usually in a fixed pattern, such as "Hello, welcome to use ZEGOCLOUD AI Agent service.


Large Language Models (LLMs) do not speak on their own. Therefore, you must explicitly trigger them in your application. By defining simple rules, you can make interactions feel timely and natural. For example, if the user has been silent for five seconds, you could invoke Text-to-Speech (TTS) so the agent says, “Is there anything else I can help you with?”

To do this, you generally set up either kinds of the following triggers:

- **LLM Trigger**
   Simulate or forward a user message—either by sending the actual user input or a proxy prompt—to prompt the model to generate new text (and, if connected, audio via TTS) based on the current context.

- **TTS Trigger**
   Send a fixed or templated text string directly to your TTS engine whenever you want the agent to speak. Typical cases include:

   * **Greetings:** “Hello! Welcome to the ZEGOCLOUD AI Agent service.”
   * **Confirmations:** “Got it, processing that for you.”
   * **Silence prompts:** “Are you still there?”

## Trigger LLM

Call the [SendAgentInstanceLLM](/en/aiagent-server/agent-instance-control/send-agent-instance-llm) API to trigger the LLM to output text and voice.

When calling `SendAgentInstanceLLM`, the AI Agent server will concatenate a context, which consists of three parts:

- Placed at the front is the `SystemPrompt`, the temporary system prompt for this conversation.
- In the middle are the previous conversation records, the number of which is determined by `WindowSize`.
- At the end is the `Text` set in this interface.

The text information passed to this method and the responses generated by the LLM will be recorded in the conversation message history as context input for the LLM, and these messages will also be delivered through RTC room messages.

The interface parameters are as follows:
| Parameter            | Type   | Required | Description                                                                                                                                                                                                                                          |
| -------------------- | ------ | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AgentInstanceId     | String | Yes      | The unique identifier of the agent instance, obtained through the response parameter of the [Create An Agent Instance](/en/aiagent-server/agent-instance-management/create-agent-instance) interface.                                                                                                               |
| Text                | String | Yes      | The text content sent to the LLM service.                                                                                                                                                                                                                   |
| SystemPrompt        | String | No       | The temporary system prompt for this conversation. If not provided, it will use the `SystemPrompt` in the LLM parameters from [Register An Agent](/en/aiagent-server/agent-configuration-management/register-agent) or [Create An Agent Instance](/en/aiagent-server/agent-instance-management/create-agent-instance). |

Example request:
```json
{
    "AgentInstanceId": "1907755175297171456",
    "Text": "How's the weather today?"
}
```

## Trigger TTS

Call the [SendAgentInstanceTTS](/en/aiagent-server/agent-instance-control/send-agent-instance-tts) API to make the agent speak a segment of text content.

The text message passed to this interface will be recorded in the conversation message history as context input for the LLM, and this message will also be delivered through RTC room messages.

The interface parameters are as follows:

| Parameter            | Type   | Required | Description                                                                                                                            |
| -------------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------- |
| AgentInstanceId     | String | Yes      | The unique identifier of the agent instance, obtained through the response parameter of the [Create An Agent Instance](/en/aiagent-server/agent-instance-management/create-agent-instance) interface. |
| Text                | String | Yes      | The text content for TTS, with a maximum length of no more than 300 characters.                                                                                    |
The request example is as follows:
```json
{
    "AgentInstanceId": "1907780504753553408",
    "Text": "Hello, welcome to use ZEGOCLOUD AI Agent service."
}
```


# Proactively Calling LLM and TTS
---

Large Language Models (LLMs) themselves do not support proactive output. Developers need to actively trigger the intelligent agent to speak based on certain rules, thereby enhancing the sense of immersion in real-time interactions. For example, if the user has not spoken for 5 seconds, the agent can proactively speak a sentence through Text-to-Speech (TTS).

Ways for AI Agents to speak proactively:

- Proactively call the LLM. Essentially, this simulates a user initiating a message, thereby enabling the agent to proactively output text and voice based on context.
- Proactively call TTS. This allows the agent to directly speak a segment of text content in voice form, usually in a fixed pattern, such as "Hello, welcome to use ZEGOCLOUD AI Agent service."

## Proactively Calling LLM

You can call the [SendAgentInstanceLLM](/en/aiagent-server/agent-instance-control/send-agent-instance-llm) interface to proactively let the LLM output text and voice.

When calling `SendAgentInstanceLLM`, the AI Agent server will concatenate a context, which consists of three parts:

- Placed at the front is the `SystemPrompt`, the temporary system prompt for this conversation.
- In the middle are the previous conversation records, the number of which is determined by `WindowSize`.
- At the end is the `Text` set in this interface.

The output content of this proactive LLM call will not be recorded in the historical messages, it will not affect the context of the next LLM call, nor will it be issued via RTC room messages.

The interface parameters are as follows:
| Parameter            | Type   | Required | Description                                                                                                                                                                                                                                          |
| -------------------- | ------ | -------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| AgentInstanceId     | String | Yes      | The unique identifier of the agent instance, obtained through the response parameter of the [Create Agent Instance](/en/aiagent-server/agent-instance-management/create-agent-instance) interface.                                                                                                               |
| Text                | String | Yes      | The text content sent to the LLM service.                                                                                                                                                                                                                   |
| SystemPrompt        | String | No       | The temporary system prompt for this conversation. If not provided, it will use the `SystemPrompt` in the LLM parameters from [Register Agent](/en/aiagent-server/agent-configuration-management/register-agent) or [Create Agent Instance](/en/aiagent-server/agent-instance-management/create-agent-instance). |

Example request:
```json
{
    "AgentInstanceId": "1907755175297171456",
    "Text": "How's the weather today?"
}
```

## Proactively Call TTS

You can proactively call the [SendAgentInstanceTTS](/en/aiagent-server/agent-instance-control/send-agent-instance-tts) interface to make the agent speak a segment of text content via voice.

The output content of this proactive TTS call will not be recorded in the message history, will not affect the context of the next LLM call, and will not be issued through RTC room messages.

The interface parameters are as follows:

| Parameter            | Type   | Required | Description                                                                                                                            |
| -------------------- | ------ | -------- | ------------------------------------------------------------------------------------------------------------------------------- |
| AgentInstanceId     | String | Yes      | The unique identifier of the agent instance, obtained through the response parameter of the [Create Agent Instance](/en/aiagent-server/agent-instance-management/create-agent-instance) interface. |
| Text                | String | Yes      | The text content for TTS, with a maximum length of no more than 300 characters.                                                                                    |
The request example is as follows:
```json
{
    "AgentInstanceId": "1907780504753553408",
    "Text": "Hello, welcome to use ZEGOCLOUD AI Agent service."
}
```


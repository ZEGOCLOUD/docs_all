---
articleID: 3575
---
# Integrate the SDK

---

## Prepare Environment

Before integrating ZEGO Express SDK, please ensure that the development environment meets the following requirements:

* Android Studio 2020.3.1 or above.

- Android SDK 25, Android SDK Build-Tools 25.0.2, Android SDK Platform-Tools 25.x.x or above.
- Android 4.4 or above, and an Android device that supports audio and video.
- The Android device is connected to the Internet.

## Integrate the SDK

### (Optional) Create a New Project

<Accordion title="This step uses creating a new project as an example. If integrating into an existing project, you can ignore this step." defaultOpen="false">
1. Open Android Studio and select the "File > New > New Project" menu.

    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/Integration/android_new_project.png" /></Frame>

2. Fill in the project name and project storage path.

    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/Integration/android_new_project_finish.png" /></Frame>

3. Keep other settings as default, click "Next", and finally click "Finish" to complete the new project creation.
</Accordion>

### Import the SDK

Currently supported platform architectures include: armeabi-v7a, arm64-v8a, x86, x86_64.

Developers can implement SDK integration through any of the following methods.

#### Method 1: Automatic Integration (Recommended)

1. Go to the project root directory, open the "settings.gradle" file, and add the following code in "dependencyResolutionManagement".

<Warning title="Note">


    If you cannot find the above field in "settings.gradle", it may be because your Android Gradle Plugin version is lower than v7.1.0.

    For related information, please refer to [Android Gradle Plugin Release Note v7.1.0](https://developer.android.google.cn/build/releases/past-releases/agp-7-1-0-release-notes#settings-gradle).

</Warning>



    ```groovy
    ...
    dependencyResolutionManagement {
        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
        repositories {
            maven { url 'https://maven.zego.im' }
            google()
            mavenCentral()
        }
    }
    ```
    If your Android Gradle Plugin version is lower than v7.1.0, please follow the steps below:

    Go to the project root directory, open the "build.gradle" file, and add the following code in "allprojects".

    ```groovy
    ...
    allprojects {
        repositories {
            maven { url 'https://maven.zego.im' }
            google()
            mavenCentral()
        }
    }
    ```

2. Go to the "app" directory, open the "build.gradle" file, and add `implementation 'im.zego:express-audio:x.y.z'` in "dependencies". Please check the latest SDK version from [Release Notes](/real-time-voice-android/client-sdk/release-notes) and modify `x.y.z` to the specific version number.

    ```groovy
    ...
    dependencies {
        ...
        implementation 'im.zego:express-audio:x.y.z'
    }
    ```


#### Method 2: Manual Integration by Copying SDK AAR File

<Accordion title="Manual Integration by Copying SDK AAR File" defaultOpen="false">
1. Please refer to the [Download](/real-time-video-android-java/client-sdk/download-sdk) documentation to download the latest version of the SDK and extract it.

2. Copy the "release/Library/ZegoExpressEngine.aar" file from the extracted AAR file to your project directory, such as "app/libs".

<Note title="Note">


    The files in the "release/Library/" directory of the SDK package include:

    - ".aar" file: For use when using this integration method, other files can be ignored.
    - Other files: For use when using [Method 3: Manual Integration by Copying SDK JAR and SO Files](#method-3-manual-integration-by-copying-sdk-jar-and-so-files).

</Note>



    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/Integration/add_aar.png" /></Frame>

3. Go to the project root directory, open the "settings.gradle" file, and add the following code in "dependencyResolutionManagement".

    ```groovy
    ...
    dependencyResolutionManagement {
        repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
        repositories {
            google()
            mavenCentral()
            flatDir {
                dir 'app/libs'
            }
        }
    }
    ```

    If you cannot find the above field in "settings.gradle", it may be because your Android Gradle Plugin version is lower than v7.1.0. For related information, please refer to [Android Gradle Plugin Release Note v7.1.0](https://developer.android.google.cn/build/releases/past-releases/agp-7-1-0-release-notes#settings-gradle). In this case, please follow the steps below:

    Go to the project root directory, open the "build.gradle" file, and add the following code in "allprojects".

    ```groovy
    ...
    allprojects {
        repositories {
            google()
            mavenCentral()
            flatDir {
                dir 'app/libs'
            }
        }
    }
    ```

4. Go to the "app" directory, open the "build.gradle" file, and add `implementation(name: 'ZegoExpressEngine', ext: 'aar')` in "dependencies".

    ```groovy
    ...
    dependencies {
        ...
        implementation(name: 'ZegoExpressEngine', ext: 'aar')
    }
    ```

    And add an "ndk" node in the "defaultConfig" node to specify the supported architectures.

    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/Integration/add_ndk_node.png" /></Frame>

    ```groovy
    ndk {
        abiFilters 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64'
    }
    ```

<Note title="Note">


    Decide which architectures to support based on actual conditions. Usually when publishing the App, you only need to keep "armeabi-v7a" and "arm64-v8a", which can reduce the APK size.

</Note>
</Accordion>

<a id="Integration_3"></a>

#### Method 3: Manual Integration by Copying SDK JAR and SO Files

<Accordion title="Manual Integration by Copying SDK JAR and SO Files" defaultOpen="false">
1. Please refer to the [Download](/real-time-video-android-java/client-sdk/download-sdk) documentation to download the latest version of the SDK and extract it.

2. Copy the "other files (except .aar files)" from the "release/Library/" directory after extraction to your project directory, such as "app/libs".

<Note title="Note">


    - The "include" directory in the architecture directory is the C++ header file of the SDK. If you only use the Java interface for development, you can ignore it.
    - "ZegoExpressEngine-sources.jar" is the source code package. You can import it in Android Studio for a better development experience. For details, please refer to [How to View API Comments and Documentation for Express Android SDK?](https://www.zegocloud.com/docs/faq/express_android_java_api_doc?product=All&platform=android)

</Note>



    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/Integration/add_jar.png" /></Frame>

3. Add SDK references. Open the "build.gradle" file in the "app" directory.

    1. Add an "ndk" node in the "defaultConfig" node to specify the supported architectures.

        <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/Integration/add_ndk_node.png" /></Frame>

        ```groovy
        ndk {
            abiFilters 'armeabi-v7a', 'arm64-v8a', 'x86', 'x86_64'
        }
        ```

<Note title="Note">

        Decide which architectures to support based on actual conditions. Usually when publishing the App, you only need to keep "armeabi-v7a" and "arm64-v8a", which can reduce the APK size.

</Note>



    2. Add a "sourceSets" node in the "android" node to specify the directory where "libs" is located.

<Note title="Note">

        The "libs" directory in the example code is only for illustration. Developers can fill in according to the actual path.

</Note>



        <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/Integration/add_sourceSets_node.png" /></Frame>

        ```groovy
        sourceSets {
            main {
                jniLibs.srcDirs = ['libs']
            }
        }
        ```

    3. Import all jars under "libs" in the "dependencies" node.

        ```groovy
        dependencies {
            implementation fileTree(dir: 'libs', include: ['*.jar'])
            ......
        }
        ```
</Accordion>


## Set Permissions

Set the permissions required by the application according to actual application needs.

Go to the "app/src/main" directory, open the "AndroidManifest.xml" file, and add permissions.

```xml
<!-- Permissions required by the SDK -->
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />

<!-- Some permissions required by the App -->
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<feature
    android:glEsVersion="0x00020000"
    android:required="true" />

```

<Warning title="Note">


- Because Android 6.0 requires dynamic permission requests for some important permissions, you cannot only apply for static permissions through the "AndroidMainfest.xml" file. Therefore, you also need to refer to the following code, where "requestPermissions" is a method of "Activity".
- Regarding BLUETOOTH permission: Only Android versions below 6.0 need to declare it. Android 6.0 and above do not need to declare it.

</Warning>



```java
String[] permissionNeeded = {
    "android.permission.RECORD_AUDIO"};

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
    if (ContextCompat.checkSelfPermission(this, "android.permission.RECORD_AUDIO") != PackageManager.PERMISSION_GRANTED) {
        //101 is requestCode, which can be any number greater than 0 and will be passed to the permission request result callback onRequestPermissionsResult
        requestPermissions(permissionNeeded, 101);
    }
}
```

The specific permission descriptions are as follows:

<table>

<tbody><tr>
<th>Necessity</th>
<th>Permission</th>
<th>Permission Description</th>
<th>Reason for Request</th>
</tr>
<tr>
<td rowspan="6">Required Permissions</td>
<td>INTERNET</td>
<td>Network access permission.</td>
<td>Basic SDK functions require network connection to be used.</td>
</tr>
<tr>
<td>ACCESS_WIFI_STATE</td>
<td>Get current WiFi status permission.</td>
<td rowspan="2">The SDK performs different operations based on network status changes. For example, when the network reconnects, the SDK internally restores all states before the network disconnection, and users do not need to perform additional operations.</td>
</tr>
<tr>
<td>ACCESS_NETWORK_STATE</td>
<td>Get current network status permission.</td>
</tr>
<tr>
<td>RECORD_AUDIO</td>
<td>Record audio permission.</td>
<td>This permission is required when sending audio.</td>
</tr>
<tr>
<td>BLUETOOTH</td>
<td>Connect to Bluetooth device permission.</td>
<td>
This permission is required when connecting to Bluetooth devices.

<Warning title="Note">
Regarding BLUETOOTH permission: Only Android versions below 6.0 need to declare it. Android 6.0 and above do not need to declare it.
</Warning>


</td>
</tr>
<tr>
<td>MODIFY_AUDIO_SETTINGS</td>
<td>Modify audio configuration permission.</td>
<td>This permission is required when modifying audio device configuration.</td>
</tr>
<tr>
<td rowspan="2">Optional Permissions</td>
<td>READ_PHONE_STATE</td>
<td>Allow read-only access to phone status, including current call status.</td>
<td>The SDK starts and stops audio devices based on the current call status. For example, if a current call status is detected, the SDK will automatically stop using audio devices until the call ends.</td>
</tr>
<tr>
<td>WRITE_EXTERNAL_STORAGE</td>
<td>Built-in SDK write permission.</td>
<td>If you need to use the media player or sound effects player to load media resource files from Android external storage, you need to apply for this permission, otherwise the SDK cannot load resources.</td>
</tr>
</tbody></table>

<Note title="Note">
The optional permission "android.permission.READ_PHONE_STATE" is only used to implement the SDK's interruption event handling, so it only needs to be declared in the AndroidMainfest.xml file and does not need to be dynamically requested (unless there is a business requirement).

</Note>



## Prevent Code Obfuscation

In the "proguard-rules.pro" file, add `-keep` class configuration for the SDK to prevent obfuscation of SDK public class names.

```txt
-keep class **.zego.**{*;}
```

## Related Documents

[How to Reduce the App Size of Integrated Native SDKs?](https://www.zegocloud.com/docs/faq/express_reduce_app_size)

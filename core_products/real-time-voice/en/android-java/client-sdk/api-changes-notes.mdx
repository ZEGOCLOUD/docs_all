# API Change Notes

---

## 1 Destroy engine API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-03-14 | 1.5.0 | 2020-12-31 | 2.0.0  | Yes  |

### 1.1 Change overview

Deprecated API:

```java
@Deprecated
public static void destroyEngine();
```

Replaced with new API:

```java
public static void destroyEngine(IZegoDestroyCompletionCallback callback);
```

The SDK has added a destroy SDK API with a "callback" parameter to notify developers that ZEGO SDK has completed the asynchronous release of resource usage. If there is no need to listen, pass null. Therefore, the old API is deprecated.

### 1.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 2.0.0 and later. Please replace it with the new API in time.

```java
/**
 * Asynchronously destroy engine singleton object
 *
 * Used to release resources used by the SDK.
 *
 * @deprecated This method was deprecated in version 1.5.0, please use the同名 [destroyEngine:] instead
 */
@Deprecated
public static void destroyEngine();
```

#### New API

```java
/**
 * Asynchronously destroy engine singleton object
 *
 * Used to release resources used by the SDK.
 *
 * @param callback Notification callback for engine destruction completion. You can listen to this callback to ensure that device hardware resources are released. This callback is only a notification that the internal resources of the engine have been released. Developers cannot release engine-related resources in this callback. If developers only use the SDK to implement audio and video functions, this parameter can be passed as [nil].
 */
public static void destroyEngine(IZegoDestroyCompletionCallback callback);
```

#### New API usage example

```java
engine.destroyEngine(null);
```

## 2 Set speaker mute API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-03-31 | 1.5.5 | 2020-12-31 | 2.0.0  | Yes  |

### 2.1 Change overview

Deprecated API:

```java
@Deprecated
public abstract void muteAudioOutput(boolean mute);
```

Replaced with new API:

```java
public abstract void muteSpeaker(boolean mute);
```

The naming style and semantics are unclear, so the old API is deprecated.

### 2.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 2.0.0 and later. Please replace it with the new API in time.

```java
/**
 * Enable/Disable audio output to device
 *
 * After disabling, the SDK will no longer pass audio data to the output device to achieve mute effect
 *
 * @deprecated This method has been deprecated, please use [muteSpeaker] instead
 * @param Whether to disable audio output to device; YES indicates disable audio output; NO indicates enable audio output
 */
@Deprecated
public abstract void muteAudioOutput(boolean mute);
```

#### New API

```objc
/**
 * Whether to mute (disable) audio output
 *
 * After setting mute, all sounds of the SDK will not be played, including playing streams, media players, etc. But the SDK will still occupy the output device.
 *
 * @param Whether to mute (disable) audio output; YES indicates mute (disable) audio output; NO indicates enable audio output. Default is NO
 */
public abstract void muteSpeaker(boolean mute);
```
#### New API usage example

```objc
engine.muteSpeaker(true);
```

## 3 Create media player API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-04-30 | 1.7.0 | 2020-12-31 | 2.0.0  | Yes  |

### 3.1 Change overview

Deprecated API:

```java
public abstract class ZegoMediaPlayer {
    @Deprecated
    public static ZegoMediaPlayer createMediaPlayer();
}
```

Replaced with new API:

```java
public abstract class ZegoExpressEngine {
    public ZegoMediaPlayer createMediaPlayer();
}
```

A method to create a media player under the ZegoExpressEngine instance has been added, constraining its lifecycle. Therefore, the old API is deprecated.

### 3.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 2.0.0 and later. Please replace it with the new API in time.

```java

public abstract class ZegoMediaPlayer {
    /**
     * Create media player instance object
     *
     * Currently supports creating up to 4 instances, null will be returned after exceeding
     *
     * @deprecated This method has been deprecated, please use the [createMediaPlayer] function of ZegoExpressEngine
     * @return Media player instance, null will be returned after exceeding the maximum quantity limit
     */
    @Deprecated
    public static ZegoMediaPlayer createMediaPlayer();
}

```

#### New API

```java

public abstract class ZegoExpressEngine {
    /**
     * Create media player instance object
     *
     * Currently supports creating up to 4 instances, null will be returned after exceeding. The more media player instances, the greater the performance overhead on the device.
     *
     * @return Media player instance, null will be returned after exceeding the maximum quantity limit
     */
    public ZegoMediaPlayer createMediaPlayer();
}

```

#### New API usage example

```java
ZegoMediaPlayer mediaplayer = engine.createMediaPlayer();
```

#### Notes

1. The old and new APIs cannot be called repeatedly.
2. It is recommended to use the new API to make the lifecycle management of instances clearer.

## 4 Custom video capture/rendering setting API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-06-15 | 1.9.0 | 2020-12-31 | 2.0.0  | Yes  |

### 4.1 Change overview

Deprecated API:

```java

public class ZegoEngineConfig {

    @Deprecated
    public ZegoCustomVideoCaptureConfig customVideoCaptureMainConfig;

    @Deprecated
    public ZegoCustomVideoCaptureConfig customVideoCaptureAuxConfig;

    @Deprecated
    public ZegoCustomVideoRenderConfig customVideoRenderConfig;

}

```

Replaced with new API:

```java

public abstract class ZegoExpressEngine {

    public abstract void enableCustomVideoCapture(boolean enable, ZegoCustomVideoCaptureConfig config, ZegoPublishChannel channel);

    public abstract void enableCustomVideoRender(boolean enable, ZegoCustomVideoRenderConfig config);

}

```

The SDK has added APIs to dynamically set custom video capture/rendering after initialization, so the old API is deprecated.

### 4.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 2.0.0 and later. Please replace it with the new API in time.

```java

public class ZegoEngineConfig {

    /** @deprecated This configuration has been deprecated after version 1.9.0, please use the [enableCustomVideoCapture] function of ZegoExpressEngine instead */
    @Deprecated
    public ZegoCustomVideoCaptureConfig customVideoCaptureMainConfig;

    /** @deprecated This configuration has been deprecated after version 1.9.0, please use the [enableCustomVideoCapture] function of ZegoExpressEngine instead */
    @Deprecated
    public ZegoCustomVideoCaptureConfig customVideoCaptureAuxConfig;

    /** @deprecated This configuration has been deprecated after version 1.9.0, please use the [enableCustomVideoRender] function of ZegoExpressEngine instead */
    @Deprecated
    public ZegoCustomVideoRenderConfig customVideoRenderConfig;

}

```

#### New API


```java

public abstract class ZegoExpressEngine {

    /**
     * Set custom video rendering callback
     *
     * Custom video rendering, where developers are responsible for rendering video data to UI components. This function is generally used by developers using third-party beauty effects or third-party rendering frameworks.
     * When developers use the advanced function of SDK custom video rendering, they need to call this function to set the callback object that throws video data to developers.
     * When developers call start preview [startPreview], start publishing stream [startPublishingStream], start playing stream [startPlayingStream], the callback function that throws video data to developers will be triggered.
     * Developers can render video screens based on the callback of SDK throwing video data.
     * Custom video rendering function can be used simultaneously with custom video capture function.
     *
     * @param handler Custom video rendering callback object
     */
    public abstract void setCustomVideoRenderHandler(IZegoCustomVideoRenderHandler handler);

    /**
     * Start or stop custom video capture
     *
     * Must be set before the engine starts, that is, before calling [startPreview], [startPublishingStream]; and can only be modified after the engine stops, that is, after calling [logoutRoom]
     * When developers enable custom capture, by calling [setCustomVideoCaptureHandler], they can set to receive custom capture start/stop event notifications
     *
     * @param enable Whether to enable
     * @param config Custom capture configuration
     */
    public abstract void enableCustomVideoCapture(boolean enable, ZegoCustomVideoCaptureConfig config);

    /**
     * Start or stop custom video capture, supporting setting other channel publishing
     *
     * Must be set before the engine starts, that is, before calling [startPreview], [startPublishingStream]; and can only be modified after the engine stops, that is, after calling [logoutRoom]
     * When developers enable custom capture, by calling [setCustomVideoCaptureHandler], they can set to receive custom capture start/stop event notifications
     *
     * @param enable Whether to enable
     * @param config Custom capture configuration
     * @param channel Publishing channel
     */
    public abstract void enableCustomVideoCapture(boolean enable, ZegoCustomVideoCaptureConfig config, ZegoPublishChannel channel);

}
```

#### New API usage example

```java

ZegoCustomVideoCaptureConfig vcapConfig = new ZegoCustomVideoCaptureConfig();
engine.enableCustomVideoCapture(true, vcapConfig);

ZegoCustomVideoRenderConfig vrndConfig = new ZegoCustomVideoRenderConfig();
engine.enableCustomVideoRender(true, vrndConfig),

```

#### Notes

1. The old and new APIs cannot be called repeatedly.
2. It is recommended to use the new API, which is more flexible in code logic.

## 5 Get playback side audio data callback change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-09-10 | 1.15.0 | 2020-12-31 | 2.0.0  | Yes  |

### 5.1 Change overview

Deprecated API:

```java
public abstract class IZegoAudioDataHandler {

    @Deprecated
    public void onRemoteAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param){

    }

}
```

Replaced with new API:

```java

public abstract class IZegoAudioDataHandler {

    public void onPlaybackAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param){

    }

}

```

The old API naming does not match its actual function. A new API with clear meaning has been added, so the old API is deprecated.

### 5.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 2.0.0 and later. Please replace it with the new API in time.

```java

public abstract class IZegoAudioDataHandler {

    /**
     * Callback for getting audio data of all played streams.
     *
     * This function will callback the data after mixing all remote user audio. If developers need to process the audio of all played streams, they can use this callback.
     * This callback is triggered only after calling [setAudioDataHandler] to set up listening for this callback, calling [enableAudioDataCallback] to set mask 0b10, which is 1 << 1, and being in the playing stream state.
     *
     * @deprecated This function has been deprecated, please use [onPlaybackAudioData] instead
     * @param data Audio data, PCM format
     * @param dataLength Length of data
     * @param param Audio frame parameters
     */
    @Deprecated
    public void onRemoteAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param){

    }

}
```

#### New API

```java

public abstract class IZegoAudioDataHandler {

    /**
     * Callback for getting audio data played by SDK
     *
     * This function will callback the data after mixing all audio to be played. If developers need to process the data after mixing all audio to be played, they can use this callback.
     * This callback is triggered only after calling [setAudioDataHandler] to set up listening for this callback, calling [enableAudioDataCallback] to set mask 0b10, which is 1 << 1, and when the SDK audio/video engine is started (preview/publish/playing).
     * When the engine is started but not in the playing stream state or when the media player is not playing media files, the callback audio data is mute audio data.
     *
     * @param data Audio data, PCM format
     * @param dataLength Length of data
     * @param param Audio frame parameters
     */
    public void onPlaybackAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param){

    }

}

```

#### New API usage example

```java

public class MyIZegoAudioDataHandler extends IZegoAudioDataHandler{

    /**
     * Callback for getting audio data played by SDK
     *
     * This function will callback the data after mixing all audio to be played. If developers need to process the data after mixing all audio to be played, they can use this callback.
     * This callback is triggered only after calling [setAudioDataHandler] to set up listening for this callback, calling [enableAudioDataCallback] to set mask 0b10, which is 1 << 1, and when the SDK audio/video engine is started (preview/publish/playing).
     * When the engine is started but not in the playing stream state or when the media player is not playing media files, the callback audio data is mute audio data.
     *
     * @param data Audio data, PCM format
     * @param dataLength Length of data
     * @param param Audio frame parameters
     */
    public void onPlaybackAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param){
        // Get playback side audio data for business logic
        ...
    }

}

```

#### Notes

There is no need to listen to both old and new callbacks.


## 6 Media player get volume API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-04-30 | 1.15.0 | 2020-12-31 | 2.0.0  | Yes  |

### 6.1 Change overview

Deprecated API:

```java

public abstract class ZegoMediaPlayer {

    @Deprecated
    public abstract int getVolume();

}

```

Replaced with new API:

```java

public abstract class ZegoMediaPlayer {

    public abstract int getPublishVolume();
    public abstract int getPlayVolume();

}

```

The SDK provides more accurate volume acquisition, including media player local playback volume and volume mixed into the published stream, so the old API is deprecated.

### 6.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 2.0.0 and later. Please replace it with the new API in time.

```java

public abstract class ZegoMediaPlayer {

    /**
     * Get media player volume
     *
     * @deprecated This function has been deprecated, please use [getPlayVolume] and [getPublishVolume] to get the corresponding local playback volume and publishing volume
     */
    @Deprecated
    public abstract int getVolume();

}

```

#### New API

```java

public abstract class ZegoMediaPlayer {

    /**
     * Get the current local playback volume of the media player, ranging from 0 ~ 200, default value is 60
     */
    public abstract int getPlayVolume();

    /**
     * Get the current publishing volume of the media player, ranging from 0 ~ 200, default value is 60
     */
    public abstract int getPublishVolume();

}

```

#### New API usage example

```java
ZegoMediaPlayer mediaplayer = engine.createMediaPlayer();
int publishVolume = mediaplayer.getPublishVolume();
int playVolume = mediaplayer.getPlayVolume();
```

#### Notes

The old and new APIs cannot be called repeatedly. The old API cannot accurately get the volume of the media player mixed into the published stream.


## 7 Set reverb parameters API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-11-19 | 1.18.0 | TBD | TBD  | No |

### 7.1 Change overview

Deprecated API:

```java
@Deprecated
public abstract void setReverbParam(ZegoReverbParam param);
```

Replaced with new API:

```java
public abstract void setReverbAdvancedParam(ZegoReverbAdvancedParam param);
```

The SDK provides a setting for richer reverb effect parameters, so the old API is deprecated.

### 7.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 3.0.0 and later. Please replace it with the new API in time.

```java
/**
 * Set specific parameters of reverb
 *
 * Setting different values dynamically during the publishing process will take effect. When all parameters are set to 0, reverb is turned off.
 * This function is an advanced version of [setReverbPreset], which can configure reverb effects by yourself.
 * If you need to configure reverb/echo/voice change effects by yourself, please use [setReverbParam], [setReverbEchoParam], [setVoiceChangerParam] in combination.
 *
 * @deprecated This API has been deprecated after version 1.18.0, please use [setReverbAdvancedParam] instead
 * @param param Reverb parameters
 */
@Deprecated
public abstract void setReverbParam(ZegoReverbParam param);
```

#### New API

```java
/**
 * Set specific parameters of reverb
 *
 * Setting different values dynamically during the publishing process will take effect. When all parameters are set to default values, reverb is turned off.
 * This function is an advanced version of [setReverbPreset], which can configure reverb effects by yourself.
 * If you need to configure reverb/echo/voice change effects by yourself, please use [setReverbParam], [setReverbEchoParam], [setVoiceChangerParam] in combination.
 *
 * @param param Advanced reverb parameters
 */
public abstract void setReverbAdvancedParam(ZegoReverbAdvancedParam param);
```

#### New API usage example

```java
ZegoReverbAdvancedParam param = new ZegoReverbAdvancedParam();
engine.setReverbAdvancedParam(param);
```

#### Notes

The old and new APIs cannot be used at the same time, otherwise sound effects may be abnormal.

## 8 Stream update message notification callback change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-11-19 | 1.18.0 | 2020-12-31 | 2.0.0  | No |

### 8.1 Change overview

Deprecated API:

```java

public abstract class IZegoEventHandler {

    @Deprecated
    public void onRoomStreamUpdate(String roomID, ZegoUpdateType updateType, ArrayList<ZegoStream> streamList){

    }

}

```

Replaced with new API:

```java
public abstract class IZegoEventHandler {

    public void onRoomStreamUpdate(String roomID, ZegoUpdateType updateType, ArrayList<ZegoStream> streamList, JSONObject extendedData){

    }

}
```

The SDK has added extensible fields when the stream is updated, used to identify messages accompanying the stream update, such as the reason for stream deletion. Therefore, the old API is deprecated.

### 8.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 2.0.0 and later. Please replace it with the new API in time.

```java

public abstract class IZegoEventHandler {

    /**
     * Notification of increase or decrease of streams published by other users in the same room
     *
     * When users log in to the room for the first time, if other users in the room are publishing streams, they will receive the stream list of the addition type.
     * When users are already in the room, when other users in the room add or delete streams, this callback will be triggered to notify the changed stream list.
     * Developers can use this callback to determine whether other users in the same room have added publishing streams or other users have stopped publishing streams, so as to implement active playing [startPlayingStream] or active stop playing [stopPlayingStream], and use simultaneous playing UI control changes.
     *
     * @deprecated This callback function has been deprecated, please use the callback function with the same name with [extendedData] parameter.
     * @param roomID Room ID that the user has logged in, maximum length is 128 bytes string.
     * @param updateType Update type (add/delete)
     * @param streamList Updated stream list
     */
    @Deprecated
    public void onRoomStreamUpdate(String roomID, ZegoUpdateType updateType, ArrayList<ZegoStream> streamList){

    }

}
```

#### New API

```java

public abstract class IZegoEventHandler {

    /**
     * Notification of increase or decrease of streams published by other users in the same room
     *
     * When users log in to the room for the first time, if other users in the room are publishing streams, they will receive the stream list of the addition type.
     * When users are already in the room, when other users in the room add or delete streams, this callback will be triggered to notify the changed stream list.
     * Developers can use this callback to determine whether other users in the same room have added publishing streams or other users have stopped publishing streams, so as to implement active playing [startPlayingStream] or active stop playing [stopPlayingStream], and use simultaneous playing UI control changes.
     *
     * @param roomID Room ID that the user has logged in, maximum length is 128 bytes string.
     * @param updateType Update type (add/delete)
     * @param streamList Updated stream list
     * @param extendedData Extended information accompanying the stream update
     */
    public void onRoomStreamUpdate(String roomID, ZegoUpdateType updateType, ArrayList<ZegoStream> streamList, JSONObject extendedData){

    }

}

```

#### New API usage example

```java

public class MyIZegoEventHandler {

    public void onRoomStreamUpdate(String roomID, ZegoUpdateType updateType, ArrayList<ZegoStream> streamList, JSONObject extendedData){
        // Received stream update callback, execute business logic, such as playing stream
    }

}

```

#### Notes

There is no need to listen to both old and new callbacks.

## 9 Playing stream setting select layer API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2020-12-03 | 1.19.0 | 2020-12-31 | 2.0.0  | No |

### 9.1 Change overview

Deprecated API:

```java
@interface ZegoPlayerConfig : NSObject

/// @deprecated This property has been deprecated, please use the [setPlayStreamVideoLayer] method instead
/// Set video layer for playing stream
@property (nonatomic, assign) ZegoPlayerVideoLayer videoLayer DEPRECATED_ATTRIBUTE;

@end

public class ZegoPlayerConfig {

    @Deprecated
    public ZegoPlayerVideoLayer videoLayer;

}

```

Replaced with new API:

```java
public abstract class ZegoExpressEngine {

    public abstract void setPlayStreamVideoLayer(String streamID, ZegoPlayerVideoLayer videoLayer);

}
```

The SDK has added an API that can dynamically set layers before or after playing stream, so the old API is deprecated.

### 9.2 API details

#### Deprecated API

This API will be completely prohibited and deleted in version 2.0.0 and later. Please replace it with the new API in time.

```java
public class ZegoPlayerConfig {

    /** @deprecated This property has been deprecated, please use the [setPlayStreamVideoLayer] method instead */
    @Deprecated
    public ZegoPlayerVideoLayer videoLayer;

}
```

#### New API

```java

public abstract class ZegoExpressEngine {

    /**
     * Set select playing stream video layer
     *
     * When the publisher sets codecID to SVC through [setVideoConfig], the player can dynamically set whether to use the standard layer or the base layer (the resolution of the base layer is half that of the standard layer).
     * Generally, when the network is weak or the rendered UI window is small, you can choose to use the base layer video to save bandwidth.
     * Can be set before or after playing stream.
     *
     * @param streamID Stream ID
     * @param videoLayer Playing stream layer, default is AUTO
     */
    public abstract void setPlayStreamVideoLayer(String streamID, ZegoPlayerVideoLayer videoLayer);

}

```

#### New API usage example

```java
engine.setPlayStreamVideoLayer("STREAM_ID", ZegoPlayerVideoLayer.AUTO);
```

#### Notes

The old and new APIs cannot be used repeatedly.


## 10 Set select playing stream video layer API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2021-03-04 | 2.3.0 | TBD | TBD  | No |

### 10.1 Change overview

Deprecated API:

```java
@Deprecated
public abstract void setPlayStreamVideoLayer(String streamID, ZegoPlayerVideoLayer videoLayer);
```

Replaced with new API:

```java
public abstract void setPlayStreamVideoType(String streamID, ZegoVideoStreamType streamType);
```

In order to reflect that the API itself can clearly describe the concept of switching between large and small streams during playing, and avoid misunderstanding developers, the old API is deprecated and replaced with the new API.

### 10.2 API details

#### Deprecated API

This API is expected to be completely prohibited and deleted in version 3.0.0 and later. Please replace it with the new API in time.

```java
/**
 * Set select playing stream video layer
 *
 * When the publisher sets codecID to SVC through [setVideoConfig], the player can dynamically set whether to use the standard layer or the base layer (the resolution of the base layer is half that of the standard layer).
 * Generally, when the network is weak or the rendered UI window is small, you can choose to use the base layer video to save bandwidth.
 * Can be set before or after playing stream.
 *
 * @deprecated This function has been deprecated after version 2.3.0, please use [setPlayStreamVideoType] instead.
 * @param streamID Stream ID
 * @param videoLayer Playing stream layer, default is AUTO
 */
 @Deprecated
public abstract void setPlayStreamVideoLayer(String streamID, ZegoPlayerVideoLayer videoLayer);
```

#### New API

```java
/**
 * Set playing video stream type
 *
 * When the publisher sets codecID to SVC through [setVideoConfig], the player can dynamically set to use different stream types (the resolution of the small stream is half that of the standard layer).
 * Generally, when the network is weak or the rendered UI window is small, you can choose to use the small resolution video to save bandwidth.
 * Can be set before or after playing stream.
 *
 * @param streamID Stream ID
 * @param streamType Video stream type
 */
public abstract void setPlayStreamVideoType(String streamID, ZegoVideoStreamType streamType);
```

#### New API usage example

```java
mEngine.setPlayStreamVideoType("MY_STREAM_ID", ZegoVideoStreamType.SMALL);
```

#### Notes

The old and new APIs cannot be used repeatedly.

## 11 Whether to use built-in speaker to play sound API change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2021-03-04 | 2.3.0 | TBD | TBD  | No |

### 11.1 Change overview

Deprecated API:

```java
@Deprecated
public abstract void setBuiltInSpeakerOn(boolean enable);
```

Replaced with new API:

```java
public abstract void setAudioRouteToSpeaker(boolean defaultToSpeaker);
```

In order to reflect that the API itself can clearly describe the concept of audio routing, and avoid misunderstanding developers, the old API is deprecated and replaced with the new API.

### 11.2 API details

#### Deprecated API

This API is expected to be completely prohibited and deleted in version 3.0.0 and later. Please replace it with the new API in time.

```java
/**
 * @deprecated This function has been deprecated after version 2.3.0, please use [setAudioRouteToSpeaker] instead.
 *
 * Whether to use built-in speaker to play sound.
 *
 * When choosing not to use built-in speaker to play sound, that is, when set to false, the SDK will select the audio output device with the current highest priority according to system scheduling to play sound
 *
 * @param enable Whether to use built-in speaker to play sound, true indicates use built-in speaker to play sound, false indicates use the audio output device with the current highest priority in system scheduling to play sound
 */
@Deprecated
public abstract void setBuiltInSpeakerOn(boolean enable);
```

#### New API

```java
/**
 * Set audio route to speaker
 *
 * When choosing not to use built-in speaker to play sound, that is, when set to [false], the SDK will select the audio output device with the current highest priority according to system scheduling to play sound
 *
 * @param defaultToSpeaker Whether to use built-in speaker to play sound, true indicates use built-in speaker to play sound, false indicates use the audio output device with the current highest priority in system scheduling to play sound
 */
public abstract void setAudioRouteToSpeaker(boolean defaultToSpeaker);
```

#### New API usage example

```java
mEngine.setAudioRouteToSpeaker(true);
```

#### Notes

The old and new APIs cannot be used repeatedly.

## 12 Set log property field change

| Deprecation time | Deprecated version | Expected removal time | Official removal SDK version | Removed |
|-------|--------|--------|--------|--------|
| 2021-03-04 | 2.3.0 | TBD | TBD  | No |

### 12.1 Change overview

Deprecated API:

```java
public class ZegoEngineConfig {

@Deprecated
public ZegoLogConfig logConfig;

}
```


Replaced with new API:

```java
public static void setLogConfig(ZegoLogConfig config);
```

In order to reflect the timing requirements and functional independence of setting Log properties in the SDK, and avoid developer misuse, the old API is deprecated and replaced with the new API.

### 12.2 API details

#### Deprecated API

This API is expected to be completely prohibited and deleted in version 3.0.0 and later. Please replace it with the new API in time.

```java
public class ZegoEngineConfig {

/** @deprecated This function has been deprecated after version 2.3.0, please use [setLogConfig] instead. */
@Deprecated
public ZegoLogConfig logConfig;

}
```

#### New API

```java
/**
 * Set log properties
 *
 * When developers need to customize log file size and path, they need to call this function to complete the configuration. Must be set before calling [createEngine] to take effect. If set after [createEngine], it will take effect at the next [createEngine] after [destroyEngine]. Once this API is called, before destroyEngine, that is, during the entire lifecycle of the engine, the old way of setting log size and path through [setEngineConfig] will be invalid. It is recommended that once this method is used, always use only this method to complete the requirements of setting log path and size.
 *
 * @param config Log configuration
 */
public static void setLogConfig(ZegoLogConfig config);
```

#### New API usage example

```java
// Call before createEngine, if not called, SDK will default configure log path and log size
ZegoLogConfig config = new ZegoLogConfig();
config.logPath = "/sdcard/Android/data/[packageName]/files/"
ZegoExpressEngine.setLogConfig(config);
```

#### Notes

The old and new APIs cannot be used repeatedly.

---
docType: API
---

# Protocol

| | |
| --- | --- |
| [ZegoApiCalledEventHandler](#zegoapicalledeventhandler) | [ZegoAudioDataHandler](#zegoaudiodatahandler) |
| [ZegoAudioEffectPlayerEventHandler](#zegoaudioeffectplayereventhandler) | [ZegoAudioMixingHandler](#zegoaudiomixinghandler) |
| [ZegoCustomAudioProcessHandler](#zegocustomaudioprocesshandler) | [ZegoCustomVideoCaptureHandler](#zegocustomvideocapturehandler) |
| [ZegoCustomVideoProcessHandler](#zegocustomvideoprocesshandler) | [ZegoCustomVideoRenderHandler](#zegocustomvideorenderhandler) |
| [ZegoDataRecordEventHandler](#zegodatarecordeventhandler) | [ZegoEventHandler](#zegoeventhandler) |
| [ZegoMediaPlayerAudioHandler](#zegomediaplayeraudiohandler) | [ZegoMediaPlayerEventHandler](#zegomediaplayereventhandler) |
| [ZegoMediaPlayerVideoHandler](#zegomediaplayervideohandler) | [ZegoRangeAudioEventHandler](#zegorangeaudioeventhandler) |

## ZegoApiCalledEventHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onApiCalledResult:funcName:info:"
  prototype="- (void)onApiCalledResult:(int) errorCode funcName:(NSString *) funcName info:(NSString *) info;"
  desc="Method execution result callback"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoApiCalledEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | Error code, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |
| funcName | NSString * | Function name. |
| info | NSString * | Detailed error information. |

**Details**

When the monitoring is turned on through [setApiCalledCallback], the results of the execution of all methods will be called back through this callback.

<Note title="">
- **Trigger**: When the developer calls the SDK method, the execution result of the method is called back.
- **Caution**: It is recommended to monitor and process this callback in the development and testing phases, and turn off the monitoring of this callback after going online.
</Note>

<Warning title="">
- **Available since**: 2.3.0
- **Restrictions**: None.
</Warning>
</ParamField>

## ZegoAudioDataHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onCapturedAudioData:dataLength:param:"
  prototype="- (void)onCapturedAudioData:(const unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param;"
  desc="The callback for obtaining the audio data captured by the local microphone."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoAudioDataHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | const unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |

**Details**

In non-custom audio capture mode, the SDK capture the microphone's sound, but the developer may also need to get a copy of the audio data captured by the SDK is available through this callback.
 When to trigger: On the premise of calling [setAudioDataHandler] to set the listener callback, after calling [startAudioDataObserver] to set the mask 0b01 that means 1 &lt;&lt; 0, this callback will be triggered only when it is in the publishing stream state.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback.
</Note>

<Warning title="">
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onPlaybackAudioData:dataLength:param:"
  prototype="- (void)onPlaybackAudioData:(const unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param;"
  desc="The callback for obtaining the audio data of all the streams playback by SDK."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoAudioDataHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | const unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |

**Details**

This function will callback all the mixed audio data to be playback. This callback can be used for that you needs to fetch all the mixed audio data to be playback to proccess.
 When to trigger: On the premise of calling [setAudioDataHandler] to set the listener callback, after calling [startAudioDataObserver] to set the mask 0b10 that means 1 &lt;&lt; 1, this callback will be triggered only when it is in the SDK inner audio and video engine started(called the [startPreview] or [startPlayingStream] or [startPublishingStream]).

<Note title="">
- **Caution**: This callback is a high-frequency callback. Please do not perform time-consuming operations in this callback. When the engine is not in the stream publishing state and the media player is not used to play media files, the audio data in the callback is muted audio data.
</Note>

<Warning title="">
- **Restrictions**: When playing copyrighted music, this callback will be disabled by default. If necessary, please contact ZEGO technical support.
</Warning>
</ParamField>
<ParamField
  name="onMixedAudioData:dataLength:param:"
  prototype="- (void)onMixedAudioData:(const unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param;"
  desc="Callback to get the audio data played by the SDK and the audio data captured by the local microphone. The audio data is the data mixed by the SDK."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoAudioDataHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | const unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |

**Details**

The audio data played by the SDK is mixed with the data captured by the local microphone before being sent to the speaker, and is called back through this function.
 When to trigger: On the premise of calling [setAudioDataHandler] to set the listener callback, after calling [startAudioDataObserver] to set the mask 0x04, this callback will be triggered only when it is in the publishing stream state or playing stream state.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback.
</Note>

<Warning title="">
- **Restrictions**: When playing copyrighted music, this callback will be disabled by default. If necessary, please contact ZEGO technical support.
</Warning>
</ParamField>
<ParamField
  name="onPlayerAudioData:dataLength:param:streamID:"
  prototype="- (void)onPlayerAudioData:(const unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param streamID:(NSString *) streamID;"
  desc="The callback for obtaining the audio data of each stream."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoAudioDataHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | const unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |
| streamID | NSString * | Corresponding stream ID. |

**Details**

This function will call back the data corresponding to each playing stream. Different from [onPlaybackAudioData], the latter is the mixed data of all playing streams. If developers need to process a piece of data separately, they can use this callback.
 When to trigger: On the premise of calling [setAudioDataHandler] to set up listening for this callback, calling [startAudioDataObserver] to set the mask 0x08 that is 1 &lt;&lt; 3, and this callback will be triggered when the SDK audio and video engine starts to play the stream.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback.
</Note>

<Warning title="">
- **Restrictions**: None.
</Warning>
</ParamField>

## ZegoAudioEffectPlayerEventHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="audioEffectPlayer:audioEffectID:playStateUpdate:errorCode"
  prototype="- (void)audioEffectPlayer:([ZegoAudioEffectPlayer](./class#zegoaudioeffectplayer) *)audioEffectPlayer audioEffectID:(unsigned int)audioEffectID playStateUpdate:([ZegoAudioEffectPlayState](./enum#zegoaudioeffectplaystate))state errorCode:(int)errorCode;"
  desc="Audio effect playback state callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoAudioEffectPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| audioEffectPlayer | [ZegoAudioEffectPlayer](./class#zegoaudioeffectplayer) * | Audio effect player instance that triggers this callback. |
| audioEffectID | unsigned int | The ID of the audio effect resource that triggered this callback. |
| state | [ZegoAudioEffectPlayState](./enum#zegoaudioeffectplaystate) | The playback state of the audio effect. |
| errorCode | int | Error code, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |

**Details**

This callback is triggered when the playback state of a audio effect of the audio effect player changes.

<Note title="">
- **Trigger**: This callback is triggered when the playback status of the audio effect changes.
</Note>

<Warning title="">
- **Available since**: 1.16.0
- **Restrictions**: None.
</Warning>
</ParamField>

## ZegoAudioMixingHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onAudioMixingCopyData:"
  prototype="- ([ZegoAudioMixingData](./class#zegoaudiomixingdata) *)onAudioMixingCopyData:(unsigned int) expectedDataLength;"
  desc="Audio mixing callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoAudioMixingHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| expectedDataLength | unsigned int | Expected length of incoming audio mixing data. |

**Details**

The callback for copying audio data to the SDK for audio mixing. This function should be used together with [enableAudioMixing].

<Note title="">
- **Use cases**: Developers can use this function when they need to mix their own songs, sound effects or other audio data into the publishing stream.
 When to trigger: It will triggered after [createEngine], and call [enableAudioMixing] turn on audio mixing, and call [setAudioMixingHandler] set audio mixing callback handler.
- **Caution**: This callback is a high frequency callback. To ensure the quality of the mixing data, please do not handle time-consuming operations in this callback.
</Note>

<Warning title="">
- **Available since**: 1.9.0
- **Restrictions**: Supports 16k 32k 44.1k 48k sample rate, mono or dual channel, 16-bit deep PCM audio data.
</Warning>

**Return**

The audio data provided by the developer that is expected to be mixed into the publishing stream.
</ParamField>

## ZegoCustomAudioProcessHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onProcessCapturedAudioData:dataLength:param:timestamp:"
  prototype="- (void)onProcessCapturedAudioData:(unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param timestamp:(double) timestamp;"
  desc="Custom audio processing local captured PCM audio frame callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomAudioProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |
| timestamp | double | The audio frame timestamp, starting from 0 when capture is started, the unit is milliseconds. |

**Details**

In this callback, you can receive the PCM audio frames captured locally after used headphone monitor. Developers can modify the audio frame data, as well as the audio channels and sample rate. The timestamp can be used for data synchronization, such as lyrics, etc. If you need the data after used headphone monitor, please use the [onProcessCapturedAudioDataAfterUsedHeadphoneMonitor] callback.
 When to trigger: You need to call [enableCustomAudioCaptureProcessing] to enable the function first, and call [startPreview] or [startPublishingStream] to trigger this callback function.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback.
</Note>

<Warning title="">
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onProcessCapturedAudioDataAfterUsedHeadphoneMonitor:dataLength:param:timestamp:"
  prototype="- (void)onProcessCapturedAudioDataAfterUsedHeadphoneMonitor:(unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param timestamp:(double) timestamp;"
  desc="Custom audio processing local captured PCM audio frame callback after used headphone monitor."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomAudioProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | unsigned char * _Nonnull | Audio data in PCM format |
| dataLength | unsigned int | Length of the data |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame |
| timestamp | double | The audio frame timestamp, starting from 0 when capture is started, the unit is milliseconds. |

**Details**

In this callback, you can receive the PCM audio frames captured locally after used headphone monitor. Developers can modify the audio frame data, as well as the audio channels and sample rate. The timestamp can be used for data synchronization, such as lyrics, etc.
 When to trigger: You need to call [enableCustomAudioCaptureProcessingAfterHeadphoneMonitor] to enable the function first, and call [startPreview] or [startPublishingStream] to trigger this callback function.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback.
</Note>
</ParamField>
<ParamField
  name="onAlignedAudioAuxData:dataLength:param:"
  prototype="- (void)onAlignedAudioAuxData:(const unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param;"
  desc="Aligned audio aux frames callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomAudioProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | const unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |

**Details**

In this callback, you can receive the audio aux frames which aligned with accompany. Developers can record locally.
 When to trigger: This callback function will not be triggered until [enableAlignedAudioAuxData] is called to turn on the function and [startpublishingstream] or [startrecordingcaptureddata] is called.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback, and the data in this callback cannot be modified.
</Note>

<Warning title="">
- **Restrictions**: To obtain audio aux data of the media player from this callback, developers need to call [enableAux] and [start] of MediaPlayer.
</Warning>
</ParamField>
<ParamField
  name="onBeforeAudioPrepAudioData:dataLength:param:"
  prototype="- (void)onBeforeAudioPrepAudioData:(const unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param;"
  desc="Audio data callback before SDK internal audio preprocessing."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomAudioProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | const unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |

**Details**

In this callback, you can receive the audio data before SDK internal audio preprocessing.
 When to trigger: This callback function will not be triggered until [enableBeforeAudioPrepAudioData] is called to turn on the function and [startpublishingstream] is called.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback, and the data in this callback cannot be modified.
</Note>

<Warning title="">
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onProcessRemoteAudioData:dataLength:param:streamID:timestamp:"
  prototype="- (void)onProcessRemoteAudioData:(unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param streamID:(NSString *) streamID timestamp:(double) timestamp;"
  desc="Custom audio processing remote playing stream PCM audio frame callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomAudioProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |
| streamID | NSString * | Corresponding stream ID. |
| timestamp | double | The audio frame timestamp, starting from 0 when capture is started, the unit is milliseconds. |

**Details**

In this callback, you can receive the PCM audio frames of remote playing stream. Developers can modify the audio frame data, as well as the audio channels and sample rate. The timestamp can be used for data synchronization, such as lyrics, etc.
 When to trigger: You need to call [enableCustomAudioRemoteProcessing] to enable the function first, and call [startPlayingStream] to trigger this callback function.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback.
</Note>

<Warning title="">
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onProcessPlaybackAudioData:dataLength:param:timestamp:"
  prototype="- (void)onProcessPlaybackAudioData:(unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *) param timestamp:(double) timestamp;"
  desc="Custom audio processing SDK playback PCM audio frame callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomAudioProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | unsigned char * _Nonnull | Audio data in PCM format. |
| dataLength | unsigned int | Length of the data. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | Parameters of the audio frame. |
| timestamp | double | The audio frame timestamp, starting from 0 when capture is started, the unit is milliseconds (It is effective when there is one and only one stream). |

**Details**

In this callback, you can receive the SDK playback PCM audio frame. Developers can modify the audio frame data, as well as the audio channels and sample rate. The timestamp can be used for data synchronization, such as lyrics, etc.
 When to trigger: You need to call [enableCustomAudioPlaybackProcessing] to enable the function first, and call [startPublishingStream], [startPlayingStream], [startPreview], [createMediaPlayer] or [createAudioEffectPlayer] to trigger this callback function.

<Note title="">
- **Caution**: This callback is a high-frequency callback, please do not perform time-consuming operations in this callback.
</Note>

<Warning title="">
- **Restrictions**: None.
</Warning>
</ParamField>

## ZegoCustomVideoCaptureHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onStart:"
  prototype="- (void)onStart:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="Customize the notification of the start of video capture."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoCaptureHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

The SDK informs that the video frame is about to be collected, and the video frame data sent to the SDK is valid after receiving the callback.

<Note title="">
- **Use cases**: Live data collected by non-cameras. For example, local video file playback, screen sharing, game live broadcast, etc.
 When to 
- **Trigger**: After calling [startPreview] or [startPublishingStream] successfully.
- **Caution**: The video frame data sent to the SDK after receiving the callback is valid.
- **Related callbacks**: Customize the end of capture notification [onCaptureStop].
- **Related APIs**: Call [setCustomVideoCaptureHandler] to set custom video capture callback.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onStop:"
  prototype="- (void)onStop:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="Customize the notification of the end of the collection."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoCaptureHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

The SDK informs that it is about to end the video frame capture.

<Note title="">
- **Use cases**: Live data collected by non-cameras. For example, local video file playback, screen sharing, game live broadcast, etc.
 When to 
- **Trigger**: After calling [stopPreview] or [stopPublishingStream] successfully.
- **Caution**: If you call [startPreview] and [startPublishingStream] to start preview and push stream at the same time after you start custom capture, you should call [stopPreview] and [stopPublishingStream] to stop the preview and push stream before triggering the callback.
- **Related callbacks**: Custom video capture start notification [onCaptureStart].
- **Related APIs**: Call [setCustomVideoCaptureHandler] to set custom video capture callback.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onEncodedDataTrafficControl:channel:"
  prototype="- (void)onEncodedDataTrafficControl:([ZegoTrafficControlInfo](./class#zegotrafficcontrolinfo) *) trafficControlInfo channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="When network changes are detected during custom video capture, the developer is notified that traffic control is required, and the encoding configuration is adjusted according to the recommended parameters of the SDK."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoCaptureHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| trafficControlInfo | [ZegoTrafficControlInfo](./class#zegotrafficcontrolinfo) * | traffic control info. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

When using custom video capture, the SDK detects a network change, informs the developer that it needs to do flow control, and adjust the encoding configuration according to the recommended parameters of the SDK. In the case of custom collection and transmission of encoded data, the SDK cannot know the external encoding configuration, so the flow control operation needs to be completed by the developer. The SDK will notify the developer of the recommended value of the video configuration according to the current network situation, and the developer needs to modify the encoder configuration by himself to ensure the smoothness of video transmission.

<Note title="">
- **Use cases**: Live data collected by non-cameras. For example, local video file playback, screen sharing, game live broadcast, etc.
 When to 
- **Trigger**: When network status changes during the process of custom video capture and flow control is required.
- **Caution**: Please do not perform time-consuming operations in this callback, such as reading and writing large files. If you need to perform time-consuming operations, please switch threads.
- **Related APIs**: Call [setCustomVideoCaptureHandler] to set custom video capture callback.
</Note>

<Warning title="">
- **Available since**: 1.14.0
</Warning>
</ParamField>

## ZegoCustomVideoProcessHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onStart:"
  prototype="- (void)onStart:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The SDK informs the developer that it is about to start custom video processing."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

When the custom video pre-processing is turned on, the SDK informs the developer that the video pre-processing is about to start, and it is recommended to initialize other resources(E.g. Beauty SDK) in this callback.

<Note title="">
- **Use cases**: After the developer collects the video data by himself or obtains the video data collected by the SDK, if the basic beauty and watermark functions of the SDK cannot meet the needs of the developer (for example, the beauty effect cannot meet the expectations), the ZegoEffects SDK can be used to perform the video Some special processing, such as beautifying, adding pendants, etc., this process is the pre-processing of custom video.
 When to 
- **Trigger**: Open custom video pre-processing, after calling [startPreview] or [startPublishingStream] successfully.
- **Related callbacks**: Custom video pre-processing end notification [onStop].
- **Related APIs**: Call [setCustomVideoProcessHandler] function to set custom video pre-processing callback.
</Note>

<Warning title="">
- **Available since**: 2.2.0
</Warning>
</ParamField>
<ParamField
  name="onStop:"
  prototype="- (void)onStop:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The SDK informs the developer to stop custom video processing."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

When the custom video pre-processing is turned on, the SDK informs the developer that the video pre-processing is about to end, and it is recommended to destroy other resources(E.g. Beauty SDK) in this callback.

<Note title="">
- **Use cases**: After the developer collects the video data by himself or obtains the video data collected by the SDK, if the basic beauty and watermark functions of the SDK cannot meet the needs of the developer (for example, the beauty effect cannot meet the expectations), the ZegoEffects SDK can be used to perform the video Some special processing, such as beautifying, adding pendants, etc., this process is the pre-processing of custom video.
 When to 
- **Trigger**: If you call [startPreview] to start the preview and [startPublishingStream] to start the push stream at the same time after you start the custom capture, you should call [stopPreview] to stop the preview and [stopPublishingStream] to stop the push stream before the callback will be triggered.
- **Related callbacks**: Custom video pre-processing start notification [onStart].
- **Related APIs**: Call [setCustomVideoProcessHandler] function to set custom video pre-processing callback.
</Note>

<Warning title="">
- **Available since**: 2.2.0
</Warning>
</ParamField>
<ParamField
  name="onCapturedUnprocessedCVPixelBuffer:timestamp:channel:"
  prototype="- (void)onCapturedUnprocessedCVPixelBuffer:(CVPixelBufferRef) buffer timestamp:(CMTime) timestamp channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="Call back when the original video data of type [CVPixelBuffer] is obtained."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoProcessHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| buffer | CVPixelBufferRef | CVPixelBuffer type video frame data to be sent to the SDK. |
| timestamp | CMTime | Timestamp of this video frame. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

When the custom video pre-processing is turned on, after calling [setCustomVideoProcessHandler] to set the callback, the SDK receives the original video data and calls back to the developer. After the developer has processed the original image, he must call [sendCustomVideoProcessedCVPixelbuffer] to send the processed data back to the SDK, otherwise it will cause frame loss.

<Note title="">
- **Use cases**: After the developer collects the video data by himself or obtains the video data collected by the SDK, if the basic beauty and watermark functions of the SDK cannot meet the needs of the developer (for example, the beauty effect cannot meet the expectations), the ZegoEffects SDK can be used to perform the video Some special processing, such as beautifying, adding pendants, etc., this process is the pre-processing of custom video.
 When to 
- **Trigger**: When the custom video pre-processing is enabled, the SDK collects the original video data.
- **Platform differences**: It only takes effect on the iOS/macOS platform.
</Note>

<Warning title="">
- **Available since**: 2.2.0
- **Restrictions**: This interface takes effect when [enableCustomVideoProcessing] is called to enable custom video pre-processing and the bufferType of config is passed in [ZegoVideoBufferTypeCVPixelBuffer] or [ZegoVideoBufferTypeNV12CVPixelBuffer].
</Warning>
</ParamField>

## ZegoCustomVideoRenderHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onCapturedVideoFrameRawData:dataLength:param:flipMode:channel:"
  prototype="- (void)onCapturedVideoFrameRawData:(unsigned char * _Nonnull * _Nonnull) data dataLength:(unsigned int *) dataLength param:([ZegoVideoFrameParam](./class#zegovideoframeparam) *) param flipMode:([ZegoVideoFlipMode](./enum#zegovideoflipmode)) flipMode channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="When custom video rendering is enabled, the original video frame data collected by the local preview is called back."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoRenderHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | unsigned char * _Nonnull * _Nonnull | Raw video frame data (eg: RGBA only needs to consider data[0], I420 needs to consider data[0,1,2]). |
| dataLength | unsigned int * | Data length (eg: RGBA only needs to consider dataLength[0], I420 needs to consider dataLength[0,1,2]). |
| param | [ZegoVideoFrameParam](./class#zegovideoframeparam) * | Video frame parameters. |
| flipMode | [ZegoVideoFlipMode](./enum#zegovideoflipmode) | video flip mode. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

When using custom video rendering, the SDK callbacks the original video frame data collected by the local preview, which is rendered by the developer.

<Note title="">
- **Use cases**: Use a cross-platform interface framework or game engine; need to obtain the video frame data collected or streamed by the SDK for special processing.
 When to 
- **Trigger**: When the local preview is turned on, when the SDK collects the local preview video frame data.
- **Related APIs**: Call [setCustomVideoRenderHandler] to set custom video rendering callback.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteVideoFrameRawData:dataLength:param:streamID:"
  prototype="- (void)onRemoteVideoFrameRawData:(unsigned char * _Nonnull * _Nonnull) data dataLength:(unsigned int *) dataLength param:([ZegoVideoFrameParam](./class#zegovideoframeparam) *) param streamID:(NSString *) streamID;"
  desc="When custom video rendering is enabled, the remote end pulls the original video frame data to call back, and distinguishes different streams by streamID."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoRenderHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | unsigned char * _Nonnull * _Nonnull | Raw video frame data (eg: RGBA only needs to consider data[0], I420 needs to consider data[0,1,2]). |
| dataLength | unsigned int * | Data length (eg: RGBA only needs to consider dataLength[0], I420 needs to consider dataLength[0,1,2]). |
| param | [ZegoVideoFrameParam](./class#zegovideoframeparam) * | Video frame parameters. |
| streamID | NSString * | Stream ID. |

**Details**

When custom video rendering is enabled, the SDK calls back the remote end to pull the original video frame data, distinguishes different streams by streamID, and renders them by the developer.

<Note title="">
- **Use cases**: Use a cross-platform interface framework or game engine; need to obtain the video frame data collected or streamed by the SDK for special processing.
 When to 
- **Trigger**: After starting to stream, when the SDK receives the video frame data of the remote stream.
- **Related APIs**: Call [setCustomVideoRenderHandler] to set custom video rendering callback.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onCapturedVideoFrameCVPixelBuffer:param:flipMode:channel:"
  prototype="- (void)onCapturedVideoFrameCVPixelBuffer:(CVPixelBufferRef) buffer param:([ZegoVideoFrameParam](./class#zegovideoframeparam) *) param flipMode:([ZegoVideoFlipMode](./enum#zegovideoflipmode)) flipMode channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="Custom video rendering local preview video frame CVPixelBuffer data callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoRenderHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| buffer | CVPixelBufferRef | Video frame data in CVPixelBufferRef |
| param | [ZegoVideoFrameParam](./class#zegovideoframeparam) * | Video frame param. |
| flipMode | [ZegoVideoFlipMode](./enum#zegovideoflipmode) | video flip mode. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

When [enableCustomVideoRender] is called to enable custom video rendering and the specified data type is [CVPixelBuffer], this function will be called back with the local preview video frame CVPixelBufferRef data.

<Note title="">
- **Use cases**: Scenes that need to obtain video frame data captured by the SDK for special processing, such as cross-platform UI frameworks, game engines, etc..
 When to 
- **Trigger**: After calling [startPreview], the SDK will call back when the local preview video frame data is captured.
- **Related APIs**: Call [setCustomVideoRenderHandler] to set custom video rendering callback.
- **Platform differences**: Only for iOS and macOS.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteVideoFrameCVPixelBuffer:param:streamID:"
  prototype="- (void)onRemoteVideoFrameCVPixelBuffer:(CVPixelBufferRef) buffer param:([ZegoVideoFrameParam](./class#zegovideoframeparam) *) param streamID:(NSString *) streamID;"
  desc="Custom video rendering remote playing stream video frame CVPixelBuffer data callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoRenderHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| buffer | CVPixelBufferRef | Video frame data in CVPixelBufferRef |
| param | [ZegoVideoFrameParam](./class#zegovideoframeparam) * | Video frame param. |
| streamID | NSString * | Stream ID. |

**Details**

When [enableCustomVideoRender] is called to enable custom video rendering and the specified data type is [CVPixelBuffer], this function will be called back with the remote playing stream video frame CVPixelBufferRef data.

<Note title="">
- **Use cases**: Scenes that need to obtain the video frame data of the SDK remote playing stream for special processing, such as using a cross-platform UI framework, game engine, etc.
 When to 
- **Trigger**: After calling [startPlayingStream], the SDK will call back when the remote streaming video frame data is received.
- **Related APIs**: Call [setCustomVideoRenderHandler] to set custom video rendering callback.
- **Platform differences**: Only for iOS and macOS.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteVideoFrameEncodedData:dataLength:param:referenceTimeMillisecond:streamID:"
  prototype="- (void)onRemoteVideoFrameEncodedData:(unsigned char * _Nonnull) data dataLength:(unsigned int) dataLength param:([ZegoVideoEncodedFrameParam](./class#zegovideoencodedframeparam) *) param referenceTimeMillisecond:(unsigned long long) referenceTimeMillisecond streamID:(NSString *) streamID;"
  desc="Custom video rendering remote playing stream video frame undecoded data callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoCustomVideoRenderHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | unsigned char * _Nonnull | Encoded data of video frames. |
| dataLength | unsigned int | Data length. |
| param | [ZegoVideoEncodedFrameParam](./class#zegovideoencodedframeparam) * | Video frame parameters. |
| referenceTimeMillisecond | unsigned long long | video frame reference time, UNIX timestamp, in milliseconds. |
| streamID | NSString * | Stream ID. |

**Details**

When [enableCustomVideoRender] is called to enable custom video rendering and the specified data type is [EncodedData], this function will be called back with the remote playing stream undecoded video frame data.
 When to

<Note title="">
- **Trigger**: After calling [startPlayingStream], the SDK will call back when the remote streaming video frame data is received.
- **Related APIs**: Call [setCustomVideoRenderHandler] to set custom video rendering callback.
</Note>

<Warning title="">
- **Available since**: 1.10.0
</Warning>
</ParamField>

## ZegoDataRecordEventHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onCapturedDataRecordStateUpdate:errorCode:config:channel:"
  prototype="- (void)onCapturedDataRecordStateUpdate:([ZegoDataRecordState](./enum#zegodatarecordstate)) state errorCode:(int) errorCode config:([ZegoDataRecordConfig](./class#zegodatarecordconfig) *) config channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The callback triggered when the state of data recording (to a file) changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoDataRecordEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoDataRecordState](./enum#zegodatarecordstate) | File recording status. |
| errorCode | int | Error code, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |
| config | [ZegoDataRecordConfig](./class#zegodatarecordconfig) * | Record config. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

The callback triggered when the state of data recording (to a file) changes.

<Note title="">
- **Use cases**: The developer should use this callback to determine the status of the file recording or for UI prompting.
 When to trigger: After [startRecordingCapturedData] is called, if the state of the recording process changes, this callback will be triggered.
</Note>

<Warning title="">
- **Available since**: 1.10.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onCapturedDataRecordProgressUpdate:config:channel:"
  prototype="- (void)onCapturedDataRecordProgressUpdate:([ZegoDataRecordProgress](./class#zegodatarecordprogress) *) progress config:([ZegoDataRecordConfig](./class#zegodatarecordconfig) *) config channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The callback to report the current recording progress."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoDataRecordEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| progress | [ZegoDataRecordProgress](./class#zegodatarecordprogress) * | File recording progress, which allows developers to hint at the UI, etc. |
| config | [ZegoDataRecordConfig](./class#zegodatarecordconfig) * | Record config. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel. |

**Details**

Recording progress update callback, triggered at regular intervals during recording.

<Note title="">
- **Use cases**: Developers can do UI hints for the user interface.
 When to trigger: After [startRecordingCapturedData] is called, If configured to require a callback, timed trigger during recording.
</Note>

<Warning title="">
- **Available since**: 1.10.0
- **Restrictions**: None.
</Warning>
</ParamField>

## ZegoEventHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="onDebugError:funcName:info:"
  prototype="- (void)onDebugError:(int) errorCode funcName:(NSString *) funcName info:(NSString *) info;"
  desc="The callback for obtaining debugging error information."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | Error code, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |
| funcName | NSString * | Function name. |
| info | NSString * | Detailed error information. |

**Details**

When the SDK functions are not used correctly, the callback prompts for detailed error information.

<Note title="">
- **Trigger**: Notify the developer when an exception occurs in the SDK.
- **Caution**: None.
</Note>

<Warning title="">
- **Available since**: 1.1.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onEngineStateUpdate:"
  prototype="- (void)onEngineStateUpdate:([ZegoEngineState](./enum#zegoenginestate)) state;"
  desc="The callback triggered when the audio/video engine state changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoEngineState](./enum#zegoenginestate) | The audio/video engine state. |

**Details**

Callback notification of audio/video engine status update. When audio/video functions are enabled, such as preview, push streaming, local media player, audio data observering, etc., the audio/video engine will enter the start state. When you exit the room or disable all audio/video functions , The audio/video engine will enter the stop state.

<Note title="">
- **Trigger**: The developer called the relevant function to change the state of the audio and video engine. For example: 1. Called ZegoExpressEngine's [startPreview], [stopPreview], [startPublishingStream], [stopPublishingStream], [startPlayingStream], [stopPlayingStream], [startAudioDataObserver], [stopAudioDataObserver] and other functions. 2. The related functions of MediaPlayer are called. 3. The [LogoutRoom] function was called. 4. The related functions of RealTimeSequentialDataManager are called.
- **Caution**:   1. When the developer calls [destroyEngine], this notification will not be triggered because the resources of the SDK are completely released.
  2. If there is no special need, the developer does not need to pay attention to this callback.
</Note>

<Warning title="">
- **Available since**: 1.1.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onRecvExperimentalAPI:"
  prototype="- (void)onRecvExperimentalAPI:(NSString *) content;"
  desc="Experimental API callback"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| content | NSString * | Callback content in JSON string format. |

**Details**

Receive experimental API callbacks in JSON string format.

<Note title="">
- **Caution**: Please use this feature with the help of ZEGO Technical Support.
</Note>

<Warning title="">
- **Available since**: 2.7.0
</Warning>
</ParamField>
<ParamField
  name="onFatalError:"
  prototype="- (void)onFatalError:(int) errorCode;"
  desc="The callback that triggered a fatal error, causing the SDK to malfunction and unable to function properly."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | Error code. |

**Details**

The callback that triggered a fatal error.

<Note title="">
- **Trigger**: The APP has enabled the restriction of access from foreign IP addresses, and the current client is outside of the domain.
- **Caution**:   None.
</Note>

<Warning title="">
- **Available since**: 3.6.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onRoomStateUpdate:errorCode:extendedData:roomID:"
  prototype="- (void)onRoomStateUpdate:([ZegoRoomState](./enum#zegoroomstate)) state errorCode:(int) errorCode extendedData:(nullable NSDictionary *) extendedData roomID:(NSString *) roomID;"
  desc="Notification of the room connection state changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoRoomState](./enum#zegoroomstate) | Changed room state. |
| errorCode | int | Error code, For details, please refer to [Common Error Codes](https://docs.zegocloud.com/article/5548). |
| extendedData | nullable NSDictionary * | Extended Information with state updates. When the room login is successful, the key "room_session_id" can be used to obtain the unique RoomSessionID of each audio and video communication, which identifies the continuous communication from the first user in the room to the end of the audio and video communication. It can be used in scenarios such as call quality scoring and call problem diagnosis. |
| roomID | NSString * | Room ID, a string of up to 128 bytes in length. |

**Details**

This callback is triggered when the connection status of the room changes, and the reason for the change is notified.For versions 2.18.0 and above, it is recommended to use the onRoomStateChanged callback instead of the onRoomStateUpdate callback to monitor room state changes.

<Note title="">
- **Use cases**: Developers can use this callback to determine the status of the current user in the room.
 When to trigger:
 1. The developer will receive this notification when calling the [loginRoom], [logoutRoom], [switchRoom] functions.
 2. This notification may also be received when the network condition of the user's device changes (SDK will automatically log in to the room when disconnected, please refer to [Does ZEGO SDK support a fast reconnection for temporary disconnection] for details](https://docs.zegocloud.com/faq/reconnect?product=ExpressVideo&platform=all).
- **Caution**: If the connection is being requested for a long time, the general probability is that the user's network is unstable.
- **Related APIs**: [loginRoom]、[logoutRoom]、[switchRoom]
</Note>

<Warning title="">
- **Available since**: 1.1.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onRoomStateChanged:errorCode:extendedData:roomID:"
  prototype="- (void)onRoomStateChanged:([ZegoRoomStateChangedReason](./enum#zegoroomstatechangedreason)) reason errorCode:(int) errorCode extendedData:(NSDictionary *) extendedData roomID:(NSString *) roomID;"
  desc="Notification of the room connection state changes, including specific reasons for state change."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| reason | [ZegoRoomStateChangedReason](./enum#zegoroomstatechangedreason) | Room state change reason. |
| errorCode | int | Error code, please refer to the error codes document [https://doc-en.zego.im/en/5548.html](https://doc-en.zego.im/en/5548.html) for details. |
| extendedData | NSDictionary * | Extended Information with state updates. When the room login is successful, the key "room_session_id" can be used to obtain the unique RoomSessionID of each audio and video communication, which identifies the continuous communication from the first user in the room to the end of the audio and video communication. It can be used in scenarios such as call quality scoring and call problem diagnosis. |
| roomID | NSString * | Room ID, a string of up to 128 bytes in length. |

**Details**

This callback is triggered when the connection status of the room changes, and the reason for the change is notified.For versions 2.18.0 and above, it is recommended to use the onRoomStateChanged callback instead of the onRoomStateUpdate callback to monitor room state changes.

<Note title="">
- **Use cases**: Developers can use this callback to determine the status of the current user in the room.
 When to trigger: Users will receive this notification when they call room functions (refer to [Related APIs]). 2. This notification may also be received when the user device's network conditions change (SDK will automatically log in to the room again when the connection is disconnected, refer to [https://doc-zh.zego.im/faq/reconnect](https://doc-zh.zego.im/faq/reconnect) ).
- **Caution**: If the connection is being requested for a long time, the general probability is that the user's network is unstable.
- **Related APIs**: [loginRoom], [logoutRoom], [switchRoom]
</Note>

<Warning title="">
- **Available since**: 2.18.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onRoomUserUpdate:userList:roomID:"
  prototype="- (void)onRoomUserUpdate:([ZegoUpdateType](./enum#zegoupdatetype)) updateType userList:(NSArray<[ZegoUser](./class#zegouser) *> *) userList roomID:(NSString *) roomID;"
  desc="The callback triggered when the number of other users in the room increases or decreases."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| updateType | [ZegoUpdateType](./enum#zegoupdatetype) | Update type (add/delete). |
| userList | NSArray\<[ZegoUser](./class#zegouser) *\> * | List of users changed in the current room. |
| roomID | NSString * | Room ID where the user is logged in, a string of up to 128 bytes in length. |

**Details**

When other users in the room are online or offline, which causes the user list in the room to change, the developer will be notified through this callback.

<Note title="">
- **Use cases**: Developers can use this callback to update the user list display in the room in real time.
 When to trigger:
  1. When the user logs in to the room for the first time, if there are other users in the room, the SDK will trigger a callback notification with `updateType` being [ZegoUpdateTypeAdd], and `userList` is the other users in the room at this time.
  2. The user is already in the room. If another user logs in to the room through the [loginRoom] or [switchRoom] functions, the SDK will trigger a callback notification with `updateType` being [ZegoUpdateTypeAdd].
  3. If other users log out of this room through the [logoutRoom] or [switchRoom] functions, the SDK will trigger a callback notification with `updateType` being [ZegoUpdateTypeDelete].
  4. The user is already in the room. If another user is kicked out of the room from the server, the SDK will trigger a callback notification with `updateType` being [ZegoUpdateTypeDelete].
- **Related APIs**: [loginRoom]、[logoutRoom]、[switchRoom]
</Note>

<Warning title="">
- **Available since**: 1.1.0
- **Restrictions**: If developers need to use ZEGO room users notifications, please ensure that the [ZegoRoomConfig] sent by each user when logging in to the room has the [isUserStatusNotify] property set to true, otherwise the callback notification will not be received.
</Warning>
</ParamField>
<ParamField
  name="onRoomOnlineUserCountUpdate:roomID:"
  prototype="- (void)onRoomOnlineUserCountUpdate:(int) count roomID:(NSString *) roomID;"
  desc="The callback triggered every 30 seconds to report the current number of online users."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| count | int | Count of online users. |
| roomID | NSString * | Room ID where the user is logged in, a string of up to 128 bytes in length. |

**Details**

This method will notify the user of the current number of online users in the room.

<Note title="">
- **Use cases**: Developers can use this callback to show the number of user online in the current room.
- **When to call /Trigger**: After successfully logging in to the room.
- **Caution**: 1. This function is called back every 30 seconds. 2. Because of this design, when the number of users in the room exceeds 500, there will be some errors in the statistics of the number of online people in the room.
</Note>

<Warning title="">
- **Available since**: 1.7.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onRoomStreamUpdate:streamList:extendedData:roomID:"
  prototype="- (void)onRoomStreamUpdate:([ZegoUpdateType](./enum#zegoupdatetype)) updateType streamList:(NSArray<[ZegoStream](./class#zegostream) *> *) streamList extendedData:(nullable NSDictionary *) extendedData roomID:(NSString *) roomID;"
  desc="The callback triggered when the number of streams published by the other users in the same room increases or decreases."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| updateType | [ZegoUpdateType](./enum#zegoupdatetype) | Update type (add/delete). |
| streamList | NSArray\<[ZegoStream](./class#zegostream) *\> * | Updated stream list. |
| extendedData | nullable NSDictionary * | Extended information with stream updates.When receiving a stream deletion notification, the developer can convert the string into a json object to get the stream_delete_reason field, which is an array of stream deletion reasons, and the stream_delete_reason[].code field may have the following values: 1 (the user actively stops publishing stream) ; 2 (user heartbeat timeout); 3 (user repeated login); 4 (user kicked out); 5 (user disconnected); 6 (removed by the server). |
| roomID | NSString * | Room ID where the user is logged in, a string of up to 128 bytes in length. |

**Details**

When other users in the room start publishing stream or stop publishing stream, the streaming list in the room changes, and the developer will be notified through this callback.

<Note title="">
- **Use cases**: This callback is used to monitor stream addition or stream deletion notifications of other users in the room. Developers can use this callback to determine whether other users in the same room start or stop publishing stream, so as to achieve active playing stream [startPlayingStream] or take the initiative to stop the playing stream [stopPlayingStream], and use it to change the UI controls at the same time.
 When to trigger:
  1. When the user logs in to the room for the first time, if there are other users publishing streams in the room, the SDK will trigger a callback notification with `updateType` being [ZegoUpdateTypeAdd], and `streamList` is an existing stream list.
  2. The user is already in the room. if another user adds a new push, the SDK will trigger a callback notification with `updateType` being [ZegoUpdateTypeAdd].
  3. The user is already in the room. If other users stop streaming, the SDK will trigger a callback notification with `updateType` being [ZegoUpdateTypeDelete].
  4. The user is already in the room. If other users leave the room, the SDK will trigger a callback notification with `updateType` being [ZegoUpdateTypeDelete].
</Note>

<Warning title="">
- **Available since**: 1.1.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onRoomStreamExtraInfoUpdate:roomID:"
  prototype="- (void)onRoomStreamExtraInfoUpdate:(NSArray<[ZegoStream](./class#zegostream) *> *) streamList roomID:(NSString *) roomID;"
  desc="The callback triggered when there is an update on the extra information of the streams published by other users in the same room."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamList | NSArray\<[ZegoStream](./class#zegostream) *\> * | List of streams that the extra info was updated. |
| roomID | NSString * | Room ID where the user is logged in, a string of up to 128 bytes in length. |

**Details**

All users in the room will be notified by this callback when the extra information of the stream in the room is updated.

<Note title="">
- **Use cases**: Users can realize some business functions through the characteristics of stream extra information consistent with stream life cycle.
- **When to call /Trigger**: When a user publishing the stream update the extra information of the stream in the same room, other users in the same room will receive the callback.
- **Caution**: Unlike the stream ID, which cannot be modified during the publishing process, the stream extra information can be updated during the life cycle of the corresponding stream ID.
- **Related APIs**: Users who publish stream can set extra stream information through [setStreamExtraInfo].
</Note>

<Warning title="">
- **Available since**: 1.1.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onRoomExtraInfoUpdate:roomID:"
  prototype="- (void)onRoomExtraInfoUpdate:(NSArray<[ZegoRoomExtraInfo](./class#zegoroomextrainfo) *> *) roomExtraInfoList roomID:(NSString *) roomID;"
  desc="The callback triggered when there is an update on the extra information of the room."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| roomExtraInfoList | NSArray\<[ZegoRoomExtraInfo](./class#zegoroomextrainfo) *\> * | List of the extra info updated. |
| roomID | NSString * | Room ID where the user is logged in, a string of up to 128 bytes in length. |

**Details**

After the room extra information is updated, all users in the room will be notified except update the room extra information user.

<Note title="">
- **Use cases**: Extra information for the room.
- **When to call /Trigger**: When a user update the room extra information, other users in the same room will receive the callback.
- **Related APIs**: Users can update room extra information through [setRoomExtraInfo] function.
</Note>

<Warning title="">
- **Available since**: 1.1.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onRoomTokenWillExpire:roomID:"
  prototype="- (void)onRoomTokenWillExpire:(int) remainTimeInSecond roomID:(NSString *) roomID;"
  desc="Callback notification that room Token authentication is about to expire."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| remainTimeInSecond | int | The remaining time before the token expires. |
| roomID | NSString * | Room ID where the user is logged in, a string of up to 128 bytes in length. |

**Details**

The callback notification that the room Token authentication is about to expire, please use [renewToken] to update the room Token authentication.

<Note title="">
- **Use cases**: In order to prevent illegal entry into the room, it is necessary to perform authentication control on login room, push streaming, etc., to improve security.
- **When to call /Trigger**: 30 seconds before the Token expires, the SDK will call [onRoomTokenWillExpire] to notify developer.
- **Caution**: The token contains important information such as the user's room permissions, publish stream permissions, and effective time, please refer to [https://docs.zegocloud.com/article/11649.](https://docs.zegocloud.com/article/11649.)
- **Related APIs**: When the developer receives this callback, he can use [renewToken] to update the token authentication information.
</Note>

<Warning title="">
- **Available since**: 2.8.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onPublisherStateUpdate:errorCode:extendedData:streamID:"
  prototype="- (void)onPublisherStateUpdate:([ZegoPublisherState](./enum#zegopublisherstate)) state errorCode:(int) errorCode extendedData:(nullable NSDictionary *) extendedData streamID:(NSString *) streamID;"
  desc="The callback triggered when the state of stream publishing changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoPublisherState](./enum#zegopublisherstate) | State of publishing stream. |
| errorCode | int | The error code corresponding to the status change of the publish stream, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |
| extendedData | nullable NSDictionary * | Extended information with state updates, include playing stream CDN address. |
| streamID | NSString * | Stream ID. |

**Details**

After calling the [startPublishingStream] successfully, the notification of the publish stream state change can be obtained through the callback function. You can roughly judge the user's uplink network status based on whether the state parameter is in [PUBLISH_REQUESTING].

<Note title="">
- **Caution**: The parameter [extendedData] is extended information with state updates. If you use ZEGO's CDN content distribution network, after the stream is successfully published, the keys of the content of this parameter are [flv_url_list], [rtmp_url_list], [hls_url_list], these correspond to the publishing stream URLs of the flv, rtmp, and hls protocols.
- **Related callbacks**: After calling the [startPlayingStream] successfully, the notification of the play stream state change can be obtained through the callback function [onPlayerStateUpdate]. You can roughly judge the user's downlink network status based on whether the state parameter is in [PLAY_REQUESTING].
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherQualityUpdate:streamID:"
  prototype="- (void)onPublisherQualityUpdate:([ZegoPublishStreamQuality](./class#zegopublishstreamquality) *) quality streamID:(NSString *) streamID;"
  desc="Callback for current stream publishing quality."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| quality | [ZegoPublishStreamQuality](./class#zegopublishstreamquality) * | Publishing stream quality, including audio and video framerate, bitrate, RTT, etc. |
| streamID | NSString * | Stream ID. |

**Details**

After calling the [startPublishingStream] successfully, the callback will be received every 3 seconds default(If you need to change the time, please contact the instant technical support to configure). Through the callback, the collection frame rate, bit rate, RTT, packet loss rate and other quality data of the published audio and video stream can be obtained, and the health of the publish stream can be monitored in real time.You can monitor the health of the published audio and video streams in real time according to the quality parameters of the callback function, in order to show the uplink network status in real time on the device UI.

<Note title="">
- **Caution**: If you does not know how to use the parameters of this callback function, you can only pay attention to the [level] field of the [quality] parameter, which is a comprehensive value describing the uplink network calculated by SDK based on the quality parameters.
- **Related callbacks**: After calling the [startPlayingStream] successfully, the callback [onPlayerQualityUpdate] will be received every 3 seconds. You can monitor the health of play streams in real time based on quality data such as frame rate, code rate, RTT, packet loss rate, etc.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherCapturedAudioFirstFrame"
  prototype="- (void)onPublisherCapturedAudioFirstFrame;"
  desc="The callback triggered when the first audio frame is captured."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
This callback will be received when the SDK starts the microphone to capture the first frame of audio data. If this callback is not received, the audio capture device is occupied or abnormal.

<Note title="">
- **Trigger**: When the engine of the audio/video module inside the SDK starts, the SDK will go and collect the audio data from the local device and will receive the callback at that time.
- **Related callbacks**: Determine if the SDK actually collected video data by the callback function [onPublisherCapturedVideoFirstFrame], determine if the SDK has rendered the first frame of video data collected by calling back [onPublisherRenderVideoFirstFrame].
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherCapturedVideoFirstFrame:"
  prototype="- (void)onPublisherCapturedVideoFirstFrame:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The callback triggered when the first video frame is captured."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio and video stream, you can ignore this parameter. |

**Details**

The SDK will receive this callback when the first frame of video data is captured. If this callback is not received, the video capture device is occupied or abnormal.

<Note title="">
- **Trigger**: When the SDK's internal audio/video module's engine starts, the SDK will collect video data from the local device and will receive this callback.
- **Related callbacks**: Determine if the SDK actually collected audio data by the callback function [onPublisherCapturedAudioFirstFrame], determine if the SDK has rendered the first frame of video data collected by calling back [onPublisherRenderVideoFirstFrame].
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherSendAudioFirstFrame:"
  prototype="- (void)onPublisherSendAudioFirstFrame:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The callback triggered when the first audio frame is sent."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio stream, you can ignore this parameter. |

**Details**

After the [startPublishingStream] function is called successfully, this callback will be called when SDK received the first frame of audio data. Developers can use this callback to determine whether SDK has actually collected audio data. If the callback is not received, the audio capture device is occupied or abnormal.

<Note title="">
- **Trigger**: In the case of no startPublishingStream audio stream, the first startPublishingStream audio stream, it will receive this callback.
- **Related callbacks**: After the [startPublishingStream] function is called successfully, determine if the SDK actually collected video data by the callback function [onPublisherCapturedVideoFirstFrame], determine if the SDK has rendered the first frame of video data collected by calling back [onPublisherRenderVideoFirstFrame].
</Note>

<Warning title="">
- **Available since**: 3.5.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherSendVideoFirstFrame:"
  prototype="- (void)onPublisherSendVideoFirstFrame:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The callback triggered when the first video frame is sent."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one video stream, you can ignore this parameter. |

**Details**

After the [startPublishingStream] function is called successfully, this callback will be called when SDK received the first frame of video data. Developers can use this callback to determine whether SDK has actually collected video data. If the callback is not received, the video capture device is occupied or abnormal.

<Note title="">
- **Trigger**: In the case of no startPublishingStream video stream, the first startPublishingStream video stream, it will receive this callback.
- **Related callbacks**: After the [startPublishingStream] function is called successfully, determine if the SDK actually collected audio data by the callback function [onPublisherCapturedAudioFirstFrame], determine if the SDK has rendered the first frame of video data collected by calling back [onPublisherRenderVideoFirstFrame].
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 3.5.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherRenderVideoFirstFrame:"
  prototype="- (void)onPublisherRenderVideoFirstFrame:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The callback triggered when the first video frame is rendered."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio and video stream, you can ignore this parameter. |

**Details**

this callback will be called after SDK rendered the first frame of video data captured. This interface is for preview rendering. The first frame callback is only available for external collection and internal preview. If it is not for SDK rendering, there is no such callback.

<Note title="">
- **Related callbacks**: After the [startPublishingStream] function is called successfully, determine if the SDK actually collected audio data by the callback function [onPublisherCapturedAudioFirstFrame], determine if the SDK actually collected video data by the callback function [onPublisherCapturedVideoFirstFrame].
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 2.4.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherVideoSizeChanged:channel:"
  prototype="- (void)onPublisherVideoSizeChanged:(CGSize) size channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The callback triggered when the video capture resolution changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| size | CGSize | Video capture resolution |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio and video stream, you can ignore this parameter. |

**Details**

When the audio and video stream is not published [startPublishingStream] or previewed [startPreview] for the first time, the publishing stream or preview first time, that is, the engine of the audio and video module inside the SDK is started, the video data of the local device will be collected, and the collection resolution will change at this time.

<Note title="">
- **Trigger**: After the successful publish [startPublishingStream], the callback will be received if there is a change in the video capture resolution in the process of publishing the stream.
- **Use cases**: You can use this callback to remove the cover of the local preview UI and similar operations.You can also dynamically adjust the scale of the preview view based on the resolution of the callback.
- **Caution**: What is notified during external collection is the change in encoding resolution, which will be affected by flow control.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherRelayCDNStateUpdate:streamID:"
  prototype="- (void)onPublisherRelayCDNStateUpdate:(NSArray<[ZegoStreamRelayCDNInfo](./class#zegostreamrelaycdninfo) *> *) infoList streamID:(NSString *) streamID;"
  desc="The callback triggered when the state of relayed streaming to CDN changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| infoList | NSArray\<[ZegoStreamRelayCDNInfo](./class#zegostreamrelaycdninfo) *\> * | List of information that the current CDN is relaying. |
| streamID | NSString * | Stream ID. |

**Details**

Developers can use this callback to determine whether the audio and video streams of the relay CDN are normal. If they are abnormal, further locate the cause of the abnormal audio and video streams of the relay CDN and make corresponding disaster recovery strategies.

<Note title="">
- **Trigger**: After the ZEGO RTC server relays the audio and video streams to the CDN, this callback will be received if the CDN relay status changes, such as a stop or a retry.
- **Caution**: If you do not understand the cause of the abnormality, you can contact ZEGO technicians to analyze the specific cause of the abnormality.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherVideoEncoderChanged:toCodecID:channel:"
  prototype="- (void)onPublisherVideoEncoderChanged:([ZegoVideoCodecID](./enum#zegovideocodecid)) fromCodecID toCodecID:([ZegoVideoCodecID](./enum#zegovideocodecid)) toCodecID channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The callback triggered when the video encoder changes in publishing stream."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| fromCodecID | [ZegoVideoCodecID](./enum#zegovideocodecid) | Video codec ID before the change. |
| toCodecID | [ZegoVideoCodecID](./enum#zegovideocodecid) | Video codec ID after the change. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio and video stream, you can ignore this parameter. |

**Details**

After the H.265 automatic downgrade policy is enabled, if H.265 encoding is not supported or the encoding fails during the streaming process with H.265 encoding, the SDK will actively downgrade to the specified encoding (H.264), and this callback will be triggered at this time.
 When to trigger: In the process of streaming with H.265 encoding, if H.265 encoding is not supported or encoding fails, the SDK will actively downgrade to the specified encoding (H.264), and this callback will be triggered at this time.

<Note title="">
- **Caution**: When this callback is triggered, if local video recording or cloud recording is in progress, multiple recording files will be generated. Developers need to collect all the recording files for processing after the recording ends. When this callback is triggered, because the streaming code has changed, the developer can evaluate whether to notify the streaming end, so that the streaming end can deal with it accordingly.
</Note>

<Warning title="">
- **Available since**: 2.12.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherStreamEvent:streamID:extraInfo:"
  prototype="- (void)onPublisherStreamEvent:([ZegoStreamEvent](./enum#zegostreamevent)) eventID streamID:(NSString *) streamID extraInfo:(NSString *) extraInfo;"
  desc="The callback triggered when publishing stream."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| eventID | [ZegoStreamEvent](./enum#zegostreamevent) | Publish stream event ID |
| streamID | NSString * | Stream ID. |
| extraInfo | NSString * | extra info. it is in JSON format. Included information includes "url" for address, "streamProtocol" for stream protocol, including rtmp, flv, avertp, hls, webrtc, etc. "netProtocol" for network protocol, including tcp, udp, quic, "resourceType" for resource type , including cdn, rtc, l3. |

**Details**

After start publishing stream, this callback will return the current stream address, resource type and protocol-related information.
 When to trigger: Publish and retry publish events.

<Note title="">
- **Caution**: None.
</Note>

<Warning title="">
- **Available since**: 2.18.0
</Warning>
</ParamField>
<ParamField
  name="onVideoObjectSegmentationStateChanged:channel:errorCode:"
  prototype="- (void)onVideoObjectSegmentationStateChanged:([ZegoObjectSegmentationState](./enum#zegoobjectsegmentationstate)) state channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel errorCode:(int) errorCode;"
  desc="The video object segmentation state changed."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoObjectSegmentationState](./enum#zegoobjectsegmentationstate) | Object segmentation state. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio and video stream, you can ignore this parameter. |
| errorCode | int | The error code corresponding to the status change of the object segmentation, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |

**Details**

The object segmentation state of the stream publishing end changes.
 When to trigger: When [enableVideoObjectSegmentation] enables or disables object segmentation, notify the developer whether to enable object segmentation according to the actual state.

<Note title="">
- **Caution**: This callback depends on enabling preview or stream publishing.
</Note>

<Warning title="">
- **Available since**: 3.4.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherLowFpsWarning:channel:"
  prototype="- (void)onPublisherLowFpsWarning:([ZegoVideoCodecID](./enum#zegovideocodecid)) codecID channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="Video encoding low frame rate warning."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| codecID | [ZegoVideoCodecID](./enum#zegovideocodecid) | Video codec ID. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio and video stream, you can ignore this parameter. |

**Details**

Video encoding low frame rate warning.
 When to trigger: This callback triggered by low frame rate in video encoding.

<Note title="">
- **Caution**: This callback is disabled by default, if necessary, please contact ZEGO technical support.
</Note>

<Warning title="">
- **Available since**: 3.8.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherDummyCaptureImagePathError:path:channel:"
  prototype="- (void)onPublisherDummyCaptureImagePathError:(int) errorCode path:(NSString *) path channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="The notification for setting the path of the static image displayed when the camera is turned off is incorrect."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | error code. |
| path | NSString * | Image path. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio and video stream, you can ignore this parameter. |

**Details**

The notification for setting the path of the static image displayed when the camera is turned off is incorrect.
 When to trigger: If the path for the image is set using [setDummyCaptureImagePath], but the image cannot be obtained during streaming, this callback will be triggered.

<Note title="">
- **Caution**: Please make sure that the image path is correct and has read permission before setting it.
</Note>

<Warning title="">
- **Available since**: 3.9.0
</Warning>
</ParamField>
<ParamField
  name="onPublisherFaceDetectInfo:channel:"
  prototype="- (void)onPublisherFaceDetectInfo:([ZegoFaceDetectionInfo](./class#zegofacedetectioninfo) *) info channel:([ZegoPublishChannel](./enum#zegopublishchannel)) channel;"
  desc="Face detection information update notification."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| info | [ZegoFaceDetectionInfo](./class#zegofacedetectioninfo) * | Face detection information. |
| channel | [ZegoPublishChannel](./enum#zegopublishchannel) | Publishing stream channel.If you only publish one audio and video stream, you can ignore this parameter. |

**Details**

The notification for face detection.
 When to trigger: Turn on face detection through the [enableFaceDetection] interface, and this callback will be triggered when the camera is started or the number of faces changes.

<Note title="">
- **Caution**: The callback is low-frequency and cannot be used with the custom video pre-processing function.
</Note>

<Warning title="">
- **Available since**: 3.20.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerStateUpdate:errorCode:extendedData:streamID:"
  prototype="- (void)onPlayerStateUpdate:([ZegoPlayerState](./enum#zegoplayerstate)) state errorCode:(int) errorCode extendedData:(nullable NSDictionary *) extendedData streamID:(NSString *) streamID;"
  desc="The callback triggered when the state of stream playing changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoPlayerState](./enum#zegoplayerstate) | State of playing stream. |
| errorCode | int | The error code corresponding to the status change of the playing stream, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |
| extendedData | nullable NSDictionary * | Extended Information with state updates. As the standby, only an empty json table is currently returned. |
| streamID | NSString * | stream ID. |

**Details**

After calling the [startPlayingStream] successfully, the notification of the playing stream state change can be obtained through the callback function. You can roughly judge the user's downlink network status based on whether the state parameter is in [PLAY_REQUESTING].
 When to trigger:  After calling the [startPublishingStream], this callback is triggered when a playing stream's state changed.

<Note title="">
- **Related callbacks**: After calling the [startPublishingStream] successfully, the notification of the publish stream state change can be obtained through the callback function [onPublisherStateUpdate]. You can roughly judge the user's uplink network status based on whether the state parameter is in [PUBLISH_REQUESTING].
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerSwitched:streamID:"
  prototype="- (void)onPlayerSwitched:(int) errorCode streamID:(NSString *) streamID;"
  desc="Switch playing stream callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | The error code corresponding to the result of the switch stream, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |
| streamID | NSString * | The stream ID currently playing. |

**Details**

After calling the [switchPlayingStream] successfully, the result of switching streams can be obtained through this callback function.
 When to trigger:  After calling the [switchPlayingStream], this callback is triggered when a switch stream request ultimately succeeds or fails.

<Note title="">
- **Related callbacks**: After the stream switching is successful or failed, you can obtain the current streaming status through the callback function [onPlayerStateUpdate].
</Note>

<Warning title="">
- **Available since**: 3.16.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerQualityUpdate:streamID:"
  prototype="- (void)onPlayerQualityUpdate:([ZegoPlayStreamQuality](./class#zegoplaystreamquality) *) quality streamID:(NSString *) streamID;"
  desc="Callback for current stream playing quality."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| quality | [ZegoPlayStreamQuality](./class#zegoplaystreamquality) * | Playing stream quality, including audio and video framerate, bitrate, RTT, etc. |
| streamID | NSString * | Stream ID. |

**Details**

After calling the [startPlayingStream] successfully, the callback will be received every 3 seconds default(If you need to change the time, please contact the instant technical support to configure). Through the callback, the collection frame rate, bit rate, RTT, packet loss rate and other quality data can be obtained, and the health of the played audio and video streams can be monitored in real time.

<Note title="">
- **Use cases**: You can monitor the health of the played audio and video streams in real time according to the quality parameters of the callback function, in order to show the downlink network status on the device UI in real time.
- **Caution**: If you does not know how to use the various parameters of the callback function, you can only focus on the level field of the quality parameter, which is a comprehensive value describing the downlink network calculated by SDK based on the quality parameters.
- **Related callbacks**: After calling the [startPublishingStream] successfully, a callback [onPublisherQualityUpdate] will be received every 3 seconds. You can monitor the health of publish streams in real time based on quality data such as frame rate, code rate, RTT, packet loss rate, etc.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerMediaEvent:streamID:"
  prototype="- (void)onPlayerMediaEvent:([ZegoPlayerMediaEvent](./enum#zegoplayermediaevent)) event streamID:(NSString *) streamID;"
  desc="The callback triggered when a media event occurs during streaming playing."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| event | [ZegoPlayerMediaEvent](./enum#zegoplayermediaevent) | Specific events received when playing the stream. |
| streamID | NSString * | Stream ID. |

**Details**

This callback is used to receive pull streaming events.

<Note title="">
- **Use cases**: You can use this callback to make statistics on stutters or to make friendly displays in the UI of the app.
 When to trigger:  After calling the [startPublishingStream], this callback is triggered when an event such as audio and video jamming and recovery occurs in the playing stream.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerRecvAudioFirstFrame:"
  prototype="- (void)onPlayerRecvAudioFirstFrame:(NSString *) streamID;"
  desc="The callback triggered when the first audio frame is received."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, this callback will be called when SDK received the first frame of audio data.

<Note title="">
- **Use cases**: Developer can use this callback to count time consuming that take the first frame time or update the UI for playing stream.
- **Trigger**: This callback is triggered when SDK receives the first frame of audio data from the network.
- **Related callbacks**: After a successful call to [startPlayingStream], the callback function [onPlayerRecvVideoFirstFrame] determines whether the SDK has received the video data, and the callback [onPlayerRenderVideoFirstFrame] determines whether the SDK has rendered the first frame of the received video data.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerSyncRecvAudioFirstFrame:"
  prototype="- (void)onPlayerSyncRecvAudioFirstFrame:(NSString *) streamID;"
  desc="The callback triggered when the first audio frame is received. Please do not call the SDK interface in the callback thread."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, this callback will be called when SDK received the first frame of audio data.

<Note title="">
- **Use cases**: Developer can use this callback to count time consuming that take the first frame time or update the UI for playing stream.
- **Trigger**: This callback is triggered when SDK receives the first frame of audio data from the network.
- **Related callbacks**: After a successful call to [startPlayingStream], the callback function [onPlayerSyncRecvVideoFirstFrame] determines whether the SDK has received the video data, and the callback [onPlayerSyncRecvRenderVideoFirstFrame] determines whether the SDK has rendered the first frame of the received video data.
</Note>

<Warning title="">
- **Available since**: 3.22.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerRecvVideoFirstFrame:"
  prototype="- (void)onPlayerRecvVideoFirstFrame:(NSString *) streamID;"
  desc="The callback triggered when the first video frame is received."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, this callback will be called when SDK received the first frame of video data.

<Note title="">
- **Use cases**: Developer can use this callback to count time consuming that take the first frame time or update the UI for playing stream.
- **Trigger**: This callback is triggered when SDK receives the first frame of video data from the network.
- **Related callbacks**: After a successful call to [startPlayingStream], the callback function [onPlayerRecvAudioFirstFrame] determines whether the SDK has received the audio data, and the callback [onPlayerRenderVideoFirstFrame] determines whether the SDK has rendered the first frame of the received video data.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerSyncRecvVideoFirstFrame:"
  prototype="- (void)onPlayerSyncRecvVideoFirstFrame:(NSString *) streamID;"
  desc="The callback triggered when the first video frame is received. Please do not call the SDK interface in the callback thread."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, this callback will be called when SDK received the first frame of video data.

<Note title="">
- **Use cases**: Developer can use this callback to count time consuming that take the first frame time.
- **Trigger**: This callback is triggered when SDK receives the first frame of video data from the network.
- **Related callbacks**: After a successful call to [startPlayingStream], the callback function [onPlayerSyncRecvAudioFirstFrame] determines whether the SDK has received the audio data, and the callback [onPlayerSyncRecvRenderVideoFirstFrame] determines whether the SDK has rendered the first frame of the received video data.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 3.8.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerRenderVideoFirstFrame:"
  prototype="- (void)onPlayerRenderVideoFirstFrame:(NSString *) streamID;"
  desc="The callback triggered when the first video frame is rendered."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, this callback will be called when SDK rendered the first frame of video data.

<Note title="">
- **Use cases**: Developer can use this callback to count time consuming that take the first frame time or update the UI for playing stream.
- **Trigger**: This callback is triggered when SDK rendered the first frame of video data from the network.
- **Related callbacks**: After a successful call to [startPlayingStream], the callback function [onPlayerRecvAudioFirstFrame] determines whether the SDK has received the audio data, and the callback [onPlayerRecvVideoFirstFrame] determines whether the SDK has received the video data.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerSyncRecvRenderVideoFirstFrame:"
  prototype="- (void)onPlayerSyncRecvRenderVideoFirstFrame:(NSString *) streamID;"
  desc="The callback triggered when the first video frame is rendered. Please do not call the SDK interface in the callback thread."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, this callback will be called when SDK rendered the first frame of video data.

<Note title="">
- **Use cases**: Developer can use this callback to count time consuming that take the first frame time or update the UI for playing stream.
- **Trigger**: This callback is triggered when SDK rendered the first frame of video data from the network.
- **Related callbacks**: After a successful call to [startPlayingStream], the callback function [onPlayerSyncRecvAudioFirstFrame] determines whether the SDK has received the audio data, and the callback [onPlayerSyncRecvVideoFirstFrame] determines whether the SDK has received the video data.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 3.22.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerRenderCameraVideoFirstFrame:"
  prototype="- (void)onPlayerRenderCameraVideoFirstFrame:(NSString *) streamID;"
  desc="Calls back when the stream playing end renders the first frame of the video from the remote camera."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |

**Details**

After calling the [startPlayingStream] function to pull the stream successfully, the SDK will receive this callback after pulling the stream and rendering the first frame of remote camera video data.

<Note title="">
- **Use cases**: Developer can use this callback to count time consuming that take the first frame time or update the UI for playing stream.
- **Trigger**: After the remote [enableCamera] enables the camera, or after [mutePublishStreamVideo] is true and starts to send video data, the SDK will receive this callback after playing the stream and rendering the first frame of the remote camera video data.
- **Caution**: It is only applicable when the remote end uses the camera to push the stream. Only applicable to RTC publishing and playing streaming scenarios.
- **Related callbacks**: After a successful call to [startPlayingStream], the callback [onPlayerRecvVideoFirstFrame] determines whether the SDK has received the video data.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 3.0.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerRenderMultiViewFirstFrame:viewContext:"
  prototype="- (void)onPlayerRenderMultiViewFirstFrame:(NSString *) streamID viewContext:(NSString *) viewContext;"
  desc="When multiple playing canvas are set, the callback will be triggered after one view renders the first frame of the video."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |
| viewContext | NSString * | Context of view. |

**Details**

Call [startPlayingStream] to play stream and call [setPlayingCanvas] to add multiple views, this callback will be called when SDK rendered the first frame of video data.

<Note title="">
- **Use cases**: Developer can use this callback to update the UI for playing stream.
- **Trigger**: The user playing the mixed stream, adds multiple views through [setPlayingCanvas], and sets the correct viewContext parameters, which will trigger this callback after the corresponding view has rendered the first frame of video data.
- **Related callbacks**: After a successful call to [startPlayingStream], the callback function [onPlayerRecvAudioFirstFrame] determines whether the SDK has received the audio data, and the callback [onPlayerRecvVideoFirstFrame] determines whether the SDK has received the video data.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 3.21.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerVideoSizeChanged:streamID:"
  prototype="- (void)onPlayerVideoSizeChanged:(CGSize) size streamID:(NSString *) streamID;"
  desc="The callback triggered when the stream playback resolution changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| size | CGSize | Video decoding resolution |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, the play resolution will change when the first frame of video data is received, or when the publisher changes the encoding resolution by calling [setVideoConfig], or when the network traffic control strategies work.

<Note title="">
- **Use cases**: Developers can update or switch the UI components that actually play the stream based on the final resolution of the stream.
- **Trigger**: After the [startPlayingStream] function is called successfully, this callback is triggered when the video resolution changes while playing the stream.
- **Caution**: 
 1. If the stream is only audio data, the callback will not be triggered. 
 2. If the user enables custom video rendering of the ZegoVideoBufferTypeEncodedData type, the SDK is not responsible for video decoding and will not trigger this callback.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerRecvSEI:streamID:"
  prototype="- (void)onPlayerRecvSEI:(NSData *) data streamID:(NSString *) streamID;"
  desc="The callback triggered when Supplemental Enhancement Information is received."
  suffixes={["deprecated"]}
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | NSData * | SEI content. |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, when the remote stream sends SEI (such as directly calling [sendSEI], audio mixing with SEI data, and sending custom video capture encoded data with SEI, etc.), the local end will receive this callback.

<Note title="">
- **Trigger**: After the [startPlayingStream] function is called successfully, when the remote stream sends SEI, the local end will receive this callback.
- **Caution**: 
 1.The customer can directly operate the UI control in this callback function. 
 2. Since the video encoder itself generates an SEI with a payload type of 5, or when a video file is used for publishing, such SEI may also exist in the video file. Therefore, if the developer needs to filter out this type of SEI, it can be before [createEngine] Call [ZegoEngineConfig.advancedConfig("unregister_sei_filter", "XXXXX")]. Among them, unregister_sei_filter is the key, and XXXXX is the uuid filter string to be set. 
 3. When [mutePlayStreamVideo] or [muteAllPlayStreamVideo] is called to set only the audio stream to be pulled, the SEI will not be received.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>

<Warning title="Deprecated">It will be deprecated in version 3.4.0 and above. Please use the [onPlayerSyncRecvSEI] function instead.</Warning>
</ParamField>
<ParamField
  name="onPlayerSyncRecvSEI:streamID:"
  prototype="- (void)onPlayerSyncRecvSEI:(NSData *) data streamID:(NSString *) streamID;"
  desc="The callback triggered when Supplemental Enhancement Information is received synchronously."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | NSData * | SEI content. |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, when the remote stream sends SEI (such as directly calling [sendSEI], audio mixing with SEI data, and sending custom video capture encoded data with SEI, etc.), the local end will receive this callback.

<Note title="">
- **Trigger**: After the [startPlayingStream] function is called successfully, when the remote stream sends SEI, the local end will receive this callback.
- **Caution**: 
 1. Since the video encoder itself generates an SEI with a payload type of 5, or when a video file is used for publishing, such SEI may also exist in the video file. Therefore, if the developer needs to filter out this type of SEI, it can be before [createEngine] Call [ZegoEngineConfig.advancedConfig("unregister_sei_filter", "XXXXX")]. Among them, unregister_sei_filter is the key, and XXXXX is the uuid filter string to be set. 
 2. When [mutePlayStreamVideo] or [muteAllPlayStreamVideo] is called to set only the audio stream to be pulled, the SEI will not be received.
</Note>

<Warning title="">
- **Available since**: 3.4.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerRecvMediaSideInfo:"
  prototype="- (void)onPlayerRecvMediaSideInfo:([ZegoMediaSideInfo](./class#zegomediasideinfo) *) info;"
  desc="The callback triggered when Supplemental Enhancement Information is received synchronously."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| info | [ZegoMediaSideInfo](./class#zegomediasideinfo) * | SEI Callback info. |

**Details**

After the [startPlayingStream] function is called successfully, when the remote stream sends SEI (such as directly calling [sendSEI], audio mixing with SEI data, and sending custom video capture encoded data with SEI, etc.), the local end will receive this callback.

<Note title="">
- **Trigger**: After the [startPlayingStream] function is called successfully, when the remote stream sends SEI, the local end will receive this callback.
- **Caution**: 1. Since the video encoder itself generates an SEI with a payload type of 5, or when a video file is used for publishing, such SEI may also exist in the video file. Therefore, if the developer needs to filter out this type of SEI, it can be before [createEngine] Call [ZegoEngineConfig.advancedConfig("unregister_sei_filter", "XXXXX")]. Among them, unregister_sei_filter is the key, and XXXXX is the uuid filter string to be set. 2. When [mutePlayStreamVideo] or [muteAllPlayStreamVideo] is called to set only the audio stream to be pulled, the SEI will not be received.
</Note>

<Warning title="">
- **Available since**: 3.9.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerRecvAudioSideInfo:streamID:"
  prototype="- (void)onPlayerRecvAudioSideInfo:(NSData *) data streamID:(NSString *) streamID;"
  desc="Receive the audio side information content of the remote stream."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| data | NSData * | Audio side information content. |
| streamID | NSString * | Stream ID. |

**Details**

After the [startPlayingStream] function is called successfully, when the remote stream sends audio side information, the local end will receive this callback.

<Note title="">
- **Trigger**: After the [startPlayingStream] function is called successfully, when the remote stream sends audio side information, the local end will receive this callback.
- **Caution**: 1. When [mutePlayStreamAudio] or [muteAllPlayStreamAudio] is called to set only the video stream to be pulled, the audio side information not be received. 2. Due to factors such as the network, the received data may be missing, but the order is guaranteed.
- **Related APIs**: Send audio side information by the [sendAudioSideInfo] function.
</Note>

<Warning title="">
- **Available since**: 2.19.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerLowFpsWarning:streamID:"
  prototype="- (void)onPlayerLowFpsWarning:([ZegoVideoCodecID](./enum#zegovideocodecid)) codecID streamID:(NSString *) streamID;"
  desc="Playing stream low frame rate warning."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| codecID | [ZegoVideoCodecID](./enum#zegovideocodecid) | Video codec ID. |
| streamID | NSString * | Stream ID. |

**Details**

This callback triggered by low frame rate when playing stream.
 When to trigger: This callback triggered by low frame rate when playing stream.

<Note title="">
- **Caution**: If the callback is triggered when the user playing the h.265 stream, you can stop playing the h.265 stream and switch to play the H.264 stream.
</Note>

<Warning title="">
- **Available since**: 2.14.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerStreamEvent:streamID:extraInfo:"
  prototype="- (void)onPlayerStreamEvent:([ZegoStreamEvent](./enum#zegostreamevent)) eventID streamID:(NSString *) streamID extraInfo:(NSString *) extraInfo;"
  desc="The callback triggered when playing stream."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| eventID | [ZegoStreamEvent](./enum#zegostreamevent) | Play stream event ID |
| streamID | NSString * | Stream ID. |
| extraInfo | NSString * | extra info. it is in JSON format. Included information includes "url" for address, "streamProtocol" for stream protocol, including rtmp, flv, avertp, hls, webrtc, etc. "netProtocol" for network protocol, including tcp, udp, quic, "resourceType" for resource type , including cdn, rtc, l3. |

**Details**

After start playing stream, this callback will return the current stream address, resource type and protocol-related information.
 When to trigger: Play and retry play events.

<Note title="">
- **Caution**: None.
</Note>

<Warning title="">
- **Available since**: 2.18.0
</Warning>
</ParamField>
<ParamField
  name="onPlayerVideoSuperResolutionUpdate:state:errorCode:"
  prototype="- (void)onPlayerVideoSuperResolutionUpdate:(NSString *) streamID state:([ZegoSuperResolutionState](./enum#zegosuperresolutionstate)) state errorCode:(int) errorCode;"
  desc="Playing stream video super resolution enabled state changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| streamID | NSString * | Stream ID. |
| state | [ZegoSuperResolutionState](./enum#zegosuperresolutionstate) | Video super resolution state. |
| errorCode | int | Error code, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |

**Details**

Playing stream video super resolution enabled state changes.
 When to trigger: When [enableVideoSuperResolution] enables or disables video super resolution, the developer will be notified whether to enable video super resolution according to the actual situation when playing stream video rendering.

<Note title="">
- **Caution**: None.
</Note>

<Warning title="">
- **Available since**: 3.0.0
</Warning>
</ParamField>
<ParamField
  name="onMixerRelayCDNStateUpdate:taskID:"
  prototype="- (void)onMixerRelayCDNStateUpdate:(NSArray<[ZegoStreamRelayCDNInfo](./class#zegostreamrelaycdninfo) *> *) infoList taskID:(NSString *) taskID;"
  desc="The callback triggered when the state of relayed streaming of the mixed stream to CDN changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| infoList | NSArray\<[ZegoStreamRelayCDNInfo](./class#zegostreamrelaycdninfo) *\> * | List of information that the current CDN is being mixed. |
| taskID | NSString * | The mixing task ID. Value range: the length does not exceed 256. Caution: This parameter is in string format and cannot contain URL keywords, such as 'http' and '?' etc., otherwise the push and pull flow will fail. Only supports numbers, English characters and'~','!','@','$','%','^','&','*','(',')','_' ,'+','=','-','`',';',''',',','.','&lt;','&gt;','\'. |

**Details**

The general situation of the mixing task on the ZEGO RTC server will push the output stream to the CDN using the RTMP protocol, and the state change during the push process will be notified from the callback function.

<Note title="">
- **Use cases**: It is often used when multiple video images are required to synthesize a video using mixed streaming, such as education, live teacher and student images.
 When to trigger: After the developer calls the [startMixerTask] function to start mixing, when the ZEGO RTC server pushes the output stream to the CDN, there is a state change.
- **Related callbacks**: Develop can get the sound update notification of each single stream in the mixed stream through [OnMixerSoundLevelUpdate].
- **Related APIs**: Develop can start a mixed flow task through [startMixerTask].
</Note>

<Warning title="">
- **Available since**: 1.2.1
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onMixerSoundLevelUpdate:"
  prototype="- (void)onMixerSoundLevelUpdate:(NSDictionary<NSNumber *, NSNumber *> *) soundLevels;"
  desc="The callback triggered when the sound level of any input stream changes in the stream mixing process."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| soundLevels | NSDictionary\<NSNumber *, NSNumber *\> * | The sound key-value pair of each single stream in the mixed stream, the key is the soundLevelID of each single stream, and the value is the sound value of the corresponding single stream. Value range: The value range of value is 0.0 ~ 100.0 (This value only represents the range of the sound level value returned by the callback, not the precision.). |

**Details**

Developers can use this callback to display the effect of which stream’s anchor is talking on the UI interface of the mixed stream of the audience.

<Note title="">
- **Use cases**: It is often used when multiple video images are required to synthesize a video using mixed streaming, such as education, live teacher and student images.
 When to trigger: After the developer calls the [startPlayingStream] function to start playing the mixed stream. Callback notification period is 100 ms.
- **Related callbacks**: [OnMixerRelayCDNStateUpdate] can be used to get update notification of mixing stream repost CDN status.
- **Related APIs**: Develop can start a mixed flow task through [startMixerTask].
</Note>

<Warning title="">
- **Available since**: 1.2.1
- **Restrictions**: The callback is triggered every 100 ms, and the trigger frequency cannot be set.Due to the high frequency of this callback, please do not perform time-consuming tasks or UI operations in this callback to avoid stalling.
</Warning>
</ParamField>
<ParamField
  name="onAutoMixerSoundLevelUpdate:"
  prototype="- (void)onAutoMixerSoundLevelUpdate:(NSDictionary<NSString *, NSNumber *> *) soundLevels;"
  desc="The callback triggered when the sound level of any input stream changes in the auto stream mixing process."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| soundLevels | NSDictionary\<NSString *, NSNumber *\> * | Sound level hash map, key is the streamID of every single stream in this mixer stream, value is the sound level value of that single stream, value ranging from 0.0 to 100.0 (This value only represents the range of the sound level value returned by the callback, not the precision.). |

**Details**

According to this callback, user can obtain the sound level information of each stream pulled during auto stream mixing.

<Note title="">
- **Use cases**: Often used in voice chat room scenarios.Users can use this callback to show which streamer is speaking when an audience pulls a mixed stream.
- **Trigger**: Call [startPlayingStream] function to pull the stream.
- **Related APIs**: Users can call [startAutoMixerTask] function to start an auto stream mixing task.Users can call [stopAutoMixerTask] function to stop an auto stream mixing task.
</Note>

<Warning title="">
- **Available since**: 2.10.0
</Warning>
</ParamField>
<ParamField
  name="onAudioDeviceStateChanged:updateType:deviceType:"
  prototype="- (void)onAudioDeviceStateChanged:([ZegoDeviceInfo](./class#zegodeviceinfo) *) deviceInfo updateType:([ZegoUpdateType](./enum#zegoupdatetype)) updateType deviceType:([ZegoAudioDeviceType](./enum#zegoaudiodevicetype)) deviceType;"
  desc="The callback triggered when there is a change to audio devices (i.e. new device added or existing device deleted)."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| deviceInfo | [ZegoDeviceInfo](./class#zegodeviceinfo) * | Audio device information |
| updateType | [ZegoUpdateType](./enum#zegoupdatetype) | Update type (add/delete) |
| deviceType | [ZegoAudioDeviceType](./enum#zegoaudiodevicetype) | Audio device type |

**Details**

only for macOS; This callback is triggered when an audio device is added or removed from the system. By listening to this callback, users can update the sound collection or output using a specific device when necessary.
</ParamField>
<ParamField
  name="onAudioDeviceVolumeChanged:deviceType:deviceID:"
  prototype="- (void)onAudioDeviceVolumeChanged:(int) volume deviceType:([ZegoAudioDeviceType](./enum#zegoaudiodevicetype)) deviceType deviceID:(NSString *) deviceID;"
  desc="The callback triggered when there is a change of the volume for the audio devices."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| volume | int | audio device volume |
| deviceType | [ZegoAudioDeviceType](./enum#zegoaudiodevicetype) | Audio device type |
| deviceID | NSString * | Audio device ID |

**Details**

Audio device volume change event callback.
 When to trigger: After calling the [startAudioDeviceVolumeMonitor] function to start the device volume monitor, and the volume of the monitored audio device changes.

<Note title="">
- **Platform differences**: Only supports Windows and macOS.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onVideoDeviceStateChanged:updateType:"
  prototype="- (void)onVideoDeviceStateChanged:([ZegoDeviceInfo](./class#zegodeviceinfo) *) deviceInfo updateType:([ZegoUpdateType](./enum#zegoupdatetype)) updateType;"
  desc="The callback triggered when there is a change to video devices (i.e. new device added or existing device deleted)."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| deviceInfo | [ZegoDeviceInfo](./class#zegodeviceinfo) * | Audio device information |
| updateType | [ZegoUpdateType](./enum#zegoupdatetype) | Update type (add/delete) |

**Details**

only for macOS; This callback is triggered when a video device is added or removed from the system. By listening to this callback, users can update the video capture using a specific device when necessary.
</ParamField>
<ParamField
  name="onCapturedSoundLevelUpdate:"
  prototype="- (void)onCapturedSoundLevelUpdate:(NSNumber *) soundLevel;"
  desc="The local captured audio sound level callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| soundLevel | NSNumber * | Locally captured sound level value, ranging from 0.0 to 100.0 (This value only represents the range of the sound level value returned by the callback, not the precision.) . |

**Details**

The local captured audio sound level callback.

<Note title="">
- **Trigger**: After you start the sound level monitor by calling [startSoundLevelMonitor].
- **Caution**:   1. The callback notification period is the parameter value set when the [startSoundLevelMonitor] is called. The callback value is the default value of 0 When you have not called the interface [startPublishingStream] and [startPreview].
  2. This callback is a high-frequency callback, and it is recommended not to do complex logic processing inside the callback.
- **Related APIs**: Start sound level monitoring via [startSoundLevelMonitor]. Monitoring remote played audio sound level by callback [onRemoteSoundLevelUpdate]
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onCapturedSoundLevelInfoUpdate:"
  prototype="- (void)onCapturedSoundLevelInfoUpdate:([ZegoSoundLevelInfo](./class#zegosoundlevelinfo) *) soundLevelInfo;"
  desc="The local captured audio sound level callback, supported vad."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| soundLevelInfo | [ZegoSoundLevelInfo](./class#zegosoundlevelinfo) * | Locally captured sound level value, ranging from 0.0 to 100.0 (This value only represents the range of the sound level value returned by the callback, not the precision.). |

**Details**

The local captured audio sound level callback.

<Note title="">
- **Trigger**: After you start the sound level monitor by calling [startSoundLevelMonitor].
- **Caution**:   1. The callback notification period is the parameter value set when the [startSoundLevelMonitor] is called.
  2. This callback is a high-frequency callback, and it is recommended not to do complex logic processing inside the callback.
- **Related APIs**: Start sound level monitoring via [startSoundLevelMonitor]. Monitoring remote played audio sound level by callback [onRemoteSoundLevelUpdate] or [onRemoteSoundLevelInfoUpdate].
</Note>

<Warning title="">
- **Available since**: 2.10.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteSoundLevelUpdate:"
  prototype="- (void)onRemoteSoundLevelUpdate:(NSDictionary<NSString *, NSNumber *> *) soundLevels;"
  desc="The remote playing streams audio sound level callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| soundLevels | NSDictionary\<NSString *, NSNumber *\> * | Remote sound level hash map, key is the streamID, value is the sound level value of the corresponding streamID, value ranging from 0.0 to 100.0 (This value only represents the range of the sound level value returned by the callback, not the precision.). |

**Details**

The remote playing streams audio sound level callback.

<Note title="">
- **Trigger**: After you start the sound level monitor by calling [startSoundLevelMonitor], you are in the state of playing the stream [startPlayingStream].
- **Caution**: The callback notification period is the parameter value set when the [startSoundLevelMonitor] is called.
- **Related APIs**: Start sound level monitoring via [startSoundLevelMonitor]. Monitoring local captured audio sound by callback [onCapturedSoundLevelUpdate] or [onCapturedSoundLevelInfoUpdate].
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteSoundLevelInfoUpdate:"
  prototype="- (void)onRemoteSoundLevelInfoUpdate:(NSDictionary<NSString *, [ZegoSoundLevelInfo](./class#zegosoundlevelinfo) *> *) soundLevelInfos;"
  desc="The remote playing streams audio sound level callback, supported vad."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| soundLevelInfos | NSDictionary\<NSString *, [ZegoSoundLevelInfo](./class#zegosoundlevelinfo) *\> * | Remote sound level hash map, key is the streamID, value is the sound level value of the corresponding streamID, value ranging from 0.0 to 100.0 (This value only represents the range of the sound level value returned by the callback, not the precision.). |

**Details**

The remote playing streams audio sound level callback.

<Note title="">
- **Trigger**: After you start the sound level monitor by calling [startSoundLevelMonitor], you are in the state of playing the stream [startPlayingStream].
- **Caution**: The callback notification period is the parameter value set when the [startSoundLevelMonitor] is called.
- **Related APIs**: Start sound level monitoring via [startSoundLevelMonitor]. Monitoring local captured audio sound by callback [onCapturedSoundLevelUpdate] or [onCapturedSoundLevelInfoUpdate].
</Note>

<Warning title="">
- **Available since**: 2.10.0
</Warning>
</ParamField>
<ParamField
  name="onCapturedAudioSpectrumUpdate:"
  prototype="- (void)onCapturedAudioSpectrumUpdate:(NSArray<NSNumber *> *) audioSpectrum;"
  desc="The local captured audio spectrum callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| audioSpectrum | NSArray\<NSNumber *\> * | Locally captured audio spectrum value list. Spectrum value range is [0-2^30]. |

**Details**

The local captured audio spectrum callback.

<Note title="">
- **Trigger**: After you start the audio spectrum monitor by calling [startAudioSpectrumMonitor].
- **Caution**: The callback notification period is the parameter value set when the [startAudioSpectrumMonitor] is called. The callback value is the default value of 0 When you have not called the interface [startPublishingStream] and [startPreview].
- **Related APIs**: Start audio spectrum monitoring via [startAudioSpectrumMonitor]. Monitoring remote played audio spectrum by callback [onRemoteAudioSpectrumUpdate]
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteAudioSpectrumUpdate:"
  prototype="- (void)onRemoteAudioSpectrumUpdate:(NSDictionary<NSString *, NSArray<NSNumber *> *> *) audioSpectrums;"
  desc="The remote playing streams audio spectrum callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| audioSpectrums | NSDictionary\<NSString *, NSArray\<NSNumber *\> *\> * | Remote audio spectrum hash map, key is the streamID, value is the audio spectrum list of the corresponding streamID. Spectrum value range is [0-2^30] |

**Details**

The remote playing streams audio spectrum callback.

<Note title="">
- **Trigger**: After you start the audio spectrum monitor by calling [startAudioSpectrumMonitor], you are in the state of playing the stream [startPlayingStream].
- **Caution**: The callback notification period is the parameter value set when the [startAudioSpectrumMonitor] is called.
- **Related APIs**: Start audio spectrum monitoring via [startAudioSpectrumMonitor]. Monitoring local played audio spectrum by callback [onCapturedAudioSpectrumUpdate].
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onLocalDeviceExceptionOccurred:deviceType:deviceID:"
  prototype="- (void)onLocalDeviceExceptionOccurred:([ZegoDeviceExceptionType](./enum#zegodeviceexceptiontype)) exceptionType deviceType:([ZegoDeviceType](./enum#zegodevicetype)) deviceType deviceID:(NSString *) deviceID;"
  desc="The callback triggered when a local device exception occurred."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| exceptionType | [ZegoDeviceExceptionType](./enum#zegodeviceexceptiontype) | The type of the device exception. |
| deviceType | [ZegoDeviceType](./enum#zegodevicetype) | The type of device where the exception occurred. |
| deviceID | NSString * | Device ID. Currently, only desktop devices are supported to distinguish different devices; for mobile devices, this parameter will return an empty string. |

**Details**

The callback triggered when a local device exception occurs.

<Note title="">
- **Trigger**: This callback is triggered when the function of the local audio or video device is abnormal.
</Note>

<Warning title="">
- **Available since**: 2.15.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteCameraStateUpdate:streamID:"
  prototype="- (void)onRemoteCameraStateUpdate:([ZegoRemoteDeviceState](./enum#zegoremotedevicestate)) state streamID:(NSString *) streamID;"
  desc="The callback triggered when the state of the remote camera changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoRemoteDeviceState](./enum#zegoremotedevicestate) | Remote camera status. |
| streamID | NSString * | Stream ID. |

**Details**

The callback triggered when the state of the remote camera changes.

<Note title="">
- **Use cases**: Developers of 1v1 education scenarios or education small class scenarios and similar scenarios can use this callback notification to determine whether the camera device of the remote publishing stream device is working normally, and preliminary understand the cause of the device problem according to the corresponding state.
- **Trigger**: When the state of the remote camera device changes, such as switching the camera, by monitoring this callback, it is possible to obtain an event related to the far-end camera, which can be used to prompt the user that the video may be abnormal.
- **Caution**: This callback will not be called back when the remote stream is play from the CDN, or when custom video acquisition is used at the peer.
  This function is only available in ZegoExpressVideo SDK!
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteMicStateUpdate:streamID:"
  prototype="- (void)onRemoteMicStateUpdate:([ZegoRemoteDeviceState](./enum#zegoremotedevicestate)) state streamID:(NSString *) streamID;"
  desc="The callback triggered when the state of the remote microphone changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoRemoteDeviceState](./enum#zegoremotedevicestate) | Remote microphone status. |
| streamID | NSString * | Stream ID. |

**Details**

The callback triggered when the state of the remote microphone changes.

<Note title="">
- **Use cases**: Developers of 1v1 education scenarios or education small class scenarios and similar scenarios can use this callback notification to determine whether the microphone device of the remote publishing stream device is working normally, and preliminary understand the cause of the device problem according to the corresponding state.
- **Trigger**: When the state of the remote microphone device is changed, such as switching a microphone, etc., by listening to the callback, it is possible to obtain an event related to the remote microphone, which can be used to prompt the user that the audio may be abnormal.
- **Caution**: This callback will not be called back when the remote stream is play from the CDN, or when custom audio acquisition is used at the peer (But the stream is not published to the ZEGO RTC server.).
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onRemoteSpeakerStateUpdate:streamID:"
  prototype="- (void)onRemoteSpeakerStateUpdate:([ZegoRemoteDeviceState](./enum#zegoremotedevicestate)) state streamID:(NSString *) streamID;"
  desc="The callback triggered when the state of the remote speaker changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| state | [ZegoRemoteDeviceState](./enum#zegoremotedevicestate) | Remote speaker status. |
| streamID | NSString * | Stream ID. |

**Details**

The callback triggered when the state of the remote microphone changes.

<Note title="">
- **Use cases**: Developers of 1v1 education scenarios or education small class scenarios and similar scenarios can use this callback notification to determine whether the speaker device of the remote publishing stream device is working normally, and preliminary understand the cause of the device problem according to the corresponding state.
- **Trigger**: When the state of the remote speaker device changes, such as switching the speaker, by monitoring this callback, you can get events related to the remote speaker.
- **Caution**: This callback will not be called back when the remote stream is play from the CDN.
</Note>

<Warning title="">
- **Available since**: 1.1.0
</Warning>
</ParamField>
<ParamField
  name="onAudioRouteChange:"
  prototype="- (void)onAudioRouteChange:([ZegoAudioRoute](./enum#zegoaudioroute)) audioRoute;"
  desc="Callback for device's audio route changed."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| audioRoute | [ZegoAudioRoute](./enum#zegoaudioroute) | Current audio route. |

**Details**

Callback for device's audio route changed.

<Note title="">
- **Trigger**: This callback will be called when there are changes in audio routing such as earphone plugging, speaker and receiver switching, etc.
- **Platform differences**: Only supports iOS and Android.
</Note>

<Warning title="">
- **Available since**: 1.20.0
</Warning>
</ParamField>
<ParamField
  name="onAudioVADStateUpdate:monitorType"
  prototype="- (void)onAudioVADStateUpdate:([ZegoAudioVADType](./enum#zegoaudiovadtype))state monitorType:([ZegoAudioVADStableStateMonitorType](./enum#zegoaudiovadstablestatemonitortype))type;"
  desc="Callback for audio VAD  stable state update."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| type | [ZegoAudioVADStableStateMonitorType](./enum#zegoaudiovadstablestatemonitortype) | audio VAD monitor type |
| state | [ZegoAudioVADType](./enum#zegoaudiovadtype) | VAD result |

**Details**

Callback for audio VAD  stable state update.
 When to trigger: the [startAudioVADStableStateMonitor] function must be called to start the audio VAD monitor and you must be in a state where it is publishing the audio and video stream or be in [startPreview] state.

<Note title="">
- **Related APIs**: [startAudioVADStableStateMonitor], [stopAudioVADStableStateMonitor].
</Note>

<Warning title="">
- **Available since**: 2.14.0
- **Restrictions**: The callback notification period is 3 seconds.
</Warning>
</ParamField>
<ParamField
  name="onRecvRoomTransparentMessage:roomID:"
  prototype="- (void)onRecvRoomTransparentMessage:([ZegoRoomRecvTransparentMessage](./class#zegoroomrecvtransparentmessage)*) message roomID:(NSString *) roomID;"
  desc="The callback triggered when Barrage Messages are received."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| message | [ZegoRoomRecvTransparentMessage](./class#zegoroomrecvtransparentmessage)* | recv message. |
| roomID | NSString * | Room ID. Value range: The maximum length is 128 bytes. |

**Details**

This callback is used to receive room passthrough messages sent by other users in the same room.
 When to trigger: After calling [loginRoom] to login to the room, this callback is triggered if there is a user in the room who sends a message received by the specified client through the [sendTransparentMessage] function.

<Note title="">
- **Caution**: Barrage messages sent by users themselves will not be notified through this callback. When there are a large number of barrage messages in the room, the notification may be delayed, and some barrage messages may be lost.
- **Related callbacks**: A bullet-screen message sent by the user himself is not notified by this callback. [sendTransparentMessage] specifies that only a server callback is used. This callback is not triggered.
</Note>

<Warning title="">
- **Available since**: 1.5.0
- **Restrictions**: None
</Warning>
</ParamField>
<ParamField
  name="onIMRecvBroadcastMessage:roomID:"
  prototype="- (void)onIMRecvBroadcastMessage:(NSArray<[ZegoBroadcastMessageInfo](./class#zegobroadcastmessageinfo) *> *) messageList roomID:(NSString *) roomID;"
  desc="The callback triggered when Broadcast Messages are received."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| messageList | NSArray\<[ZegoBroadcastMessageInfo](./class#zegobroadcastmessageinfo) *\> * | List of received messages. Value range: Up to 50 messages can be received each time. |
| roomID | NSString * | Room ID. Value range: The maximum length is 128 bytes. |

**Details**

This callback is used to receive broadcast messages sent by other users in the same room.

<Note title="">
- **Use cases**: Generally used in the live room.
 When to trigger: After calling [loginRoom] to log in to the room, if a user in the room sends a broadcast message via [sendBroadcastMessage] function, this callback will be triggered.
- **Caution**: The broadcast message sent by the user will not be notified through this callback.
- **Related callbacks**: You can receive room barrage messages through [onIMRecvBarrageMessage], and you can receive room custom signaling through [onIMRecvCustomCommand].
</Note>

<Warning title="">
- **Available since**: 1.2.1
- **Restrictions**: None
</Warning>
</ParamField>
<ParamField
  name="onIMRecvBarrageMessage:roomID:"
  prototype="- (void)onIMRecvBarrageMessage:(NSArray<[ZegoBarrageMessageInfo](./class#zegobarragemessageinfo) *> *) messageList roomID:(NSString *) roomID;"
  desc="The callback triggered when Barrage Messages are received."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| messageList | NSArray\<[ZegoBarrageMessageInfo](./class#zegobarragemessageinfo) *\> * | List of received messages. Value range: Up to 50 messages can be received each time. |
| roomID | NSString * | Room ID. Value range: The maximum length is 128 bytes. |

**Details**

This callback is used to receive barrage messages sent by other users in the same room.

<Note title="">
- **Use cases**: Generally used in scenarios where there is a large number of messages sent and received in the room and the reliability of the messages is not required, such as live barrage.
 When to trigger: After calling [loginRoom] to log in to the room, if a user in the room sends a barrage message through the [sendBarrageMessage] function, this callback will be triggered.
- **Caution**: Barrage messages sent by users themselves will not be notified through this callback. When there are a large number of barrage messages in the room, the notification may be delayed, and some barrage messages may be lost.
- **Related callbacks**: Develop can receive room broadcast messages through [onIMRecvBroadcastMessage], and can receive room custom signaling through [onIMRecvCustomCommand].
</Note>

<Warning title="">
- **Available since**: 1.5.0
- **Restrictions**: None
</Warning>
</ParamField>
<ParamField
  name="onIMRecvCustomCommand:fromUser:roomID:"
  prototype="- (void)onIMRecvCustomCommand:(NSString *) command fromUser:([ZegoUser](./class#zegouser) *) fromUser roomID:(NSString *) roomID;"
  desc="The callback triggered when a Custom Command is received."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| command | NSString * | Command content received.Value range: The maximum length is 1024 bytes. |
| fromUser | [ZegoUser](./class#zegouser) * | Sender of the command. |
| roomID | NSString * | Room ID. Value range: The maximum length is 128 bytes. |

**Details**

This callback is used to receive custom command sent by other users in the same room.

<Note title="">
- **Use cases**: Generally used in the live room.
 When to trigger: After calling [loginRoom] to log in to the room, if other users in the room send custom signaling to the developer through the [sendCustomCommand] function, this callback will be triggered.
- **Caution**: The custom command sent by the user himself will not be notified through this callback.
- **Related callbacks**: You can receive room broadcast messages through [onIMRecvBroadcastMessage], and you can receive room barrage message through [onIMRecvBarrageMessage].
</Note>

<Warning title="">
- **Available since**: 1.2.1
- **Restrictions**: None
</Warning>
</ParamField>
<ParamField
  name="onPerformanceStatusUpdate:"
  prototype="- (void)onPerformanceStatusUpdate:([ZegoPerformanceStatus](./class#zegoperformancestatus) *) status;"
  desc="System performance monitoring callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| status | [ZegoPerformanceStatus](./class#zegoperformancestatus) * | System performance monitoring status. |

**Details**

System performance monitoring callback. The callback notification period is the value of millisecond parameter set by call [startPerformanceMonitor].

<Note title="">
- **Use cases**: Monitor system performance can help user quickly locate and solve performance problems and improve user experience.
 When to trigger: It will triggered after [createEngine], and call [startPerformanceMonitor] to start system performance monitoring.
</Note>

<Warning title="">
- **Available since**: 1.19.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onNetworkModeChanged:"
  prototype="- (void)onNetworkModeChanged:([ZegoNetworkMode](./enum#zegonetworkmode)) mode;"
  desc="Network mode changed callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mode | [ZegoNetworkMode](./enum#zegonetworkmode) | Current network mode. |

**Details**

Network mode changed callback.
 When to trigger: This callback will be triggered when the device's network mode changed, such as switched from WiFi to 5G, or when network is disconnected.

<Warning title="">
- **Available since**: 1.20.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onNetworkSpeedTestError:type:"
  prototype="- (void)onNetworkSpeedTestError:(int) errorCode type:([ZegoNetworkSpeedTestType](./enum#zegonetworkspeedtesttype)) type;"
  desc="Network speed test error callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | Network speed test error code. Please refer to error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |
| type | [ZegoNetworkSpeedTestType](./enum#zegonetworkspeedtesttype) | Uplink or downlink. |

**Details**

Network speed test error callback.

<Note title="">
- **Use cases**: This function can be used to detect whether the network environment is suitable for pushing/pulling streams with specified bitrates.
 When to 
- **Trigger**: If an error occurs during the speed test, such as: can not connect to speed test server, this callback will be triggered.
</Note>

<Warning title="">
- **Available since**: 1.20.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onNetworkSpeedTestQualityUpdate:type:"
  prototype="- (void)onNetworkSpeedTestQualityUpdate:([ZegoNetworkSpeedTestQuality](./class#zegonetworkspeedtestquality) *) quality type:([ZegoNetworkSpeedTestType](./enum#zegonetworkspeedtesttype)) type;"
  desc="Network speed test quality callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| quality | [ZegoNetworkSpeedTestQuality](./class#zegonetworkspeedtestquality) * | Network speed test quality. |
| type | [ZegoNetworkSpeedTestType](./enum#zegonetworkspeedtesttype) | Uplink or downlink. |

**Details**

Network speed test quality callback when the network can be connected.

<Note title="">
- **Use cases**: This function can be used to detect whether the network environment is suitable for pushing/pulling streams with specified bitrates.
 When to 
- **Trigger**: After call [startNetworkSpeedTest] start network speed test, this callback will be triggered. The trigger period is determined by the parameter value specified by call [startNetworkSpeedTest], default value is 3 seconds 
- **Caution**: When error occurred during network speed test or [stopNetworkSpeedTest] called, this callback will not be triggered.
</Note>

<Warning title="">
- **Available since**: 1.20.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onNetworkQuality:upstreamQuality:downstreamQuality:"
  prototype="- (void)onNetworkQuality:(NSString *) userID upstreamQuality:([ZegoStreamQualityLevel](./enum#zegostreamqualitylevel)) upstreamQuality downstreamQuality:([ZegoStreamQualityLevel](./enum#zegostreamqualitylevel)) downstreamQuality;"
  desc="The network quality callback of users who are publishing in the room."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| userID | NSString * | User ID, empty means local user |
| upstreamQuality | [ZegoStreamQualityLevel](./enum#zegostreamqualitylevel) | Upstream network quality |
| downstreamQuality | [ZegoStreamQualityLevel](./enum#zegostreamqualitylevel) | Downstream network quality |

**Details**

The uplink and downlink network callbacks of the local and remote users, that would be called by default every two seconds for the local and each playing remote user's network quality.
  Versions 2.10.0 to 2.13.1:
  1. Developer must both publish and play streams before you receive your own network quality callback.
  2. When playing a stream, the publish end has a play stream and the publish end is in the room where it is located, then the user's network quality will be received.
  Versions 2.14.0 to 2.21.1:
  1. As long as you publish or play a stream, you will receive your own network quality callback.
  2. When you play a stream, the publish end is in the room where you are, and you will receive the user's network quality.
  Version 2.22.0 and above:
  1. As long as you publish or play a stream, you will receive your own network quality callback.
  2. When you play a stream, the publish end is in the room where you are, and you will receive the user's network quality.
  3. Estimate the network conditions of the remote stream publishing user. If the remote stream publishing user loses one heartbeat, the network quality will be called back as unknown; if the remote stream publishing user's heartbeat loss reaches 3 Second, call back its network quality to die.
 Use case: When the developer wants to analyze the network condition on the link, or wants to know the network condition of local and remote users.
 When to

<Note title="">
- **Trigger**: After publishing a stream by called [startPublishingStream] or playing a stream by called [startPlayingStream].
</Note>

<Warning title="">
- **Available since**: 2.10.0
</Warning>
</ParamField>
<ParamField
  name="onRtcStats:"
  prototype="- (void)onRtcStats:([ZegoRtcStatsInfo](./class#zegortcstatsinfo) *) info;"
  desc="RTC network statistics callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| info | [ZegoRtcStatsInfo](./class#zegortcstatsinfo) * | statistical information. |

**Details**

RTC network statistics callback.

<Note title="">
- **Use cases**: When a developer wants to analyze the local network situation.
 When to 
- **Trigger**: After calling [startPublishingStream] to start pushing the RTC stream, it will call back the upstream statistics. After calling [startPlayingStream] to start playing the RTC or L3 stream, it will call back the downlink statistics. The default callback period is 3 seconds.
- **Caution**: None.
</Note>

<Warning title="">
- **Available since**: 3.20.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="onNetworkTimeSynchronized"
  prototype="- (void)onNetworkTimeSynchronized;"
  desc="Successful callback of network time synchronization."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
<Warning title="">
- **Available since**: 2.12.0
 This callback is triggered when internal network time synchronization completes after a developer calls [createEngine].
</Warning>
</ParamField>
<ParamField
  name="onRequestDumpData"
  prototype="- (void)onRequestDumpData;"
  desc="Request to dump data."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
<Note title="">
- **Trigger**: When the customer reports back the problem, ZEGO expects the user to dump the data to analyze the audio / video processing problem, which will trigger this callback.
</Note>

<Warning title="">
- **Available since**: 3.10.0
 When to 
</Warning>
</ParamField>
<ParamField
  name="onRequestUploadDumpData:takePhoto:"
  prototype="- (void)onRequestUploadDumpData:(NSString *) dumpDir takePhoto:(BOOL) takePhoto;"
  desc="Request to dump data."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| dumpDir | NSString * | Dump data dir. |
| takePhoto | BOOL | Need to take photo when uploading dump data |

<Note title="">
- **Trigger**: When the customer reports back the problem, ZEGO expects the user to dump the data to analyze the audio / video processing problem, which will trigger this callback.
</Note>

<Warning title="">
- **Available since**: 3.11.0
 When to 
</Warning>
</ParamField>
<ParamField
  name="onStartDumpData:"
  prototype="- (void)onStartDumpData:(int) errorCode;"
  desc="Callback when starting to dump data."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | Error code. |

<Note title="">
- **Trigger**: This callback is triggered when [startDumpData] is called.
</Note>

<Warning title="">
- **Available since**: 3.10.0
 When to 
</Warning>
</ParamField>
<ParamField
  name="onStopDumpData:dumpDir:"
  prototype="- (void)onStopDumpData:(int) errorCode dumpDir:(NSString *) dumpDir;"
  desc="Callback when stopping to dump data."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | Error code. |
| dumpDir | NSString * | Dump data dir. |

<Note title="">
- **Trigger**: This callback is triggered when [stopDumpData] is called.
</Note>

<Warning title="">
- **Available since**: 3.10.0
 When to 
</Warning>
</ParamField>
<ParamField
  name="onUploadDumpData:"
  prototype="- (void)onUploadDumpData:(int) errorCode;"
  desc="Callback after uploading the dump data."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| errorCode | int | Error code. |

<Note title="">
- **Trigger**: When [uploadDumpData] is called, this callback will be triggered after SDK executes the upload task.
</Note>

<Warning title="">
- **Available since**: 3.10.0
 When to 
</Warning>
</ParamField>
<ParamField
  name="onMobileScreenCaptureExceptionOccurred:"
  prototype="- (void)onMobileScreenCaptureExceptionOccurred:([ZegoScreenCaptureExceptionType](./enum#zegoscreencaptureexceptiontype))exceptionType API_AVAILABLE(ios (12.0));"
  desc="The callback triggered when a screen capture source exception occurred."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| exceptionType | [ZegoScreenCaptureExceptionType](./enum#zegoscreencaptureexceptiontype) | Screen capture exception type. |

**Details**

The callback triggered when the mobile screen capture source exception occurred.

<Note title="">
- **Trigger**: This callback is triggered when an exception occurs after the mobile screen capture started.
- **Caution**: The callback does not actually take effect until call [setEventHandler] to set.
</Note>

<Warning title="">
- **Available since**: 3.6.0
- **Restrictions**: Only available on Android and iOS.
</Warning>
</ParamField>
<ParamField
  name="onMobileScreenCaptureStart"
  prototype="- (void)onMobileScreenCaptureStart API_AVAILABLE(ios (12.0));"
  desc="The callback triggered when start screen capture."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoEventHandler"
  parent_type="class">
The callback triggered when calling the start mobile screen capture.

<Note title="">
- **Trigger**: After calling [startScreenCapture], this callback will be triggered when starting screen capture successfully, and [onScreenCaptureExceptionOccurred] will be triggered when failing.
- **Caution**: The callback does not actually take effect until call [setEventHandler] to set.
</Note>

<Warning title="">
- **Available since**: 3.16.0
- **Restrictions**: Only available on Android and iOS.
</Warning>
</ParamField>

## ZegoMediaPlayerAudioHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="mediaPlayer:audioFrameData:dataLength:param"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer audioFrameData:(unsigned char *)data dataLength:(unsigned int)dataLength param:([ZegoAudioFrameParam](./class#zegoaudioframeparam) *)param;"
  desc="The callback triggered when the media player throws out audio frame data."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerAudioHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| data | unsigned char * | Raw data of audio frames. |
| dataLength | unsigned int | Data length. |
| param | [ZegoAudioFrameParam](./class#zegoaudioframeparam) * | audio frame flip mode. |

**Details**

The callback triggered when the media player throws out audio frame data.

<Note title="">
- **Trigger**: The callback is generated when the media player starts playing.
- **Caution**: The callback does not actually take effect until call [setAudioHandler] to set.
</Note>

<Warning title="">
- **Available since**: 1.3.4
- **Restrictions**: When playing copyrighted music, this callback will be disabled by default. If necessary, please contact ZEGO technical support.
</Warning>
</ParamField>

## ZegoMediaPlayerEventHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="mediaPlayer:stateUpdate:errorCode"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer stateUpdate:([ZegoMediaPlayerState](./enum#zegomediaplayerstate))state errorCode:(int)errorCode;"
  desc="MediaPlayer playback status callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| state | [ZegoMediaPlayerState](./enum#zegomediaplayerstate) | Media player status. |
| errorCode | int | Error code, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |

**Details**

MediaPlayer playback status callback.

<Note title="">
- **Trigger**: The callback triggered when the state of the media player changes.
</Note>

<Warning title="">
- **Available since**: 1.3.4
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:networkEvent"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer networkEvent:([ZegoMediaPlayerNetworkEvent](./enum#zegomediaplayernetworkevent))networkEvent;"
  desc="The callback triggered when the network status of the media player changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| networkEvent | [ZegoMediaPlayerNetworkEvent](./enum#zegomediaplayernetworkevent) | Network status event. |

**Details**

The callback triggered when the network status of the media player changes.

<Note title="">
- **Trigger**: When the media player is playing network resources, this callback will be triggered when the status change of the cached data.
- **Related APIs**: [setNetWorkBufferThreshold].
</Note>

<Warning title="">
- **Available since**: 1.3.4
- **Restrictions**: The callback will only be triggered when the network resource is played.
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:playingProgress"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer playingProgress:(unsigned long long)millisecond;"
  desc="The callback to report the current playback progress of the media player."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| millisecond | unsigned long long | Progress in milliseconds. |

**Details**

The callback triggered when the network status of the media player changes. Set the callback interval by calling [setProgressInterval]. When the callback interval is set to 0, the callback is stopped. The default callback interval is 1 second.

<Note title="">
- **Trigger**: When the media player is playing network resources, this callback will be triggered when the status change of the cached data.
- **Related APIs**: [setProgressInterval].
</Note>

<Warning title="">
- **Available since**: 1.3.4
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:renderingProgress"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer renderingProgress:(unsigned long long)millisecond;"
  desc="The callback to report the current rendering progress of the media player."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| millisecond | unsigned long long | Progress in milliseconds. |

**Details**

The callback to report the current rendering progress of the media player. Set the callback interval by calling [setProgressInterval]. When the callback interval is set to 0, the callback is stopped. The default callback interval is 1 second.

<Note title="">
- **Trigger**: This callback will be triggered when the media player starts playing resources.
- **Related APIs**: [setProgressInterval].
</Note>

<Warning title="">
- **Available since**: 3.8.0
- **Restrictions**: None.
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:videoSizeChanged"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer videoSizeChanged:(CGSize)size;"
  desc="The callback triggered when when the resolution of the playback video changes."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| size | CGSize | Resolution. |

**Details**

The callback triggered when when the resolution of the playback video changes.

<Note title="">
- **Trigger**: When the media player is playing a video resource, This callback will be triggered when playback starts and the resolution of the video changes.
</Note>

<Warning title="">
- **Available since**: 3.11.0
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:recvSEI"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer recvSEI:(NSData *)data;"
  desc="The callback triggered when the media player got media side info."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| data |  | SEI content. |

**Details**

The callback triggered when the media player got media side info.

<Note title="">
- **Trigger**: When the media player starts playing media files, the callback is triggered if the SEI is resolved to the media file.
- **Caution**: The callback does not actually take effect until call [setEventHandler] to set.
</Note>

<Warning title="">
- **Available since**: 2.2.0
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:soundLevelUpdate"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer soundLevelUpdate:(float)soundLevel;"
  desc="The callback of sound level update."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| soundLevel | float | Sound level value, value range: [0.0, 100.0] (This value only represents the range of the sound level value returned by the callback, not the precision.). |

**Details**

The callback of sound level update.

<Note title="">
- **Trigger**: The callback frequency is specified by [EnableSoundLevelMonitor].
- **Caution**: The callback does not actually take effect until call [setEventHandler] to set.
- **Related APIs**: To monitor this callback, you need to enable it through [EnableSoundLevelMonitor].
</Note>

<Warning title="">
- **Available since**: 2.15.0
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:frequencySpectrumUpdate"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer frequencySpectrumUpdate:(NSArray<NSNumber *> *)spectrumList;"
  desc="The callback of frequency spectrum update."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| spectrumList | NSArray\<NSNumber *\> * | Locally captured frequency spectrum value list. Spectrum value range is [0-2^30]. |

**Details**

The callback of frequency spectrum update.

<Note title="">
- **Trigger**: The callback frequency is specified by [EnableFrequencySpectrumMonitor].
- **Caution**: The callback does not actually take effect until call [setEventHandler] to set.
- **Related APIs**: To monitor this callback, you need to enable it through [EnableFrequencySpectrumMonitor].
</Note>

<Warning title="">
- **Available since**: 2.15.0
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:firstFrameEvent"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer firstFrameEvent:([ZegoMediaPlayerFirstFrameEvent](./enum#zegomediaplayerfirstframeevent))event;"
  desc="The callback triggered when the media player plays the first frame."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| event | [ZegoMediaPlayerFirstFrameEvent](./enum#zegomediaplayerfirstframeevent) | The first frame callback event type. |

**Details**

The callback triggered when the media player plays the first frame.

<Note title="">
- **Trigger**: This callback is generated when the media player starts playing.
- **Caution**: The callback does not actually take effect until call [setEventHandler] to set.
- **Related APIs**: You need to call the [setPlayerCanvas] interface to set the view for the media player in order to receive the video first frame event callback.
</Note>

<Warning title="">
- **Available since**: 3.5.0
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:localCacheError:resource:cachedFile"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer localCacheError:(int)errorCode resource:(NSString *)resource cachedFile:(NSString *)cachedFile;"
  desc="The callback triggered when the media player caches http/https network resource locally."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| errorCode | int | Error code. |
| resource | NSString * | Played resource |
| cachedFile | NSString * | Cached file |

**Details**

The callback triggered when the media player caches http/https network resource locally.

<Note title="">
- **Trigger**: This callback occurs after the media player caches http/https network resources.
- **Caution**: This callback will not take effect until the [enableLocalCache] API is called and the http/https network resources are played.
- **Related APIs**: Need to call the [enableLocalCache] interface.
</Note>

<Warning title="">
- **Available since**: 3.12.0
</Warning>
</ParamField>

## ZegoMediaPlayerVideoHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="mediaPlayer:videoFrameRawData:dataLength:param"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer videoFrameRawData:(const unsigned char * _Nonnull * _Nonnull)data dataLength:(unsigned int *)dataLength param:([ZegoVideoFrameParam](./class#zegovideoframeparam) *)param;"
  desc="The callback triggered when the media player throws out video frame data."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerVideoHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| data | const unsigned char * _Nonnull * _Nonnull | Raw data of video frames (eg: RGBA only needs to consider data[0], I420 needs to consider data[0,1,2]). |
| dataLength | unsigned int * | Data length (eg: RGBA only needs to consider dataLength[0], I420 needs to consider dataLength[0,1,2]). |
| param | [ZegoVideoFrameParam](./class#zegovideoframeparam) * | Video frame flip mode. |

**Details**

The callback triggered when the media player throws out video frame data.

<Note title="">
- **Trigger**: The callback is generated when the media player starts playing.
- **Caution**: The callback does not actually take effect until call [setVideoHandler] to set.
</Note>

<Warning title="">
- **Available since**: 1.3.4
- **Restrictions**: When playing copyrighted music, this callback will be disabled by default. If necessary, please contact ZEGO technical support.
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:videoFrameRawData:dataLength:param:extraInfo"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer videoFrameRawData:(const unsigned char * _Nonnull * _Nonnull)data dataLength:(unsigned int *)dataLength param:([ZegoVideoFrameParam](./class#zegovideoframeparam) *)param extraInfo:(NSDictionary *)extraInfo;"
  desc="The callback triggered when the media player throws out video frame data, with additional information for the video frame."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerVideoHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object. |
| data | const unsigned char * _Nonnull * _Nonnull | Raw data of video frames (eg: RGBA only needs to consider data[0], I420 needs to consider data[0,1,2]). |
| dataLength | unsigned int * | Data length (eg: RGBA only needs to consider dataLength[0], I420 needs to consider dataLength[0,1,2]). |
| param | [ZegoVideoFrameParam](./class#zegovideoframeparam) * | Video frame flip mode. |
| extraInfo | nullable NSDictionary * | Video frame extra info. |

**Details**

The callback triggered when the media player throws out video frame data.

<Note title="">
- **Trigger**: The callback is generated when the media player starts playing.
- **Caution**: The callback does not actually take effect until call [setVideoHandler] to set.
</Note>

<Warning title="">
- **Available since**: 2.16.0
- **Restrictions**: When playing copyrighted music, this callback will be disabled by default. If necessary, please contact ZEGO technical support.
</Warning>
</ParamField>
<ParamField
  name="mediaPlayer:videoFramePixelBuffer:param"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer videoFramePixelBuffer:(CVPixelBufferRef)buffer param:([ZegoVideoFrameParam](./class#zegovideoframeparam) *)param;"
  desc="The callback triggered when the media player throws out video frame data (in CVPixelBuffer format)."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerVideoHandler"
  parent_type="class">
| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object |
| buffer | CVPixelBufferRef | video data of CVPixelBuffer format |
| param | [ZegoVideoFrameParam](./class#zegovideoframeparam) * | video data frame param |
</ParamField>
<ParamField
  name="mediaPlayer:videoFramePixelBuffer:param:extraInfo"
  prototype="- (void)mediaPlayer:([ZegoMediaPlayer](./class#zegomediaplayer) *)mediaPlayer videoFramePixelBuffer:(CVPixelBufferRef)buffer param:([ZegoVideoFrameParam](./class#zegovideoframeparam) *)param extraInfo:(NSDictionary *)extraInfo;"
  desc="The callback triggered when the media player throws out video frame data (in CVPixelBuffer format)."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoMediaPlayerVideoHandler"
  parent_type="class">
| Name | Type | Description |
| --- | --- | --- |
| mediaPlayer | [ZegoMediaPlayer](./class#zegomediaplayer) * | Callback player object |
| buffer | CVPixelBufferRef | video data of CVPixelBuffer format |
| param | [ZegoVideoFrameParam](./class#zegovideoframeparam) * | video data frame param |
| extraInfo | nullable NSDictionary * | video data frame extra info. |
</ParamField>

## ZegoRangeAudioEventHandler

*Declared in `ZegoExpressEventHandler.h`*

### Methods
<ParamField
  name="rangeAudio:microphoneStateUpdate:errorCode"
  prototype="- (void)rangeAudio:([ZegoRangeAudio](./class#zegorangeaudio) *)rangeAudio microphoneStateUpdate:([ZegoRangeAudioMicrophoneState](./enum#zegorangeaudiomicrophonestate))state errorCode:(int)errorCode;"
  desc="Range audio microphone state callback."
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoRangeAudioEventHandler"
  parent_type="class">
**Parameters**

| Name | Type | Description |
| --- | --- | --- |
| rangeAudio | [ZegoRangeAudio](./class#zegorangeaudio) * | Range audio instance that triggers this callback. |
| state | [ZegoRangeAudioMicrophoneState](./enum#zegorangeaudiomicrophonestate) | The use state of the range audio. |
| errorCode | int | Error code, please refer to the error codes document [https://docs.zegocloud.com/en/5548.html](https://docs.zegocloud.com/en/5548.html) for details. |

**Details**

The status change notification of the microphone, starting to send audio is an asynchronous process, and the state switching in the middle is called back through this function.
 When to

<Note title="">
- **Trigger**: After the [enableMicrophone] function.
- **Caution**: 1. It must be monitored before the [enableMicrophone] function is called. 2. The callback is not triggered when the [enableMicrophone] is stopped normally, and the Off state is triggered only when the [enableMicrophone] is stopped abnormally.
</Note>

<Warning title="">
- **Available since**: 2.11.0
</Warning>
</ParamField>

---
articleID: 14167
date: '2026-02-06'
---

import { getPlatformData2 } from "/snippets/utils-content-parser.js"
import { ZIMTextMessageMap, ZIMMultipleMessageMap, ZIMCustomMessageMap, ZIMImageMessageMap, ZIMFileMessageMap, ZIMAudioMessageMap, ZIMVideoMessageMap, ZIMCombineMessageMap, pinMessageMap, queryPinnedMessageListMap, messagePinStatusChangedMap, setEventHandlerMap } from "/snippets/zim/const-linkEN.mdx"

export const ZIMMessagePinnedCallbackMap = {
  'default,window,iOS,mac': <a href='@ZIMMessagePinnedCallback' target='_blank'>ZIMMessagePinnedCallback</a>,
  'Web,UTS': <a href='@-ZIMMessagePinnedResult' target='_blank'>ZIMMessagePinnedResult</a>,
  'Flutter': <a href='https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMMessagePinnedResult-class.html' target='_blank'>ZIMMessagePinnedResult</a>,
}

export const ZIMPinnedMessageListQueriedCallbackMap = {
  'default,window,iOS,mac': <a href='@ZIMPinnedMessageListQueriedCallback' target='_blank'>ZIMPinnedMessageListQueriedCallback</a>,
  'Web,UTS': <a href='@-ZIMPinnedMessageListQueriedResult' target='_blank'>ZIMPinnedMessageListQueriedResult</a>,
  'Flutter': <a href='https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMPinnedMessageListQueriedResult-class.html' target='_blank'>ZIMPinnedMessageListQueriedResult</a>,
}

# Message pinned to top

- - -

## Introduction

<Note title="Note"> 

To use this feature, please subscribe to the Enterprise plan.
</Note>

ZIM SDK supports adding specific messages to the pinned message list in a conversation, and conversation members can query messages in the pinned message list at any time. This feature can be used to pin important messages at the top of the conversation for quick viewing by conversation members.

## Listen for message pinned status changes

:::if{props.platform="undefined|window|iOS|mac"}
Conversation members register {getPlatformData2(props,setEventHandlerMap)} to listen for {getPlatformData2(props,messagePinStatusChangedMap)} callbacks to receive notifications of message pinned status changes. When other users pin messages, they can obtain information such as the status change, pinned time, and pinned operator of the pinned messages through this notification.
:::
:::if{props.platform="UTS|Flutter|Web"}
Conversation members listen for {getPlatformData2(props,messagePinStatusChangedMap)} callbacks to receive notifications of message pinned status changes. When other users pin messages, they can obtain information such as the status change, pinned time, and pinned operator of the pinned messages through this notification.
:::
:::if{props.platform=undefined}
```java title="Sample code"
// Register event
zim.setEventHandler(new ZIMEventHandler() {
    @Override
    public void onMessagePinStatusChanged(ZIM zim, ArrayList<ZIMMessagePinStatusChangeInfo> changeInfoList) {
        // When the message pinned status changes, the pinned message/unpinned message can be obtained here to refresh the UI
    }
});
```
:::
:::if{props.platform="iOS|mac"}
```objc title="Sample code"
// Register event
- (void)zim:(ZIM *)zim messagePinStatusChanged:(NSArray<ZIMMessagePinStatusChangeInfo *> *)changeInfoList {
    if (zim != self.zim) {
        return;
    }
    // When the message pinned status changes, the pinned message/unpinned message can be obtained here to refresh the UI
};
```
:::
:::if{props.platform="window"}
```cpp title="Sample code"
// Register event
void onMessagePinStatusChanged(
    ZIM *zim, const std::vector<ZIMMessagePinStatusChangeInfo> & changeInfoList) override {
    // When the message pinned status changes, the pinned message/unpinned message can be obtained here to refresh the UI
}
```
:::
:::if{props.platform="Flutter"}
```dart title="Sample code"
// Register event
ZIMEventHandler.onMessagePinStatusChanged = (zim, changeInfoList) {
    // When the message pinned status changes, the pinned message/unpinned message can be obtained here to refresh the UI
};
```
:::
:::if{props.platform="Web"}
```typescript title="Sample code"
// 注册事件
zim.on('messagePinStatusChanged', (zim: ZIM, data: ZIMEventOfMessagePinStatusChangedResult) => {
    // When the message pinned status changes, the pinned message/unpinned message can be obtained here to refresh the UI
})
```
:::
:::if{props.platform="UTS"}
```typescript title="Sample code"
// Register event
zim.onMessagePinStatusChanged((data: ZIMEventOfMessagePinStatusChangedResult) => {
    // When the message pinned status changes, the pinned message/unpinned message can be obtained here to refresh the UI
})
```
:::

## Pinned messages

Conversation members can call {getPlatformData2(props,pinMessageMap)} to pin messages sent successfully in a conversation. The supported message types are as follows:

|Message type|Description|
|-----|-----|
|{getPlatformData2(props,ZIMTextMessageMap)}|Text message|
|{getPlatformData2(props,ZIMMultipleMessageMap)}|Multiple message|
|{getPlatformData2(props,ZIMImageMessageMap)}|Image message|
|{getPlatformData2(props,ZIMFileMessageMap)}|File message|
|{getPlatformData2(props,ZIMAudioMessageMap)}|Audio message|
|{getPlatformData2(props,ZIMVideoMessageMap)}|Video message|
|{getPlatformData2(props,ZIMCombineMessageMap)}|Combined message|
|{getPlatformData2(props,ZIMCustomMessageMap)}|Custom message|

:::if{props.platform="undefined|window|iOS|mac|Flutter"}
After pinning a message, you can obtain the result of the pin operation through the {getPlatformData2(props,ZIMMessagePinnedCallbackMap)} interface.
:::

After a message is pinned, the result of the pinned operation can be obtained through {getPlatformData2(props,ZIMMessagePinnedCallbackMap)} interface.
When there is a pinned message in a conversation, conversation members can call {getPlatformData2(props,queryPinnedMessageListMap)} to query the pinned message, and obtain the pinned message list through {getPlatformData2(props,ZIMPinnedMessageListQueriedCallbackMap)} .

<Warning title="Warning">
- Message pinned to top only supports calling in one-on-one and group chat conversations.
- Each conversation only supports supporting up to ten messages. When trying to pin the eleventh message, the message with the earliest pinned time will be automatically unpinned.
- Repeating the pinning of the same message will update its pinned time.
- The pinnedUserID and pinnedTime fields in the ZIMMessage message object are only returned in {getPlatformData2(props,ZIMPinnedMessageListQueriedCallbackMap)} and {getPlatformData2(props,messagePinStatusChangedMap)} .
- Whether group pinned/unpinned actions trigger group Tips messages can be configured in the backend (by default, push is not enabled). When the push is enabled, if a message in a group chat is pinned or unpinned, group members will receive a related pinned message Tips notification, such as: "XXX pinned a message to the top". For more information, see [Receive tip messages](./Receive%20tip%20messages.mdx).
</Warning>

:::if{props.platform=undefined}
```java title="Sample code"
// Pin a text message
ZIMTextMessage messageObj; // Get from queryHistoryMessage interface

zim.pinMessage(messageObj, true, new ZIMMessagePinnedCallback() {
    @Override
    public void onMessagePinned(ZIMError errorInfo) {
        // Get the result of the pinned message operation from here
    }
});

zim.queryPinnedMessageList(conversationID, conversationType, new ZIMPinnedMessageListQueriedCallback() { 
    @Override
    public void onPinnedMessageListQueried(ArrayList<ZIMMessage> messageList, ZIMError errorInfo) { 
        // Get the pinned message list from here
    }
})
```
:::
:::if{props.platform="iOS|mac"}
```objc title="Sample code"
// Pin a text message
ZIMTextMessage *messageObj; // Get from queryHistoryMessage interface

[[ZIM getInstance] pinMessage:messageObj 
                     isPinned:YES 
                    callback:^(ZIMError * _Nonnull errorInfo) {
    // Get the result of the pinned message operation from here
}];

[[ZIM getInstance] queryPinnedMessageListByConversationID:conversationID 
                                         conversationType:conversationType 
                                                 callback:^(NSArray<ZIMMessage *> * _Nonnull messageList, ZIMError * _Nonnull errorInfo) {
    // Get the pinned message list from here
}];
```
:::
:::if{props.platform="window"}
```cpp title="示例代码"
// Pin a text message
std::shared_ptr<zim::ZIMTextMessage> message_obj; // Get from queryHistoryMessage interface

zim_->pinMessage(
    message_obj, true, 
    [=](const zim::ZIMError &errorInfo) {
        // Determine whether the operation is successful according to errorInfo
    });

zim_->queryPinnedMessageList(
    conversation_id, conversation_type,
    [=](const std::vector<std::shared_ptr<zim::ZIMMessage>> &message_list,
        const zim::ZIMError &error_info) {
        // Get the pinned message list from here
    });
```
:::
:::if{props.platform="Flutter"}
```dart title="Sample code"
// Pin a text message
ZIMTextMessage messageObj; // Get from queryHistoryMessage interface

ZIM.getInstance().pinMessage(messageObj, true)
    .then((result){
    // The operation is successful
    })
    .catchError((onError) {
    // The operation failed
    }); 

ZIM.getInstance().queryPinnedMessageList(conversationID, conversationType)
    .then((result) {
    // Get the pinned message list from here
    })
    .catchError((onError) {
    // The operation failed
    });
```
:::
:::if{props.platform="Web|UTS"}
```typescript title="Sample code"
// Pin a text message
const messageObj: ZIMMessage = {}; // Get from queryHistoryMessage interface

zim.pinMessage(messageObj, true)
    .then(() => {
        // The operation is successful
    })
    .catch((err: ZIMError) => {
        // The operation failed 
    });

zim.queryPinnedMessageList(conversationID, conversationType)
    .then((res: ZIMMessagePinnedListQueriedResult) => {
        // Get the pinned message list from here
    })
    .catch((err: ZIMError) => {
        // The operation failed
    });
```
:::

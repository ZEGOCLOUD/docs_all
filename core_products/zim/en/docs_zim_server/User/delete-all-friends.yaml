openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: ZEGO Support
    email: support@zegocloud.com
servers:
  $ref: '../shared-components.yaml#/servers'
tags:
  - user
paths:
  /:
    get:
      tags: [user]
      summary: Delete all friends
      description: |
        By calling this API, you can delete all friends for a user in one-way or two-way mode.

        Taking users A and B as examples to illustrate one-way deletion and two-way deletion:
        - One-way deletion: When user A deletes user B in one-way mode, user B is no longer a friend of user A, but user A is still a friend of user B.
        - Two-way deletion: When user A deletes user B in two-way mode, they are no longer friends with each other.


        After successfully deleting friends for users, the clients of the relevant users will receive friend list update notifications through the following ZIM SDK callback interface:

        | iOS-25% | Android-25% | macOS-25% | Windows-25% |
        |-----|---------|--------|---------|
        | [friendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~objective-c_ios~protocol~ZIMEventHandler#zim-friend-list-changed-friend-info-list) | [onFriendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~java_android~class~ZIMEventHandler#on-friend-list-changed) | [friendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~objective-c_macos~protocol~ZIMEventHandler#zim-friend-list-changed-friend-info-list) | [onFriendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~cpp_windows~class~ZIMEventHandler#on-friend-list-changed) |

        | Web-25% | Mini Program-25% | Flutter-25% | React Native-25% |
        |-----|---------|---------|---------|
        | [friendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_web~interface~ZIMEventHandler#friend-list-changed) | [friendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_wxxcx~interface~ZIMEventHandler#friend-list-changed) | [onFriendListChanged](https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMEventHandler/onFriendListChanged.html) | [friendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_uni-app~interface~ZIMEventHandler#friend-list-changed) |

        | uni-app \| uni-app x-25% | HarmonyOS-25% |
        |---------|---------|
        | [friendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_uni-app~interface~ZIMEventHandler#friend-list-changed) | [friendListChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_harmony~interface~ZIMEventHandler#friend-list-changed) |
        
        <Note title="Note">The parameter FromUserId Only supports numbers, English characters, and `'!', '#', '$', '%', '&', '(', ')', '+', '-', ':', ';', '<', '=', '.', '>', '?', '@', '[', ']', '^', '_', '{', '}', '|', '~'`</Note>
        
        <Note title="Note">QPS Limit: 20 times/s</Note>
      operationId: delete-all-friends
      parameters:
        - name: Action
          in: query
          required: true
          description: |
            > API prototype parameter
            >
            > https://zim-api.zego.im/?Action=DeleteAllFriends
          schema:
            type: string
            enum: [DeleteAllFriends]
          style: form
          explode: true
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
        - name: FromUserId
          in: query
          required: true
          description: Delete all friends for this UserId (who has logged in to the ZIM service by calling the login method on the client, or has completed registration by calling the [server-side API](/zim-server/user/batch-register-users)).
          schema:
            type: string
            maxLength: 32
            example: "zego_user"
        - name: DeleteType
          in: query
          required: true
          description: |
            Deletion type:
            - 0：Two-way deletion.
            - 1：One-way deletion.
          schema:
            type: number
            enum: [0, 1]
            example: 1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  Code:
                    type: integer
                    description: |
                      Return code.

                      The following only lists the return codes related to the API business logic. For the complete return codes, please refer to [Return codes](/zim-server/return-codes).
                      <table>
                      <tbody><tr>
                      <th>Return Code</th>
                      <th>Description</th>
                      <th>Suggested Solution</th>
                      </tr>
                      <tr>
                      <td>660000001</td>
                      <td>General business error.</td>
                      <td>Please retry or contact ZEGOCLOUD Technical Support.</td>
                      </tr>
                      <tr>
                      <td>660000002</td>
                      <td>Input parameter error。</td>
                      <td>Please check the input parameters。</td>
                      </tr>
                      <tr>
                      <td>660300005</td>
                      <td>The API call frequency exceeds the AppID-level limit.</td>
                      <td>Please try again later.</td>
                      </tr>
                      </tbody></table>
                    example: 0
                  Message:
                    type: string
                    description: Description of the request result.
                    example: "success"
                  RequestId:
                    type: string
                    description: Request ID.
                    example: "343649807833778782"

openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: ZEGO Support
    email: support@zegocloud.com

servers:
  $ref: '../shared-components.yaml#/servers'

tags:
  - user

paths:
  /:
    post:
      tags: [user]
      summary: Query group information of user joined
      description: |
        Query the group information that a user has joined.

        <Note title="QPS Limit">20 times/s</Note>
      operationId: query-group-information-of-user-joined
      parameters:
        - name: Action
          in: query
          description: |
            > API prototype parameter
            >
            > https://zim-api.zego.im/?Action=QueryGroupsInfoOfUser
          required: true
          schema:
            type: string
            enum: [QueryGroupsInfoOfUser]
          style: form
          explode: true
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [FromUserId,Limit]
              properties:
                FromUserId:
                  type: string
                  description: User ID to query.
                  maxLength: 32
                  example: "UserId123"
                Limit:
                  type: number
                  description: Number of groups returned per page. Value range is [1, 100].
                  minimum: 1
                  maximum: 100
                  example: 2
                Next:
                  type: string
                  description: Pagination identifier. Fill in an empty string for the first request to get the first page, and fill in the NextRsp value in the response result for subsequent requests to get the next page.
                  example: ""
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QueryGroupsInfoOfUserResponse'
                example:
                  Code: 0
                  Message: success
                  RequestId: "req-123456789"
                  NextRsp: "3"
                  HasJoinGroupNum: 21
                  GroupInfoList:
                    - GroupId: "groupId1"
                      GroupName: "groupName1"
                      GroupAvatar: "GroupAvatar1"
                    - GroupId: "groupId2"
                      GroupName: "groupName2"
                      GroupAvatar: "GroupAvatar2"
components:
  schemas:
    GroupInfoItem:
      type: object
      properties:
        GroupId:
          type: string
          description: Group ID.
          example: "groupId1"
        GroupName:
          type: string
          description: Group name.
          example: "groupName1"
        GroupAvatar:
          type: string
          description: Group avatar.
          example: "GroupAvatar1"
    QueryGroupsInfoOfUserResponse:
      type: object
      properties:
        Code:
          type: integer
          description: |
            Return code.

            The following only lists the return codes related to the API business logic. For the complete return codes, please refer to [Return codes](/zim-server/return-codes).
            <table>
            <tbody><tr>
            <th>Return Code</th>
            <th>Description</th>
            <th>Solution</th>
            </tr>
            <tr>
            <td>660000002</td>
            <td>Parameter error.</td>
            <td>Please check the parameters.</td>
            </tr>
            <tr>
            <td>660300005</td>
            <td>Frequency limit.</td>
            <td>Please try again later.</td>
            </tr>
            <tr>
            <td>660500002</td>
            <td>The operator user is not registered.</td>
            <td>Please register the requested user first.</td>
            </tr>
            </tbody></table>
          example: 0
        Message:
          type: string
          description: Return status information.
          example: "success"
        RequestId:
          type: string
          description: Unique request identifier.
          example: "req-123456789"
        NextRsp:
          type: string
          description: Pagination identifier for the next page. If it is 0, it means no more data.
          example: "3"
        HasJoinGroupNum:
          type: integer
          format: int64
          description: Number of groups the user has joined.
          example: 21
        GroupInfoList:
          type: array
          description: Group information list that the user has joined.
          items:
            $ref: '#/components/schemas/GroupInfoItem'

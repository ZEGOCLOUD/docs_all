---
id: check-friendships
title: "Check friendships"
description: "By calling this API, you can batch check the friend relationship between one user and up to 20 other users. If you need to increase the limit (up to 50), please contact ZEGOCLOUD Technical Support."
api: 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
info_path: core_products/zim/en/docs_zim_server/User/open-api-desc
---

<h1 className={"openapi__heading"}>Check friendships</h1>

<MethodEndpoint method={"post"} path={"/"}></MethodEndpoint>


By calling this API, you can batch check the friend relationship between one user and up to 20 other users. If you need to increase the limit (up to 50), please contact ZEGOCLOUD Technical Support.

ZEGOCLOUD supports one-sided or two-sided checking of friend relationships. Taking checking the friend relationship between user A and target user B as an example:
- One-way check: Only check whether user A's friend list has user B.
- Two-way check: Check whether user A and user B have each other in their friend lists.

The results of checking friend relationships may include:

<table>
<tbody><tr>
<th rowspan="2">Check Type</th>
<th rowspan="2">Relation</th>
<th colspan="2">Description</th>
</tr>
<tr>
<th>A's friend list has B</th>
<th>B's friend list has A</th>
</tr>
<tr>
<td rowspan="2">One-way</td>
<td>1</td>
<td>‚úñ</td>
<td>Cannot confirm</td>
</tr>
<tr>
<td>2</td>
<td>‚úîÔ∏è</td>
<td>Cannot confirm</td>
</tr>
<tr>
<td rowspan="4">Two-way</td>
<td>3</td>
<td>‚úñ</td>
<td>‚úñ</td>
</tr>
<tr>
<td>4</td>
<td>‚úîÔ∏è</td>
<td>‚úñ</td>
</tr>
<tr>
<td>5</td>
<td>‚úñ</td>
<td>‚úîÔ∏è</td>
</tr>
<tr>
<td>6</td>
<td>‚úîÔ∏è</td>
<td>‚úîÔ∏è</td>
</tr>
</tbody></table>

<Note title="Note">

The users corresponding to the parameters `FromUserId` and `UserId` have logged in to the ZIM service by calling the `login` method on the client, or have completed registration by calling the [server-side API](/zim-server/user/batch-register-users).
</Note>
<Note title="Note">QPS Limit: 20 times/s</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> API prototype parameter\n>\n> https://zim-api.zego.im/?Action=CheckFriendsRelation\n","required":true,"schema":{"type":"string","enum":["CheckFriendsRelation"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"üí°Public parameter. Application ID, assigned by ZEGOCLOUD. Get it from the [ZEGOCLOUD Admin Console](https://console.zegocloud.com/).","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"üí°Public parameter. A 16-character hexadecimal random string (hex encoding of 8-byte random number). Refer to [Signature example](/zim-server/accessing-server-apis#signature-example) for how to generate.","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"üí°Public parameter. Current Unix timestamp, in seconds. Refer to [Signature example](/zim-server/accessing-server-apis#signature-example) for how to generate, with a maximum error of 10 minutes.","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"üí°Public parameter. Signature version number.","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"üí°Public parameter. Signature, used to verify the legitimacy of the request. Refer to [Signing the requests](/zim-server/accessing-server-apis#signing-the-requests) for how to generate an API request signature.","required":true,"schema":{"type":"string"}}}></ParamsItem></ul></div></details>
<MimeTabs className={"openapi-tabs__mime request"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3><strong className={"openapi-schema__required"}>required</strong></summary><ul className={"request-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"FromUserId"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 32 characters`"} schema={{"type":"string","description":"Query friend relationships for this UserId.","maxLength":32,"example":"zego_user"}}></SchemaItem><SchemaItem collapsible={false} name={"UserIds"} required={true} schemaName={"string[]"} qualifierMessage={"**Possible values:** `<= 20`"} schema={{"type":"array","description":"List of target users to check friend relationships. Default maximum is 20.","maxItems":20,"items":{"type":"string","maxLength":32,"example":"user_id1"},"example":["user_id1","user_id2","user_id3","user_id4"]}}></SchemaItem><SchemaItem collapsible={false} name={"CheckType"} required={true} schemaName={"number"} qualifierMessage={"**Possible values:** [`0`, `1`]"} schema={{"type":"number","description":"Check type:\n- 0: Two-way check.\n- 1: One-way check.\n","enum":[0,1],"example":0}}></SchemaItem></ul></details></TabItem></MimeTabs>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>OK</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Return code.\n\nThe following only lists the Code and SubCode related to the API business logic. For complete return codes, please refer to [Global Return Codes](/zim-server/return-codes).\n> **Note**\n>\n> When you initiate a request to check the friend relationship between FromUserId and multiple users at the same time:\n> <ul><li>If the friend relationship between FromUserId and 1 or more users is successfully checked, Code will return 0. In this case, please refer to the specific information in Fails to confirm the operation result.</li>\n> <li>If the friend relationship check between FromUserId and all target users fails, Code will return the relevant return code. For details, please refer to <a href=\"/zim-server/return-codes\" target=\"_blank\">Global Return Codes</a>.</li></ul>\n\n<table>\n<tbody><tr>\n<th>Code / SubCode</th>\n<th>Description</th>\n<th>Suggested Solution</th>\n</tr>\n<tr>\n<td>660000001</td>\n<td>General business error.</td>\n<td>Please retry or contact ZEGOCLOUD Technical Support.</td>\n</tr>\n<tr>\n<td>660000002</td>\n<td>Input parameter error„ÄÇ</td>\n<td>Please check the input parameters„ÄÇ</td>\n</tr>\n<tr>\n<td>660300005</td>\n<td>The API call frequency exceeds the AppID-level limit.</td>\n<td>Please try again later.</td>\n</tr>\n</tbody></table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Description of the request result.","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Request ID.","example":"343649807833778782"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Successes</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>Check success list.</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Successfully checked the friend relationship between FromUserId and this user ID.","example":"user_id1"}}></SchemaItem><SchemaItem collapsible={false} name={"Relation"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Relationship type. For details, please refer to the function description of this API.","example":4}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Fails</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>Check failure list.<ul><li>Code is 0:</li><li>Fails is empty, indicating that the friend relationship between FromUserId and all target users is successfully checked.</li><li>Fails is not empty, indicating that the friend relationship check between FromUserId and some target users failed. Please refer to SubCode for processing.</li></ul><ul><li>Code is not 0:</li><li>Fails is empty, indicating parameter error, API frequency limit, or system error.</li><li>Fails is not empty, indicating that the friend relationship check between FromUserId and all target users failed.</li></ul></div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Failed to check the friend relationship between FromUserId and this user ID.","example":"user_id3"}}></SchemaItem><SchemaItem collapsible={false} name={"SubCode"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Specific failure return code. For complete return codes, please refer to the Code description or [Global Return Codes](/zim-server/return-codes).\n","example":660000001}}></SchemaItem><SchemaItem collapsible={false} name={"Relation"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Relationship type. This field has a value only when the request parameter CheckType is 0, which is 1 or 2. For details of related values, please refer to the function description of this API.","example":1}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"Successes\": [\n    {\n      \"UserId\": \"user_id1\",\n      \"Relation\": 4\n    }\n  ],\n  \"Fails\": [\n    {\n      \"UserId\": \"user_id3\",\n      \"SubCode\": 660000001,\n      \"Relation\": 1\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"Successes\": [\n    {\n      \"UserId\": \"user_id1\",\n      \"Relation\": 4\n    },\n    {\n      \"UserId\": \"user_id2\",\n      \"Relation\": 4\n    }\n  ],\n  \"Fails\": [\n    {\n      \"UserId\": \"user_id3\",\n      \"SubCode\": 660000001,\n      \"Relation\": 1\n    },\n    {\n      \"UserId\": \"user_id4\",\n      \"SubCode\": 660000001,\n      \"Relation\": 2\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
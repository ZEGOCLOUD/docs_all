---
id: batch-block-users
title: "AddUsersToBlacklist"
description: "By calling this API, you can batch block up to 20 users for a user, and no longer receive messages from related users. If you need to increase the limit, please contact ZEGOCLOUD Technical Support."
api: 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
info_path: core_products/zim/en/docs_zim_server/User/open-api-desc
---

<h1 className={"openapi__heading"}>AddUsersToBlacklist</h1>

<MethodEndpoint method={"post"} path={"/"}></MethodEndpoint>


By calling this API, you can batch block up to 20 users for a user, and no longer receive messages from related users. If you need to increase the limit, please contact ZEGOCLOUD Technical Support.

Each user can block a maximum of 1000 users by default. If you need to increase the limit, please contact ZEGOCLOUD Technical Support.

After successfully blocking users for a user, this user's client will receive blocklist update notifications through the following ZIM SDK callback interface:

| iOS-25% | Android-25% | macOS-25% | Windows-25% |
|-----|---------|--------|---------|
| [blacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~objective-c_ios~protocol~ZIMEventHandler#zim-blacklist-changed-user-list) | [onBlacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~java_android~class~ZIMEventHandler#on-blacklist-changed) | [blacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~objective-c_macos~protocol~ZIMEventHandler#zim-blacklist-changed-user-list) | [onBlacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~cpp_windows~class~ZIMEventHandler#on-blacklist-changed) |

| Web-25% | Mini Program-25% | Flutter-25% | React Native-25% |
|-----|---------|---------|---------|
| [blacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_web~interface~ZIMEventHandler#blacklist-changed) | [blacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_wxxcx~interface~ZIMEventHandler#blacklist-changed) | [onBlacklistChanged](https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMEventHandler/onBlacklistChanged.html) | [blacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_react-native~interface~ZIMEventHandler#blacklist-changed) |

| uni-app \| uni-app x-25% | HarmonyOS-25% |
|---------|---------|
| [blacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_uni-app~interface~ZIMEventHandler#blacklist-changed) | [blacklistChanged](https://doc-zh.zego.im/article/api?doc=zim_API~javascript_harmony~interface~ZIMEventHandler#blacklist-changed) |

<Note title="Note">

The users corresponding to the parameters `FromUserId` and `UserIds` have logged in to the ZIM service by calling the `login` method on the client, or have completed registration by calling the [server-side API](/zim-server/user/batch-register-users).
</Note>
<Note title="Note">The parameters FromUserId and UserId only support numbers, English characters, and `'!', '#', '$', '%', '&', '(', ')', '+', '-', ':', ';', '<', '=', '.', '>', '?', '@', '[', ']', '^', '_', '{', '}', '|', '~'`</Note>
<Note title="QPS Limit">20 times/s</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> API prototype parameter\n>\n> https://zim-api.zego.im/?Action=AddUsersToBlacklist\n","required":true,"schema":{"type":"string","enum":["AddUsersToBlacklist"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"ðŸ’¡Public parameter. Application ID, assigned by ZEGOCLOUD. Get it from the [ZEGOCLOUD Admin Console](https://console.zegocloud.com/).","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"ðŸ’¡Public parameter. A 16-character hexadecimal random string (hex encoding of 8-byte random number). Refer to [Signature example](/zim-server/accessing-server-apis#signature-example) for how to generate.","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"ðŸ’¡Public parameter. Current Unix timestamp, in seconds. Refer to [Signature example](/zim-server/accessing-server-apis#signature-example) for how to generate, with a maximum error of 10 minutes.","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"ðŸ’¡Public parameter. Signature version number.","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"ðŸ’¡Public parameter. Signature, used to verify the legitimacy of the request. Refer to [Signing the requests](/zim-server/accessing-server-apis#signing-the-requests) for how to generate an API request signature.","required":true,"schema":{"type":"string"}}}></ParamsItem></ul></div></details>
<MimeTabs className={"openapi-tabs__mime request"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3><strong className={"openapi-schema__required"}>required</strong></summary><ul className={"request-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"FromUserId"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 32 characters`"} schema={{"type":"string","description":"Block users for this UserId.","maxLength":32,"example":"zego_user"}}></SchemaItem><SchemaItem collapsible={false} name={"UserIds"} required={true} schemaName={"string[]"} qualifierMessage={"**Possible values:** `<= 20`"} schema={{"type":"array","description":"List of users to be blocked. The default maximum is 20 strings. Each string has a maximum length of 32 bytes.","maxItems":20,"items":{"type":"string","maxLength":32,"example":"user1"},"example":["user1","user2","user3","user4"]}}></SchemaItem></ul></details></TabItem></MimeTabs>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>OK</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"integer"} qualifierMessage={undefined} schema={{"type":"integer","description":"Return code.\n\nThe following only lists the Code and SubCode related to the API business logic. For complete return codes, please refer to [Global Return Codes](/zim-server/return-codes).\n> **Note**\n>\n> When you initiate a request to update multiple friend attributes at the same time:\n> <ul><li>If 1 or more attributes are successfully updated, Code will return 0. In this case, please refer to the specific information in FailKey to confirm the operation result.</li>\n> <li>If all friend attributes fail to be updated, Code will return the relevant return code. For details, please refer to <a href=\"/zim-server/return-codes\" target=\"_blank\">Global Return Codes</a>.</li></ul>\n\n<table>\n<tbody><tr>\n<th>Code / SubCode</th>\n<th>Description</th>\n<th>Suggested Solution</th>\n</tr>\n<tr>\n<td>660000002</td>\n<td>Input parameter errorã€‚</td>\n<td>Please check the input parametersã€‚</td>\n</tr>\n<tr>\n<td>660300005</td>\n<td>The API call frequency exceeds the AppID-level limit.</td>\n<td>Please try again later.</td>\n</tr>\n<tr>\n<td>660500002</td>\n<td>FromUserId is not registered.</td>\n<td>Please confirm whether the user is registered:<br/>If confirmed registered, please contact ZEGOCLOUD Technical Support for troubleshooting.<br/>If confirmed not registered, please register this user.</td>\n</tr>\n<tr>\n<td>6607000015</td>\n<td>The target user of the API is not registered.</td>\n<td>Please confirm whether the user is registered:<br/>If confirmed registered, please contact ZEGOCLOUD Technical Support for troubleshooting.<br/>If confirmed not registered, please register this user.</td>\n</tr>\n<tr>\n<td>660800001</td>\n<td>FromUserId is not registered.</td>\n<td>Please confirm whether the user is registered:<br/>If confirmed registered, please contact ZEGOCLOUD Technical Support for troubleshooting.<br/>If confirmed not registered, please register this user.</td>\n</tr>\n<tr>\n<td>660800037</td>\n<td>User has been blocked, no need to repeat the operation.</td>\n<td>No action required.</td>\n</tr>\n<tr>\n<td>660800038</td>\n<td>Cannot block FromUserId or remove FromUserId from the blocklist.</td>\n<td>Please modify UserIds.</td>\n</tr>\n<tr>\n<td>660800039</td>\n<td>The incoming user list exceeds the limit.</td>\n<td>Please shorten the incoming user list.</td>\n</tr>\n<tr>\n<td>660800040</td>\n<td>FromUserId's blocklist has reached the limit and cannot block more users.</td>\n<td>No action required.</td>\n</tr>\n<tr>\n<td>660800041</td>\n<td>Failed to block all specified users.</td>\n<td>Please refer to the SubCode of the response parameter ErrList for processing.</td>\n</tr>\n</tbody></table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Description of the request result.","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Request ID.","example":"343649807833778782"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>ErrList</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}><ul><li>When you initiate a request to block multiple users at the same time:</li><li>If 1 or more users are successfully blocked, Code will return 0. In this case, please refer to the specific information in ErrList to confirm the operation result.</li><li>If all specified users fail to be blocked, Code will return the relevant return code. For details, please refer to <a href="/zim-server/return-codes" target="_blank">Global Return Codes</a>.</li></ul></div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Failed to block this UserID.","example":"user1"}}></SchemaItem><SchemaItem collapsible={false} name={"SubCode"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Specific failure return code. For complete return codes, please refer to the Code description or [Global Return Codes](/zim-server/return-codes).\n","example":660000002}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"ErrList\": [\n    {\n      \"UserId\": \"user1\",\n      \"SubCode\": 660000002\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
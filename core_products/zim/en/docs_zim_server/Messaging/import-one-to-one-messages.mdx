---
id: import-one-to-one-messages
title: "Import one-to-one messages"
description: "If you are using another instant messaging service and want to integrate with ZIM, you can call this API to import the user's historical one-to-one messages (in chronological order) to ZIM."
api: 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
info_path: core_products/zim/en/docs_zim_server/Messaging/open-api-desc
---

<h1 className={"openapi__heading"}>Import one-to-one messages</h1>

<MethodEndpoint method={"post"} path={"/"}></MethodEndpoint>


If you are using another instant messaging service and want to integrate with ZIM, you can call this API to import the user's historical one-to-one messages (in chronological order) to ZIM.

A one-to-one conversation has two users (user A and B). User A may have deleted some messages, resulting in a different message list that user A can see in this conversation compared to user B. Therefore, for the same one-to-one conversation, this API needs to be called separately for users A and B.

<Note title="Note">
The parameters FromUserId and ToUserId only support numbers, English characters, and \{'!'ï¼Œ'#'ï¼Œ'$'ï¼Œ'%'ï¼Œ'&'ï¼Œ'('ï¼Œ')'ï¼Œ'+'ï¼Œ'-'ï¼Œ':'ï¼Œ';'ï¼Œ'\<'ï¼Œ'='ï¼Œ'.'ï¼Œ'\>'ï¼Œ'?'ï¼Œ'@'ï¼Œ'['ï¼Œ']'ï¼Œ'^'ï¼Œ'_'ï¼Œ' 'ï¼Œ'\{'ï¼Œ'\}'ï¼Œ'|'ï¼Œ'~'\}.

To provide developers with a better experience, ZEGOCLOUD recommends that developers use the latest version of the SDK.

If the sender requests to send a text message with MessageType 1, the sender's corresponding client (SDK version needs to be 2.7.0 or above) will also receive the message.

For sending and receiving custom messages with MessageType 200, the SDK version of the sender's and receiver's corresponding clients needs to be 2.8.0 or above.

If the receiver's SDK version is in the [2.0.0, 2.8.0) range, they can receive custom messages, but the message type will be displayed as unknown and the message content cannot be obtained. To obtain this message, please upgrade the SDK to version 2.8.0 or above.

If the receiver's SDK version is 1.x.x, they will not be able to receive custom messages, nor will they receive unknown messages.
</Note>

<Note title="QPS Limit"> 20 times/s</Note>

## Verify the effect
After successfully importing messages, you can call the ZIM server-side API [Query the message list of one-on-one chats](/zim-server/conversation/query-the-message-list-of-one-on-one-chats) to confirm whether the user's one-to-one conversation messages have been imported completely.

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> API prototype parameter\n>\n> https://zim-api.zego.im/?Action=ImportPeerMsg\n","required":true,"schema":{"type":"string","enum":["ImportPeerMsg"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"ðŸ’¡Public parameter. Application ID, assigned by ZEGOCLOUD. Get it from the [ZEGOCLOUD Admin Console](https://console.zegocloud.com/).","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"ðŸ’¡Public parameter. A 16-character hexadecimal random string (hex encoding of 8-byte random number). Refer to [Signature example](/zim-server/accessing-server-apis#signature-example) for how to generate.","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"ðŸ’¡Public parameter. Current Unix timestamp, in seconds. Refer to [Signature example](/zim-server/accessing-server-apis#signature-example) for how to generate, with a maximum error of 10 minutes.","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"ðŸ’¡Public parameter. Signature version number.","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"ðŸ’¡Public parameter. Signature, used to verify the legitimacy of the request. Refer to [Signing the requests](/zim-server/accessing-server-apis#signing-the-requests) for how to generate an API request signature.","required":true,"schema":{"type":"string"}}}></ParamsItem></ul></div></details>
<MimeTabs className={"openapi-tabs__mime request"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3><strong className={"openapi-schema__required"}>required</strong></summary><ul className={"request-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"FromUserId"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 32 characters`"} schema={{"type":"string","description":"User ID of the message sender.","maxLength":32,"example":"u1"}}></SchemaItem><SchemaItem collapsible={false} name={"ToUserId"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 32 characters`"} schema={{"type":"string","description":"User ID of the message receiver.","maxLength":32,"example":"u2"}}></SchemaItem><SchemaItem collapsible={false} name={"MessageType"} required={true} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Message type. For applicable types for one-to-one conversations, please refer to [MessageBody description](/zim-server/messaging/messagebody-introduction).\n> Note\n>\n> Signaling messages are not supported.\n","example":200}}></SchemaItem><SchemaItem collapsible={false} name={"Priority"} required={true} schemaName={"number"} qualifierMessage={"**Possible values:** [`1`, `2`, `3`]"} schema={{"type":"number","description":"Message priority (for details, please refer to [Basic concepts - Message priority](https://www.zegocloud.com/docs/zim-android/introduction/basic-concepts#message-priority)). Values are as follows:\n- 1: Low.\n- 2: Medium.\n- 3: High.\n","enum":[1,2,3],"example":1}}></SchemaItem><SchemaItem collapsible={false} name={"MessageBody"} required={true} schemaName={"object"} qualifierMessage={undefined} schema={{"type":"object","description":"Message content. For specific parameter format, please refer to [MessageBody description](/zim-server/messaging/messagebody-introduction).\n> Note\n>\n> The `OfflinePush` and `HasReceipt` fields are not supported.\n","example":{"Message":"hello world","ExtendedData":"s"}}}></SchemaItem><SchemaItem collapsible={false} name={"SubMsgType"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Specific custom type. The value is defined by you, with a value range of [0,200]. Required when MessageType is a custom message.","example":110}}></SchemaItem><SchemaItem collapsible={false} name={"SearchedContent"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Search field for custom messages. This field can only be filled in when MessageType is a custom message, with a default maximum length of 64 bytes. This field applies to the client. Unless this field is filled in, the associated custom message cannot be searched through the client.","example":"ex"}}></SchemaItem><SchemaItem collapsible={false} name={"SendMessageTime"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Message sending timestamp (Unix, millisecond level). Please import in chronological order from earliest to latest.\n- Pass 0 or do not pass: Use \"current time\".\n- Other values: The earliest can be \"current time - number of days for historical message retention specified by the package (for details, please refer to [Pricing - Version differences](/zim-android/introduction/pricing#version-differences)) * 86400000\", and the latest must not be later than \"current time\".\n\nCannot be earlier than the number of days for historical message retention specified by the package (for details, please refer to [Pricing - Version differences](/zim-android/introduction/pricing#version-differences)), nor later than the current time.\n","example":123}}></SchemaItem><SchemaItem collapsible={false} name={"ImportedUserId"} required={true} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Must be one of FromUserId or ToUserId, representing whose one-to-one conversation message list is being imported.","example":"u1"}}></SchemaItem></ul></details></TabItem></MimeTabs>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>OK</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Return code.\n\nThe following only lists the return codes related to the API business logic. For the complete return codes, please refer to [Return codes](/zim-server/return-codes).\n<table>\n<tbody><tr>\n<th>Return code</th>\n<th>Description</th>\n<th>Suggested Solution</th>\n</tr>\n<tr>\n<td>660400001</td>\n<td>The input message size exceeds the limit.</td>\n<td>Please check the input message size.</td>\n</tr>\n</tbody>\n</table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Description of the request result.","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Request ID.","example":"343649807833778782"}}></SchemaItem><SchemaItem collapsible={false} name={"MsgId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Message ID.","example":"6654861479614"}}></SchemaItem><SchemaItem collapsible={false} name={"MsgSeq"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"Message seq.","example":1}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"MsgId\": \"6654861479614\",\n  \"MsgSeq\": 1\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: ZEGO Support
    email: support@zegocloud.com

servers:
  $ref: '../shared-components.yaml#/servers'

tags:
  - room

paths:
  /:
    get:
      tags: [room]
      summary: Remove user from the room
      description: |
        Remove specified users from the room. This is often used in content moderation scenarios. When the developer's backend detects that a user has violated the rules, this API can be used to remove the user from the room.

        The client will receive notifications such as user removal and changes to users in the room through the following ZIM SDK callbacks:

        | iOS-25% | Android-25% | macOS-25% | Windows-25% |
        |-----|---------|--------|---------|
        | [roomStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~objective-c_ios~protocol~ZIMEventHandler#zim-room-state-changed-event-extended-data) | [onRoomStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~java_android~class~ZIMEventHandler#on-room-state-changed) | [roomStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~objective-c_macos~protocol~ZIMEventHandler#zim-room-state-changed-event-extended-data) | [onRoomStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~cpp_windows~class~ZIMEventHandler#on-room-state-changed) |

        | Web-25% | Mini Program-25% | Flutter-25% | React Native-25% |
        |-----|---------|---------|---------|
        | [roomStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~javascript_web~interface~ZIMEventHandler#room-state-changed) | [roomStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~javascript_wxxcx~interface~ZIMEventHandler#room-state-changed) | [onRoomStateChanged](https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMEventHandler/onRoomStateChanged.html) | [groupMemberStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~javascript_react-native~interface~ZIMEventHandler#group-member-state-changed) |

        | Unity3D-25% | uni-app \| uni-app x-25% |  HarmonyOS-25% |
        |---------|--------------|-----------|
        | [OnRoomStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~cs_unity3d~class~ZIMEventHandler#on-room-state-changed) |[groupMemberStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~javascript_uni-app~interface~ZIMEventHandler#group-member-state-changed) |[roomStateChanged](https://www.zegocloud.com/docs/api?doc=zim_API~javascript_harmony~interface~ZIMEventHandler#room-state-changed) | |

        <Note title="Note">The parameters RoomId and UserId[] only support numbers, English characters, and `'!', '#', '$', '%', '&', '(', ')', '+', '-', ':', ';', '<', '=', '.', '>', '?', '@', '[', ']', '^', '_', ' ', ',', '{', '}'`.</Note>

        <Note title="QPS Limit"> 20 times/s</Note>

      operationId: remove-user-from-the-room
      parameters:
        - name: Action
          in: query
          description: |
            > API prototype parameter
            >
            > https://zim-api.zego.im/?Action=KickoutRoomUser
          required: true
          schema:
            type: string
            enum: [KickoutRoomUser]
          style: form
          explode: true
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
        - name: RoomId
          in: query
          required: true
          description: Room ID.
          schema:
            type: string
            maxLength: 32
            example: "room123"
        - name: UserId
          in: query
          required: true
          description: |
            List of user IDs to be removed (users who have logged in to the ZIM service by calling the login method on the client, or have completed registration by calling the [server-side API](/zim-server/user/batch-register-users)). A maximum of 50 user IDs are supported.

            Example: UserId[]=a&UserId[]=b
          schema:
            type: array
            maxItems: 50
            items:
              type: string
              maxLength: 32
              example: "user1"
          style: form
          explode: true
        - name: CustomReason
          in: query
          required: false
          description: Reason for removing the user. It is recommended not to exceed 32 bytes.
          schema:
            type: string
            maxLength: 32
            example: "Violation of rules"
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'

components:
  schemas:
    CommonResponse:
      type: object
      properties:
        Code:
          type: integer
          description: |
            Return code.

            The following only lists the return codes related to the API business logic. For the complete return codes, please refer to [Return codes](/zim-server/return-codes).
            <table>
            <thead><tr><th>Return code</th><th>Description</th></tr></thead>
            <tbody>
            <tr><td>660000011</td><td>Number of users exceeds the limit.</td></tr>
            <tr><td>660300001</td><td>Room does not exist.</td></tr>
            <tr><td>660300002</td><td>User is not in this room.</td></tr>
            </tbody>
            </table>
          example: 0
        Message:
          type: string
          description: Description of the request result.
          example: "success"
        RequestId:
          type: string
          description: Request ID.
          example: "343649807833778782"
# Update room attributes
---

## Description

Update the custom room attributes of the specified room ID. A room can set up to 20 room attributes. If you need to increase the upper limit of the number of room attributes, please contact  ZEGOCLOUD Technical Support.

After the room attribute is updated, you can receive the notification of the room attribute update through the following ZIM SDK callback interfaces.

| Platform  | Callback                          |
| --------- | --------------------------------- |
| iOS/macOS | zim:roomAttributesUpdated:roomID: |
| Android   | onRoomAttributesUpdated            |
| Windows   | onRoomAttributesUpdated            |
| Web       | roomAttributesUpdated              |


## Request method and endpoint

- Request method: POST
- Request URL: `https://zim-api.zego.im/?Action=ModifyRoomAttribute`
- Transmission protocol: HTTPS
- QPS limit: 20 requests/second


## Request parameters

The following table describes only the operation-specific request parameters and some common request parameters. For the complete list of common request parameters, see the [Common request parameters section of the Accessing Server APIs topic](../Accessing%20Server%20APIs.mdx#common-parameters).

| Parameter        | Type                              | Required | Description                     |
| ---------------- | --------------------------------- | -------- | ------------------------ |
| FromUserId       | String                            | Yes      | The operator, which needs to be in the registered state. This user will not be automatically added to the room. Only numbers, English characters, '!', '#', '$', '%', '&', '(', ')', '+', '-', ':', ';', '\<', '=', '.', '>', '?', '@', '[', ']', '^', '_', ' ', '{', '}', '\|', '~' are supported. |
| RoomId           | String                            | Yes      | Room ID. Only numbers, English characters, '!', '#', '$', '%', '&', '(', ')', '+', '-', ':', ';', '\<', '=', '.', '>', '?', '@', '[', ']', '^', '_', ' ', '{', '}', '\|', '~' are supported.                   |
| Attributes       | Array of [ModifyRoomAttribute](#ModifyRoomAttribute) | Yes      | The room attribute information to be updated.         |


<a id="ModifyRoomAttribute"></a>
**ModifyRoomAttribute structure:**

| Parameter | Type   | Required | Description                                                                                                    |
| --------- | ------- | -------- | ------------------------------------------------------------------------------------------------------------ |
| Action     | Number  | Yes      | Delete or set, 0: set, 1: delete.                           |
| Key        | String  | Yes      | Room attribute key.                                                                                                  |
| Value      | String  | No       | Room attribute value.                                                                                              |
| AutoDelete | Number  | No       | Whether to automatically delete when the user exits the room, 0: not automatically delete, 1: automatically delete. If FromUserId is not in the room, it will trigger the deletion operation after it enters the room and then exits the room. |
| StopOnError | Number  | No       | Whether to enable fast failure, default is disabled. <ul><li>`0`: Disable fast failure. When an error occurs during execution, the current attribute is recorded and the subsequent update operations are continued. All recorded attributes are returned after the execution is completed.</li><li>`1`: Enable fast failure. When an error occurs during execution, the subsequent update operations are stopped and the attribute that failed to be updated is returned. The successfully executed update operations are retained.</li></ul> |

<Note title="Description">
If the Key already exists, the existing attribute information will be modified.
</Note>


## Request example

- Request URL:

```json
https://zim-api.zego.im/?Action=ModifyRoomAttribute
&<Common request parameters>
```

- Request body:
```json
{
    "RoomId": "room123",
    "FromUserId": "fromUserId",
    "Attributes": [
        {
            "Action": 0,
            "Key": "attribute1",
            "Value": "value1",
            "AutoDelete": 1
        },
        {
            "Action": 1,
            "Key": "attribute2",
            "Value": "",
            "AutoDelete": 0
        }
    ]    
}
```

## Response parameters

The response parameters are as follows:

| Parameter  | Type                         | Required | Description                           |
| ---------- | ---------------------------- | -------- | ------------------------------------- |
| Code       | Number                       | Yes      | Return status code (0 means success). |
| Message    | String                       | Yes      | Return status information.            |
| RequestId  | string                       | Yes      | Request unique identifier.            |
| AttributeSeq | int32 | Yes      | The sequence number of the room attribute.         |
| SuccKeyList | Array of [SuccList](#SuccList) | No       | The list of keys that successfully updated.                 |
| ErrKeyList | Array of [ErrList](#ErrList) | No       | The list of keys that failed to be updated.                 |

<a id="SuccList"></a>
**SuccList structure:**

| Parameter | Type   | Required | Description           |
| -------- | ------ | -------- | -------------- |
| Key      | String | Yes      | The key value that successfully updated. |
| Seq      | int32 | Yes      | The sequence number of the Key in the room.         |

<a id="ErrList"></a>
**ErrList structure:**

| Parameter | Type   | Required | Description           |
| -------- | ------ | -------- | -------------- |
| SubCode  | Number | Yes      | Error code.        |
| Key      | String | Yes      | The key value that caused the error. |


## Response example

```json
{
    "Code": 0,
    "Message": "success",
    "RequestId": "req-123456789",
    "AttributeSeq": 3,
    "SuccKeyList": [
        {
            "Key": "key1",
            "Seq": 3,
        },
        {
            "Key": "key2",
            "Seq": 2
        }
    ],
    "ErrKeyList": [
        {
            "SubCode": 1,
            "Key": "attr1"
        },
        {
            "SubCode": 2,
            "Key": "attr2"
        }
    ]
}
```

## Return codes

The following return codes are only listed for interface business logic. For the complete list of return codes, see [Global return codes](../Return%20codes.mdx).

| Return code | Description | Solution         |
|------------|----------|------------------|
| 660000002  | Parameter error. | Please check the parameters.       |
| 660300005  | Frequency limit. | Please try again later.     |






openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: ZEGO Support
    email: support@zegocloud.com

servers:
  $ref: '../shared-components.yaml#/servers'

tags:
  - group

paths:
  /:
    get:
      tags: [group]
      summary: Mute a group
      description: |
        By calling this API, you can mute or unmute all members or certain group roles in a group.

        After the API is successfully called, all users in the group will learn which roles cannot speak in the group or can resume speaking through the following ZIM SDK callback interfaces:

        | iOS-25% | Android-25% | macOS-25% | Windows-25% |
        |-----|---------|-------|-------|
        | [groupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~objective-c_ios~protocol~ZIMEventHandler#zim-group-muted-info-updated-operated-info-group-id) | [onGroupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~java_android~class~ZIMEventHandler#on-group-muted-info-updated) | [groupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~objective-c_macos~protocol~ZIMEventHandler#zim-group-muted-info-updated-operated-info-group-id) | [onGroupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~cpp_windows~class~ZIMEventHandler#on-group-muted-info-updated) |

        | Web-25% | Mini Program-25% | Flutter-25% | React Native-25% |
        |---------|-----|-------|-------|
        | [groupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_web~interface~ZIMEventHandler#group-muted-info-updated) | [groupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_wxxcx~interface~ZIMEventHandler#group-muted-info-updated) | [onGroupMutedInfoUpdated](https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMEventHandler/onGroupMutedInfoUpdated.html) | [groupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_react-native~interface~ZIMEventHandler#group-muted-info-updated) |

        | uni-app \| uni-app x-25% | HarmonyOS-25% |
        |---------|-----------|
        | [groupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_uni-app~interface~ZIMEventHandler#group-muted-info-updated) | [groupMutedInfoUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_harmony~interface~ZIMEventHandler#group-muted-info-updated) |


        <Note title="Note">
        If IsAllMuted, MuteRoleList, and Duration are all not passed, the mute status of all users in the group will be removed.

        If Duration is non-zero and IsAllMuted is set to false, the passed MuteRoleList will overwrite the previously set muted role list.

        The parameter FromUserId only supports numbers, English characters, and `'!','#','$','%','&','(',')','+','\'',':',';','<','=','.','>','?',
        '@','[',']','^','_','{','}','|','~'`.

        If FromUserId is an administrator, MuteRoleList[] cannot contain 1 (group owner).
        </Note>
        <Note title="QPS Limit"> 20 times/s</Note>
      operationId: mute-a-group
      parameters:
        - name: Action
          in: query
          description: |
            > API prototype parameter
            >
            > https://zim-api.zego.im/?Action=MuteGroup
          required: true
          schema:
            type: string
            enum: [MuteGroup]
          style: form
          explode: true
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
        - name: FromUserId
          in: query
          required: true
          description: |
            Operator user ID (who has logged in to the ZIM service by calling the login method on the client, or has completed registration by calling the [server-side API](/zim-server/user/batch-register-users)).
            > **Note**
            >
            > Since the mute operation will trigger a group tips message, when FromUserId is not a group member, developers need to hide the message or implement other processing to avoid confusion among group users.
          schema:
            type: string
            maxLength: 32
            example: "operator_user"
        - name: GroupId
          in: query
          required: true
          description: Group ID.
          schema:
            type: string
            maxLength: 32
            example: "group123"
        - name: IsAllMuted
          in: query
          required: false
          schema:
            type: boolean
            default: false
          description: Whether to mute all members. Defaults to false if not passed.
        - name: MuteRoleList
          in: query
          required: false
          schema:
            type: array
            items:
              type: number
          style: form
          explode: true
          description: |
            List of muted roles. A single request can mute up to 20 group roles. Enumeration as follows:
            - 1: Group owner.
            - 2: Administrator.
            - 3: Group member.
            - Other: Developer-defined group roles, recommended to be greater than 100.

            Only meaningful when IsAllMuted is false or not passed
        - name: Duration
          in: query
          required: false
          schema:
            type: number
          description: |
            Mute duration. Defaults to 0 if not passed.
            - -1: Permanent.
            - 0: Cancel all mutes at the group level.
            - Greater than 0: Mute duration in seconds. Maximum support is 30 days (2,592,000 seconds).
            During the mute validity period, if the mute duration is set again, the mute status will be extended by the duration set in the most recent request.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'

components:
  schemas:
    CommonResponse:
      type: object
      properties:
        Code:
          type: number
          description: |
            Return code.

            The following only lists the return codes related to the API business logic. For the complete return codes, please refer to [Return codes](/zim-server/return-codes).
            <table>
            <thead><tr><th>Return code</th><th>Description</th><th>Suggested Solution</th></tr></thead>
            <tbody>
            <tr><td>660000001</td><td>General business error.</td><td>Please retry or contact ZEGOCLOUD Technical Support.</td></tr>
            <tr><td>660000002</td><td>Parameter error.</td><td>Please check the request parameters.</td></tr>
            <tr><td>660300005</td><td>The API call frequency exceeds the AppID-level limit.</td><td>Please try again later.</td></tr>
            <tr><td>660600001</td><td>Group does not exist.</td><td>Please confirm if the GroupID is correct.</td></tr>
            <tr><td>660600009</td><td>Failed to obtain group-related information.</td><td>Please confirm if the GroupID is correct first. If correct, please contact ZEGOCLOUD Technical Support.</td></tr>
            <tr><td>660600024</td><td>FromUserId is not in the group.</td><td>Please check FromUserId or add FromUserId as a group member.</td></tr>
            <tr><td>660600032</td><td>FromUserId does not have permission.</td><td>FromUserId must be the group owner or administrator.</td></tr>
            </tbody>
            </table>
        Message:
          type: string
          description: Description of the operation result.
          example: "success"
        RequestId:
          type: string
          description: Request ID.
          example: "343649807833778782"

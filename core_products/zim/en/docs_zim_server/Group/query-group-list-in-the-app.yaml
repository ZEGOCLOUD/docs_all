openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: ZEGO Support
    email: support@zegocloud.com

servers:
  $ref: '../shared-components.yaml#/servers'

tags:
  - group

paths:
  /:
    get:
      tags: [group]
      summary: Query the group list in the App
      description: |
        Get the IDs of all groups in the App.

        <Warning title="Note">The retrieved data may have a delay of up to 1 minute.</Warning>

        <Note title="QPS Limit"> 1 time/s</Note>
      operationId: query-group-list-in-the-app
      parameters:
        - name: Action
          in: query
          description: |
            > API prototype parameter
            >
            > https://zim-api.zego.im/?Action=QueryAppGroupList
          required: true
          schema:
            type: string
            enum: [QueryAppGroupList]
          style: form
          explode: true
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/QueryAppGroupListRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/QueryAppGroupListResponse'
              example:
                Code: 0
                Message: success
                RequestId: "343649807833778782"
                TotalCount: 1680
                Next: 168
                GroupIdList:
                  - GroupId: "groupA"
                    GroupName: "groupNameA"
                  - GroupId: "groupB"
                    GroupName: "groupNameB"

components:
  schemas:
    QueryAppGroupListRequest:
      type: object
      properties:
        Limit:
          type: number
          description: |
            Number of group IDs to retrieve at once, with a value range of [0, 10000], meaning this API can return a maximum of 10,000 group IDs per call.

            When the number of groups in the App exceeds the Limit, you need to call this API multiple times <b>and the Limit must remain consistent</b>.

            If empty or greater than 10,000, the default value is 10,000.
          minimum: 0
          maximum: 10000
          example: 100
        Next:
          type: number
          description: |
            Pagination flag. Fill in 0 for the first time, and then fill in the value returned last time. When the returned Next is 0, it means the group list has been fully retrieved.

            For example, if there are 25,000 groups in the App, when calling this API to query the group list:

            - First call: Set Limit to 10,000 and Next to 0 to query groups 1 to 10,000; the Next value in the returned result is 1.
            - Second call: Set Limit to 10,000 and Next to 1 to query groups 10,001 to 20,000; the Next value in the returned result is 2.
            - Third call: Set Limit to 10,000 and Next to 2 to query groups 20,001 to 25,000; the query is complete, and the Next value in the returned result is 0.
          example: 0
    QueryAppGroupListResponse:
      type: object
      properties:
        Code:
          type: number
          description: |
            Return code.

            The following only lists the return codes related to the API business logic. For the complete return codes, please refer to [Return codes](/zim-server/return-codes).
            <table>
            <thead><tr><th>Return code</th><th>Description</th><th>Suggested Solution</th></tr></thead>
            <tbody>
            <tr><td>660000002</td><td>Parameter error.</td><td>Please refer to Request Parameters and enter the correct parameters.</td></tr>
            <tr><td>660600006</td><td>Error querying group list data.</td><td>Please contact ZEGOCLOUD Technical Support.</td></tr>
            <tr><td>660600007</td><td>The call frequency of the QueryAppGroupList API exceeds the limit.</td><td>The call frequency is 1 time/s, please do not exceed the limit.</td></tr>
            </tbody>
            </table>
          example: 0
        Message:
          type: string
          description: Description of the request result.
          example: "success"
        RequestId:
          type: string
          description: Request ID.
          example: "343649807833778782"
        TotalCount:
          type: number
          description: Current total number of groups in the App.
          example: 1680
        Next:
          type: number
          description: |
            Pagination flag. When non-zero, it indicates that the list query is not complete.
            >**Note**
            >
            > Apart from the above description, this field has no association with the list information. Please do not base any other logic on this field.
          example: 168
        GroupIdList:
          type: array
          description: Collection of retrieved group IDs.
          items:
            type: object
            properties:
              GroupId:
                type: string
                description: Group ID.
                example: "groupA"
              GroupName:
                type: string
                description: Group name.
                example: "groupNameA"
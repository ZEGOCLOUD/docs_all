openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: ZEGO Support
    email: support@zegocloud.com

servers:
  $ref: '../shared-components.yaml#/servers'

tags:
  - group

paths:
  /:
    post:
      tags: [group]
      summary: Update group data
      description: |
        By calling this API, you can modify group data information, including group avatar, group name, group notice, etc.

        After successfully modifying the group data, group members can receive group data modification notifications through the following ZIM SDK callback interfaces:
        | iOS-25% | Android-25% | macOS-25% | Windows-25% |
        |-----|---------|--------|---------|
        | [groupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~objective-c_ios~protocol~ZIMEventHandler#zim-group-name-updated-operated-info-group-id) | [onGroupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~java_android~class~ZIMEventHandler#on-group-name-updated) | [groupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~objective-c_macos~protocol~ZIMEventHandler#zim-group-name-updated-operated-info-group-id) | [onGroupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~cpp_windows~class~ZIMEventHandler#on-group-name-updated) |

        | Web-25% | Mini Program-25% | Flutter-25% | React Native-25% |
        |---------|-----|--------|---------|
        | [groupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_web~interface~ZIMEventHandler#group-name-updated) | [groupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_wxxcx~interface~ZIMEventHandler#group-name-updated) | [onGroupNameUpdated](https://pub.dev/documentation/zego_zim/latest/zego_zim/ZIMEventHandler/onGroupNameUpdated.html) | [groupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_react-native~interface~ZIMEventHandler#group-name-updated) |

        | Unity3D-25% | uni-app \| uni-app x-25% | HarmonyOS-25% |
        |---------|---------|-----------------|
        | [OnGroupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~cs_unity3d~class~ZIMEventHandler#on-group-name-updated) | [groupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_uni-app~interface~ZIMEventHandler#group-name-updated) | [groupNameUpdated](https://www.zegocloud.com/docs/article/api?doc=zim_API~javascript_harmony~interface~ZIMEventHandler#group-name-updated) |

        <Note title="Note">Since the parameters `GroupAvatar`, `GroupName`, and `GroupNotice` support being set to empty strings, if you do not need to modify a certain field mentioned above, the JSON string cannot contain the field name (cannot pass empty), otherwise it will be considered as an empty string and the original content will be deleted.</Note>

        <Note title="QPS Limit"> 20 times/s</Note>
      operationId: update-group-data
      parameters:
        - name: Action
          in: query
          description: |
            > API prototype parameter
            >
            > https://zim-api.zego.im/?Action=UpdateGroupData
          required: true
          schema:
            type: string
            enum: [UpdateGroupData]
          style: form
          explode: true
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGroupDataRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CommonResponse'

components:
  schemas:
    UpdateGroupDataRequest:
      type: object
      required: [FromUserId, GroupId]
      properties:
        FromUserId:
          type: string
          description: Operator ID who modifies the group data (registered).
          maxLength: 32
          example: "user"
        GroupId:
          type: string
          description: Group ID whose data is to be modified.
          maxLength: 32
          example: "111"
        GroupAvatar:
          type: string
          description: |
            Group avatar URL, with a length limit of 500 characters.
            >Note
            >
            >At least one of group avatar, group name, and group notice is required.
          maxLength: 500
          example: "https://xxx.com/xxx.png"
        GroupName:
          type: string
          description: Group name, with a length limit of 50 characters.
          maxLength: 50
          example: "newName"
        GroupNotice:
          type: string
          description: Group notice, with a length limit of 300 characters.
          maxLength: 300
          example: "newNotice"
      description: At least one of GroupAvatar, GroupName, or GroupNotice must be provided.
    CommonResponse:
      type: object
      properties:
        Code:
          type: number
          description: |
            Return code.

            The following only lists the return codes related to the API business logic. For the complete return codes, please refer to [Return codes](/zim-server/return-codes).
            <table>
            <thead><tr><th>Return code</th><th>Description</th><th>Suggested Solution</th></tr></thead>
            <tbody>
            <tr><td>660000002</td><td>Parameter error.</td><td>Please refer to Request and enter the correct parameters.</td></tr>
            <tr><td>660300006</td><td>The API call frequency exceeds the group/room limit.</td><td>Please try again later.</td></tr>
            <tr><td>660500002</td><td>FromUserId is not registered.</td><td>Please register FromUserId first.</td></tr>
            <tr><td>660600001</td><td>Group does not exist.</td><td>Please confirm if the GroupId is correct.</td></tr>
            <tr><td>660600009</td><td>Failed to obtain group-related information.</td><td>Please confirm if the GroupID is correct first. If correct, please contact Technical Support.</td></tr>
            <tr><td>660600028</td><td>Failed to modify group data.</td><td>Please contact ZEGOCLOUD Technical Support.</td></tr>
            </tbody>
            </table>
        Message:
          type: string
          description: Description of the operation result.
          example: "success"
        RequestId:
          type: string
          description: Request ID.
          example: "343649807833778782"

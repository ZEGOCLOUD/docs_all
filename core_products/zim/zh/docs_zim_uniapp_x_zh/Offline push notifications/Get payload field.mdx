---
articleID: 15340
---
# 获取 payload 字段

import Content1 from '/core_products/zim/zh/snippets/CrossPlatformSuitableNote.mdx'

<Content1 />

## 功能简介

离线推送发送端通过配置 [ZIMPushConfig](@-ZIMPushConfig) 的 payload 参数向接收端发送额外信息，接收端需使用 ZPNs SDK 时，通过厂商通道的 extras 里面的 payload 字段获取该信息。

本文档介绍了如何使用 ZPNs SDK 的接口，获取 payload 透传字段。

import Content from '/core_products/zim/zh/snippets/ZIMZPNsVersionMatchWarning.mdx'

<Content />


## 前提条件

- 已集成 ZPNs SDK，详情请参考[实现离线推送](./Implement%20offline%20push%20notification.mdx)。

## 实现流程

通过 [ZPNsEventHandler](@-ZPNsEventHandler) 回调方法中的 ZPNsMessage 对象获取（支持除 vivo 外的所有厂商）。


<CodeGroup>
```typescript title="UTS 插件"
/**
  * 接口定义
  */
interface ZPNsEventHandler {
    onRegistered: (message: ZPNsRegisterMessage) => void;
    onNotificationArrived: (message: ZPNsMessage) => void;
    onNotificationClicked: (message: ZPNsMessage) => void;
    onThroughMessageReceived: (message: ZPNsMessage) => void;
}

/* 注册监听-示例 */

ZPNs.getInstance().onRegistered((message) => {
    console.log('[ZPNs] registered. pushID: ' + message.pushID);
});

/* 按需实现如下方法，获取 payload 字段 */
ZPNs.getInstance().onThroughMessageReceived((message) => {
    console.log('[ZPNs] throughMessageReceived', message.extras['payload']);
});
ZPNs.getInstance().onNotificationClicked((message) => {
    console.log('[ZPNs] notificationClicked', message.extras['payload']);
});
ZPNs.getInstance().onNotificationArrived((message) => {
    console.log('[ZPNs] notificationArrived', message.extras['payload']);
});
```
```typescript title="原生插件"
/**
  * 接口定义
  */
interface ZPNsEventHandler {
    registered: (message: ZPNsRegisterMessage) => void;
    notificationArrived: (message: ZPNsMessage) => void;
    notificationClicked: (message: ZPNsMessage) => void;
    throughMessageReceived: (message: ZPNsMessage) => void;
}

/* 注册监听-示例 */

ZPNs.getInstance().on('registered', (message) => {
    console.log('[ZPNs] registered. pushID: ' + message.pushID);
});

/* 按需实现如下方法，获取 payload 字段 */
ZPNs.getInstance().on('throughMessageReceived', (message) => {
    console.log('[ZPNs] throughMessageReceived', message.extras['payload']);
});
ZPNs.getInstance().on('notificationClicked', (message) => {
    console.log('[ZPNs] notificationClicked', message.extras['payload']);
});
ZPNs.getInstance().on('notificationArrived', (message) => {
    console.log('[ZPNs] notificationArrived', message.extras['payload']);
});
```
</CodeGroup>

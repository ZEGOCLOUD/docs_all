---
id: check-friendships
title: "检查好友关系"
description: "调用此接口，可为一名用户批量检查其与至多 20 名其他用户的好友关系。如需上调（最多可为 50），请联系 ZEGO 技术支持。"
api: eJztWltTG0cW/itTvS+xS1jiEturwtp1ks0WtZtL2ck+BFHxILXRxNJImRkldiiqBFggsISwzSWWFWMSsNnEIAgOyJLA/2VR94yetD9hc7pH0ugKeNebSpV5gJme7tOnz+U7l2YUaeKIipyDKKxiBQ3ZkBerHkUKaVJQRk5kbE/qCxt0c43OrZPkD+VCnCQzxWyumI2Q+QR8iu3TmRel6ST9IUJX1kl0r5idM6Z3yVpK6HEIZD4BQ/klPlVP3SbrByR5h0R39d38UWSCPJkopSPF7KyxPVkuxGg6QtZSfA/hbUe5MFMuxI3MvjG+oO/mhc/+8tePBDoboekMXcjQ+PhRZMItu2U+zkZIYtE4fEFjSyQZhwfOlmXTciFezK/zcc6VcFkoZuf0h1v08bQ58o7QwCqc+fBOuZByy12CuQcjUS6kivloA7na4tiysbpBv82Q+Sc0PVOhztjuEqwslgspMh+ny3sNpMi9eAue6smSzAu69MKURfOJ9dRtPX+fPkqTZMaYPKDpGXYOt9yvicN+7IKH4aD3lqtfU9iLT1CCX6shUb7kRj1u5DJZ2smTR3f67Zqv5aQr2C+C1VgmeIJ+ywQj85x+O1f5bDf3Mnd0NQstPSO8UyPmaj5+eka43Jqct4E3klgk83f77ZqXf3Z1W57/lV6yvNHlx3R3UV/dMrbWKsMNxF09dasXytnk6QhYuOsD7pLxeu5623JneWtkqq8TUx3Wvd1hMyuVxnXnO+/XYqndtDJ7xezccv+HQQ0LmqT58SU34hbiRuwTSU7QxW3h2vtKMPCpipUB7zVwBuFa9SXzguQWwLiZf5D9n0l6g2x9DzjzU4Yjl3DNHxyR5GsCXXoBWnmQJweLwmcDHwg0nSCzq+VCHKBi/2dz+iAf1n/KCJc/Hhh6y/6NFOhSsfIVVuyAkPZhUfP4uhQ8IqkaVrpgTD0jkK04jc3T3Q0yFWdu2G+Hg7naHpBvV/r+rj43XXowT2J75UKqxyHQZ6t2/em9o8hElQKyoWAIK8y3BrzIiTw+7LnRdV2RsOxVfVJIRTYUEhUxgDWsAJaPIlkMYORElz0Mxm1IAiz/MoyVW6gR4V0Ch3Yyt0Ie3eFCd8sut+wSfJoWUp12JgMxJJ37Bo8Ez0kB+5843UvvAiPvcz4q3s/4VfCXYUnBXuTUlDC2IdXjwwEROUeRdisEjKmaIskjyIawHA5A9GlFCg2N2ZCq3fLDiutBJQDzb4b8QS/mhMdstZOGQgPezgf998q9VRJ9RqI7/JAQfHILoPQBb7kQ1xd2eHghsalSNFEzq4UMBLvpTSMD0QZCU35O6BcFTVRGsHbJjT4f9ovyDTcSfAq+/quSK2LzBGU16MdVsbmRi8epuacktkeS2/120SUYc/skuXQUmTiJ3CRZwyNYQTYmD1FDThSWZK23B41ZhHFVGpFFLazgD4OyB59aKt3nheJBQug+LxgvH5LYXimVpOkc2VzWnz0pZn8uF2IXBbK5bMxO8C90cVtP3RZ8+KagF5b0x+PlwsxRZEJfWKGxeX1rme4ukmSGJCeMyCQIzhST1bVEjwerqiSPmANgbuof1Mo5uvBNMRDyYzdy6ZuHkHisQTQG+Z1QcKbBWaX0iRTAqiYGQqc3m4P7ZCYhfCpLNwW6vFdafk5ju5AaJRaLB4liNsc9+P8jAEAwnjRFx42trNDtYBZ8b0VP3TYyGbK/9eq2Jcna+b7WpvUPrKjHYksL2Znsz8Ro+hlJ7p9OfUD/uhj2A2895xwW/IC3oZaMviKHDBE2irm50o9xIzNuZPbpzgQkIPMxurtII0+PIhNGZp8rdZCvAS+J7dUHjeMUG8AenyhLauAMN5fT2vMQn4xV7Z2g9xbMaFzrCcoaljX4JIZCfsnDwNX+hQoCGG0mHRz+Anu0OiYGUS0IIxviDxB2GGx/AuuGbCikQJzSJKwCNcuKlnq0aqGYzdHNNYFPF+jKupH5vqFOQDYUEG/+Hcsjmg85e3sgFDCXQE4EAPs5q1/GaszVNhUVRWzWPDmMts6ULWUAzzOPIhOl/LfG1hpd3C5NJ4vZ2dKDeahPehxVxgY0HFCRs8dhQxJ/bD5zW/6B9c8lbzewXx0drA3bKo89tcfe2mMfC5Q1VdS2lsOBYebR9Ue3pvNmReOA8oOlofyjWaB0wzDLnS3DNbdz2LqHLCw7xsZsiKU6yNkyol/hlorGxmCmgtVQUFa5ufQ4HPCnntGP/ob+C/utt8d3WdpwnGiMlwvk4SP9caWwLObXi9k7xXyUxJbJdK6Ym+LZUjGbIrOrpUjeOLyrP8yC9aRuC7AHy1GvhofZMwSFrThdfF6lW8UMYZBEN8hOpPqlHjcUrIUVucsT9GL1DGPGJZw9y/PHs2fNBI0c3KcTGyR51/hlnyOUtYQUai4I9S2EiErJ3lDc0uU9ZgcuoT/sd/X7JRd5MkEfpWlsnsyutKQmdENtT2NL9OFzspZqSbZciDMplCYPioUUP6gAPgP9hOW9mijeFyW/KhSzm0Agul88uF98uUrHMwDCrI6i9xPFgzQvYllu7JeYAGqsCo2njW6UJjesztzAXGnywPT/tR3j+XqF1yqjXKtV7YAmGWc1rltHcqvi3Kg5S3Q1qN1MYtiR+u1hv6tjYe5iTNorBmYpj2kyabzctgyQtdv6/BTJ54ytrTZVsuv8eQf7sZbD3LT1nXwpAmotLTwwMhnGYXWKkdkvTSeMzCIvnzo0Z9oWj+bG1kraOLxPous8DrfZlWuMTwR9VmJ2h216YRtrjWu2tJgb66nbvAYz9qLcvQWoJN4T9NxTEvuJV2ZNXOgbCTI/R6ZAAs2bN1W5qA4ibegDrKriCD4+LJpJB7N6ls2B83PP4IGnFkLUMMszIIKYIHuSuMs3EAbeayTX29d7vu+PFx0XLvb2Xrhw8cLFHqB8lW+Cjw+uXE8cPqpBFDXHxjZYfdK8oQM+0c01s20G2mxqO6J28bdafB4bKsyMwYyicSPzhE5Gq+hA08/Munp2BXpuzDsbNu7jcZCh3wlFysGqKlK33M8QA3CQw1c2x2K5iZAwXgHXnP7PHPC5uqGv5TpI7ljkrAGwlXyiYYcGqqXJDRKb6kC1AYxrMFuJpRzPLJtzsGwSQOKkMqhHmnGuLmtL5igyDhrOr1jQ6Nhzn1KY1mM3ne1/7zEnd5IGxlo5TC8HheGTpVY8fHKCdWG1XYLE9MlBD4JMJHrqlMnKdDXUvbKTH0UmIBFkKQCkWrw/Wc27ue8JLJeK0801srlMt36B7nykAHcO2ZzQLdDYktADaQ3LLujiNokUXgE5usc4dHROtnl6XVdVVPJghyUMVYNHXexoFQPqQsBgzeqspUpNtn1QjjdO6WmYMlTFvxb0epHFvqoKtBLobrVH37HLesaGTAkGsOYLwtpQUGVuJUJ9huzIhrhZcc7Civ/XeNmmIdpkNXp+pZiNgBaj6yS9Tb6LlAuxYjZB4jkSm4LfKyvlwgwC5ltS7lJ9YlvqxewmeXhA1p6WHkwxurP0l/3O5Hw3RtqSo9kMPdwlye1yIVZ68oBmM51pXVfas0afPaXPoUMILa/oNone0Z8kO5Pzizfby/Fwzlh/WS7EyOxjsv+oM6HhYKC9yHIpsvYjENpcKb7YPkb2I6EOsk+TxHIxl4IzLm0DX9+ttiYnhjVfRyspzTyn302aFw5NFoPANaDIvVJr7/yl5sbW9oqlAWLpf5yqgVDXP4AkVZKvBxk8mggTDGGZSQfOgGzoK7P/50Td5xysFQd1uuhhdbrZg2MFwdVwKBRUwLVwQJT8DG7YyJ+Ba48/GPae8wQD0GVkPhgQZQuJ5hZNoxhHaw2CN7fVb26r39xWv7mtfnNb/ZveVpsZtYZvavaQX5RkyEBZbBw106tBBBHHBxmXcxCNjg6LKv5U8Y+NwTC/qIGkyyupIHovcl4X/SruAPxvXTHvKs4Ir+M+u+WJbuBb1iv2r0R/GCaxTOCVOP8dXFB3EoR5A/9a5PA7vJLuIKqm+/nXYzu/x1vqDlKz3te/FoG1vJo+iRprd+Gvka/f9kL6JGKoO/8QvCgSCAA5B+GC0odFL1YYsPOF7/Lzd7Gio7a26ZIPZFkBWw8OaR3nDllK+o8/uvoJsqFh82I8wPoBSBG/hstt8WvkRG7kRuz/q4ACa6Sx8VHkF+WRMO+OcLrw8x8XyT+G
info_path: core_products/zim/zh/docs_zim_server_zh/user/open-api-desc
---

<h1 className={"openapi__heading"}>检查好友关系</h1>

<MethodEndpoint method={"post"} path={"/"}></MethodEndpoint>


调用此接口，可为一名用户批量检查其与至多 20 名其他用户的好友关系。如需上调（最多可为 50），请联系 ZEGO 技术支持。

ZEGO 支持单边或双边检查好友关系，以检查用户 A 与目标用户 B 的好友关系为例：
- 单边检查：仅检查用户 A 的好友列表是否有用户 B。
- 双边检查：同时检查用户 A 和用户 B 的好友列表是否有对方。

检查好友关系的结果可能有：

<table>
<tbody><tr>
<th rowspan="2">检查类型</th>
<th rowspan="2">Relation</th>
<th colspan="2">说明</th>
</tr>
<tr>
<th>A 的好友列表有 B</th>
<th>B 的好友列表有 A</th>
</tr>
<tr>
<td rowspan="2">单向</td>
<td>1</td>
<td>✖</td>
<td>无法确认</td>
</tr>
<tr>
<td>2</td>
<td>✔️</td>
<td>无法确认</td>
</tr>
<tr>
<td rowspan="4">双向</td>
<td>3</td>
<td>✖</td>
<td>✖</td>
</tr>
<tr>
<td>4</td>
<td>✔️</td>
<td>✖</td>
</tr>
<tr>
<td>5</td>
<td>✖</td>
<td>✔️</td>
</tr>
<tr>
<td>6</td>
<td>✔️</td>
<td>✔️</td>
</tr>
</tbody></table>

<Note title="说明">

参数 `FromUserId` 和 `UserId` 对应的用户已在客户端调用 `login` 方法登录 ZIM 服务，或已调用 [服务端 API](/zim-server/user/batch-register-users) 完成注册。
</Note>
<Note title="说明">调用频率限制：20 次/秒。</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://zim-api.zego.im/?Action=CheckFriendsRelation\n","required":true,"schema":{"type":"string","enum":["CheckFriendsRelation"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/zim-server/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/zim-server/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/zim-server/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem></ul></div></details>
<MimeTabs className={"openapi-tabs__mime request"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3><strong className={"openapi-schema__required"}>required</strong></summary><ul className={"request-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"FromUserId"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 32 characters`"} schema={{"type":"string","description":"为此 UserId 查询好友关系。","maxLength":32,"example":"zego_user"}}></SchemaItem><SchemaItem collapsible={false} name={"UserIds"} required={true} schemaName={"string[]"} qualifierMessage={"**Possible values:** `<= 20`"} schema={{"type":"array","description":"待检查好友关系的目标用户列表。默认数量上限为 20。","maxItems":20,"items":{"type":"string","maxLength":32,"example":"user_id1"},"example":["user_id1","user_id2","user_id3","user_id4"]}}></SchemaItem><SchemaItem collapsible={false} name={"CheckType"} required={true} schemaName={"number"} qualifierMessage={"**Possible values:** [`0`, `1`]"} schema={{"type":"number","description":"检查类型：\n- 0：双向检查。\n- 1：单向检查。\n","enum":[0,1],"example":0}}></SchemaItem></ul></details></TabItem></MimeTabs>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>OK</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"返回码。\n\n以下仅列出了接口业务逻辑相关的 Code 和 SubCode ，完整返回码请参考 [全局返回码](/zim-server/return-codes)。\n> **说明**\n>\n> 当您发起请求同时检查 FromUserId 与多名用户的好友关系时：\n> <ul><li>如果成功检查 FromUserId 与 1 名或更多用户的好友关系，Code 都会返回 0。此时请参考 Fails 中的具体信息，确认操作结果。</li>\n> <li>如果  FromUserId 与全部目标用户的好友关系都检查失败，Code 会返回相关返回码，具体请参考 <a href=\"/zim-server/return-codes\" target=\"_blank\">全局返回码</a>。</li></ul>\n\n<table>\n<tbody><tr>\n<th>Code / SubCode</th>\n<th>描述</th>\n<th>处理建议</th>\n</tr>\n<tr>\n<td>660000001</td>\n<td>业务类通用错误。</td>\n<td>请重试，或联系 ZEGO 技术支持。</td>\n</tr>\n<tr>\n<td>660000002</td>\n<td>输入参数错误。</td>\n<td>请检查输入的参数。</td>\n</tr>\n<tr>\n<td>660300005</td>\n<td>调用接口的频率超出了 AppID 级别限制。</td>\n<td>请稍后再试。</td>\n</tr>\n</tbody></table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求结果的说明信息。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID。","example":"343649807833778782"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Successes</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>检查成功列表。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"成功检查 FromUserId 与此用户 ID 的好友关系。","example":"user_id1"}}></SchemaItem><SchemaItem collapsible={false} name={"Relation"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"关系类型，详情请参考本接口功能描述。","example":4}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Fails</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>检查失败列表。<ul><li>Code 为 0：</li><li>Fails 为空，表示成功检查 FromUserId 与全部目标用户的好友关系。</li><li>Fails 不为空，表示 FromUserId 与部分目标用户的好友关系检查失败，请参考 SubCode 处理。</li></ul><ul><li>Code 不为 0：</li><li>Fails 为空，表示参数错误、接口频率限制、系统错误。</li><li>Fails 不为空，表示FromUserId 与全部目标用户的好友关系检查失败。</li></ul></div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"FromUserId 与此用户 ID 的好友关系检查失败。","example":"user_id3"}}></SchemaItem><SchemaItem collapsible={false} name={"SubCode"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"具体失败返回码，完整返回码请参考 Code 说明或者 [全局返回码](/zim-server/return-codes)。\n","example":660000001}}></SchemaItem><SchemaItem collapsible={false} name={"Relation"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"关系类型。仅当请求参数 CheckType 为 0 时，此字段有值，为 1 或 2，相关数值详情请参考本接口功能描述。","example":1}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"Successes\": [\n    {\n      \"UserId\": \"user_id1\",\n      \"Relation\": 4\n    }\n  ],\n  \"Fails\": [\n    {\n      \"UserId\": \"user_id3\",\n      \"SubCode\": 660000001,\n      \"Relation\": 1\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"Successes\": [\n    {\n      \"UserId\": \"user_id1\",\n      \"Relation\": 4\n    },\n    {\n      \"UserId\": \"user_id2\",\n      \"Relation\": 4\n    }\n  ],\n  \"Fails\": [\n    {\n      \"UserId\": \"user_id3\",\n      \"SubCode\": 660000001,\n      \"Relation\": 1\n    },\n    {\n      \"UserId\": \"user_id4\",\n      \"SubCode\": 660000001,\n      \"Relation\": 2\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
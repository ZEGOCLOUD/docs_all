---
id: check-friendships
title: "CheckFriendsRelation"
description: "调用此接口，可为一名用户批量检查其与至多 20 名其他用户的好友关系。如需上调（最多可为 50），请联系 ZEGO 技术支持。"
api: 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
info_path: core_products/zim/zh/docs_zim_server_zh/user/open-api-desc
---

<h1 className={"openapi__heading"}>CheckFriendsRelation</h1>

<MethodEndpoint method={"post"} path={"/"}></MethodEndpoint>


调用此接口，可为一名用户批量检查其与至多 20 名其他用户的好友关系。如需上调（最多可为 50），请联系 ZEGO 技术支持。

ZEGO 支持单边或双边检查好友关系，以检查用户 A 与目标用户 B 的好友关系为例：
- 单边检查：仅检查用户 A 的好友列表是否有用户 B。
- 双边检查：同时检查用户 A 和用户 B 的好友列表是否有对方。

检查好友关系的结果可能有：

<table>
<tbody><tr>
<th rowspan="2">检查类型</th>
<th rowspan="2">Relation</th>
<th colspan="2">说明</th>
</tr>
<tr>
<th>A 的好友列表有 B</th>
<th>B 的好友列表有 A</th>
</tr>
<tr>
<td rowspan="2">单向</td>
<td>1</td>
<td>✖</td>
<td>无法确认</td>
</tr>
<tr>
<td>2</td>
<td>✔️</td>
<td>无法确认</td>
</tr>
<tr>
<td rowspan="4">双向</td>
<td>3</td>
<td>✖</td>
<td>✖</td>
</tr>
<tr>
<td>4</td>
<td>✔️</td>
<td>✖</td>
</tr>
<tr>
<td>5</td>
<td>✖</td>
<td>✔️</td>
</tr>
<tr>
<td>6</td>
<td>✔️</td>
<td>✔️</td>
</tr>
</tbody></table>

<Note title="说明">

参数 `FromUserId` 和 `UserId` 对应的用户已在客户端调用 `login` 方法登录 ZIM 服务，或已调用 [服务端 API](/zim-server/user/batch-register-users) 完成注册。
</Note>
<Note title="说明">调用频率限制：20 次/秒。</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://zim-api.zego.im/?Action=CheckFriendsRelation\n","required":true,"schema":{"type":"string","enum":["CheckFriendsRelation"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/zim-server/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/zim-server/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/zim-server/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem></ul></div></details>
<MimeTabs className={"openapi-tabs__mime request"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3><strong className={"openapi-schema__required"}>required</strong></summary><ul className={"request-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"FromUserId"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 32 characters`"} schema={{"type":"string","description":"为此 UserId 查询好友关系。","maxLength":32,"example":"zego_user"}}></SchemaItem><SchemaItem collapsible={false} name={"UserIds"} required={true} schemaName={"string[]"} qualifierMessage={"**Possible values:** `<= 20`"} schema={{"type":"array","description":"待检查好友关系的目标用户列表。默认数量上限为 20。","maxItems":20,"items":{"type":"string","maxLength":32,"example":"user_id1"},"example":["user_id1","user_id2","user_id3","user_id4"]}}></SchemaItem><SchemaItem collapsible={false} name={"CheckType"} required={true} schemaName={"number"} qualifierMessage={"**Possible values:** [`0`, `1`]"} schema={{"type":"number","description":"检查类型：\n- 0：双向检查。\n- 1：单向检查。\n","enum":[0,1],"example":0}}></SchemaItem></ul></details></TabItem></MimeTabs>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>OK</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"返回码。\n\n以下仅列出了接口业务逻辑相关的 Code 和 SubCode ，完整返回码请参考 [全局返回码](/zim-server/return-codes)。\n> **说明**\n>\n> 当您发起请求同时检查 FromUserId 与多名用户的好友关系时：\n> <ul><li>如果成功检查 FromUserId 与 1 名或更多用户的好友关系，Code 都会返回 0。此时请参考 Fails 中的具体信息，确认操作结果。</li>\n> <li>如果  FromUserId 与全部目标用户的好友关系都检查失败，Code 会返回相关返回码，具体请参考 <a href=\"/zim-server/return-codes\" target=\"_blank\">全局返回码</a>。</li></ul>\n\n<table>\n<tbody><tr>\n<th>Code / SubCode</th>\n<th>描述</th>\n<th>处理建议</th>\n</tr>\n<tr>\n<td>660000001</td>\n<td>业务类通用错误。</td>\n<td>请重试，或联系 ZEGO 技术支持。</td>\n</tr>\n<tr>\n<td>660000002</td>\n<td>输入参数错误。</td>\n<td>请检查输入的参数。</td>\n</tr>\n<tr>\n<td>660300005</td>\n<td>调用接口的频率超出了 AppID 级别限制。</td>\n<td>请稍后再试。</td>\n</tr>\n</tbody></table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求结果的说明信息。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID。","example":"343649807833778782"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Successes</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>检查成功列表。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"成功检查 FromUserId 与此用户 ID 的好友关系。","example":"user_id1"}}></SchemaItem><SchemaItem collapsible={false} name={"Relation"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"关系类型，详情请参考本接口功能描述。","example":4}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Fails</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>检查失败列表。<ul><li>Code 为 0：</li><li>Fails 为空，表示成功检查 FromUserId 与全部目标用户的好友关系。</li><li>Fails 不为空，表示 FromUserId 与部分目标用户的好友关系检查失败，请参考 SubCode 处理。</li></ul><ul><li>Code 不为 0：</li><li>Fails 为空，表示参数错误、接口频率限制、系统错误。</li><li>Fails 不为空，表示FromUserId 与全部目标用户的好友关系检查失败。</li></ul></div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"FromUserId 与此用户 ID 的好友关系检查失败。","example":"user_id3"}}></SchemaItem><SchemaItem collapsible={false} name={"SubCode"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"具体失败返回码，完整返回码请参考 Code 说明或者 [全局返回码](/zim-server/return-codes)。\n","example":660000001}}></SchemaItem><SchemaItem collapsible={false} name={"Relation"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"关系类型。仅当请求参数 CheckType 为 0 时，此字段有值，为 1 或 2，相关数值详情请参考本接口功能描述。","example":1}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"Successes\": [\n    {\n      \"UserId\": \"user_id1\",\n      \"Relation\": 4\n    }\n  ],\n  \"Fails\": [\n    {\n      \"UserId\": \"user_id3\",\n      \"SubCode\": 660000001,\n      \"Relation\": 1\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem><TabItem label={"Example"} value={"Example"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"Successes\": [\n    {\n      \"UserId\": \"user_id1\",\n      \"Relation\": 4\n    },\n    {\n      \"UserId\": \"user_id2\",\n      \"Relation\": 4\n    }\n  ],\n  \"Fails\": [\n    {\n      \"UserId\": \"user_id3\",\n      \"SubCode\": 660000001,\n      \"Relation\": 1\n    },\n    {\n      \"UserId\": \"user_id4\",\n      \"SubCode\": 660000001,\n      \"Relation\": 2\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
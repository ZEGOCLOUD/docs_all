---
id: query-users-online-status
title: "QueryUserOnlineState"
description: "查询用户的在线状态，支持查询单个用户、或批量查询多个用户的在线状态。"
api: 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
info_path: core_products/zim/zh/docs_zim_server_zh/user/open-api-desc
---

<h1 className={"openapi__heading"}>QueryUserOnlineState</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


查询用户的在线状态，支持查询单个用户、或批量查询多个用户的在线状态。

<Note title="说明">调用频率限制：20 次/秒。</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://zim-api.zego.im/?Action=QueryUserOnlineState\n","required":true,"schema":{"type":"string","enum":["QueryUserOnlineState"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/zim-server/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/zim-server/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/zim-server/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"UserId","in":"query","required":true,"description":"需要查询的用户 ID 列表（已在客户端调用 login 方法登录 ZIM 服务，或已调用 [服务端 API](https://doc-zh.zego.im/zim-server/user/batch-register-users) 完成注册），最大支持查询 100 个用户 ID。\n\n示例：UserId[]=a&UserId[]=b\n\n>**说明**\n>\n> UserId 仅支持数字，英文字符和 '!'，'#'，'$'，'%'，'&'，'('，')'，'+'，'-'，':'，';'，'<'，'='，'.'，'>'，'?'，'@'，'['，']'，'^'，'_'，' '，'{'，'}'，'|'，'~'。\n","schema":{"type":"array","maxItems":100,"items":{"type":"string","maxLength":64,"example":"a"}},"style":"form","explode":true}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>OK</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"返回码。\n\n以下仅列出了接口业务逻辑相关的 Code 和 SubCode ，完整返回码请参考 [全局返回码](/zim-server/return-codes)。\n<table>\n<tbody><tr>\n<th>Code / SubCode</th>\n<th>说明</th>\n</tr>\n<tr>\n<td>660000011</td>\n<td>用户个数超过限制。</td>\n</tr>\n<tr>\n<td>660200001</td>\n<td>不存在的用户 ID。<br/>用户已经登出。<br/>用户仅通过服务端注册，并未登录过。</td>\n</tr>\n</tbody></table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求结果的说明信息。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID。","example":"343649807833778782"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Result</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>查询的用户状态结果。用户处于在线状态或离线状态时，通过该字段返回。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"在线或离线用户的 ID。","example":"id1"}}></SchemaItem><SchemaItem collapsible={false} name={"Status"} required={false} schemaName={"string"} qualifierMessage={"**Possible values:** [`Online`, `Offline`]"} schema={{"type":"string","description":"用户状态，包括：\n- Online：在线。\n- Offline：离线。\n","enum":["Online","Offline"],"example":"Offline"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>ErrorList</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>查询失败列表。用户 ID 不存在或者用户已登出时，通过该字段返回。<ul><li>Code 为 0：</li><li>  ErrorList 为空，全部用户在线状态查询成功。</li><li>  ErrorList 不为空，表示部分用户在线状态查询失败，请参考 SubCode 处理。</li></ul><ul><li>Code 不为 0：</li><li>  ErrorList 为空，表示参数错误、接口频率限制、系统错误。</li><li>  ErrorList 不为空，表示所有用户在线状态查询失败。</li></ul></div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"UserId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"不存在的用户 ID 或已登出用户的 ID。","example":"id4"}}></SchemaItem><SchemaItem collapsible={false} name={"SubCode"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"查询失败时的返回码，完整返回码请参考 Code 说明或者 [全局返回码](/zim-server/return-codes)。\n","example":660200001}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"Result\": [\n    {\n      \"UserId\": \"id1\",\n      \"Status\": \"Offline\"\n    },\n    {\n      \"UserId\": \"id2\",\n      \"Status\": \"Online\"\n    }\n  ],\n  \"ErrorList\": [\n    {\n      \"UserId\": \"id4\",\n      \"SubCode\": 660200001\n    }\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
---
id: import-group-messages
title: "ImportGroupMsg"
description: "如果您正使用其他即时通讯服务并希望接入 ZIM，可调用此接口，向 ZIM 导入群组的历史消息（按时间顺序）。"
api: eJztWu1bG8d2/1e247aJWwkEuNhVCffeXqe3PGlu8sRJP1xEbxZpkPZGWim7qwSH0kdgBAL0gm1ejCwbE/MW20g4EBDSAn+Md2ZXn9Q/oT0zi1hAxiRtbpvnMR9mtbMzZ845M+d3XoYhpIlBFXl7UQSrqhiU5CDqc6EAVv2KFNOkqIy8iKyN0scFOrpBN58aB0fm7AZJ7hrVeZLZpgu7tUTeKpZoIUOmlsn+LimnaeEhza6S5Krwh54P63qa5ErW1h1zdoNursCH3FPonLkLnwVS0kly1TxcMatjZn6MZMdJ7nu6m6IjpbqeoulJWGJhp7ZcIZVcXZ98lRj1yT656/dRDQuapIXxez5klXbog6wPdftkkhulc1vCPynRyGcqVnoCrxIjv1Oi8VhPQDCqSTpboukROrdFNhdeJUas6Zd0foJsLpgv1si9tODzvfMX79T19DtXWPuXrP0r1v41a99l7VXW/i1r3az1svYfWOvzdbHne6xtsfu62fNXrP01a3tZ28faf2PtH1kr2DOG7Ocwe/47a//jHVsBRrliVMbN6iLREyR310okSXmNPlqlD3fI6oGZHzMO7teepet6+g/v/+4jgWY3rMxMYyzfRlpI0PktczJFCy/M/Jhw6+YHNnW+5SR3t5YYofP7VmmPvhzlr8KH7KTgT2/HsGCUK0KbYObH6PwELbw43rc0SS02JpPSPqnMwt4Wv6WpPfM5bOytmx8IfOFaIQFU2luut3gEmpo3qqtGeaquTxr7S4aep7O7JLVllVY57WP+SvtGJcuXIPfSNLtKZ3fPcdbu8QBv1sQzUswb+5Mn7DV4O55LZw/P82nr5CyjN5yMnlIYp3VuplGdNvazQm97i6fF4+IUrgokXakt7HD7MKqrtqCneaULu3U9bRyMgyYeHJorFbAh9sl8WSWPp41yhRaemUurMKw8Sxee0O05K7tHcvPG0TIdKZHxJCnuv0qMkrXRWiHBPwGRR8sNdVilPbI1zhgmmQmzst5ETi7JpaSFM9Ey2DJov/PjwDlrKiSwvr9klDON7eYiOXa8qxXsvfu1ds/xpfbtXTM7UVucIandup5v9wj0xXKruX7vVWK0QcEnX7ki1J6lrdIInUvRxwWfTFMzZGqJIxFflMxkncDFkIpDnPm8xDFM6KVLq1bpW/NwxRqZMvS8VXpkT04tWMsbfe+2fiNF3CpWvsJKqz8qf4UVVQRIbf0yjpXbbi2E3Rx1sTssqZo7OuAOAlK5/SFRU6/W9bS5XLSKK+dXoA9KZGaNM0yKaTq3w7SEXCgawwpbpCeAvEiKxKKKZlO111KRC8VERYxgDSsA/UNIFiMYedFv/AzwXUgC1GdMorO+oFvg0pPsEnk8zcHWJ3f75G4hpGkx1dvKpBZjUss3OBhtkSKtv+J03+thzDAs/lANMm4V/GVcUnAAeTUljl1I9YdwRETeIaTdjgFLqqaAS3IhLMcj4KZOE0F9wy6karfDMHYgqkRg5GAsHA1gTnLYdSJdLNYTuFi4/1y6t0ySL0jyJRcMrKYyC/vfE4DdmH0pMDAlqfFaMmPmxwBDU3tktmSUE2Ri0yqNwBQw56zQJQqaqASx9p4P/bE/LMpf+JAQUvDAf5/bY1X5o7IaDeOGqnyo20brdZLaJbmtrlaxW+A2+yoxehmNSbKGg1hBLqYPUUNeFJdkraMdDTuUcUsKyqIWV/Dvo7If/2ittHUKxkFGaOsUrKOHJLVby+doocLdqFH+vq6nbghkc8GaGuVf6NwWYEQIDwqmPm8+GeGO3JxdoqkZs7hAt+dIrkRyo1biDijOVpPTgES/H6uqJAftDjhi6hX1WA43HhQjsTD2oW5z85DMZMyVinE4Dfq7pOLso+bU0qdSBKuaGIn9+GNzcJ9MZoTPZGlQ4AEMTW0DomTmjIOMUa5wUPrzKKCup2khQVbyJDliFctCm4ed4HtL4BtLJbJX/OlnS5K1zmvNj9a/YkV9I5400Z3NPvMdJLf347YP6A+I8TDw1t7icSAHvPU1ZfQncsgQYcOoZLkz4TEShA8zKfB0ifVXiVHwrGxTe/kcsJLU7mnX8KaNjWB/SJQlNXKVH5cfe577+GCsav8YDdyGEWfn+qOyhmUNPomxWFjyczf1JxUUMHSedLT/T9ivnWKiF51E3MiF7IgbuZAjJkMu9LEiRRVJu33ygfHU50IxBVyXJmEVFnIQa7rFzg2ynS4L6axEsgHLQs/Nup4ie9+TwkYjpLP9eTgalGSBzu/T7TlzsUoO5hwuHuwlNU/2vrcH9zY8v/Cbj3tOb15cxUprv6j5Q24FByVVw4ob+tSrAjjm1Azd3iDjaY53yIUi4uC/YDmohZC3ox2cFTNaAOk2NHyitzcKzRMmoefmG8gqjKxzE05Iy/FIP7PmZvrk4SWccUf0YebHaoBaG/xr43QLvY7dFHhUdlpPjfTS/oX7o4HbbknWlGggzuKDqyyE6Rbo9gYdy9kxhVHO8IzNOFo2qiuOiBA5pGwbdpysS8pn6A9IMmVW1ut6yiqt0TtJhzRkqQLZzNooOfrBqE6b1YzgFs7M63v32IsHon73N6GGE2fxjxxQolKg1Slga7+oSn63HzxuTFOvnKF3ta5PsphzniR0sjZqlKfret4nu4W2up43DrJMbLfQDm/lTfuto67na88fNFTCwa7N1e7q6DujIafBNbHlpkbFkgfgKrlnHNznAEif6ETP/Rn3Xvj8o4GBsCTjj+Nq6HMB8vTP/1lUP8F+LMW0zyHSoMUfzp2KoWOJkReFcDgcFb6OKmHApPcHNSwHcOCmqInIiwLgv9CteP+HavByJsLV4UwtuUGA50/o5uxLOrrB+xs7aqXvkIc7kBv1elztHk8fjxLO5qxN8z9ylCTLz7mlN8Rr93iAaywq/hAO/PYEwi8GjjMLQOr+NGHufNtQ4mWZopMZCFmWn5PxRbq5wufX9XRt7ohU1ozyVG1xplZ9YBVXQOjOa3ZA+Cox2hhtHBS4B3VUBtK1xZXao8ecrlEZd5KGnOc4k4Sy09FEYyKdKYAQqS2S3LZGZs9n/We0h/AgYuqTA8fCSpFLg6NdPzgJ7FIQ6YFSSs/N9XtmZZ2knnPMh7AgPWkm151zjGqWTGaA25ksYCorbllHD63lNE/qbOs29CcCz8EhOX5S1/MkN+9DPLrkpHzIHmvX5BJ6Xc9DYWfhOxZRnhkuuAWyulBbmSHppLU+Ror5M0U34+gR2XxAVr6jc1vNoNEqLls7+9zMBbed4pO9ItFHbatvin0xRfJLcvCKczwg3t8INzqveeDPh3icShfzRjlDDhfgRyXbVFoof2WsOwd04Ts4Pf+fBGoUM4A9JoGT//Ouq70DwIcVNJD3VHrLj+UnPHRDw8MwTsFqLCqrPEhq93jgcfqAfvQB+h8EdKejsN+yPPpNJmEdzZKHj80nI8dbA/WiaaOaJKkFMgFVSl4yMMp5MrVcS1Stw7vmwzJJboOVHk8G82aVjEaP0x8nN8jLROPLafeiYC2uyG5/NIBV7ki6NLE/zKpFGria7i5NYS+h7gaJrlYtdNzHtt7RQVbGzJlxUq1YxeJxd6tNgreB7s5ODzu2bV2tWsDusw7vQyk7P2aDxMo62cpZu0kyUeE1KVaGOhle2qNPE1BEajbPMbbJ2n8Ha7c7iJ0JgqGAxsJa62jCLuueXtmuXCRTfBiZyZLxjA1Rx3h5wfqdr5VdaBTbyxmwu8LG+bVZVev8DF7VoptPzeXi+eVb+V6yX/b2Og3JcxLhXMIJ8lytep8+LrAkGE4Ar5ee9RNqnKVn4CxsU7xMeM4XaITnJ+Q6rnV0Xvv7G57rNzo6rl+/cf1GO4vP1eAt/OVlvY+g4i/P0LVhxBH7cNv1OJTSEOWUJM04OmEI6F6MThyPGDwNu1AEa6EoUI1FVYYnIqQkqBW5ELdWXnCMK2EIypoXDM/nOtUlo5zgV0qksEUeJep6Co5XukJS49AuLdX1SQS5fVPKbjUkvpa6Ud4kDw/IynptcZzRnaI/7F1MLvRF8LXkaLlED7dJDnxNbW2RlksX0xpQXs8afbFOd6CaBuWh5BZJTptruYvJhcXB1+vxMGutHkFOPPWE7D2+mFB/NPJ6lVXyZOUZENpcMva33qD7YOwC3RdIZsGo5EHG+S3g69Fyc3JiXAtdeEpqkzv00R07VT93YhCUQcD/fXJSCnn/xFqc9QZIxR2ZOKTQZzLoNme62XYus7p82nE662j3eJoE9BCpNglUuWVK8kCUwYZtodEYlpnWQTfIhb6ya3Be1AZ3T3ZoIPpZaGDXwVjF+VY8BrYNmBIRpTBDC9bza9C3PxyNB1r80QjLlMC2I6LsIHGmKn9ma4ZO4pG3d8lv75Lf3iW/vUt+e5f8C7hLtmNRDQ9qrbGwKMngsJhXHrIDu14EpfsQxHreXjQ01C+q+DMlPDwM3fw6BcK9gKRCxB5A3gExrOIL3MO7n9g3CleF/92b5qayfIFvO6+9vxLDcRjEoo+fxPMv4AL5IkXYN+Q/ix5+gVfGF6jq3P35z3N2fom3yBdozXmf/rMorOnV8WW28eSu+mfk6//2wvgyajglfx+8KBIoAHl74T9tQlgMYIVBOp9oJylu+3b3eO65miPo8hhs4fLrwrF9jjLCxx/d+hS5UL+dWUVYUQMp4tdw+Sx+jbzIh3yI/d8TUGBVS9Y/hMKiHIzzNIzThb//AmfmRtc=
info_path: core_products/zim/zh/docs_zim_server_zh/messaging/open-api-desc
---

<h1 className={"openapi__heading"}>ImportGroupMsg</h1>

<MethodEndpoint method={"post"} path={"/"}></MethodEndpoint>


如果您正使用其他即时通讯服务并希望接入 ZIM，可调用此接口，向 ZIM 导入群组的历史消息（按时间顺序）。

<Note title="说明">
参数 FromUserId、GroupId 仅支持数字、英文字符和 \'!'，'#'，'$'，'%'，'&'，'('，')'，'+'，'-'，':'，';'，'\<'，'='，'.'，'\>'，'?'，'@'，'['，']'，'^'，'_'，' '，'\{'，'\}'，'|'，'~'。

为了给开发者带来更好的体验，ZEGO 推荐开发者使用最新版本的 SDK。

如果发送方请求发送 MessageType 为 1 的文本消息，则发送方对应的客户端（SDK 版本需为 2.7.0 或以上）也会收到该消息。

对于发送和接收 MessageType 为 200 的自定义消息，发送方和接收放对应的客户端的 SDK 版本需为 2.8.0 或以上。

如果接收端的 SDK 版本介乎 [2.0.0, 2.8.0) 区间，可以收到自定义消息时，但会显示此消息类型为未知，且无法获取信息内容。如需获取此条消息，请将 SDK 升级为 2.8.0 或以上版本。

如果接收端的 SDK 版本为 1.x.x 版本，则无法收到自定义消息，也不会收到未知消息。
</Note>
<Note title="说明">调用频率限制：20 次/秒。</Note>

## 验证效果
成功导入消息后，可调用 ZIM 服务端接口 [查询群聊会话消息列表](/zim-server/conversation/query-the-message-list-of-group-chats)，确认群聊会话消息是否导入完整。

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://zim-api.zego.im/?Action=ImportGroupMsg\n","required":true,"schema":{"type":"string","enum":["ImportGroupMsg"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。应用 Id，由 ZEGO 分配的用户唯一凭证。可从 <a target=\"_blank\" href=\"https://console.zego.im/\">ZEGO 控制台</a> 获取。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。16 位 16 进制随机字符串（8 字节随机数的 hex 编码）。生成算法可参考 <a href=\"/zim-server/accessing-server-apis#signature-example\">签名示例</a>。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。当前 Unix 时间戳，单位为秒。生成算法可参考 <a href=\"/zim-server/accessing-server-apis#signature-example\">签名示例</a>，最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/zim-server/accessing-server-apis#signature-mechanism)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem></ul></div></details>
<MimeTabs className={"openapi-tabs__mime request"}><TabItem label={"application/json"} value={"application/json-schema"}><details style={{}} className={"openapi-markdown__details mime"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-mime"}><h3 className={"openapi-markdown__details-summary-header-body"}>Body</h3><strong className={"openapi-schema__required"}>required</strong></summary><ul className={"request-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"FromUserId"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 32 characters`"} schema={{"type":"string","description":"消息发送者的用户 ID（已在客户端调用 login 方法登录 ZIM 服务，或已调用 [服务端 API](/zim-server/user/batch-register-users) 完成注册）。","maxLength":32,"example":"u1"}}></SchemaItem><SchemaItem collapsible={false} name={"GroupId"} required={true} schemaName={"string"} qualifierMessage={"**Possible values:** `<= 32 characters`"} schema={{"type":"string","description":"群组 ID。","maxLength":32,"example":"r1"}}></SchemaItem><SchemaItem collapsible={false} name={"MessageType"} required={true} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"消息类型，群聊会话的适用类型请参考 [MessageBody 说明](/zim-server/messaging/messagebody-introduction)。\n> 注意\n>\n> 不支持信令消息。\n","example":1}}></SchemaItem><SchemaItem collapsible={false} name={"Priority"} required={true} schemaName={"number"} qualifierMessage={"**Possible values:** [`1`, `2`, `3`]"} schema={{"type":"number","description":"消息优先级（详情请参考 [基本概念介绍 - 消息优先级](https://doc-zh.zego.im/zim-android/introduction/basic-concepts#消息优先级)），取值如下：\n- 1：低。\n- 2：中。\n- 3：高。\n","enum":[1,2,3],"example":1}}></SchemaItem><SchemaItem collapsible={false} name={"MessageBody"} required={true} schemaName={"object"} qualifierMessage={undefined} schema={{"type":"object","description":"消息内容，具体参数格式请参考 [MessageBody 说明](/zim-server/messaging/messagebody-introduction)。\n> 注意\n>\n> 不支持 `OfflinePush` 和 `HasReceipt` 字段。\n","example":{"Message":"hello world","ExtendedData":"d"}}}></SchemaItem><SchemaItem collapsible={false} name={"SubMsgType"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"具体的自定义类型。值由您定义，取值范围为 [0,200]。当 MessageType 为自定义消息时，必填。","example":200}}></SchemaItem><SchemaItem collapsible={false} name={"SearchedContent"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"自定义消息的检索字段。当 MessageType 为自定义消息时，才可填写此字段，长度上限默认为 64 字节。此字段作用于客户端，除非填写了此字段，否则无法通过客户端搜索到关联的自定义消息。","example":"ex"}}></SchemaItem><SchemaItem collapsible={false} name={"SendMessageTime"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"消息发送时间戳（Unix，毫秒级别）。请按照发送时间从前到后的顺序进行导入。\n- 传 0 或不传：取\"当前时间\"。\n- 其他值：最早可取\"当前时间 - 套餐包规定的历史消息保存天数（详情请参考 [计费说明 - 版本差异](/zim-android/introduction/pricing#版本差异)）* 86400000\"，最晚不得晚于\"当前时间\"。\n\n不能早于套餐包规定的历史消息保存天数（详情请参考 [计费说明 - 版本差异](/zim-android/introduction/pricing#版本差异)），也不能晚于当前时间。\n","example":123}}></SchemaItem></ul></details></TabItem></MimeTabs>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>OK</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"返回码。\n\n以下仅列出了接口业务逻辑相关的返回码，完整返回码请参考 [全局返回码](/zim-server/return-codes)。\n<table>\n<tbody><tr>\n<th>返回码</th>\n<th>说明</th>\n<th>处理建议</th>\n</tr>\n<tr>\n<td>660400001</td>\n<td>输入的消息大小超出限制。</td>\n<td>请检查输入的消息大小。</td>\n</tr>\n<tr>\n<td>660500002</td>\n<td>消息发送者未登录过 SDK。</td>\n<td>请用户先登录后再发送消息。</td>\n</tr>\n<tr>\n<td>660600001</td>\n<td>输入的 GroupId 不存在。</td>\n<td>请确认输入的 GroupId 是否正确。</td>\n</tr>\n</tbody>\n</table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求结果的说明信息。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID。","example":"343649807833778782"}}></SchemaItem><SchemaItem collapsible={false} name={"MsgSeq"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"number","description":"消息 seq。","example":123}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"343649807833778782\",\n  \"MsgSeq\": 123\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
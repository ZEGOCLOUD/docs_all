---
articleID: 195
date: "2024-05-06"
---
# 集成 SDK

---

## 准备环境

在开始集成数字人 SDK 前，请确保开发环境满足以下要求：

* Android Studio 2020.3.1 或以上版本。
- Android SDK 25、Android SDK Build-Tools 25.0.2、Android SDK Platform-Tools 25.x.x 或以上版本。
- Android 6.0（API 23）及以上版本的设备或模拟器，支持音视频能力且已连接互联网。

## 集成数字人 SDK

数字人 SDK 已发布在 Maven 仓库，推荐使用依赖管理方式集成。

### 添加 Maven 仓库

根据 Android Gradle Plugin 版本选择配置方式：

<Tabs>
<Tab title="AGP 7.1.0 及以上">

在项目根目录打开 `settings.gradle`，在 `dependencyResolutionManagement` > `repositories` 中添加：

```groovy
dependencyResolutionManagement {
  repositoriesMode.set(RepositoriesMode.FAIL_ON_PROJECT_REPOS)
  repositories {
      google()
      mavenCentral()
      maven { url 'https://maven.zego.im' }   // 数字人 SDK 仓库
  }
}
```

</Tab>
<Tab title="AGP 低于 7.1.0">

在项目根目录打开 `build.gradle`，在 `allprojects` > `repositories` 中添加：

```groovy
allprojects {
    repositories {
        google()
        mavenCentral()
        maven { url 'https://maven.zego.im' }   // 数字人 SDK 仓库
    }
}
```

</Tab>
</Tabs>

### 添加依赖

在应用模块 `app/build.gradle` 中加入数字人 SDK 依赖：

```groovy
dependencies {
    // 数字人 SDK
    implementation "im.zego:digitalmobile:1.3.0.43"
}
```

<Warning title="注意">数字人 SDK 支持 Android 6.0 (API 23) 及以上版本。</Warning>

## 设置权限

根据业务需要在 `app/src/main/AndroidManifest.xml` 声明基础网络与音频权限，并在运行时申请录音权限（如需采集音频）：

```xml
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
```

<Warning title="注意">Android 6.0 及以上需要在运行时申请 `RECORD_AUDIO` 等敏感权限。</Warning>

```java
String[] permissionNeeded = {"android.permission.RECORD_AUDIO"};

if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.M) {
    boolean granted = ContextCompat.checkSelfPermission(this, "android.permission.RECORD_AUDIO")
            == PackageManager.PERMISSION_GRANTED;
    if (!granted) {
        // 101 为 requestCode，可自定义大于 0 的值
        requestPermissions(permissionNeeded, 101);
    }
}
```

## 防止混淆代码

在 `proguard-rules.pro` 中添加保持规则，避免混淆数字人相关类名：

```txt
-keep class **.zego.**{*;}
```

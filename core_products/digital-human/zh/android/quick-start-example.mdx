---
articleID: 3125
---

# 示例源码运行指引

本文介绍如何快速跑通数字人 Android 示例源码，体验数字人基础功能。

## 准备环境

在运行示例源码前，请确保开发环境满足以下要求：（以下说明皆以 macOS 开发电脑为例)：

* Android Studio 2020.3.1 或以上版本。
* Android SDK 30、Android SDK Platform-Tools 30.x.x 或以上版本。
* Android 8.0（API 26）或以上版本，且支持音视频的 Android 设备或模拟器（推荐使用真机），如果是真机，请开启"允许调试"选项。
* Android 设备、macOS 开发电脑已经连接到 Internet。

<Note title="说明">

- 首次编译示例源码时，如果没有对应的依赖库或者构建工具，Android Studio 会自动下载示例源码，可能需要较长时间，请耐心等待。
- 建议下载特定的 Gradle 及所需的依赖库，请参考 [Gradle Services](https://services.gradle.org) 下载。示例源码中使用的 Gradle 相关版本如下：
  - Gradle：8.13（在 "gradle/wrapper/gradle-wrapper.properties" 文件中查看）。
  - Android Gradle 插件：通过 libs.versions.toml 管理（在 "gradle/libs.versions.toml" 文件中查看）。
关于 Android Gradle 插件、Gradle、SDK Tool 之间的版本依赖关系，请查看：[Android Gradle 插件版本说明](https://developer.android.com/studio/releases/gradle-plugin)

</Note>

## 前提条件

1. 已部署数字人服务端，并确保服务端 API 可正常访问。
2. 已在 [ZEGO 控制台](https://console.zego.im) 创建项目，详情请参考 [控制台 - 项目管理](/console/project-info) 中的"项目信息"。

## 获取示例源码

示例源码位于 `digital_human_paas_client_quick_start/Android` 目录下。

## 示例源码目录结构

下面目录结构为 Android 示例项目的文件结构，下文所涉及的文件路径均为相对于此目录的路径。

```tree
.
├─ app/
│   ├─ src/
│   │   └─ main/
│   │       ├─ java/com/example/zegodigitalhumanquickstart/
│   │       │   ├─ activity/          # 主界面Activity
│   │       │   ├─ callback/         # 回调接口
│   │       │   ├─ model/            # 数据模型
│   │       │   ├─ network/          # 网络请求
│   │       │   ├─ util/             # 工具类
│   │       │   └─ view/             # 自定义视图
│   │       ├─ res/                  # 资源文件
│   │       └─ AndroidManifest.xml   # 应用清单
│   └─ build.gradle                  # 应用构建配置
├─ gradle/
│   └─ wrapper/                      # Gradle 包装器
├─ build.gradle                      # 项目构建配置
├─ settings.gradle                   # 项目设置
└─ gradle.properties                 # Gradle 属性配置
```


## 运行示例源码

1. 在开发电脑中找到 Android Studio 软件图标。
   <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/SampleRunningGuide/open_as.png" /></Frame>

  <Accordion title="在开发电脑上安装 Android Studio 的方式" defaultOpen="false">
- 方式 1：登录 [Android Studio 官网](https://developer.android.com/studio) 下载并安装 Android Studio 及其相关的 SDK Tools。由于国内运营商网络限制等原因，开发者需要确保本机能连接该网站，若无法访问建议选择方式 2。
- 方式 2：使用搜索引擎搜索 "Android Studio 下载"、"Android Studio 安装" 和 "Android Studio SDK Tools 安装"，查找可下载的源网站，并安装相关软件和工具。
</Accordion>

2. 打开 Android Studio，单击 "Open an Existing Project"。
   <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/SampleRunningGuide/as_pre_ui.png" /></Frame>

3. 在示例源码文件夹中，选择 `Android` 文件夹，并单击 "Open" 打开。
<Frame width="512" height="auto" caption="">
  <img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/SampleRunningGuide/open_express_android_demo_new.png" />
</Frame>

4. 配置服务器 URL。修改 `app/src/main/java/com/example/zegodigitalhumanquickstart/util/ZegoQuickStartConstants.java` 文件中的 `DEFAULT_SERVER_URL` 常量，将其设置为您的数字人服务端地址。

    <Warning title="注意">

    请确保服务端地址可正常访问，否则示例源码无法正常运行。默认值为 `http://192.168.88.213:3000/api`，请根据实际情况修改。
    </Warning>

    示例代码：
```java
// 在 ZegoQuickStartConstants.java 中
public static final String DEFAULT_SERVER_URL = "http://your-server-url:port/api";
```

5. 将 Android 设备链接到开发电脑，当该设备成功开启"开发者模式"和"USB 调试"功能后，可以看到 Android Studio 上方的 "Running Devices" 选项框由下图：
    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/SampleRunningGuide/as_no_device_new.png" /></Frame>
   变为下图：
    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/SampleRunningGuide/as_connected_device_new.png" /></Frame>
   即 Android Studio 已成功连接到 Android 设备，可以将示例源码运行到该设备上了。

    <Note title="说明">

    - 当开发电脑连接 Android 设备后，大部分设备会弹出提示，不同 Android 厂商的提示信息有所不同，可根据情况选择 USB 模式。
    - 当 Android 设备连接开发电脑后，需要根据情况在该设备上开启开发者模式和 USB 调试功能（不同厂商的 Android 设备开启方式不同）。具体开启方式开发者可以需要自行搜索引擎搜索，例如：目前存在一台未开启过开发者模式与 USB 调试功能的某设备，可以在搜索引擎搜索"某设备开启开发者模式"，查看具体的开启教程。
    </Note>

6. 单击 "Run" 按钮，编译并运行示例源码。
   <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ExpressSDK/SampleRunningGuide/run_android_demo_new.png" /></Frame>


## 体验数字人功能

在真机中运行项目，运行成功后，可以看到数字人界面。示例应用提供以下功能：

1. **创建任务**：点击"创建任务"按钮，创建数字人流任务。
2. **驱动数字人**：
   - **文本驱动**：通过文本输入驱动数字人说话。
   - **音频驱动**：通过麦克风采集音频驱动数字人。
   - **WebSocket TTS 驱动**：通过 WebSocket 实时 TTS 驱动数字人。
3. **任务管理**：可以停止当前任务、打断驱动、销毁所有任务等。

<Note title="说明">

- 首次运行应用时，需要授予摄像头和麦克风权限，否则部分功能可能无法正常使用。
- 确保服务端已正确部署并运行，否则无法创建任务和驱动数字人。
- 数字人资源会在首次使用时自动预加载，请耐心等待。

</Note>

## 常见问题

**1. 运行示例源码时提示"网络错误"或"服务端连接失败"，如何处理？**

请检查以下内容：
- 确保已正确配置服务器 URL（参考步骤 4）。
- 确保服务端已正确部署并运行。
- 确保 Android 设备已连接到 Internet，且可以访问服务端地址。

**2. 创建任务失败，提示"AppID 未设置"或"Token 为空"，如何处理？**

请确保服务端 API 返回了正确的 AppID 和 Token。示例应用会从服务端获取这些信息，无需手动配置。

**3. 数字人无法显示或黑屏，如何处理？**

请检查以下内容：
- 确保已成功创建任务并登录 RTC 房间。
- 确保服务端返回的 Base64Config 配置正确。
- 查看日志输出，确认数字人 SDK 是否正常启动。

---
articleID: 3127
---

# 跑通示例源码

本文介绍如何快速跑通数字人服务端（Go）示例源码，帮助您快速搭建数字人业务服务端。

## 简介

本示例源码演示了数字人服务端的核心功能，包括：

* **Token 生成**：为客户端提供身份验证的 Token
* **数字人流任务管理**：创建、停止、销毁数字人流任务
* **数字人驱动**：通过文本、音频或 WebSocket TTS 方式驱动数字人说话

该服务端示例提供了完整的 RESTful API，支持与 Android、iOS、Web 客户端集成，实现数字人直播场景。


## 准备环境

在运行示例源码前，请确保开发环境满足以下要求：

* 安装 [Go](https://golang.org/dl/) (推荐版本 1.21 或更高版本)。
* 具备基础的 Go 语言开发环境（如 VS Code 或 GoLand）。
* 开发电脑已经连接到 Internet。

## 前提条件

1. 已在 [ZEGO 控制台](https://console.zego.im) 创建项目，获取项目的 **AppID** 和 **ServerSecret**，详情请参考 [控制台 - 项目管理](/console/project-info)。
2. 已联系 ZEGO 技术支持开通数字人服务。

## 获取示例源码

<Card title="示例源码" href="https://github.com/ZEGOCLOUD/digital_human_paas_quick_start/tree/master/Server" target="_blank">点击获取完整的数字人快速启动示例源码。</Card>

## 示例源码目录结构

下载示例源码后，进入 `Server` 目录，下面为服务端示例项目的文件结构：

```tree
.
├── main.go                    # 程序入口文件
├── go.mod                     # 依赖管理文件
├── .env.example               # 环境变量配置文件示例
├── internal/                  # 内部逻辑处理
│   ├── config/                # 配置读取
│   ├── handler/               # API 接口处理器
│   ├── zego/                  # ZEGO 服务端逻辑封装
│   └── ...
└── pkg/                       # 公共工具包
```

## 运行示例源码

<Steps>

<Step title="下载或克隆源码">

打开终端，执行以下命令克隆仓库到本地：

```bash
git clone https://github.com/ZEGOCLOUD/digital_human_paas_quick_start.git
```

</Step>

<Step title="安装依赖">

在终端中进入 `Server` 目录，执行以下命令安装必要依赖：

```bash
cd Server
go mod download
```

</Step>

<Step title="配置环境变量">

a. 在 `Server` 目录下，将 `.env.example` 文件重命名为 `.env`。

b. 编辑 `.env` 文件，填入您的 **AppID** 和 **ServerSecret**。

```env
# ZEGO API 配置
ZEGO_API_HOST=aigc-digital-human-api.zegotech.cn
NEXT_PUBLIC_ZEGO_APP_ID=您的_AppID
ZEGO_SERVER_SECRET=您的_ServerSecret

# 默认数字人ID（可选，示例代码已提供默认值）
DEFAULT_DIGITAL_HUMAN_ID=7a08e6e1-d6a9-43c9-a99f-8be184468d1b

# 服务器监听端口
PORT=3000
```

**参数说明**：
* **AppID**：ZEGO 控制台分配的应用标识，用于标识您的应用
* **ServerSecret**：ZEGO 控制台分配的服务器密钥，用于服务端 API 签名验证

</Step>

<Step title="启动服务器">

在终端中执行以下命令启动服务端：

```bash
go run main.go
```

启动成功后，您将看到类似如下的输出：

```log
2026/01/03 10:00:00 [INFO] 服务器启动在端口: 3000
```

</Step>

<Step title="验证接口">

服务端启动后，您可以通过以下方式验证接口是否正常工作：

1. **健康检查**：访问 `http://localhost:3000/health`，若返回 `{"status":"ok"}` 则说明服务运行正常。
2. **获取 Token**：访问 `http://localhost:3000/api/ZegoToken?userId=test_user`，检查是否能成功返回 Token 字符串。

**验证成功后**，您可以：
* **创建数字人流任务**：通过客户端示例应用调用服务端 API 创建数字人流任务
* **驱动数字人**：通过文本、音频或 WebSocket TTS 方式驱动数字人说话
* **任务管理**：停止任务、打断驱动、销毁任务等

<Note title="说明">

* 服务端示例代码提供了完整的 RESTful API，包括任务创建、Token 生成等功能。
* 客户端应用通过调用服务端 API 获取 [Token](/aigc-digital-human-server/quick-start/digital-human-livestreaming) 和任务配置信息。
* 请确保服务端 API 地址可被客户端设备正常访问。

</Note>

</Step>

</Steps>

## 常见问题

**1. 启动服务时提示端口 3000 被占用怎么办？**

您可以修改 `.env` 文件中的 `PORT` 配置项，将端口修改为其他可用端口：

```env
# 服务器监听端口
PORT=8080
```

**2. 获取 Token 接口返回错误或失败，如何处理？**

请按以下步骤排查：
- 检查 `.env` 文件中的 `NEXT_PUBLIC_ZEGO_APP_ID` 和 `ZEGO_SERVER_SECRET` 是否正确填写
- 确认已在 [ZEGO 控制台](https://console.zego.im) 创建项目并获取正确的 AppID 和 ServerSecret
- 检查网络连接，确保服务端可以访问 ZEGO API 服务器（`aigc-digital-human-api.zegotech.cn`）

**3. 客户端无法连接到服务端 API，如何处理？**

请按以下步骤排查：
- 确保服务端已正常启动，并通过健康检查接口验证
- 检查客户端配置的服务端地址是否正确（IP 或域名）
- 如果是本地测试，确保客户端设备和电脑在同一局域网
- 检查防火墙设置，确保端口 3000（或您配置的端口）已开放

## 查看更多

跑通示例源码后，您可以继续查阅以下文档：

* [Android 跑通示例源码](/aigc-digital-human-android/run-example-code)：运行 Android 客户端示例
* [iOS 跑通示例源码](/aigc-digital-human-ios/run-example-code)：运行 iOS 客户端示例
* [Web 跑通示例源码](/aigc-digital-human-web/run-example-code)：运行 Web 客户端示例


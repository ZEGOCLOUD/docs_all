import PostPrototype from '/snippets/common/zh/server/post-prototype.mdx'

# 创建数字人视频流任务

---

##  描述

通过本接口，您可以创建数字人视频流任务。

<PostPrototype link="https://aigc-digitalhuman-api.zegotech.cn?Action=CreateDigitalHumanStreamTask" />

## 请求参数

以下请求参数列表仅列出了接口请求参数和部分公共参数，完整公共参数列表请参考 [调用方式 - 公共请求参数](./../accessing-server-apis.mdx#公共请求参数)。

| 参数               | 类型   | 是否必填 | 描述             |
|------------------|------|------|-------------------------|
| DigitalHumanConfig      | Object | 是    | 数字人配置。 本参数结构，请参考 [DigitalHumanConfig](#digitalhumanconfig)。     |
| RTCConfig      | Object | 是    | RTC 相关配置。 本参数结构，请参考 [RTCConfig](#rtcconfig)。           |
| TTL      | Number | 否    | 数字人视频流任务最大时长，持续时间达到该值自动结束。 单位为秒，取值范围为 [10, 86400]，如果不填，取值为 86400 秒（24 小时）。     |
| MaxIdleTime | Number | 否    | 数字人最大空闲时长，持续达到该时间未驱动数字人，任务将自动结束。单位为秒，取值范围[30, 86400]，默认值为 900 秒（15 分钟）。     |

### DigitalHumanConfig
| 参数               | 类型   | 是否必填 | 描述             |
|------------------|------|------|-------------------------|
| DigitalHumanId      | String | 是    | 数字人 ID。     |
| BackgroundColor     | String | 否    | 背景颜色，十六进制的 RGB 值，格式如 `#ffffff`，如果不填，取值为 `#000000`（黑色）。 |

### RTCConfig
| 参数               | 类型   | 是否必填 | 描述             |
|------------------|------|------|-------------------------|
| RoomId      | String | 是    | 推流目标房间 ID，长度在 128 字节以内，用户自定义传入。     |
| StreamId      | String | 是    | 流 ID，长度在 128 字节以内，仅支持数字，英文字符 和 ‘-’，’_’。<Note title="注意">请注意，StreamId 必须是 AppID 全局内唯一，用户自定义传入。</Note>    |

## 请求示例

- 请求地址 URL：

    ```https
    https://aigc-digitalhuman-api.zegotech.cn?Action=CreateDigitalHumanStreamTask
    &<公共请求参数>
    ```

- 请求消息体：

    ```json
    {
        "DigitalHumanConfig": {
            "DigitalHumanId": "0d3538a4-9e8e-4155-b1fb-c7defb8eeef8"
        },
        "RTCConfig": {
            "RoomId": "1234567890",
            "StreamId": "elias1"
        }
    }
    ```

## 响应参数

| 参数 | 类型 | 描述 |
|------|------|------|
| Code | Number | 返回码。0 表示成功，其他值表示失败。如需了解错误码及响应处理建议，请参考 [返回码](./../return-codes.mdx)。 |
| Message | String | 请求结果的说明信息。 |
| RequestId | String | 请求 ID。 |
| Data | Object | 返回数据。 |
| └TaskId      | String       | 数字人视频流任务 ID。 |


## 响应示例

```json
{
    "Code": 0,
    "Message": "success",
    "RequestId": "d799c85c-10c8-4191-8c6a-3290a5940b5f",
    "Data": {
        "TaskId": "6a5898fa-3e1d-4a6f-b949-05f39f1c10cb"
    }
}
```
# Class

## ZegoDigitalHuman

数字人主类

*Declared in `ZegoDigitalHuman.h`*

### 方法
<ParamField
  name="create"
  prototype="+ (id<IZegoDigitalMobile>)create;"
  desc="创建数字人实例。"
  parent_file="Declared in \`ZegoDigitalHuman.h\`"
  parent_name="ZegoDigitalHuman"
  parent_type="class">
**返回值**

数字人实例，返回 id\<IZegoDigitalMobile\> 协议对象。

**详情**

创建并返回一个数字人 SDK 实例，用于后续的数字人操作。

<Note title="">
- **调用时机**：在应用初始化时调用。
- **相关接口**：[IZegoDigitalMobile](./protocol#izegodigitalmobile)。
</Note>
</ParamField>

<ParamField
  name="setLogConfig:"
  prototype="+ (BOOL)setLogConfig:(ZegoDigitalHumanLogConfig *)logConfig;"
  desc="设置数字人日志配置。"
  parent_file="Declared in \`ZegoDigitalHuman.h\`"
  parent_name="ZegoDigitalHuman"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| logConfig | [ZegoDigitalHumanLogConfig](#zegodigitalhumanlogconfig) * | 日志配置，包括路径、大小和数量 |

**返回值**

如果配置成功设置返回 YES，否则返回 NO。

**详情**

设置数字人 SDK 的日志配置，包括日志文件存储路径、单个日志文件的最大大小和日志文件轮转数量。

<Note title="">
- **调用时机**：此方法必须在调用 [create] 或 [ZegoDigitalHumanResource](#zegodigitalhumanresource) 之前调用。
- **相关接口**：[ZegoDigitalHumanLogConfig](#zegodigitalhumanlogconfig)。
</Note>
</ParamField>

<ParamField
  name="getDigitalhumanUrlbyID:userId:token:deviceId:digitalHumanId:completion:"
  prototype="+ (void)getDigitalhumanUrlbyID:(NSInteger)appId userId:(NSString *)userId token:(NSString *)token deviceId:(NSString *)deviceId digitalHumanId:(NSString *)digitalHumanId completion:(void(^)(NSString * _Nullable url, NSError * _Nullable error))completion;"
  desc="通过数字人ID获取渲染信息URL。"
  parent_file="Declared in \`ZegoDigitalHuman.h\`"
  parent_name="ZegoDigitalHuman"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| appId | NSInteger | 应用ID |
| userId | NSString * | 用户ID |
| token | NSString * | Token |
| deviceId | NSString * | 设备ID |
| digitalHumanId | NSString * | 数字人ID |
| completion | void(^)(NSString * _Nullable url, NSError * _Nullable error) | 完成回调，成功时返回URL，失败时返回错误信息 |

**详情**

通过数字人ID获取指定数字人的客户端推理包下载URL。此方法用于获取指定数字人的客户端推理包下载URL。

<Note title="">
- **调用时机**：在需要获取数字人配置信息时调用。
</Note>
</ParamField>

## ZegoDigitalView

数字人视频渲染视图

**详情**

用于显示数字人视频输出的 UIView 子类。

*Declared in `ZegoDigitalView.h`*

## ZegoDigitalMobileConfig

数字人配置类

**详情**

用于配置数字人的各种参数，包括数字人ID和流配置信息。

*Declared in `ZegoDigitalMobileConfig.h`*

### 常量

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| STREAM_TYPE_WEB | NSString * const | Web类型 |
| STREAM_TYPE_MOBILE | NSString * const | 移动端类型 |

### 属性
<ParamField
  name="digitalHumanId"
  prototype="nonatomic, copy NSString * digitalHumanId"
  parent_name="ZegoDigitalMobileConfig"
  parent_type="class">
数字人ID。
</ParamField>

<ParamField
  name="streams"
  prototype="nonatomic, strong NSArray<ZegoDigitalMobileStream *> * streams"
  parent_name="ZegoDigitalMobileConfig"
  parent_type="class">
流数组，包含多个流配置信息。
</ParamField>

<ParamField
  name="fitStream"
  prototype="nonatomic, strong, nullable ZegoDigitalMobileStream * fitStream"
  parent_name="ZegoDigitalMobileConfig"
  parent_type="class">
适合的流（缓存），用于快速访问当前适合的流配置。
</ParamField>

### 方法
<ParamField
  name="getFitStream"
  prototype="- (nullable ZegoDigitalMobileStream *)getFitStream;"
  desc="获取适合的流。"
  parent_file="Declared in \`ZegoDigitalMobileConfig.h\`"
  parent_name="ZegoDigitalMobileConfig"
  parent_type="class">
**返回值**

适合的流配置对象，如果没有找到则返回 nil。

**详情**

从流数组中获取适合当前环境的流配置。
</ParamField>

<ParamField
  name="isValid"
  prototype="- (BOOL)isValid;"
  desc="检查配置是否有效。"
  parent_file="Declared in \`ZegoDigitalMobileConfig.h\`"
  parent_name="ZegoDigitalMobileConfig"
  parent_type="class">
**返回值**

配置是否有效，YES 表示有效，NO 表示无效。

**详情**

检查当前配置是否有效，包括数字人ID和流配置的完整性。
</ParamField>

<ParamField
  name="string"
  prototype="- (NSString *)string;"
  desc="获取配置描述。"
  parent_file="Declared in \`ZegoDigitalMobileConfig.h\`"
  parent_name="ZegoDigitalMobileConfig"
  parent_type="class">
**返回值**

配置的字符串描述。

**详情**

获取当前配置的字符串描述，用于调试和日志记录。
</ParamField>

## ZegoDigitalMobileStream

流配置

**详情**

用于配置数字人流的各种参数，包括房间ID、流ID、编码码、包URL和平台信息。

*Declared in `ZegoDigitalMobileConfig.h`*

### 属性
<ParamField
  name="roomId"
  prototype="nonatomic, copy NSString * roomId"
  parent_name="ZegoDigitalMobileStream"
  parent_type="class">
房间ID。
</ParamField>

<ParamField
  name="streamId"
  prototype="nonatomic, copy NSString * streamId"
  parent_name="ZegoDigitalMobileStream"
  parent_type="class">
流ID。
</ParamField>

<ParamField
  name="encodeCode"
  prototype="nonatomic, copy NSString * encodeCode"
  parent_name="ZegoDigitalMobileStream"
  parent_type="class">
编码码。
</ParamField>

<ParamField
  name="packageUrl"
  prototype="nonatomic, copy NSString * packageUrl"
  parent_name="ZegoDigitalMobileStream"
  parent_type="class">
包URL，用于下载数字人资源包。
</ParamField>

<ParamField
  name="configId"
  prototype="nonatomic, copy NSString * configId"
  parent_name="ZegoDigitalMobileStream"
  parent_type="class">
平台配置ID。
</ParamField>

### 方法
<ParamField
  name="string"
  prototype="- (NSString *)string;"
  desc="获取描述。"
  parent_file="Declared in \`ZegoDigitalMobileConfig.h\`"
  parent_name="ZegoDigitalMobileStream"
  parent_type="class">
**返回值**

流的字符串描述。

**详情**

获取当前流配置的字符串描述，用于调试和日志记录。
</ParamField>

## ZDMVideoFrameParam

视频帧参数

**详情**

用于配置视频帧的各种参数，包括格式、宽度、高度、旋转角度和步长信息。

*Declared in `ZDMVideoFrameParam.h`*

### 属性
<ParamField
  name="format"
  prototype="nonatomic, assign ZDMVideoFrameFormat format"
  parent_name="ZDMVideoFrameParam"
  parent_type="class">
视频帧格式，详情请参考 [ZDMVideoFrameFormat](./enum#zdmvideoframeformat)。
</ParamField>

<ParamField
  name="width"
  prototype="nonatomic, assign int width"
  parent_name="ZDMVideoFrameParam"
  parent_type="class">
视频帧宽度，单位为像素。
</ParamField>

<ParamField
  name="height"
  prototype="nonatomic, assign int height"
  parent_name="ZDMVideoFrameParam"
  parent_type="class">
视频帧高度，单位为像素。
</ParamField>

<ParamField
  name="rotation"
  prototype="nonatomic, assign int rotation"
  parent_name="ZDMVideoFrameParam"
  parent_type="class">
视频帧旋转角度，单位为度。
</ParamField>

### 方法
<ParamField
  name="strideAtIndex:"
  prototype="- (int)strideAtIndex:(int)index;"
  desc="获取指定索引的步长值。"
  parent_file="Declared in \`ZDMVideoFrameParam.h\`"
  parent_name="ZDMVideoFrameParam"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| index | int | 索引，范围为0-3 |

**返回值**

步长值。

**详情**

获取指定索引位置的步长值，用于视频帧数据的处理。
</ParamField>

<ParamField
  name="setStride:atIndex:"
  prototype="- (void)setStride:(int)stride atIndex:(int)index;"
  desc="设置指定索引的步长值。"
  parent_file="Declared in \`ZDMVideoFrameParam.h\`"
  parent_name="ZDMVideoFrameParam"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| stride | int | 步长值 |
| index | int | 索引，范围为0-3 |

**详情**

设置指定索引位置的步长值，用于视频帧数据的处理。
</ParamField>

## ZegoDigitalHumanResource

数字人资源预加载管理类

**详情**

用于管理数字人资源的预加载、检查和卸载，支持异步操作和进度回调。

*Declared in `ZegoDigitalHumanResource.h`*

### 方法
<ParamField
  name="sharedInstance"
  prototype="+ (instancetype)sharedInstance;"
  desc="获取单例实例。"
  parent_file="Declared in \`ZegoDigitalHumanResource.h\`"
  parent_name="ZegoDigitalHumanResource"
  parent_type="class">
**返回值**

ZegoDigitalHumanResource 单例实例。

**详情**

获取数字人资源管理类的单例实例，用于全局资源管理。
</ParamField>

<ParamField
  name="preloadWithAuth:digitalHumanId:delegate:"
  prototype="- (void)preloadWithAuth:(ZegoDigitalHumanAuth*)auth digitalHumanId:(NSString *)digitalHumanId delegate:(id<ZegoDigitalHumanResourceDelegate>)delegate;"
  desc="预加载数字人资源。"
  parent_file="Declared in \`ZegoDigitalHumanResource.h\`"
  parent_name="ZegoDigitalHumanResource"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| auth | [ZegoDigitalHumanAuth](#zegodigitalhumanauth) * | 鉴权信息 |
| digitalHumanId | NSString * | 数字人ID |
| delegate | id\<ZegoDigitalHumanResourceDelegate\> | 回调代理，用于接收预加载状态和进度通知 |

**详情**

预加载指定数字人的资源，包括模型文件、纹理等。预加载过程会通过 delegate 回调通知进度和结果。

<Note title="">
- **调用时机**：在需要使用数字人之前调用，可以提前预加载资源以提升启动速度。
- **相关接口**：[ZegoDigitalHumanResourceDelegate](./protocol#zegodigitalhumanresourcedelegate)。
</Note>
</ParamField>

<ParamField
  name="isLoadedWithAuth:digitalHumanId:delegate:"
  prototype="- (void)isLoadedWithAuth:(ZegoDigitalHumanAuth*)auth digitalHumanId:(NSString *)digitalHumanId delegate:(id<IsLoadedDelegate>)delegate;"
  desc="检查指定数字人资源是否已加载。"
  parent_file="Declared in \`ZegoDigitalHumanResource.h\`"
  parent_name="ZegoDigitalHumanResource"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| auth | [ZegoDigitalHumanAuth](#zegodigitalhumanauth) * | 鉴权信息 |
| digitalHumanId | NSString * | 数字人ID |
| delegate | id\<IsLoadedDelegate\> | 回调，用于接收查询结果 |

**详情**

检查指定数字人的资源是否已经加载完成。查询结果会通过 delegate 回调返回。

<Note title="">
- **调用时机**：在启动数字人之前调用，确认资源是否已准备就绪。
- **相关接口**：[IsLoadedDelegate](./protocol#isloadeddelegate)。
</Note>
</ParamField>

<ParamField
  name="unLoad:"
  prototype="- (void)unLoad:(NSString *)digitalHumanId;"
  desc="卸载指定数字人的已加载资源，释放相关内存与缓存。"
  parent_file="Declared in \`ZegoDigitalHumanResource.h\`"
  parent_name="ZegoDigitalHumanResource"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| digitalHumanId | NSString * | 数字人ID |

**详情**

卸载指定数字人的已加载资源，释放相关内存与缓存。调用此方法后，该数字人的资源将从内存中清除。

<Note title="">
- **调用时机**：在不再使用某个数字人时调用，释放内存资源。
</Note>
</ParamField>

## ZegoDigitalHumanLogConfig

数字人日志配置类

**详情**

用于配置数字人模块的日志行为，包括日志文件的存储路径、单个日志文件的最大大小和日志文件轮转数量。

*Declared in `ZegoDigitalHumanLogConfig.h`*

### 属性
<ParamField
  name="logDirectoryPath"
  prototype="nonatomic, copy NSString * logDirectoryPath"
  parent_name="ZegoDigitalHumanLogConfig"
  parent_type="class">
日志文件存储的目录路径。

**详情**

日志文件存储的目录路径。这必须是一个目录路径（不是文件路径）。可以是绝对路径，也可以是应用程序私有存储目录内的相对路径。日志文件将在此目录中创建。如果为空或设置为空字符串，系统将使用默认目录路径。
</ParamField>

<ParamField
  name="logSize"
  prototype="nonatomic, assign long long logSize"
  parent_name="ZegoDigitalHumanLogConfig"
  parent_type="class">
单个日志文件的最大大小，单位为字节。

**详情**

当当前日志文件的大小达到此限制时，系统会触发日志轮转，创建新的日志文件用于后续写入。默认值为 20MB (20 * 1024 * 1024)。
</ParamField>

<ParamField
  name="logCount"
  prototype="nonatomic, assign int logCount"
  parent_name="ZegoDigitalHumanLogConfig"
  parent_type="class">
日志文件轮转时保留的最大日志文件数量。

**详情**

此值决定保留多少个历史日志文件。当日志文件数量超过此限制时，最旧的文件将被删除。默认值为 3。

**日志轮转示例：**

如果 logDirectoryPath 设置为 "files/" 且 logCount 设置为 3，系统将生成轮转的日志文件："files/ZaLog1.txt"、"files/ZaLog2.txt" 和 "files/ZaLog3.txt"。当 "ZaLog1.txt" 已满时，它会被重命名为 "ZaLog2.txt"，并创建新的 "ZaLog1.txt"。此过程持续进行，始终保持最多 3 个日志文件。
</ParamField>

## ZegoDigitalHumanAuth

数字人认证信息类

**详情**

用于封装数字人服务所需的认证参数，包括应用ID、用户ID和访问令牌。

*Declared in `ZegoDigitalHumanAuth.h`*

### 属性
<ParamField
  name="appID"
  prototype="nonatomic, assign NSInteger appID"
  parent_name="ZegoDigitalHumanAuth"
  parent_type="class">
应用ID，用于标识应用身份。
</ParamField>

<ParamField
  name="userID"
  prototype="nonatomic, strong NSString * userID"
  parent_name="ZegoDigitalHumanAuth"
  parent_type="class">
用户ID，用于标识用户身份，不能为空。
</ParamField>

<ParamField
  name="token"
  prototype="nonatomic, strong NSString * token"
  parent_name="ZegoDigitalHumanAuth"
  parent_type="class">
访问令牌，用于身份验证和权限控制，不能为空。
</ParamField>

### 方法
<ParamField
  name="initWithAppID:userID:token:"
  prototype="- (instancetype)initWithAppID:(NSInteger)appID userID:(NSString *)userID token:(NSString *)token;"
  desc="初始化数字人认证信息。"
  parent_file="Declared in \`ZegoDigitalHumanAuth.h\`"
  parent_name="ZegoDigitalHumanAuth"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| appID | NSInteger | 应用ID |
| userID | NSString * | 用户ID，不能为 nil |
| token | NSString * | 访问令牌，不能为 nil |

**返回值**

初始化后的认证信息对象。

**详情**

使用指定的应用ID、用户ID和访问令牌初始化数字人认证信息对象。

<Note title="">
- **调用时机**：在需要创建认证信息时调用。
- **注意事项**：userID 和 token 不能为 nil，否则初始化可能失败。
</Note>
</ParamField>

## ZegoDigitalMobileConfigDecoder

数字人配置解析工具类

**详情**

用于解析 Base64 编码的 JSON 配置字符串，将其转换为数字人配置对象。

*Declared in `ZegoDigitalMobileConfigDecoder.h`*

### 方法
<ParamField
  name="decode:"
  prototype="+ (nullable ZegoDigitalMobileConfig *)decode:(NSString *)configStr;"
  desc="解析配置字符串。"
  parent_file="Declared in \`ZegoDigitalMobileConfigDecoder.h\`"
  parent_name="ZegoDigitalMobileConfigDecoder"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| configStr | NSString * | 配置字符串（Base64编码的JSON） |

**返回值**

数字人配置对象，解析失败返回 nil。

**详情**

解析 Base64 编码的 JSON 配置字符串，将其转换为 [ZegoDigitalMobileConfig](#zegodigitalmobileconfig) 对象。如果配置字符串格式不正确或解析失败，则返回 nil。

<Note title="">
- **调用时机**：在收到服务器返回的配置字符串后调用。
- **相关接口**：[ZegoDigitalMobileConfig](#zegodigitalmobileconfig)。
</Note>
</ParamField>

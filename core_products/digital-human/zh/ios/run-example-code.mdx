---
articleID: 3126
---

# 跑通示例源码

本文介绍如何快速跑通数字人 iOS 示例源码，帮助您快速体验数字人功能。

|||
|---|---|
|<Frame width="auto" height="256" caption=""><img src="https://doc-media.zego.im/core_products/digital-human/zh/ios/ios-home.jpeg" /></Frame>|<Frame width="auto" height="256" caption=""><img src="https://doc-media.zego.im/core_products/digital-human/zh/ios/ios-control.jpeg" /></Frame>|


## 准备环境

在运行示例源码前，请确保开发环境满足以下要求：

* Xcode 15.0 或以上版本
* iOS 12.0 或以上版本，且支持音视频的 iOS 设备或模拟器（推荐使用真机）
* CocoaPods 1.10.0 或以上版本
* iOS 设备或模拟器、开发电脑已经连接到 Internet

<Note title="说明">

* 首次编译示例源码时，CocoaPods 会自动下载依赖库，可能需要较长时间，请耐心等待。
* 如果 CocoaPods 安装速度较慢，可考虑更换为国内镜像源。
* 示例源码中使用的 SDK 版本在 `Podfile` 文件中查看。

</Note>

## 前提条件

1. 已部署集成了 ZEGO 数字人 API 的业务服务端。请先查看服务端[跑通示例源码](/aigc-digital-human-server/quick-start/run-example-code)，并确保服务端 API 可正常访问。

## 获取示例源码

<Card title="示例源码" href="https://github.com/ZEGOCLOUD/digital_human_paas_quick_start/tree/master/iOS" target="_blank">点击获取完整的数字人快速启动示例源码。</Card>

## 示例源码目录结构

下载示例源码后，进入 `iOS` 目录，下文所涉及的文件路径均为相对于此目录的路径。

```tree
.
├─ ZegoDigitalHumanQuickStart/
│   ├─ Podfile                                    # CocoaPods 配置文件
│   ├─ ZegoDigitalHumanQuickStart/                # 项目源码目录
│   │   ├─ Models/                                # 数据模型
│   │   │   ├─ ZegoConfig.h/.m                    # 应用配置模型
│   │   │   ├─ ZegoDigitalHumanInfo.h/.m          # 数字人信息模型
│   │   │   └─ ZegoTask.h/.m                      # 任务模型
│   │   ├─ Network/                               # 网络请求相关
│   │   │   ├─ ZegoAPIConstants.h                 # API 常量配置（此处配置服务器地址）
│   │   │   ├─ ZegoNetworkManager.h/.m            # 网络管理器
│   │   │   └─ ZegoAPIService.h/.m                # API 服务
│   │   ├─ ViewControllers/                       # 视图控制器
│   │   ├─ Views/                                 # 视图组件
│   │   ├─ Utils/                                 # 工具类
│   │   └─ Info.plist                             # 应用配置（含权限声明）
│   ├─ ZegoDigitalHumanQuickStart.xcodeproj
│   └─ ZegoDigitalHumanQuickStart.xcworkspace     # 使用 Xcode 打开的工程文件
```

## 运行示例源码

<Steps>
<Step title="克隆源码">

打开终端，执行以下命令克隆仓库到本地：

```bash
git clone https://github.com/ZEGOCLOUD/digital_human_paas_quick_start.git
```

</Step>
<Step title="安装依赖">

进入 `iOS/ZegoDigitalHumanQuickStart` 目录，执行以下命令安装依赖：

```bash
cd iOS/ZegoDigitalHumanQuickStart
pod install
```

</Step>
<Step title="配置服务器 URL">

打开 `ZegoDigitalHumanQuickStart/Network/ZegoAPIConstants.h` 文件，将 `kZegoDefaultServerURL` 修改为您的业务服务端 API 地址。

```objc title="ZegoAPIConstants.h"
// 注意：示例源码在 iOS 设备上运行，请填写实际的服务器 IP 或域名，
// 不要填写 127.0.0.1 或 localhost 等本地地址，否则无法访问服务器
static NSString * const kZegoDefaultServerURL = @"https://your-server-address/api";
```

<Warning title="注意">

请确保服务端地址可正常访问，否则示例源码无法正常运行。

</Warning>

</Step>
<Step title="配置权限">

示例源码已在 `Info.plist` 中声明了所需权限（麦克风、相机、本地网络等），首次运行应用时会自动请求权限，请允许相关权限。

</Step>
<Step title="运行项目">

1. 使用 Xcode 打开 `ZegoDigitalHumanQuickStart.xcworkspace` 文件
2. 连接 iOS 设备或启动模拟器
3. 点击 Xcode 的 **Run** 按钮，将应用安装到设备上

</Step>
</Steps>

## 体验数字人功能

在真机中运行项目，运行成功后，可以看到数字人界面。示例应用提供以下功能：

1. **创建任务**：点击"打开控制面板" → "创建任务"按钮，创建数字人流任务
2. **驱动数字人**：
   - **文本驱动**：在驱动控制区域输入文字并点击"文字驱动"，数字人将播报对应内容
   - **音频驱动**：上传或录制音频，驱动数字人播报音频内容
   - **WebSocket 驱动**：通过 WebSocket 协议实时流式（TTS 音频流）驱动数字人，适用于实时对话场景
3. **任务管理**：点击"停止任务"以结束当前的数字人服务

<Note title="说明">

* 首次运行应用时，需要授予麦克风和相机权限，否则部分功能可能无法正常使用。
* 确保服务端已正确部署并运行，否则无法创建任务和驱动数字人。
* 数字人资源会在首次使用时自动预加载，请耐心等待。

</Note>

## 常见问题

**1. 运行示例源码时提示"网络错误"或"服务端连接失败"，如何处理？**

请按以下步骤排查：
* 检查 `ZegoAPIConstants.h` 中配置的服务器 URL 是否正确
* 确保服务端已正确部署并运行，可以通过浏览器或 Postman 测试 API 是否可访问
* 确保 iOS 设备与服务端网络连通，如果是本地测试，确保设备和电脑在同一局域网
* 检查 `Info.plist` 中是否已配置允许本地网络访问（`NSAppTransportSecurity`）

**2. pod install 执行失败怎么办？**

请按以下步骤排查：
* 确认已安装 CocoaPods，如未安装可执行 `sudo gem install cocoapods` 进行安装
* 尝试更新 CocoaPods 仓库：`pod repo update`
* 如果网络问题导致安装缓慢，可考虑更换为国内镜像源

**3. 数字人无法显示或黑屏，如何处理？**

请按以下步骤排查：
* 确保已成功创建任务并登录[实时音视频房间](/real-time-video-ios/quick-start/implementing-video-call#createroom)
* 确保服务端返回的 [Base64Config](/aigc-digital-human-ios/quick-start) 配置正确
* 在 Xcode Console 中查看 SDK 日志，确认数字人 SDK 是否正常启动

## 查看更多

跑通示例源码后，您可以继续查阅以下文档：

* [快速开始 - 实现数字人播报](/aigc-digital-human-ios/quick-start)：了解如何在您的项目中集成数字人功能
* [集成 SDK](/aigc-digital-human-ios/integrating-sdk)：详细的 SDK 集成步骤和配置说明
* [客户端 API](/aigc-digital-human-ios/client-sdk/api-reference/function-list)：查看完整的 API 参考

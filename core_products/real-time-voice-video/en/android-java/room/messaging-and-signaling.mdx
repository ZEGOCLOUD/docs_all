---
articleID: 1046
date: "2024-01-02"
---
# Real-Time Messaging and Signaling

- - -

## Feature Overview

ZEGO provides various text message sending and receiving functions, implementing features such as sending in-Room broadcast messages, barrage messages, simple IM text chat, likes, gift giving, quiz answering, and more.

| Message Type | Function Description | Application Scenarios | Send Frequency Limit |
|-------|--------|--------|--------|
| Broadcast Messages | Send text messages to all users in the same Room. | Can be used for simple in-Room chat room scenarios. | Please refer to [Restrictions](/real-time-video-android-java/best-practice/restrictions). |
| Barrage Messages | Audiences can express their comments during live streaming, which are displayed as sliding subtitles, increasing interaction between audiences. | Generally used for scenarios with large amounts of message sending and receiving in the Room, and where message reliability does not need to be guaranteed, such as live streaming barrage. | Please refer to [Restrictions](/real-time-video-android-java/best-practice/restrictions).|
| Custom Commands | Send messages to single or multiple users in the same Room. | Generally used for remote control signaling or simple text message sending. For example, in online claw machine scenarios, remotely control the movement of the claw machine gripper. | Please refer to [Restrictions](/real-time-video-android-java/best-practice/restrictions).

In addition, ZEGO also provides a complete Instant Messaging ZIM SDK, providing developers with full-platform interaction, massive concurrency, ultra-low latency, and guaranteed message delivery communication services. For details, please refer to [Instant Messaging](/zim-android/introduction/overview).

## Example Source Code Download

Please refer to [Download Example Source Code](/real-time-video-android-java/quick-start/run-example-code) to get the source code.

For related source code, please check the files in the "/ZegoExpressExample/CommonFeatures/src/main/java/im/zego/roommessage" directory.

## Prerequisites

Before sending real-time messages, please ensure:

- You have created a project in the [ZEGO Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated the ZEGO Express SDK in your project and implemented basic audio and video streaming functionality. For details, please refer to [Quick Start - Integration](/real-time-video-android-java/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-android-java/quick-start/implementing-video-call).


## Usage Steps

### Send and Receive Broadcast Messages

1. **Send Broadcast Messages**

  Call the [sendBroadcastMessage](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-zego-express-engine#send-broadcast-message) interface to send broadcast messages to other users in the same Room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [onIMSendBroadcastMessageResult](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~interface~im-zego-zegoexpress-callback-i-zego-im-send-broadcast-message-callback#on-im-send-broadcast-message-result) callback.

  ```java
  // Send broadcast message
  engine.sendBroadcastMessage(roomID, msg, new IZegoIMSendBroadcastMessageCallback() {
      // Callback handling for broadcast message send result
      @Override
      public void onIMSendBroadcastMessageResult(int errorCode, long messageID) {
          // Handling for message send success or failure
      }
  });
  ```
2. **Receive Broadcast Messages**

  Implement the [onIMRecvBroadcastMessage](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-callback-i-zego-event-handler#on-im-recv-broadcast-message) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. After the sender successfully sends a broadcast message, other users in the same Room receive related information through this callback, including message content, message ID, send time, and sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive Room broadcast message notification
       *
       * @param roomID Room ID
       * @param messageList List of received messages
       */
      @Override
      public void onIMRecvBroadcastMessage(String roomID, ArrayList<ZegoBroadcastMessageInfo> messageList){
          // Handling for receiving messages sent by other users
      }

  }
  ```

### Send and Receive Barrage Messages


1. **Send Barrage Messages**

  Call the [sendBarrageMessage](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-zego-express-engine#send-barrage-message) interface to send barrage messages to other users in the same Room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [onIMSendBarrageMessageResult](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~interface~im-zego-zegoexpress-callback-i-zego-im-send-barrage-message-callback#on-im-send-barrage-message-result) callback.

  ```java
  // Send Room barrage message
  engine.sendBarrageMessage("ChatRoom-1", "This is a barrage message", new IZegoIMSendBarrageMessageCallback(){
      // Callback handling for barrage message send result
      @Override
      public void onIMSendBarrageMessageResult(int errorCode, String messageID) {
           // Handling for message send success or failure
      }
  });
  ```
2. **Receive Barrage Messages**

  Implement the [onIMRecvBarrageMessage](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-callback-i-zego-event-handler#on-im-recv-barrage-message) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. After the sender successfully sends a barrage message, other users in the same Room receive related information through this callback, including message content, message ID, send time, and sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive Room barrage message notification
       *
       * @param roomID Room ID
       * @param messageList List of received messages
       */
      @Override
      public void onIMRecvBarrageMessage(String roomID, ArrayList<ZegoBarrageMessageInfo> messageList){
           // Handling for receiving messages sent by other users
      }

  }
  ```

### Send and Receive Custom Commands

1. **Send Custom Commands**

  Call the [sendCustomCommand](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-zego-express-engine#send-custom-command) interface to send custom commands to users specified through "toUserList" in the same Room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [onIMSendCustomCommandResult](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~interface~im-zego-zegoexpress-callback-i-zego-im-send-custom-command-callback#on-im-send-custom-command-result) callback.

  ```java
  // Send custom command, only users specified in `toUserList` can receive this command through onIMSendCustomCommandResult
  // If the `toUserList` parameter is passed as `null`, the SDK will send this command to all users in the Room
  engine.sendCustomCommand(roomID, command, toUserList, new IZegoIMSendCustomCommandCallback() {
      // Callback handling for user-defined message send result
      @Override
      public void onIMSendCustomCommandResult(int errorCode) {
          // Handling for message send success or failure
      }
  });
  ```
2. **Receive Custom Commands**

  Implement the [onIMRecvCustomCommand](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~Java_android~class~im-zego-zegoexpress-callback-i-zego-event-handler#on-im-recv-custom-command) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. After the sender successfully sends a custom message, specified users in the same Room receive related information through this callback, including message content and message sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive custom command notification
       *
       * @param roomID Room ID
       * @param fromUser Sender of the command
       * @param command Command content
       */
      @Override
      public void onIMRecvCustomCommand(String roomID, ZegoUser fromUser, String command){
          // Handling for receiving messages sent by other users
      }

  }
  ```

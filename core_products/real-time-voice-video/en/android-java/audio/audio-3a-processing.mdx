---
articleID: 9846
date: "2025-03-05"
---


# Audio 3A Processing

- - -

## Feature Overview

In real-time audio and video calls or live streaming, you can perform 3A processing on audio, mainly including AEC (Acoustic Echo Cancelling), AGC (Automatic Gain Control), and ANS (Active Noise Control), to improve the quality of calls or live streaming and user experience.

- AEC (Acoustic Echo Cancellation): Filter the captured audio data to reduce echo in the audio.
- AGC (Automatic Gain Control): After enabling this feature, the SDK can automatically adjust the microphone volume to adapt to near and far sound pickup and keep the volume stable.
- ANS (Noise Suppression): Identify background noise in the sound and eliminate it. After enabling this feature, the human voice can be clearer. At the same time, you can enable music scenario detection to identify communication and music scenarios in real time without consumption, and further improve the fidelity of human voice and music sound quality in music scenarios. If users need a more aggressive noise suppression strategy, they can use the [Scenario-Based AI Noise Suppression](/real-time-video-android-java/audio/scenario-based-ai-noise-reduction) feature.

<Warning title="Warning">

If you need to use the music scenario detection capability, please contact ZEGOCLOUD Technical Support for special packaging and configuration.
</Warning>


## Example Source Code Download

Please refer to [Download Example Source Code](/real-time-video-android-java/quick-start/run-example-code) to get the source code.

For related source code, please check the files in the "/ZegoExpressExample/AdvancedAudioProcessing/src/main/java/im/zego/advancedaudioprocessing/audio3a" directory.

## Default Configuration and Recommended Configuration

The default configuration and recommended configuration for audio 3A processing in the SDK are as follows:

|Interface Name|Interface Description|Default Configuration|Recommended Configuration
|-|-|-|-|
|[enableAEC](@enableAEC)|Turn on/off acoustic echo cancellation. |Before calling this function, the SDK will automatically determine whether to use AEC. Once this function is called, the SDK will no longer automatically determine.|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|[enableHeadphoneAEC](@enableHeadphoneAEC)|Whether to enable acoustic echo cancellation when using headphones.|Not enabled.|In ordinary voice chat or gaming scenarios, it is recommended to enable this feature. In other cases, it is generally not necessary to enable it.|
|[setAECMode](@setAECMode)|Set acoustic echo cancellation mode.|ZegoAECMode.AGGRESSIVE (Aggressive echo cancellation).|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|[enableAGC](@enableAGC)|Turn on/off automatic gain control.|Before calling this function, the SDK will automatically determine whether to use AGC. Once this function is called, the SDK will no longer automatically determine.|<ul><li>In ordinary voice chat scenarios, it is recommended to use the default configuration.</li><li>In music radio scenarios, it is recommended not to enable automatic gain control to restore human voice.</li><li>In education scenarios, such as large classes, small classes, and 1v1, it is recommended to enable automatic gain control.</li></ul>|
|[enableANS](@enableANS)|Turn on/off noise suppression.|Before calling this function, the SDK will automatically determine whether to use ANS. Once this function is called, it will no longer automatically determine.|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|[enableTransientANS](@enableTransientANS)|Turn on/off transient noise suppression.|When this function is not called, transient noise suppression is not enabled by default.|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|[setANSMode](@setANSMode)|Set audio noise suppression mode.|ZegoANSMode.MEDIUM (Moderate noise suppression).|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|


## Prerequisites

Before using audio 3A processing, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zegocloud.com) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated the ZEGO Express SDK in your project and implemented basic audio and video streaming functionality. For details, please refer to [Quick Start - Integration](/real-time-video-android-java/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-android-java/quick-start/implementing-video-call).


## Usage Steps

### Set AEC (Acoustic Echo Cancellation)

<Warning title="Warning">


[enableAEC](@enableAEC), [enableHeadphoneAEC](@enableHeadphoneAEC), and [setAECMode](@setAECMode) all need to be called before [startPublishingStream](@startPublishingStream), [startPlayingStream](@startPlayingStream), [startPreview](@startPreview), [createMediaPlayer](@createMediaPlayer), [createAudioEffectPlayer](@createAudioEffectPlayer), and [createRealTimeSequentialDataManager](@createRealTimeSequentialDataManager) to take effect.
</Warning>

Developers can complete echo cancellation related settings according to the following steps:

1. Call the [enableAEC](@enableAEC) interface to enable acoustic echo cancellation. After enabling this feature, the SDK will filter the captured audio data to reduce echo in the audio.

2. (Optional) Developers can call the [enableHeadphoneAEC](@enableHeadphoneAEC) interface to set whether to enable acoustic echo cancellation when using headphones.

3. After enabling acoustic echo cancellation, developers can call the [setAECMode](@setAECMode) interface to set the acoustic echo cancellation mode. The SDK supports the following three acoustic echo cancellation modes:

    |Enumeration Value|Description|
    |-|-|
    |ZegoAECMode.AGGRESSIVE|Aggressive echo cancellation, which may obviously affect sound quality, but echo will be eliminated very cleanly.|
    |ZegoAECMode.MEDIUM|Moderate echo cancellation, which may slightly affect sound quality a little bit, but residual echo will be less.|
    |ZegoAECMode.SOFT|Comfortable echo cancellation, which basically will not affect the sound quality of the sound. There may sometimes be a little residual echo, but it will not affect normal listening.|

<Warning title="Warning">


Express SDK supports AI echo cancellation, which further improves the fidelity of human voice on the basis of effectively eliminating echo. If you need to use the AI echo cancellation feature, please contact ZEGOCLOUD Technical Support for special packaging first.
</Warning>

Taking setting moderate echo cancellation as an example:

```java
// Enable AEC
engine.enableAEC(true);
// Enable AEC when using headphones
engine.enableHeadphoneAEC(true);
// Set AEC mode to ZegoAECMode.MEDIUM
engine.setAECMode(ZegoAECMode.MEDIUM);
```

### Set AGC (Automatic Gain Control)

<Warning title="Warning">


[enableAGC](@enableAGC) needs to be called before [startPublishingStream](@startPublishingStream), [startPlayingStream](@startPlayingStream), [startPreview](@startPreview), [createMediaPlayer](@createMediaPlayer), [createAudioEffectPlayer](@createAudioEffectPlayer), and [createRealTimeSequentialDataManager](@createRealTimeSequentialDataManager) to take effect.
</Warning>

Call the [enableAGC](@enableAGC) interface to enable automatic gain control. After enabling this feature, the SDK can automatically adjust the microphone volume to adapt to near and far sound pickup and keep the volume stable.

```java
// Enable AGC
engine.enableAGC(true);
```



### Set ANS (Noise Suppression)

<Warning title="Warning">


[enableANS](@enableANS), [enableTransientANS](@enableTransientANS), and [setANSMode](@setANSMode) all need to be called before [startPublishingStream](@startPublishingStream), [startPlayingStream](@startPlayingStream), [startPreview](@startPreview), [createMediaPlayer](@createMediaPlayer), [createAudioEffectPlayer](@createAudioEffectPlayer), and [createRealTimeSequentialDataManager](@createRealTimeSequentialDataManager) to take effect.
</Warning>

Developers can complete noise suppression related settings according to the following steps:

1. Call the [enableANS](@enableANS) interface to enable noise suppression. After enabling this feature, the human voice can be clearer.

2. (Optional) Developers can call the [enableTransientANS](@enableTransientANS) interface to set whether to enable transient noise suppression. Transient noise suppression is used to suppress transient noise such as typing on keyboards and tapping on tables.

3. After enabling noise suppression, developers can call the [setANSMode](@setANSMode) interface to set the noise suppression mode. The default value is "ZegoANSMode.MEDIUM".
    The SDK supports the following noise suppression modes:

    |Enumeration Value|Description|
    |-|-|
    |ZegoANSMode.AGGRESSIVE|Aggressive noise suppression, which may obviously damage sound quality, but has a very good noise suppression effect.|
    |ZegoANSMode.MEDIUM|(Default value) Moderate noise suppression, which may damage some sound quality, but has a good noise suppression effect.|
    |ZegoANSMode.SOFT|Light noise suppression, which basically will not damage sound quality, but will leave some noise.|

    <Warning title="Warning">


    Express SDK supports AI mode noise suppression, and provides three modes: lightweight mode, balanced mode, and low latency mode. On the basis of eliminating steady-state noise, it effectively eliminates transient noise, such as keyboards, coughing, wind, car horns, etc. For details, please refer to [Scenario-Based AI Noise Suppression](/real-time-video-android-java/audio/scenario-based-ai-noise-reduction).
    </Warning>

4. (Optional) Enable music detection. Please contact ZEGOCLOUD Technical Support to configure and enable the music detection feature.

Taking setting light noise suppression as an example:
```java
// Enable ANS
engine.enableANS(true);
// Enable transient noise suppression
engine.enableTransientANS(true);
// Set ANS mode to ZegoANSMode.SOFT
engine.setANSMode(ZegoANSMode.SOFT);
```

## Related Documentation

- [How to handle audio echo issues?](https://www.zegocloud.com/docs/faq/echo)
- [How to handle audio noise issues?](https://www.zegocloud.com/docs/faq/audio_noise)
- [How to obtain and upload audio Dump files?](http://www.zegocloud.com/docs/faq/How_to_get_audio_dump_upload)

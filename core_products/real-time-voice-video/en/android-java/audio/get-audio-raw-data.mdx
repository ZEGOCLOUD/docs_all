---
articleID: 4307
date: "2024-01-02"
---
# Original Audio Data Acquisition

- - -

## Feature Overview

The SDK provides developers with the function to obtain original audio data. The obtained original audio data format is PCM. Developers can write this data to local devices to implement audio recording.

## Example Source Code

Please refer to [Download Example Source Code](/real-time-video-android-java/quick-start/run-example-code) to get the source code.

For related source code, please check the files in the "/ZegoExpressExample/AdvancedAudioProcessing/src/main/java/im/zego/advancedaudioprocessing/originalaudiodataacquisition" directory.

## Prerequisites

Before obtaining original audio data, please ensure:

- You have created a project in the [ZEGO Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated ZEGO Express SDK in your project and implemented basic audio and video publish and play stream functionality. For details, please refer to [Quick Start - Integration](/real-time-video-android-java/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-android-java/quick-start/implementing-video-call).



## Usage Steps

### 1 Initialize SDK

Please refer to "Create Engine" in [Quick Start - Implementation](/real-time-video-android-java/quick-start/implementing-video-call).

### 2 Enable original audio data acquisition function

Developers can call the [startAudioDataObserver ](@startAudioDataObserver) interface to enable original audio data callback monitoring. The callback audio data type is [ZegoAudioDataCallbackBitMask](@-ZegoAudioDataCallbackBitMask), including `CAPTURED`, `PLAYBACK`, `MIXED`, `PLAYER`. All four callback types need to be enabled.

```java
// Enable original audio data acquisition function
ZegoAudioFrameParam param=new ZegoAudioFrameParam();
param.channel = ZegoAudioChannel.STEREO;
param.sampleRate = ZegoAudioSampleRate.ZEGO_AUDIO_SAMPLE_RATE_16K;
int bitmask = 0;
// Add bitmask to enable captured audio data callback switch.
// The bit mask values for capture, playback, mix, and play stream are: CAPTURED=1, PLAYBACK=2, MIXED=4, PLAYER=8, respectively. The final value of bitmask is 15, indicating that original data callbacks for capture, playback, mix, and play stream will be triggered simultaneously.
bitmask |= ZegoAudioDataCallbackBitMask.CAPTURED.value();
bitmask |= ZegoAudioDataCallbackBitMask.PLAYBACK.value();
bitmask |= ZegoAudioDataCallbackBitMask.MIXED.value();
bitmask |= ZegoAudioDataCallbackBitMask.PLAYER.value();
engine.startAudioDataObserver(bitmask, param);
```
import Content from '/core_products/real-time-voice-video/en/snippets/using-bitmask.mdx'

<Content />

### 3 Set callback to receive original audio data and process

Developers can call the [setAudioDataHandler ](@setAudioDataHandler) interface to set an additional callback for receiving audio data. According to needs, you can implement callbacks [onCapturedAudioData](@onCapturedAudioData), [onPlaybackAudioData](@onPlaybackAudioData), [onMixedAudioData](@onMixedAudioData), [onPlayerAudioData](@onPlayerAudioData), corresponding to the four audio data types in [ZegoAudioDataCallbackBitMask](@-ZegoAudioDataCallbackBitMask) above.

```java
// Set original audio data callback
engine.setAudioDataHandler(new IZegoAudioDataHandler() {
	@Override
	public void onCapturedAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param) {
	// Local captured audio data, callback received after publishing stream
	}

	@Override
	public void onPlaybackAudioData (ByteBuffer data, int dataLength, ZegoAudioFrameParam param) {
	// Audio data played by SDK. When the engine is in started state without playing stream and the media player is not playing media files, the callback audio data is silent audio data
	}

	@Override
	public void onMixedAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param) {
	// Audio data callback after mixing local captured and SDK played sounds
	}

	@Override
	public void onPlayerAudioData(ByteBuffer data, int dataLength, ZegoAudioFrameParam param, String streamID) {
	// Remote play stream audio data, callback for each play stream data after starting to play stream
	}
});
```

### 4 Stop audio data callback monitoring



If you want to stop audio data callback monitoring, you can call the [stopAudioDataObserver ](@stopAudioDataObserver) interface.

```java
engine.stopAudioDataObserver();
```

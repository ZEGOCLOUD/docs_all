---
articleID: 16116
date: "2023-09-25"
---


# Upgrade Guide for Version 3.0.0 and Above

---

<Warning title="Note">
- If your current SDK is lower than version 3.0.0 and you need to upgrade to any SDK version 3.0.0 or above, please be sure to read this article.
- In addition, it is recommended that you check the change notes between the two versions in the [Release Notes](/real-time-video-flutter/client-sdk/release-notes) based on your **current version number** and **target upgrade version number**, and check your business-related interfaces.
</Warning>

This article will introduce the instructions and precautions for upgrading the Express Flutter SDK to version 3.0.0 and above.

## Deprecation Notes

1. Deprecated the [General], [Communication], and [Live] scenarios in the [ZegoScenario](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoScenario.html) scenario enumeration. For details, please refer to the [Scenario-based Audio and Video Configuration](/real-time-video-flutter/quick-start/scenario-based-audio-video-configuration) document for adaptation.

2. Starting from this version, Express iOS SDK no longer supports bitcode.

    Please refer to the description about deprecating bitcode in Apple [Xcode 14 Release Notes](https://developer.apple.com/documentation/xcode-release-notes/xcode-14-release-notes#Deprecations).

    Adaptation method: Open the configuration page of the Xcode project, find the "Enable Bitcode" option in the "Build Settings" page of the App Target, and set it to "No".

3. Deprecated the configuration item "audio_device_mode" in [ZegoEngineConfig > advancedConfig](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoEngineConfig/advancedConfig.html). Please use the [setAudioDeviceMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineDevice/setAudioDeviceMode.html) interface instead.

## Removal Notes

The following interfaces that were deprecated in previous versions have been removed.

Method Name | Description |
--- | --- |
setDebugVerbose | Set debug verbose information switch and language. This function was deprecated in version 2.3.0. Please use [enableDebugAssistant](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngine/enableDebugAssistant.html) to implement the original functionality.
loginMultiRoom | Login to multiple rooms. This method was deprecated after version 2.9.0. If you need to implement multi-room functionality, please call the [setRoomMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngine/setRoomMode.html) function to set multi-room mode before initializing the engine, then use [loginRoom](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineRoom/loginRoom.html) to log in to multiple rooms. If calling the [loginRoom](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineRoom/loginRoom.html) function to log in to multiple rooms, please ensure that the same user information is passed in.
setPlayStreamVideoLayer | Set the selected video layer for playing streams. This function was deprecated after version 2.3.0. Please use [setPlayStreamVideoType](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePlayer/setPlayStreamVideoType.html) instead.
enableAudioDataCallback | Enable callback for receiving additional audio data. This function was deprecated after version 2.7.0. Please use [startAudioDataObserver](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineCustomAudioIO/startAudioDataObserver.html) and [stopAudioDataObserver](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineCustomAudioIO/stopAudioDataObserver.html) instead.
setReverbParam | Set specific reverb parameters. This function was deprecated after version 1.18.0. Please use [setReverbPreset](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setReverbPreset.html) or [setReverbAdvancedParam](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setReverbAdvancedParam.html) instead.
setBuiltInSpeakerOn | Whether to use the built-in speaker to play sound. This function was deprecated after version 2.3.0. Please use [setAudioRouteToSpeaker](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineDevice/setAudioRouteToSpeaker.html) instead.
onDeviceError | Device exception notification. This function was deprecated in version 2.15.0 and above. Please use [onLocalDeviceExceptionOccurred](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngine/onLocalDeviceExceptionOccurred.html) instead.

## Example Code

You can refer to the following example code for interface changes.

### setAudioDeviceMode

<Tabs>
<Tab title="Before version 3.0.0">
```dart
ZegoExpressEngine.setEngineConfig(ZegoEngineConfig(advancedConfig: { 'audio_device_mode': '2' }));
```
</Tab>
<Tab title="Version 3.0.0 and above">
```dart
ZegoExpressEngine.instance.setAudioDeviceMode(ZegoAudioDeviceMode.General);
```
</Tab>
</Tabs>

### setDebugVerbose

<Tabs>
<Tab title="Before version 3.0.0">
```dart
ZegoExpressEngine.instance.setDebugVerbose(true, ZegoLanguage.English);
```
</Tab>
<Tab title="Version 3.0.0 and above">
```dart
// Note, do not enable this feature in the online version! Use only during development phase!
// Note, do not enable this feature in the online version! Use only during development phase!"
ZegoExpressEngine.instance.enableDebugAssistant(true);
```
</Tab>
</Tabs>

### loginMultiRoom

<Tabs>
<Tab title="Before version 3.0.0">
```dart
ZegoExpressEngine.createEngineWithProfile(profile);

var user = ZegoUser.id("user1");
ZegoExpressEngine.instance.loginRoom("first_room", user);
ZegoExpressEngine.instance.loginMultiRoom("second_room");
```
</Tab>
<Tab title="Version 3.0.0 and above">
You can refer to the [Multi-room Login](/real-time-video-android-java/room/multi-room-login) document

```dart
// Must be set before calling [createEngine] to take effect, otherwise it will fail.
// Must be set before calling [createEngine] to take effect, otherwise it will fail.
ZegoExpressEngine.setRoomMode(ZegoRoomMode.MultiRoom);

ZegoExpressEngine.createEngineWithProfile(profile);

var user = ZegoUser.id("user1");
ZegoExpressEngine.instance.loginRoom("first_room", user);
ZegoExpressEngine.instance.loginRoom("second_room", user);
```
</Tab>
</Tabs>

### setPlayStreamVideoLayer

<Tabs>
<Tab title="Before version 3.0.0">
```dart
ZegoExpressEngine.instance.setPlayStreamVideoLayer("stream1", ZegoPlayerVideoLayer.Auto);
```
</Tab>
<Tab title="Version 3.0.0 and above">
You can refer to the [Set Video Encoding Method](/real-time-video-android-java/video/set-video-encoding) document

```dart
ZegoExpressEngine.instance.setPlayStreamVideoType("stream1", ZegoVideoStreamType.Default);
```
</Tab>
</Tabs>

### enableAudioDataCallback

<Tabs>
<Tab title="Before version 3.0.0">
```dart
int bitmask = ZegoAudioDataCallbackBitMask.Captured | ZegoAudioDataCallbackBitMask.Player;
var param = ZegoAudioFrameParam(ZegoAudioSampleRate.SampleRate48K, ZegoAudioChannel.Mono);

// Start
ZegoExpressEngine.instance.enableAudioDataCallback(true, bitmask, param);

// Stop
ZegoExpressEngine.instance.enableAudioDataCallback(false, bitmask, param);
```
</Tab>
<Tab title="Version 3.0.0 and above">
```dart
int bitmask = ZegoAudioDataCallbackBitMask.Captured | ZegoAudioDataCallbackBitMask.Player;
var param = ZegoAudioFrameParam(ZegoAudioSampleRate.SampleRate48K, ZegoAudioChannel.Mono);

// Start
ZegoExpressEngine.instance.startAudioDataObserver(bitmask, param);

// Stop
ZegoExpressEngine.instance.stopAudioDataObserver();
```
</Tab>
</Tabs>

### setReverbParam

<Tabs>
<Tab title="Before version 3.0.0">
```dart
var param = ZegoReverbParam(ZegoReverbPreset.Basement);
ZegoExpressEngine.instance.setReverbParam(param);
```
</Tab>
<Tab title="Version 3.0.0 and above">
```dart
ZegoExpressEngine.instance.setReverbPreset(ZegoReverbPreset.Basement);

// param is a ZegoReverbAdvancedParam object;
ZegoExpressEngine.instance.setReverbAdvancedParam(param);
```
</Tab>
</Tabs>

### setBuiltInSpeakerOn

<Tabs>
<Tab title="Before version 3.0.0">
```dart
ZegoExpressEngine.instance.setBuiltInSpeakerOn(true);
```
</Tab>
<Tab title="Version 3.0.0 and above">
```dart
ZegoExpressEngine.instance.setAudioRouteToSpeaker(true);
```
</Tab>
</Tabs>

### onDeviceError

<Tabs>
<Tab title="Before version 3.0.0">
```dart
ZegoExpressEngine.onDeviceError(int errorCode, String deviceName) {
    // Handle device error
    // Handle device error
}
```
</Tab>
<Tab title="Version 3.0.0 and above">
```dart
ZegoExpressEngine.onLocalDeviceExceptionOccurred(ZegoDeviceExceptionType exceptionType, ZegoDeviceType deviceType, String deviceID) {
    // Handle device error
    // Handle device error
}
```
</Tab>
</Tabs>

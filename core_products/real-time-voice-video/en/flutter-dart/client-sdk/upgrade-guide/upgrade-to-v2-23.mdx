---
articleID: 16119
---
# Upgrade Guide to Version 2.23.0 and Above

---

<Warning title="Note">


- If your current SDK version is lower than 2.23.0 and you need to upgrade to any SDK version 2.23.0 or above, please read this document carefully.
- Additionally, it is recommended that you check the change notes between the **current version** and **target version** in the [Release Notes](/real-time-video-flutter/client-sdk/release-notes) to review interfaces related to your business.

</Warning>



This document introduces the instructions and precautions for upgrading the Express Flutter platform SDK to version 2.23.0 and above.

## Change Description

To facilitate the use of rendering functionality, starting from version 2.23.0, it has been decided to remove the `ZegoExpressTextureRenderUtils` and `ZegoExpressPlatformViewUtils` interfaces.

Therefore, when upgrading from an old version to 2.23.0 or above, developers need to migrate to the new [ZegoExpressCanvasViewUtils](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils.html) interface to use rendering functionality.

The [ZegoExpressCanvasViewUtils](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils.html) interface supports both [Texture](https://api.flutter.dev/flutter/widgets/Texture-class.html) and [PlatformView](https://docs.flutter.dev/development/platform-integration/android/platform-views) rendering methods.

## Reason for Changes

The Express SDK supports two rendering methods: [Texture](https://api.flutter.dev/flutter/widgets/Texture-class.html) and [PlatformView](https://docs.flutter.dev/development/platform-integration/android/platform-views). Before version 2.22.0, these two rendering methods corresponded to two separate APIs. Since some Flutter platforms only support one of the rendering methods, developers need to determine which API can be used on the corresponding platform:

- Texture: `ZegoExpressTextureRenderUtils`
  - `createTextureRenderer`
  - `destroyTextureRenderer`
  - `updateTextureRendererSize`

- PlatformView: `ZegoExpressPlatformViewUtils`
  - `createPlatformView`
  - `destroyPlatformView`

To reduce the cost of use, a brand new API was introduced in version 2.22.0:

- [ZegoExpressCanvasViewUtils](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils.html)
  - [createCanvasView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils/createCanvasView.html)
  - [destroyCanvasView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils/destroyCanvasView.html)

This API shields the differences in usage between the previous two rendering methods and supports both [Texture](https://api.flutter.dev/flutter/widgets/Texture-class.html) and [PlatformView](https://docs.flutter.dev/development/platform-integration/android/platform-views) rendering methods.

- For platforms that support both rendering methods, the decision to use [PlatformView](https://docs.flutter.dev/development/platform-integration/android/platform-views) or [Texture](https://api.flutter.dev/flutter/widgets/Texture-class.html) is based on the [enablePlatformView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoEngineProfile/enablePlatformView.html) parameter when calling [createEngineWithProfile](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressEngine/createEngineWithProfile.html).

- For platforms that only support one rendering method, the only supported rendering method will be used automatically. In this case, the [enablePlatformView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoEngineProfile/enablePlatformView.html) parameter is invalid, meaning the behavior mode of the [enablePlatformView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoEngineProfile/enablePlatformView.html) parameter is `preference` rather than `specification`.

Starting from SDK version 2.23.0 and above, macOS and Windows are officially supported. The rendering methods and platform support for version 2.23.0 and above are as follows:

Rendering Method\Platform | Android | iOS | macOS | Windows | Web | Linux
------------|---------|-----|-------|---------|-----|-------
Texture      | ✔️       | ✔️   | ✔️     | ✔️       | ✖   | ✖
PlatformView | ✔️       | ✔️   | ✖     | ✖       | ✔️   | ✖

Version 2.23.0 and above refactored the video rendering functionality to support `CanvasView`, improving performance and smoothness, but also broke the original behavior of `ZegoExpressTextureRenderUtils` (view mode abnormality).

To avoid this change affecting user experience, it has been decided to remove the aforementioned `ZegoExpressTextureRenderUtils` and `ZegoExpressPlatformViewUtils` interfaces.

Developers need to migrate to the new [ZegoExpressCanvasViewUtils](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils.html) interface. The specific interface changes are as follows:

Old Interface | New Interface
----|-----
`createTextureRenderer`| [createCanvasView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils/createCanvasView.html)
`destroyTextureRenderer` | [destroyCanvasView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils/destroyCanvasView.html)
`updateTextureRendererSize` | No need to call, handled automatically by SDK
`createPlatformView`| [createCanvasView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils/createCanvasView.html)
`destroyPlatformView` | [destroyCanvasView](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils/destroyCanvasView.html)

## Sample Code

You can refer to the following sample code for interface changes, or refer to the latest [Demo](https://github.com/zegoim/zego-express-flutter-sdk/tree/main/example) for interface changes.

### Before Version 2.23.0

- Texture

```dart
// TextureRenderer

late int _viewID;
Widget? _viewWidget;

void start() {
  ZegoExpressEngine.instance.createTextureRenderer(width, height).then((viewID) {
    _viewID = viewID;
    setState(() {
      _viewWidget = Texture(textureId: viewID)
    });
    ZegoCanvas canvas = ZegoCanvas.view(viewID);
    // Call [startPreview] or [startPlayingStream] interface
    // ......
  });
}

void stop() {
  // Call [stopPreview] or [stopPlayingStream]
  // ......
  ZegoExpressEngine.instance.destroyTextureRenderer(_viewID);
}
```

- PlatformView

```dart
// PlatformView

late int _viewID;
Widget? _viewWidget;

void start() {
  setState(() {
    _viewWidget = ZegoExpressEngine.instance.createPlatformView((viewID) {
      _viewID = viewID;
      ZegoCanvas canvas = ZegoCanvas.view(viewID);
      // Call [startPreview] or [startPlayingStream]
      // ......
    });
  });
}

void stop() {
  // Call [stopPreview] or [stopPlayingStream]
  // ......
  ZegoExpressEngine.instance.destroyPlatformView(_viewID);
}
```

### Version 2.23.0 and Above

```dart
// CanvasView

late int _viewID;
Widget? _viewWidget;

void start() {
  ZegoExpressEngine.instance.createCanvasView((viewID) {
    _viewID = viewID;
    // Call [startPreview] or [startPlayingStream]
    // ......
  }).then((widget) {
    setState(() {
      _viewWidget = widget;
    });
  });
}

void stop() {
  // Call [stopPreview] or [stopPlayingStream]
  // ......
  ZegoExpressEngine.instance.destroyCanvasView(_viewID);
}
```

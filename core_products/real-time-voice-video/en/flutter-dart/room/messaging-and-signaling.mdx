---
articleID: 10906
date: "2024-01-02"
---
# Real-time Messaging and Signaling

- - -

## Feature Introduction

ZEGO provides multiple text message sending and receiving functions to implement sending room broadcast messages, bullet screen messages, simple IM text chat, likes, gift-giving, quizzes, and other functions.


| Message Type | Feature Description | Application Scenarios | Sending Frequency Limit |
|-------|--------|--------|--------|
| Broadcast Message | Send text messages to all users in the same room. | Can be used for simple in-room chat room scenarios. | Please refer to [Restrictions](/real-time-video-flutter/best-practice/restrictions). |
| Barrage Message | During live streaming, viewers can express their opinions, which are displayed as scrolling subtitles, increasing interactivity among viewers. | Generally used in scenarios with large amounts of message sending and receiving in the room, and where message reliability does not need to be guaranteed, such as live streaming bullet screens. | Please refer to [Restrictions](/real-time-video-flutter/best-practice/restrictions).|
| Custom Signaling | Send messages to one or more users in the same room. | Generally used for remote control signaling or simple text message sending. For example, in an online doll machine scenario, remotely control the movement of the doll machine's gripper. | Please refer to [Restrictions](/real-time-video-flutter/best-practice/restrictions).

In addition, ZEGO also provides a complete Instant Messaging ZIM SDK, providing developers with full-platform interaction, massive concurrency, ultra-low latency, and guaranteed message delivery communication services. For details, please refer to [In-app Chat](/zim-flutter/introduction/overview).

## Download Example Source Code

Please refer to [Download Example Source Code](/real-time-video-flutter/quick-start/run-example-code) to get the source code.

For related source code, please check files in the "lib\topics\CommonFunctions\room_message" directory.

## Prerequisites

Before sending real-time messages, please ensure:

- ZEGO Express SDK has been integrated into the project to implement basic real-time audio and video functions. For details, please refer to [Quick Start - Integration](/real-time-video-flutter/quick-start/integrating-sdk) and [Quick Start - Implementation Process](/real-time-video-flutter/quick-start/implementing-video-call).
- A project has been created in the [ZEGOCLOUD Console](https://console.zegocloud.com), and a valid AppID and AppSign have been applied for. For details, please refer to [Console - Project Information](/console/project-info).

## Usage Steps

### Send and Receive Broadcast Messages

1. **Send Broadcast message**

  Call the [sendBroadcastMessage](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressEngineIM/sendBroadcastMessage.html) interface to send broadcast messages to other users in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the function return [ZegoIMSendBroadcastMessageResult](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoIMSendBroadcastMessageResult-class.html).

  ```dart
  // Send broadcast message
  ZegoExpressEngine.instance.sendBroadcastMessage(roomID, msg).then((ZegoIMSendBroadcastMessageResult result) {
        // Handle success or failure of message sending
  });
  ```

2. **Receive Broadcast message**

  Implement the [ZegoExpressEngine.onIMRecvBroadcastMessage](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressEngine/onIMRecvBroadcastMessage.html) callback. After the sender successfully sends a broadcast message, other users in the same room receive relevant information through this callback, including message content, message ID, sending time, and sender information.

  ```dart
    /**
     * Receive room broadcast message notification
     *
     * @param roomID Room ID
     * @param messageList List of received messages
     */
    ZegoExpressEngine.onIMRecvBroadcastMessage = (String roomID, List<ZegoBroadcastMessageInfo> messageList) {
      // Handle receiving messages from other users
    };
  ```

### Send and Receive Barrage Messages

1. **Send Barrage message**

  Call the [sendBarrageMessage](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressEngineIM/sendBarrageMessage.html) interface to send barrage messages to other users in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the function return [ZegoIMSendBarrageMessageResult](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoIMSendBarrageMessageResult-class.html).

  ```dart
  // Send barrage message
  ZegoExpressEngine.instance.sendBarrageMessage("ChatRoom-1", "This is a barrage message").then((ZegoIMSendBarrageMessageResult result){
      // Handle success or failure of message sending
  });
  ```

2. **Receive Barrage message**

  Implement the [ZegoExpressEngine.onIMRecvBarrageMessage](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressEngine/onIMRecvBarrageMessage.html) callback. After the sender successfully sends a barrage message, other users in the same room receive relevant information through this callback, including message content, message ID, sending time, and sender information.

  ```dart
    /**
     * Receive room barrage message notification
     *
     * @param roomID Room ID
     * @param messageList List of received messages
     */
    ZegoExpressEngine.onIMRecvBarrageMessage = (String roomID, List<ZegoBarrageMessageInfo> messageList) {
      // Handle receiving messages from other users
    };
  ```

### Send and Receive Custom Signaling

1. **Send Custom signaling**

  Call the [sendCustomCommand](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressEngineIM/sendCustomCommand.html) interface to send custom signaling to users specified by "toUserList" in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the function return [ZegoIMSendCustomCommandResult](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoIMSendCustomCommandResult-class.html).

  ```dart
  // Send custom signaling, only users specified in `toUserList` can receive this signaling through onIMSendCustomCommandResult
  // If `toUserList` parameter is `[]`, the SDK will send this signaling to all users in the room
  ZegoExpressEngine.instance.sendCustomCommand(roomID, command, toUserList).then((ZegoIMSendCustomCommandResult result) {
       // Handle success or failure of message sending
  });
  ```

2. **Receive Custom signaling**

  Implement the [ZegoExpressEngine.onIMRecvCustomCommand](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/dart_flutter/zego_express_engine/ZegoExpressEngine/onIMRecvCustomCommand.html) callback. After the sender successfully sends a custom message, specified users in the same room receive relevant information through this callback, including message content and message sender information.

  ```dart
    /**
     * Receive custom signaling notification
     *
     * @param roomID Room ID
     * @param fromUser Sender of the signaling
     * @param command Signaling content
     */
    ZegoExpressEngine.onIMRecvCustomCommand = (String roomID, ZegoUser fromUser, String command) {
      // Handle receiving messages from other users
    };
  ```

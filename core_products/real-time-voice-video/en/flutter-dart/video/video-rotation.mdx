---
articleID: 11783
---
# Video Rotation

- - -

## Feature Overview

<Warning title="Note">


This document applies to the following platforms: Android, iOS.

</Warning>



When users use mobile devices for live streaming or video calls, they typically have the following rotation options:

- Fixed portrait
- Fixed landscape
- Auto-switch between portrait and landscape

<Note title="Description">


The examples below use the default "ZegoViewMode.AspectFit" (aspect-ratio scaled, may have black borders) mode for rendering at the playing end. For details, please refer to [ZegoViewMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoViewMode.html).

</Note>



**Fixed Portrait**

Indicates that the publishing end captures video in a fixed portrait orientation. When the remote device orientation is portrait, the viewed image fills the device screen with a portrait effect. When the remote device orientation is landscape, the viewed image appears rotated relative to the publishing end's image (the following diagram shows a 90-degree counterclockwise rotation as an example).

- If the device rotation is locked:

    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/Video-rotation/Fixed_portrait_screen.png" /></Frame>

- If the device rotation is not locked:

    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/Video-rotation/Fixed_portrait_screen_noUI.png" /></Frame>

**Fixed Landscape**

Indicates that the publishing end captures video in a fixed landscape orientation. When the remote device orientation is landscape, the viewed image fills the device screen with a landscape effect. When the remote device orientation is portrait, the viewed image appears rotated relative to the publishing end's image (the following diagram shows a 90-degree counterclockwise rotation as an example).

- If the device rotation is locked:

    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/Video-rotation/Fixed_horizontal_screen.png" /></Frame>

- If the device rotation is not locked:

    <Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/Video-rotation/Fixed_horizontal_screen_noUI.png" /></Frame>

**Auto-switch Between Portrait and Landscape**

Provides video rotation functionality, allowing users to rotate the video 90, 180, or 270 degrees counterclockwise relative to the phone's upright direction as needed. This allows users to achieve their desired video rendering effect based on the video scenario requirements. After video rotation, automatic adjustments will be made to adapt to the encoded image resolution.

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/Video-rotation/Switch_between_horizontal_and_portrait_01.png" /></Frame>

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/Video-rotation/Switch_between_horizontal_and_portrait_02.png" /></Frame>

The interfaces used for the above three methods differ. For details, please refer to [Usage Steps](/real-time-video-flutter/video/video-rotation) in this document.


## Example Source Code Download

Please refer to [Download Example Source Code](/real-time-video-flutter/quick-start/run-example-code) to obtain the source code.

For related source code, please check the files in the "lib/topics/CommonFunctions/video_rotation" directory.

## Prerequisites

Before implementing video capture rotation, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated ZEGO Express SDK in your project and implemented basic audio/video publishing and playing functionality. For details, please refer to [Quick Start - Integration](/real-time-video-flutter/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).



## Usage Steps

### Fixed Portrait

When using portrait live streaming or video calls, the width resolution should be smaller than the height resolution. Assuming it is "360 × 640", you need to follow these steps to implement the functionality.

1. Call the [createEngineWithProfile](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngine/createEngineWithProfile.html) interface to create an SDK engine instance. For details, please refer to "Create Engine" in [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).


```dart
// Create engine for general scenario access
// appID is obtained through official website registration, format: 1234567890
// ZegoScenario.GENERAL for general scenario access
// appSign is obtained through official website registration, format: "1234567890"
// enablePlatformView indicates whether to use platformView, needs to be set to true when using createPlatformView
var profile = new ZegoEngineProfile(appID, ZegoScenario.GENERAL, appSign: appSign, enablePlatformView: enablePlatformView);
ZegoExpressEngine.createEngineWithProfile(profile);
```

2. Call the [setVideoConfig ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setVideoConfig.html) interface to set the encoding resolution. The default value is "360 × 640", which can be adjusted as needed. You can use preset values through `ZegoVideoConfig.preset`, such as `ZegoVideoConfigPreset.Preset360P`.

```dart
// ZegoVideoConfigPreset.Preset360P preset capture resolution 360 × 640, encoding resolution 360 × 640, bitrate 600, frame rate 15
var config = ZegoVideoConfig.preset(ZegoVideoConfigPreset.Preset360P);
```

The resolution settings for portrait live streaming are as follows:

```dart
ZegoExpressEngine.instance.setVideoConfig(config);
```

3. Call the [loginRoom](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineRoom/loginRoom.html) interface to log in to the room. For details, please refer to "Log In to Room" in [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).

```dart
ZegoExpressEngine.instance.loginRoom("test_roomid", ZegoUser.id("test_userid"));
```

4. Call the [startPreview ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPreview.html) interface to start local preview for displaying local images. The viewID is obtained by calling [ZegoExpressEngine.instance.createCanvasView](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils/createCanvasView.html).

```dart
// viewID is obtained by calling ZegoExpressEngine.instance.createCanvasView of ZEGO Express SDK
ZegoExpressEngine.instance.startPreview(canvas: ZegoCanvas(viewID));
```

5. Call the [startPublishingStream ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPublishingStream.html) interface to start publishing, pushing local audio/video streams to the real-time audio/video cloud. For details, please refer to "Publish Stream" in [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).

```dart
ZegoExpressEngine.instance.startPublishingStream("test_streamid");
```

6. Use fixed portrait mode for live streaming or video calls.


### Fixed Landscape

When using landscape live streaming or video calls, the width resolution should be larger than the height resolution. Assuming it is "640 × 360", you need to follow these steps to implement the functionality.

1. Call the [createEngineWithProfile ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngine/createEngineWithProfile.html) interface to create an SDK engine instance. For details, please refer to "Create Engine" in [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).


```dart
// Create engine for general scenario access
// appID is obtained through official website registration, format: 1234567890
// ZegoScenario.GENERAL for general scenario access
// appSign is obtained through official website registration, format: "1234567890"
// enablePlatformView indicates whether to use platformView, needs to be set to true when using createPlatformView
var profile = new ZegoEngineProfile(appID, ZegoScenario.GENERAL, appSign: appSign, enablePlatformView: enablePlatformView);
ZegoExpressEngine.createEngineWithProfile(profile);
```

2. Call the [setVideoConfig ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setVideoConfig.html) interface to set the encoding resolution to "640 × 360".

```dart
var config = ZegoVideoConfig.preset(ZegoVideoConfigPreset.Preset360P);
config.captureWidth = 640;
config.captureHeight = 360;
```

The resolution settings for landscape live streaming are as follows:

```dart
config.encodeWidth = 640;
config.encodeHeight = 360;
ZegoExpressEngine.instance.setVideoConfig(config);
```

3. Call the [setAppOrientation ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setAppOrientation.html) interface to set the video orientation. If rotating 90 degrees counterclockwise, the parameter for the following interface is DeviceOrientation.landscapeRight. If rotating 90 degrees clockwise, the parameter is DeviceOrientation.landscapeLeft.

```dart
ZegoExpressEngine.instance.setAppOrientation(DeviceOrientation.landscapeRight);
```

4. Call the [loginRoom](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineRoom/loginRoom.html) interface to log in to the room. For details, please refer to "Log In to Room" in [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).

```dart
ZegoExpressEngine.instance.loginRoom("test_roomid", ZegoUser.id("test_userid"));
```

5. Call the [startPreview ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPreview.html) interface to start local preview for displaying local images. The viewID is obtained by calling [ZegoExpressEngine.instance.createCanvasView](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressCanvasViewUtils/createCanvasView.html).


```dart
// viewID is obtained by calling ZegoExpressEngine.instance.createCanvasView of ZEGO Express SDK
ZegoExpressEngine.instance.startPreview(canvas: ZegoCanvas(viewID));
```

6. Call the [startPublishingStream ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPublishingStream.html) interface to start publishing, pushing local audio/video streams to the real-time audio/video cloud. For details, please refer to "Publish Stream" in [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).

```dart
ZegoExpressEngine.instance.startPublishingStream("test_streamid");
```

7. Use fixed landscape mode for live streaming or video calls.


### Auto-switch Between Portrait and Landscape

If during live streaming or video calls, the App is set to rotate the video display based on gravity sensing, you need to listen for screen rotation events on the corresponding platform and rotate the video direction accordingly.

When developers use SDK capture, switching between portrait and landscape is mainly achieved by setting the encoding resolution through the [setVideoConfig ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setVideoConfig.html) interface and setting the video orientation through the [setAppOrientation ](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setAppOrientation.html) interface.

You can listen for screen rotation events by adding an addPostFrameCallback callback through WidgetsBinding, and in the event handling callback, modify the corresponding encoding resolution and inform the SDK of the App's orientation.

```dart
// Initialize WidgetsBinding
WidgetsFlutterBinding.ensureInitialized();
// Add this window as an observer to WidgetsBinding
WidgetsBinding.instance.addObserver(this);
WidgetsBinding.instance.addPostFrameCallback((_) {
    if(MediaQuery.of(context).orientation == Orientation.portrait){
      _videoConfig.encodeWidth = 360;
      _videoConfig.encodeHeight = 640;
      ZegoExpressEngine.instance.setAppOrientation(DeviceOrientation.portraitUp);
    } else if (MediaQuery.of(context).orientation == Orientation.landscape){
      _videoConfig.encodeWidth = 640;
      _videoConfig.encodeHeight = 360;
      ZegoExpressEngine.instance.setAppOrientation(DeviceOrientation.landscapeLeft);
    }

    ZegoExpressEngine.instance.setVideoConfig(_videoConfig);

});

// Remove observer when destroying window or not in use
WidgetsBinding.instance.removeObserver(this);
```

## FAQ

1. **Why does the recorded live stream seem unwatchable?**

    When switching between portrait and landscape, the stream's encoding resolution is modified. Some third-party players have poor compatibility with videos that have resolution changes, which may cause playback failures. Therefore, it is generally not recommended to modify the resolution during live streaming or video calls when switching between portrait and landscape.

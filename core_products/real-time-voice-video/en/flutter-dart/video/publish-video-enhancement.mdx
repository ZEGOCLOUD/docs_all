---
articleID: 18928
date: "2025-01-20"
---
# Publishing Stream Video Enhancement

- - -

## Feature Overview

ZEGO Express SDK provides various video pre-processing enhancement capabilities. Developers can adjust the video effects at the publishing end according to business needs.

<table>

<tbody><tr>
<th>Feature</th>
<th>Feature Description</th>
<th>Feature Advantages</th>
<th colspan="2">Effect Display</th>
</tr>
<tr>
<td>Basic Face Beautification</td>
<td>Adjust the levels of whitening, smoothing, sharpening, and rosy effects according to user and business needs. Easily implement basic face beautification functionality, presenting users with good skin condition and creating unique, natural beautification effects.</td>
<td>Covers high-frequency beautification capabilities.</td>
<td colspan="2"><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/AI_Vision/AI_beauty.gif" /></Frame></td>
</tr>
<tr>
<td>Low Light Enhancement</td>
<td>When ambient light is dark and the brightness captured by the camera doesn't meet business needs such as seeing faces clearly or performing face recognition, enhance the image brightness.</td>
<td><ul><li>Minimal performance overhead, covers all device models.</li><li>Supports auto-enhancement mode, automatically identifies low-light environments.</li></ul></td>
<td><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/lowlightenhancement/lowlightenhancement_before.jpg" /></Frame></td>
<td><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/lowlightenhancement/lowlightenhancement_after.jpg" /></Frame></td>
</tr>
<tr>
<td>Video Noise Reduction</td>
<td>Poor camera capture quality or low ambient light brightness may cause obvious noise in the image. Video noise reduction functionality can reduce image noise.</td>
<td><ul><li>Determines whether to enable based on image noise conditions, avoiding unnecessary image degradation.</li><li>Adjustable noise reduction intensity.</li></ul></td>
<td><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/lowlightenhancement/Video_noise_reduction.png" /></Frame></td>
<td><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/lowlightenhancement/Video_noise_reduction_1.png" /></Frame></td>
</tr>
<tr>
<td>Color Enhancement</td>
<td>Due to camera characteristics, captured video may have insufficient saturation. Using color enhancement, enhance under-saturated colors while protecting skin tones, making image colors more realistic and more in line with human visual perception.</td>
<td><ul><li>Protects skin tones, avoiding enhancing human skin colors.</li><li>Protects lip color, making lips appear more natural when using beauty effects or wearing makeup.</li></ul></td>
<td><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Express/color_enhanced_before.jpg" /></Frame></td>
<td><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Express/color_enhanced_after.jpg" /></Frame></td>
</tr>
</tbody></table>





## Prerequisites

Before using publishing stream video enhancement functionality, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated ZEGO Express SDK in your project and implemented basic audio/video publishing and playing functionality. For details, please refer to [Quick Start - Integration](/real-time-video-flutter/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).


## Usage Steps

### 1 Initialization and Log In to Room

For specific initialization and room login flow, please refer to "[Create Engine](/real-time-video-flutter/quick-start/implementing-video-call)" and "[Log In to Room](/real-time-video-flutter/quick-start/implementing-video-call)" in the Implementing Video Call documentation.

### 2 Set Publishing Stream Video Enhancement Effects

Please configure the corresponding features according to your needs.

<Accordion title="Basic Face Beautification" defaultOpen="false">
<Note title="Description">
This feature is the basic face beautification functionality of ZEGO Effects SDK built into ZEGO Express SDK. It only includes four beautification effects: whitening, rosy, smoothing, and sharpening. For more advanced beautification features, please refer to [Using Real-time Audio/Video with AI Face Beautification](/real-time-video-ios-oc/best-practice/integration-with-zego-effects-sdk).
</Note>



**Initialize Basic Face Beautification Environment**

If you need to use basic face beautification functionality, you must call the [startEffectsEnv](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/startEffectsEnv.html) interface to initialize the beautification environment before [startPreview](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPreview.html) starts preview and [startPublishingStream](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPublishingStream.html) starts publishing.

<Note title="Description">
On the Web platform, you don't need to additionally enable the beautification environment. You can skip calling [startEffectsEnv](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/startEffectsEnv.html).
</Note>



```dart
// Create beautification environment
ZegoExpressEngine.instance.startEffectsEnv();
```

**Toggle Basic Face Beautification Effects**

<Note title="Description">
- There is no specific order for calling the [enableEffectsBeauty](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableEffectsBeauty.html) interface and the [setEffectsBeautyParam](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setEffectsBeautyParam.html) interface.
- On the Web platform, you need to execute [enableEffectsBeauty](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableEffectsBeauty.html) and [setEffectsBeautyParam](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setEffectsBeautyParam.html) before publishing for beautification effects to take effect.
</Note>



After initializing the beautification environment, you can call the [enableEffectsBeauty](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableEffectsBeauty.html) interface before or after publishing (on the Web platform, before publishing) to toggle beautification effects in real-time.

```dart
// Toggle beautification effects
ZegoExpressEngine.instance.enableEffectsBeauty(true);
```

**Set Basic Face Beautification Effect Parameters**

After initializing the beautification environment, you can call the [setEffectsBeautyParam](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setEffectsBeautyParam.html) interface before or after publishing to set beautification effect parameters in real-time.

- smoothIntensity: Smoothing, performs smoothing while preserving facial details, such as keeping moles on the face.
- whitenIntensity: Whitening, brightens the overall image to whiten the face.
- rosyIntensity: Rosy, applies warm color processing to the overall image.
- sharpenIntensity: Sharpening, applies sharpening to the overall image. When the image is slightly blurry, you can increase sharpening slightly to make contours clearer.

The value range for all four parameters above is 0 to 100. The larger the value, the higher the beautification degree. The default value is 50.

```dart
// Create beautification parameter object
var beautyParam = ZegoEffectsBeautyParam.defaultParam();

// Whitening, rosy, smoothing, sharpening
beautyParam.whitenIntensity = 50;
beautyParam.rosyIntensity = 50;
beautyParam.smoothIntensity = 50;
beautyParam.sharpenIntensity = 50;

// Set beautification parameters
ZegoExpressEngine.instance.setEffectsBeautyParam(beautyParam);
```

**（Optional）Destroy Basic Face Beautification Environment**

When calling the [enableEffectsBeauty](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableEffectsBeauty.html) interface and setting it to "false", beautification effects will be disabled, but the beautification module will still occupy resources and consume performance. If you want to completely release resources and save performance consumption, you need to call the [stopEffectsEnv](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/stopEffectsEnv.html) interface to destroy the beautification environment before preview and publishing.

<Note title="Description">


- When calling [destroyEngine](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngine/destroyEngine.html) to destroy the engine, the SDK will automatically destroy the beautification environment.
- On the Web platform, since you don't need to additionally enable the beautification environment, you don't need to call [stopEffectsEnv](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/stopEffectsEnv.html). If you need to stop beautification effects, you can execute [stopEffectsEnv](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/stopEffectsEnv.html) or set the [enableEffectsBeauty](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableEffectsBeauty.html) interface to "false". If you don't execute [stopEffectsEnv](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/stopEffectsEnv.html) or don't set the [enableEffectsBeauty](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableEffectsBeauty.html) interface to "false", when stopping publishing or preview streams, the stream will be destroyed and beautification effects will disappear.

</Note>



```dart
// Destroy beautification environment
ZegoExpressEngine.instance.stopEffectsEnv();
```
</Accordion>


<Accordion title="Low Light Enhancement" defaultOpen="false">
ZEGO provides two methods for low light enhancement:

<table>

<tbody><tr>
<th>Method</th>
<th>Description</th>
</tr>
<tr>
<td>Enable adaptive frame rate for enhancement</td>
<td>Dynamically reduce capture frame rate within the set frame rate range to extend each frame's exposure time, achieving enhanced captured image brightness.
<br /> For example: A developer enables and sets the adaptive frame rate range to [10, 25]. When ambient light is sufficient, the capture frame rate remains 25 fps. When ambient light is low, the capture frame rate dynamically adjusts between [10, 25] to extend each frame's exposure time and enhance captured image brightness.</td>
</tr>
<tr>
<td>Algorithm enhances captured image brightness</td>
<td><ul>
<li>Manual control: Developer controls the algorithm switch.</li>
<li>Smart control: Automatically enables or disables the algorithm based on image lighting conditions.</li>
</ul></td>
</tr>
</tbody></table>

Both processing methods can be used independently or simultaneously, and both are compatible with beautification functionality.

**Set Low Light Enhancement Mode**

RTC SDK supports different algorithm low light enhancement modes. Call the [setLowlightEnhancementParams](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/setLowlightEnhancementParams.html) interface to set the low light enhancement mode [ZegoLowlightEnhancementMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoLowlightEnhancementMode.html):

|Enumeration Value|Description|
|-|-|
|ZegoLowlightEnhancementMode.Off| Turn off low light enhancement functionality.|
|ZegoLowlightEnhancementMode.On|Turn on low light enhancement functionality, controlled by the developer.|
|ZegoLowlightEnhancementMode.Auto|Smart control of low light enhancement functionality, automatically enables or disables based on image lighting conditions.|

Low light enhancement type [ZegoExpLowlightEnhancementType](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpLowlightEnhancementType.html) includes the following types:

|Enumeration Value|Description|
|-|-|
| ZegoExpLowlightEnhancementType.Normal | Regular low light enhancement.|
| ZegoExpLowlightEnhancementType.AI | AI low light enhancement. To use this feature, please contact ZEGO technical support.|

Example of enabling automatic low light enhancement:

```dart
ZegoExpLowlightEnhancementParams params = ZegoExpLowlightEnhancementParams(ZegoLowlightEnhancementMode.Auto, ZegoExpLowlightEnhancementType.Normal);
ZegoExpressEngine.instance.setLowlightEnhancementParams(params, channel: ZegoPublishChannel.Main);
```


**（Optional）Enable Camera Adaptive Frame Rate**

When ambient light is low and the camera capture frame rate is too high, each frame's exposure time is insufficient, which may cause the captured video to appear dark. In this case, you can enable camera adaptive frame rate through [enableCameraAdaptiveFPS](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineDevice/enableCameraAdaptiveFPS.html). The SDK will match the camera's supported capture frame rate range based on the set frame rate range. Within this range, it dynamically adjusts the camera capture frame rate based on ambient brightness to improve image brightness when the set frame rate is too high.

```dart
//Set minimum frame rate
int minCamFPS = 15;
//Set maximum frame rate
int maxCamFPS = 35;
ZegoExpressEngine.instance.enableCameraAdaptiveFPS(true, minCamFPS, maxCamFPS, ZegoPublishChannel.Main);
```
</Accordion>

<Accordion title="Video Noise Reduction" defaultOpen="false">
Call the [setVideoDenoiseParams](@setVideoDenoiseParams) interface to set video noise reduction parameters [ZegoVideoDenoiseParams](@-ZegoVideoDenoiseParams) including: video noise reduction mode [ZegoVideoDenoiseMode](@-ZegoVideoDenoiseMode) and video noise reduction intensity [ZegoVideoDenoiseStrength](@-ZegoVideoDenoiseStrength).

<Warning title="Note">
Video noise reduction functionality is not enabled by default, i.e., [ZegoVideoDenoiseMode](@-ZegoVideoDenoiseMode) defaults to `ZegoVideoDenoiseMode.off`.
</Warning>



Example of setting automatic noise reduction:

```dart
ZegoVideoDenoiseParams p = ZegoVideoDenoiseParams(ZegoVideoDenoiseMode.Auto, ZegoVideoDenoiseStrength.Light);
ZegoExpressEngine.instance.setVideoDenoiseParams(p, channel: ZegoPublishChannel.Main);
```
</Accordion>

<Accordion title="Color Enhancement" defaultOpen="false">
Call the [enableColorEnhancement](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableColorEnhancement.html) interface, set color enhancement parameters [ZegoColorEnhancementParams](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoColorEnhancementParams-class.html) (parameter properties are in the following table), and other parameters to enable color enhancement functionality. **Color enhancement functionality is not enabled by default.**

|Color Enhancement Parameter|Description|
|-|-|
| intensity|<p>Intensity of color enhancement, value range [0.0, 1.0], default is 0.0.</p><p>The larger the value, the greater the color enhancement effect.</p>|
| skinToneProtectionLevel |<p>Intensity of skin tone protection, value range [0.0, 1.0], default is 1.0.</p><p>The larger the value, the better the protection effect.</p>|
| lipColorProtectionLevel |<p>Intensity of lip color protection, value range [0.0, 1.0], default is 0.0.</p><p>The larger the value, the better the protection effect.</p>|

```dart
ZegoColorEnhancementParams p = ZegoColorEnhancementParams.defaultParam();
p.intensity = 1; //Value range: [0,1], the larger the value, the greater the color enhancement intensity. Default value: 0.
p.skinToneProtectionLevel = 1; //Value range: [0,1], the larger the value, the greater the skin tone protection. Default value: 1.
p.lipColorProtectionLevel = 1; //Value range: [0,1], the larger the value, the greater the lip color protection. Default value: 0.
ZegoExpressEngine.instance.enableColorEnhancement(true, p, channel: ZegoPublishChannel.Main);//Enable color enhancement
```
</Accordion>

### 3 Start Preview

After calling the [startPreview](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPreview.html) interface to start preview, you can set different video enhancement features and experience the effects in real-time.

Get the Widget for preview, then use viewID to create a ZegoCanvas object and start preview.

```dart
// Add this Widget to the page's rendering tree to display the preview
_previewViewWidget = await ZegoExpressEngine.instance.createCanvasView((viewID) {
    _previewViewID = viewID;

    // Set the preview canvas
    ZegoCanvas previewCanvas = ZegoCanvas.view(viewID);

    // Start preview
    ZegoExpressEngine.instance.startPreview(canvas: previewCanvas);
});
```

### 4 Start Publishing

When the preview effect meets expectations, you can call the [startPublishingStream](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPublishingStream.html) interface to start publishing. The published stream effect will be consistent with the preview effect.

```dart
ZegoExpressEngine.instance.startPublishingStream("streamID");
```

The above completes the pre-publishing video enhancement functionality.

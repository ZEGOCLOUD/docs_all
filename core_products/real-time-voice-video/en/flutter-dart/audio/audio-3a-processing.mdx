---
articleID: 15213
date: "2025-03-05"
---


# Audio 3A Processing

- - -

## Feature Overview

During real-time audio/video calls or live streaming, you can apply 3A processing to audio, mainly including AEC (Acoustic Echo Cancelling), AGC (Automatic Gain Control), and ANS (Active Noise Control), to improve call or live streaming quality and user experience.

- AEC (Acoustic Echo Cancellation): Filters captured audio data to reduce echoes in the audio.
- AGC (Automatic Gain Control): When enabled, the SDK can automatically adjust microphone volume to accommodate near and far sound pickup, maintaining stable volume levels.
- ANS (Noise Suppression): Identifies and eliminates background noise in audio. When enabled, it makes voice clearer. If users need more aggressive noise suppression strategies, they can use the [Scenario-based AI Noise Reduction](/real-time-video-flutter/audio/scenario-based-ai-noise-reduction) feature.

<Warning title="Note">


If you need to use music scenario detection capabilities, please contact ZEGOCLOUD technical support for special packaging and configuration.

</Warning>




## Example Source Code Download

Please refer to [Download Example Source Code](/real-time-video-flutter/quick-start/run-example-code) to get the source code.

For related source code, please view files in the "lib/topics/AudioAdvanced/audio_3a" directory.


## Default Configuration and Recommended Configuration

The default and recommended configurations for audio 3A processing in the SDK are as follows:

|Interface Name|Interface Description|Default Configuration|Recommended Configuration
|-|-|-|-|
|[enableAEC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableAEC.html)|Enable/Disable acoustic echo cancellation. |Before calling this function, the SDK internally automatically determines whether to use AEC. Once this function is called, the SDK no longer makes automatic judgments.|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|[enableHeadphoneAEC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableHeadphoneAEC.html)|Whether to enable acoustic echo cancellation when using headphones.|Not enabled.|In normal voice chat or gaming sessions, it is recommended to enable this feature. In other cases, it is generally not necessary to enable.|
|[setAECMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setAECMode.html)|Set the acoustic echo cancellation mode.|ZegoAECMode.Aggressive (Aggressive echo cancellation).|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|[enableAGC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableAGC.html)|Enable/Disable automatic gain control.|Before calling this function, the SDK internally automatically determines whether to use AGC. Once this function is called, it no longer makes automatic judgments.|<ul><li>In normal voice chat scenarios, it is recommended to use the default configuration.</li><li>In music radio scenarios, it is recommended not to enable automatic gain control to preserve voice quality.</li><li>In education scenarios, such as large classes, small classes, and 1v1, it is recommended to enable automatic gain control.</li></ul>|
|[enableANS](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableANS.html)|Enable/Disable noise suppression.|Before calling this function, the SDK internally automatically determines whether to use ANS. Once this function is called, it no longer makes automatic judgments.|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
 |[enableTransientANS](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableTransientANS.html)|Enable/Disable transient noise suppression.|Before calling this function, transient noise suppression is not enabled by default.|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|[setANSMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setANSMode.html)|Set audio noise suppression mode.|ZegoANSMode.Medium (Moderate noise suppression).|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|

## Prerequisites

Before using audio 3A processing, ensure that:

- You have integrated ZEGO Express SDK into your project and implemented basic real-time audio/video functionality. For details, please refer to [Quick Start - Integration](/real-time-video-flutter/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-flutter/quick-start/implementing-video-call).
- You have created a project in the [ZEGO Admin Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Admin Console - Project Information](/console/project-info).

## Usage Steps

### Set Up AEC (Acoustic Echo Cancellation)

<Warning title="Note">


[enableAEC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableAEC.html), [enableHeadphoneAEC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableHeadphoneAEC.html), and [setAECMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setAECMode.html) must all be called before the following interfaces: [startPublishingStream](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPublishingStream.html), [startPlayingStream](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePlayer/startPlayingStream.html), [startPreview](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPreview.html), [createMediaPlayer](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineMediaPlayer/createMediaPlayer.html), [createAudioEffectPlayer](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineAudioEffectPlayer/createAudioEffectPlayer.html), and [createRealTimeSequentialDataManager](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineIM/createRealTimeSequentialDataManager.html) to be effective.


</Warning>



Developers can complete echo cancellation related settings according to the following steps:

1. Call the [enableAEC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableAEC.html) interface to enable echo cancellation. After enabling this feature, the SDK will filter captured audio data to reduce echoes in the audio.

2. (Optional) Developers can call the [enableHeadphoneAEC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableHeadphoneAEC.html) interface to set whether to enable echo cancellation when using headphones.

3. After enabling echo cancellation, developers can call the [setAECMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setAECMode.html) interface to set the echo cancellation mode. The SDK supports the following three echo cancellation modes:

    |Enum Value|Description|
    |-|-|
    |ZegoAECMode.Aggressive| Aggressive echo cancellation, which may significantly affect audio quality, but eliminates echoes thoroughly.|
    |ZegoAECMode.Medium|Moderate echo cancellation, which may slightly affect audio quality, but results in less residual echo.|
    |ZegoAECMode.Soft|Comfortable echo cancellation, which basically doesn't affect audio quality, though may occasionally leave slight residual echo, but won't affect normal listening.|

<Warning title="Note">


Express SDK supports AI echo cancellation, which further improves voice fidelity on top of effective echo elimination. If you need to use AI echo cancellation, please contact ZEGOCLOUD technical support for special packaging.

</Warning>



Taking setting moderate echo cancellation as an example:
```dart
// Enable AEC
ZegoExpressEngine.instance.enableAEC(true);
// Enable AEC when using headphones
ZegoExpressEngine.instance.enableHeadphoneAEC(true);
// Set AEC mode to ZegoAECMode.MEDIUM
ZegoExpressEngine.instance.setAECMode(ZegoAECMode.Medium);
```

### Set Up AGC (Automatic Gain Control)

<Warning title="Note">


[enableAGC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableAGC.html) must be called before the following interfaces: [startPublishingStream](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPublishingStream.html), [startPlayingStream](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePlayer/startPlayingStream.html), [startPreview](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPreview.html), [createMediaPlayer](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineMediaPlayer/createMediaPlayer.html), [createAudioEffectPlayer](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineAudioEffectPlayer/createAudioEffectPlayer.html), and [createRealTimeSequentialDataManager](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineIM/createRealTimeSequentialDataManager.html) to be effective.


</Warning>



Call the [enableAGC](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableAGC.html) interface to enable automatic gain control. After enabling this feature, the SDK can automatically adjust microphone volume to accommodate near and far sound pickup, maintaining stable volume levels.

```dart
// Enable AGC
ZegoExpressEngine.instance.enableAGC(true);
```

### Set Up ANS (Noise Suppression)

<Warning title="Note">


[enableANS](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableANS.html), [enableTransientANS](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableTransientANS.html), and [setANSMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setANSMode.html) must all be called before the following interfaces: [startPublishingStream](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPublishingStream.html), [startPlayingStream](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePlayer/startPlayingStream.html), [startPreview](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePublisher/startPreview.html), [createMediaPlayer](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineMediaPlayer/createMediaPlayer.html), [createAudioEffectPlayer](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineAudioEffectPlayer/createAudioEffectPlayer.html), and [createRealTimeSequentialDataManager](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEngineIM/createRealTimeSequentialDataManager.html) to be effective.

</Warning>



Developers can complete noise suppression related settings according to the following steps:

1. Call the [enableANS](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableANS.html) interface to enable noise suppression. After enabling this feature, voice becomes clearer.

2. (Optional) Developers can call the [enableTransientANS](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/enableTransientANS.html) interface to set whether to enable transient noise suppression. Transient noise suppression is used to suppress transient noises such as keyboard typing and table tapping.

3. After enabling noise suppression, developers can call the [setANSMode](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/dart_flutter/zego_express_engine/ZegoExpressEnginePreprocess/setANSMode.html) interface to set the noise suppression mode. The default value is "Medium".
   The SDK supports the following four noise suppression modes:

    |Enum Value|Description|
    |-|-|
    |ZegoANSMode.Aggressive|Aggressive noise suppression, which may significantly damage audio quality but has excellent noise reduction effects.|
    |ZegoANSMode.Medium|(Default) Moderate noise suppression, which may damage some audio quality but has good noise reduction effects.|
    |ZegoANSMode.Soft|Light noise suppression, which basically doesn't damage audio quality but may leave some residual noise.|

<Warning title="Note">


    Express SDK supports AI mode noise suppression, providing three modes: lightweight, balanced, and low latency. On top of eliminating steady-state noise, it effectively eliminates transient noises such as keyboards, coughing, wind, car horns, etc. For details, please refer to [Scenario-based AI Noise Reduction](/real-time-video-flutter/audio/scenario-based-ai-noise-reduction).

</Warning>



4. (Optional) Enable music detection. Please contact ZEGOCLOUD technical support to configure and enable the music detection feature.

Taking setting light noise suppression as an example:
```dart
// Enable ANS
ZegoExpressEngine.instance.enableANS(true);
// Enable transient noise suppression
ZegoExpressEngine.instance.enableTransientANS(true);
// Set ANS mode to ZegoANSMode.Soft
ZegoExpressEngine.instance.setANSMode(ZegoANSMode.Soft);
```


## Related Documents

- [How to handle audio echo issues?](https://doc-zh.zego.im/faq/echo)
- [How to handle audio noise issues?](https://doc-zh.zego.im/faq/audio_noise)
- [How to obtain and upload audio Dump files?](http://doc-zh.zego.im/faq/How_to_get_audio_dump_upload)

---
articleID: 16580
---


# Upgrade Guide for Version 3.0.0 and Above

---

<Warning title="Warning">
- If your current SDK version is lower than 3.0.0 and you need to upgrade to any SDK version 3.0.0 or above, please be sure to read this article.
- In addition, it is recommended that you check the interfaces related to your business by referring to the change descriptions between the two version intervals in [Release Notes](/real-time-video-u3d-cs/client-sdk/release-notes) based on the **current version number** and **upgrade target version number**.
</Warning>


This article will introduce the instructions and precautions when upgrading the Express SDK to version 3.0.0 and above.

## Deprecation Notice

1. Deprecate the three scenarios `General`, `Communication`, and `Live` in the [ZegoScenario](@-ZegoScenario) scenario enumeration. Please refer to the [Scenario-based Audio and Video Configuration](/real-time-video-u3d-cs/quick-start/scenario-based-audio-video-configuration) documentation for adaptation.

2. Starting from version 3.0.0, Express iOS SDK no longer supports bitcode. For details, please refer to the description about deprecating bitcode in [Xcode 14 Release Notes](https://developer.apple.com/documentation/xcode-release-notes/xcode-14-release-notes#Deprecations).

<Note title="Note">


Adaptation method: Open the configuration page of the Xcode project, find the "Enable Bitcode" option in the "Build Settings" page of the App Target, and set it to "No".

</Note>





## Deletion Notice

The following interfaces that were deprecated in previous versions have been deleted.

Method Name | Description |
--- | --- |
SetDebugVerbose | Set debug verbose switch and language. This function was deprecated in version 2.3.0. Please use [EnableDebugAssistant](@EnableDebugAssistant) to implement the original functionality. |
LoginMultiRoom | Login to multiple rooms. This method was deprecated after version 2.9.0. If you need to implement multi-room functionality, please call the [SetRoomMode](@SetRoomMode) function to set multi-room mode before engine initialization, then use [LoginRoom](@LoginRoom) to login to multiple rooms. If calling [LoginRoom](@LoginRoom) to login to multiple rooms, please ensure that the same user information is passed in. |
SetPlayStreamVideoLayer | Set the selection of playing stream video layer. This function was deprecated after version 2.3.0. Please use [SetPlayStreamVideoType](@SetPlayStreamVideoType) instead. |
EnableAudioDataCallback | Enable callback to receive additional audio data. This function was deprecated after version 2.7.0. Please use [StartAudioDataObserver](@StartAudioDataObserver) and [StopAudioDataObserver](@StopAudioDataObserver) instead. |
SetBuiltInSpeakerOn | Whether to use built-in speaker to play sound. This function was deprecated after version 2.3.0. Please use [SetAudioRouteToSpeaker](@SetAudioRouteToSpeaker) instead. |
OnDeviceError | Device exception notification. This function was deprecated in version 2.15.0 and above. Please use [OnLocalDeviceExceptionOccurred](@OnLocalDeviceExceptionOccurred) instead. |

## Change Example Code

You can refer to the following example code for interface changes.

### SetDebugVerbose

<Tabs>
<Tab title="Before version 3.0.0">
```cs
ZegoExpressEngine.GetEngine().SetDebugVerbose(true, ZegoLanguage.English);
```
</Tab>
<Tab title="Version 3.0.0 and above">
```cs
// Note, do not enable this feature in the online version! Use only during development phase!
// Note, do not enable this feature in the online version! Use only during development phase!"
ZegoExpressEngine.GetEngine().EnableDebugAssistant(true);
```
</Tab>
</Tabs>


### LoginMultiRoom

<Tabs>
<Tab title="Before version 3.0.0">

```cs
ZegoExpressEngine.CreateEngine(profile, null);

ZegoUser user = new ZegoUser("user1");
ZegoExpressEngine.GetEngine().LoginRoom("first_room", user);
ZegoExpressEngine.GetEngine().LoginMultiRoom("second_room", null);
```
</Tab>
<Tab title="Version 3.0.0 and above">

```cs
// Must be set before calling [createEngine] to take effect, otherwise it will fail.
// Must be set before calling [createEngine] to take effect, otherwise it will fail.
ZegoExpressEngine.SetRoomMode(ZegoRoomMode.MULTI_ROOM);

ZegoExpressEngine.CreateEngine(profile, null);

ZegoUser user = new ZegoUser("user1");
ZegoExpressEngine.GetEngine().LoginRoom("first_room", user);
ZegoExpressEngine.GetEngine().LoginRoom("second_room", user);
```
</Tab>
</Tabs>

### SetPlayStreamVideoLayer

<Tabs>
<Tab title="Before version 3.0.0">

```cs
ZegoExpressEngine.GetEngine().SetPlayStreamVideoLayer("stream1", ZegoPlayerVideoLayer.Auto);
```
</Tab>
<Tab title="Version 3.0.0 and above">

```cs
ZegoExpressEngine.GetEngine().SetPlayStreamVideoType("stream1", ZegoVideoStreamType.Default);
```
</Tab>
</Tabs>

### EnableAudioDataCallback

<Tabs>
<Tab title="Before version 3.0.0">

```cs
int bitmask = ZegoAudioDataCallbackBitMask.Captured | ZegoAudioDataCallbackBitMask.Player;
ZegoAudioFrameParam param = new ZegoAudioFrameParam();
param.sampleRate = ZegoAudioSampleRate.ZegoAudioSampleRate48K;
param.channel = ZegoAudioChannel.Mono;

// Start
ZegoExpressEngine.GetEngine().SetAudioDataHandler(handler);
ZegoExpressEngine.GetEngine().EnableAudioDataCallback(true, bitmask, param);

// Stop
ZegoExpressEngine.GetEngine().SetAudioDataHandler(null);
ZegoExpressEngine.GetEngine().EnableAudioDataCallback(false, bitmask, param);
```
</Tab>
<Tab title="Version 3.0.0 and above">

```cs
int bitmask = ZegoAudioDataCallbackBitMask.Captured | ZegoAudioDataCallbackBitMask.Player;
ZegoAudioFrameParam param = new ZegoAudioFrameParam();
param.sampleRate = ZegoAudioSampleRate.ZegoAudioSampleRate48K;
param.channel = ZegoAudioChannel.Mono;

// Start
ZegoExpressEngine.getEngine().SetAudioDataHandler(handler);
ZegoExpressEngine.getEngine().StartAudioDataObserver(bitmask, param);

// Stop
ZegoExpressEngine.getEngine().SetAudioDataHandler(null);
ZegoExpressEngine.getEngine().StopAudioDataObserver();
```
</Tab>
</Tabs>

### SetBuiltInSpeakerOn

<Tabs>
<Tab title="Before version 3.0.0">

```cs
ZegoExpressEngine.GetEngine().SetBuiltInSpeakerOn(true);
```
</Tab>
<Tab title="Version 3.0.0 and above">

```cs
ZegoExpressEngine.GetEngine().SetAudioRouteToSpeaker(true);
```
</Tab>
</Tabs>

### OnDeviceError

<Tabs>
<Tab title="Before version 3.0.0">

```cs
public void OnDeviceError(int errorCode, string deviceName) {
    // Handle device error
    // 处理设备错误
}
engine.onDeviceError = OnDeviceError;
```
</Tab>
<Tab title="Version 3.0.0 and above">

```cs
public void OnLocalDeviceExceptionOccurred(ZegoDeviceExceptionType exceptionType, ZegoDeviceType deviceType, string deviceID) {
    // Handle device error
    // 处理设备错误
}

engine.onLocalDeviceExceptionOccurred = OnLocalDeviceExceptionOccurred;
```
</Tab>
</Tabs>

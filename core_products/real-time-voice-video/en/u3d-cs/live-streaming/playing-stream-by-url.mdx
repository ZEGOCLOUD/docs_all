---
articleID: 14449
date: "2024-05-06"
---
# Playing Stream by URL

---

## Function Overview

When the publishing end uses third-party publishing tools (such as OBS software, network camera IP Camera, etc.) to publish the stream to CDN, or uses ZEGO SDK to relay CDN functionality to push the audio and video screen to a third-party CDN, you can directly pass in the URL address to play stream.

<Warning title="Warning">

This feature does not support running in WebGL environment.
</Warning>

## Example Source Code Download

Please refer to [Download Example Source Code](/real-time-video-u3d-cs/quick-start/run-example-code) to get the source code.

For related source code, please see files in the "Assets/ZegoExpressExample/Examples/AdvancedStreaming/StreamByCDN" directory.

## Prerequisites

Before implementing the URL play stream function, please ensure:

- You have created a project in [ZEGOCLOUD Console](https://console.zegocloud.com) and applied for valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated ZEGO Express SDK in the project and implemented basic audio and video streaming functions. For details, please refer to [Quick Start - Integration](/real-time-video-u3d-cs/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-u3d-cs/quick-start/implementing-video-call).

- You have contacted ZEGOCLOUD Technical Support to enable the URL play stream function.
- You have pushed the audio and video stream to CDN and know the corresponding URL. For details, please refer to [Use CDN for Live Streaming](/real-time-video-u3d-cs/live-streaming/using-cdn-for-live-streaming).

## Usage Steps

<a id="ZegoCDNConfig"></a>

### 1 Configure Play Stream Parameters

To play stream directly through the CDN URL address, you need to use the [ZegoCDNConfig](@-ZegoCDNConfig) object to fill in the URL parameters. When there is play stream authentication when playing stream from CDN, you also need to fill in the authentication parameters through the `authParam` field.

import Content from '/core_products/real-time-voice-video/en/snippets/playing-stream-by-url-note.mdx'

<Content />



```csharp
// Set CDN parameters
ZegoCDNConfig cdnConfig = new ZegoCDNConfig();
// URL is the CDN play stream address
cdnConfig.url = "rtmp://xxxxxxxx";
// If authentication is required, set authentication parameters. If authentication is not required, it can be left unset (authentication parameters cannot contain "?" characters)
cdnConfig.authParam = "xxx";

ZegoPlayerConfig config = new ZegoPlayerConfig();
config.cdnConfig = cdnConfig;
```

### 2 Start Playing Stream

Start playing stream by calling the [startPlayingStream](@startPlayingStream) interface.

When playing stream, if an error occurs, please refer to [Common Error Codes - 1004xxx Play Stream Related Error Codes](/real-time-video-u3d-cs/client-sdk/error-code#1004xxx-拉流相关的错误码).

<Warning title="Warning">


- Before playing stream by URL, ensure that you have logged in to the room.
- When playing stream by URL, you cannot play stream by directly filling in `StreamID`. The actual play stream screen is based on the URL.
- Although `StreamID` cannot be used to play stream at this time, the SDK still uses `StreamID` as the unique identifier internally for subsequent play stream related callbacks. Therefore, `StreamID` still needs to be globally unique within the entire AppID.

</Warning>



```csharp
// Start playing stream
engine.StartPlayingStream(streamID, config);
```

### 3 Stop Playing Stream

To stop playing stream, call the [stopPlayingStream](@stopPlayingStream) interface.

```csharp
// Stop playing stream
engine.StopPlayingStream(streamID);
```

### 4 (Optional) Listen to Play Stream Related Event Notifications

<Accordion title="Listen to Play Stream Related Event Notifications" defaultOpen="false">
You can listen to the result of playing stream from CDN through [OnPlayerStateUpdate](@OnPlayerStateUpdate).

<Warning title="Warning">


If you are not using ZEGO SDK to publish stream, but using third-party publishing tools to publish stream directly, and using ZEGO SDK to play stream, in this scenario, the publishing end has not joined the room using ZEGO SDK, and the playing end will not receive the callback of [OnRoomStreamUpdate ](@OnRoomStreamUpdate) by default. You can use the [Add Room Stream](/real-time-video-server/api-reference/room/add-stream) and [Delete Room Stream](/real-time-video-server/api-reference/room/delete-stream) functions to allow the playing end to receive the callback of [OnRoomStreamUpdate ](@OnRoomStreamUpdate).

</Warning>





```csharp
void OnPlayerStateUpdate(const std::string& streamID, ZegoPlayerState state, int errorCode, const std::string& extendedData) {
    // After calling the play stream interface successfully, when the player status changes, such as network interruption causing publishing stream abnormalities, etc., the SDK will notify through this callback while retrying to play stream
    // No play state, in this state before playing stream. If a steady-state exception occurs during the play stream process, such as incorrect AppID and AppSign, it will enter the no play state
    // ZEGO_PLAYER_STATE_NO_PLAY = 0,

    // Requesting play state, after the play stream operation is executed successfully, it will enter the requesting play state, usually this state is used for application interface display. If an interruption occurs due to poor network quality, the SDK will perform internal retry and will also return to the requesting play state
    // ZEGO_PLAYER_STATE_PLAY_REQUESTING = 1,

    // Playing state, entering this state indicates that play stream has been successful and users can communicate normally
    // ZEGO_PLAYER_STATE_PLAYING = 2
    // When playing stream by URL, the stream_id in the callback parameters is the stream ID when calling the play stream API, used to uniquely identify the current play stream event.
}

engine.onPlayerStateUpdate = OnPlayerStateUpdate;
```
</Accordion>

# Real-time Messaging and Signaling

- - -

## Function Overview

ZEGOCLOUD provides various text message sending and receiving functions to implement sending in-room broadcast messages, barrage messages, simple IM text chat, likes, gift-giving, quiz answering, and other functions.


| Message Type | Function Description | Application Scenarios | Sending Frequency Limit |
|-------|--------|--------|--------|
| Broadcast Message | Send text messages to all users in the same room. | Can be used for simple in-room chat room scenarios. | Please refer to [Limit Description](). |
| Barrage Message | During live streaming, viewers can express their opinions, which are displayed as scrolling subtitles, increasing interactivity between viewers. | Generally used for scenarios with a large amount of message sending and receiving in the room, and where message reliability does not need to be guaranteed, such as live streaming barrage. | Please refer to [Limit Description]().|
| Custom Signaling | Send messages to one or more users in the same room. | Generally used for remote control signaling or simple text message sending. For example, in online doll machine scenarios, remotely control the movement of the doll machine gripper. | Please refer to [Limit Description]().

In addition, ZEGOCLOUD also provides a complete Instant Messaging ZIM SDK, providing developers with full-platform interaction, massive concurrency, ultra-low latency, and guaranteed message delivery communication services. For details, please refer to [In-app chat]().






## Example Source Code Download

Please refer to [Download Example Source Code](/real-time-video-u3d-cs/quick-start/run-example-code) to get the source code.

For related source code, please see files in the "/ZegoExpressExample/CommonFeatures/src/main/java/im/zego/roommessage" directory.

## Prerequisites

Before sending real-time messages, please ensure:

- You have created a project in [ZEGOCLOUD Console](https://console.zegocloud.com) and applied for valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated ZEGO Express SDK in the project and implemented basic audio and video streaming functions. For details, please refer to [Quick Start - Integration](/real-time-video-u3d-cs/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-u3d-cs/quick-start/implementing-video-call).


## Usage Steps

### Send and Receive Broadcast Messages

1. **Send broadcast message**

  Call the [SendBroadcastMessage ](@SendBroadcastMessage) interface to send broadcast messages to other users in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [OnIMSendBroadcastMessageResult ](@OnIMSendBroadcastMessageResult) callback.

  ```java
  // Send broadcast message
  engine.SendBroadcastMessage(roomID, msg, new IZegoIMSendBroadcastMessageCallback() {
      // Callback handling for broadcast message sending result
      @Override
      public void onIMSendBroadcastMessageResult(int errorCode, long messageID) {
          // Handling for success or failure of message sending result
      }
  });
  ```
2. **Receive broadcast message**

  Implement the [OnIMRecvBroadcastMessage](@OnIMRecvBroadcastMessage) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. When the sender successfully sends a broadcast message, other users in the same room receive relevant information through this callback, including message content, message ID, sending time, and sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive room broadcast message notification
       *
       * @param roomID Room ID
       * @param messageList List of received messages
       */
      @Override
      public void OnIMRecvBroadcastMessage(String roomID, ArrayList<ZegoBroadcastMessageInfo> messageList){
          // Handling for receiving messages sent by other users
      }

  }
  ```

### Send and Receive Barrage Messages


1. **Send barrage message**

  Call the [SendBarrageMessage ](@SendBarrageMessage) interface to send barrage messages to other users in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [OnIMSendBarrageMessageResult ](@OnIMSendBarrageMessageResult) callback.

  ```java
  // Send room barrage message
  engine.SendBarrageMessage("ChatRoom-1", "This is a barrage message", new IZegoIMSendBarrageMessageCallback(){
      // Callback handling for barrage message sending result
      @Override
      public void OnIMSendBarrageMessageResult(int errorCode, String messageID) {
           // Handling for success or failure of message sending result
      }
  });
  ```
2. **Receive barrage message**

  Implement the [OnIMRecvBarrageMessage ](@OnIMRecvBarrageMessage) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. When the sender successfully sends a barrage message, other users in the same room receive relevant information through this callback, including message content, message ID, sending time, and sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive room barrage message notification
       *
       * @param roomID Room ID
       * @param messageList List of received messages
       */
      @Override
      public void OnIMRecvBarrageMessage(String roomID, ArrayList<ZegoBarrageMessageInfo> messageList){
           // Handling for receiving messages sent by other users
      }

  }
  ```

### Send and Receive Custom Signaling

1. **Send custom signaling**

  Call the [SendCustomCommand ](@SendCustomCommand) interface to send custom signaling to users specified through "toUserList" in the same room. The length cannot exceed 1024 bytes.

  Get the message sending result through the [OnIMSendCustomCommandResult ](@OnIMSendCustomCommandResult) callback.

  ```java
  // Send custom signaling, only users specified in `toUserList` can receive this signaling through OnIMSendCustomCommandResult
  // If the `toUserList` parameter is passed as `null`, the SDK will send this signaling to all users in the room
  engine.SendCustomCommand(roomID, command, toUserList, new IZegoIMSendCustomCommandCallback() {
      // Callback handling for user-defined message sending result
      @Override
      public void OnIMSendCustomCommandResult(int errorCode) {
          // Handling for success or failure of message sending result
      }
  });
  ```
2. **Receive custom signaling**

  Implement the [OnIMRecvCustomCommand ](@OnIMRecvCustomCommand) callback in the [IZegoEventHandler](@-IZegoEventHandler) delegate. When the sender successfully sends a custom message, specified users in the same room receive relevant information through this callback, including message content and message sender information.

  ```java
  public abstract class IZegoEventHandler {

      /**
       * Receive custom signaling notification
       *
       * @param roomID Room ID
       * @param fromUser Sender of the signaling
       * @param command Content of the signaling
       */
      @Override
      public void OnIMRecvCustomCommand(String roomID, ZegoUser fromUser, String command){
          // Handling for receiving messages sent by other users
      }

  }
  ```

---
articleID: 1045
date: "2024-01-02"
---
# Real-time Messaging and Signaling
- - -

## Feature Introduction


ZEGO provides various text message sending and receiving functions to implement sending in-room broadcast messages, barrage messages, simple IM text chat, likes, gifts, quizzes, and other functions.


| Message Type | Function Description | Application Scenarios | Sending Frequency Limit |
|-------|--------|--------|--------|
| Broadcast Message | Send text messages to all users in the same room. | Can be used for simple in-room chat room scenarios. | Please refer to [Restrictions](/real-time-video-ios-oc/best-practice/restrictions). |
| Barrage Message | Viewers can express their comments during the live streaming process, which are displayed as sliding subtitles, increasing interactivity between viewers. | Generally used for scenarios with large amounts of message sending and receiving in the room, and where message reliability does not need to be guaranteed, such as live streaming barrage. | Please refer to [Restrictions](/real-time-video-ios-oc/best-practice/restrictions).|
| Custom Signaling | Send messages to one or more users in the same room. | Generally used for remote control signaling or simple text message sending. For example, in the online claw machine scenario, remotely control the movement of the claw machine gripper. | Please refer to [Restrictions](/real-time-video-ios-oc/best-practice/restrictions).

In addition, ZEGO also provides a complete Instant Messaging ZIM SDK, providing developers with cross-platform interaction, massive concurrency, ultra-low latency, and guaranteed message delivery communication services. For details, please refer to [Instant Messaging](/zim-ios/introduction/overview).


## Sample Source Code Download

Please refer to [Download Sample Source Code](/real-time-video-ios-oc/quick-start/run-example-code) to get the source code.

For related source code, please check the files in the "/ZegoExpressExample/Examples/CommonFeatures/RoomMessage" directory.

## Prerequisites

Before sending real-time messages, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated the ZEGO Express SDK in the project and implemented basic audio and video publishing and playing functions. For details, please refer to [Quick Start - Integration](/real-time-video-ios-oc/quick-start/integrating-sdk) and [Quick Start - Implementation Flow](/real-time-video-ios-oc/quick-start/implementing-video-call).


## Usage Steps

### Send and Receive Broadcast Messages

1. **Send broadcast message**

    Call the [sendBroadcastMessage ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~ObjectiveC_ios~class~zego-express-engine#send-broadcast-message-room-id-callback) interface to send broadcast messages to other users in the same room. The length cannot exceed 1024 bytes.

    Get the message sending result through the [ZegoIMSendBroadcastMessageCallback ](@ZegoIMSendBroadcastMessageCallback) callback.

    ```objc
    // Send broadcast message
    [self.engine sendBroadcastMessage:@"This is a broadcast message" roomID:@"ChatRoom-1" callback:^(int errorCode, unsigned long long messageID) {
        NSLog(@"send broadcast message result block");
    }];
    ```

2. **Receive broadcast message**

    Implement the [onIMRecvBroadcastMessage](@onIMRecvBroadcastMessage) callback in the [ZegoEventHandler](@-ZegoEventHandler) delegate. After the sender successfully sends the broadcast message, other users in the same room receive relevant information through this callback, including message content, message ID, sending time, and sender information.

    ```objc
    // Received message sent by other users
    - (void)onIMRecvBroadcastMessage:(NSArray<ZegoBroadcastMessageInfo *> *)messageList roomID:(NSString *)roomID {
        NSLog(@"received broadcast message");
    }
    ```

### Send and Receive Barrage Messages

1. **Send barrage message**

    Call the [sendBarrageMessage ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~ObjectiveC_ios~class~zego-express-engine#send-barrage-message-room-id-callback) interface to send barrage messages to other users in the same room. The length cannot exceed 1024 bytes.

    Get the message sending result through the [ZegoIMSendBarrageMessageCallback ](@ZegoIMSendBarrageMessageCallback) callback.

    ```objc
    // Send room barrage message
    [self.engine sendBarrageMessage:@"This is a barrage message" roomID:@"ChatRoom-1" callback:^(int errorCode, NSString *messageID) {
        NSLog(@"send barrage message result block");
    }];
    ```

2. **Receive barrage message**

    Implement the [onIMRecvBarrageMessage ](@onIMRecvBarrageMessage) callback in the [ZegoEventHandler](@-ZegoEventHandler) delegate. After the sender successfully sends the barrage message, other users in the same room receive relevant information through this callback, including message content, message ID, sending time, and sender information.

    ```objc
    // Received message sent by other users
    - (void)onIMRecvBarrageMessage:(NSArray<ZegoBarrageMessageInfo *> *)messageList roomID:(NSString *)roomID {
        NSLog(@"received barrage message");
    }
    ```

### Send and Receive Custom Signaling

1. **Send custom signaling**

    Call the [sendCustomCommand ](@sendCustomCommand) interface to send custom signaling to users specified by "toUserList" in the same room. The length cannot exceed 1024 bytes.

    Get the message sending result through the [ZegoIMSendCustomCommandCallback ](@ZegoIMSendCustomCommandCallback) callback.

    ```objc
    // Send custom signaling, only users specified in `toUserList` can receive this signaling through onIMRecvCustomCommand:fromUser:roomID:
    // If the `toUserList` parameter is `nil`, the SDK will send this signaling to all users in the room
    NSArray<ZegoUser *> *toUserList = @[[ZegoUser userWithUserID:@"user1"], [ZegoUser userWithUserID:@"user2"]];
    [self.engine sendCustomCommand:@"This is a custom command" toUserList:toUserList roomID:@"ChatRoom-1" callback:^(int errorCode) {
       NSLog(@"send custom command result block");
    }];
    ```

2. **Receive custom signaling**

    Implement the [onIMRecvCustomCommand ](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~ObjectiveC_ios~protocol~zego-event-handler#on-im-recv-custom-command-from-user-room-id) callback in the [ZegoEventHandler](@-ZegoEventHandler) delegate. After the sender successfully sends custom signaling, specified users in the same room receive relevant information through this callback, including message content and message sender information.

    ```objc
    // Received message sent by other users
    - (void)onIMRecvCustomCommand:(NSString *)command fromUser:(ZegoUser *)fromUser roomID:(NSString *)roomID {
        NSLog(@"received custom command");
    }
    ```

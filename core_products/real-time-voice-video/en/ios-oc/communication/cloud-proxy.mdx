---
articleID: 16872
date: "2024-01-30"
---
# Cloud Proxy

- - -

## Feature Introduction

By setting the SDK's cloud proxy interface, all corresponding SDK traffic is relayed through a cloud proxy server to communicate with RTC and L3 ([Live Streaming](/real-time-video-ios-oc/live-streaming/low-latency-live-streaming)).

<Warning title="Note">

- The "Cloud Proxy" feature is a `paid` feature. If you need to use this feature, please contact ZEGO sales for consultation.
- After enabling the cloud proxy service, if the enterprise has configured a firewall, you also need to add the IP, domain name, and port used by the cloud proxy to the enterprise firewall whitelist.
</Warning>

<Frame width="512" height="auto" caption="">
  <img src="https://doc-media.zego.im/sdk-doc/Pics/Express/Cloud_Proxy.png" />
</Frame>

Currently, ZEGO provides two modes: `Standard Cloud Proxy` and `Smart Cloud Proxy`. Developers can choose the appropriate cloud proxy mode according to your business needs.

<table>

<tbody><tr>
<th></th>
<th>Standard Cloud Proxy</th>
<th>Smart Cloud Proxy</th>
</tr>
<tr>
<td>Description</td>
<td>When initializing the SDK, directly use cloud proxy mode.</td>
<td><p>When initializing the SDK, prioritize trying direct connection network mode.</p><ol><li>If network connectivity is established within 1 second, continue using direct connection mode.</li><li><p>If network connectivity is not established within 1 second:</p><ul><li>If currently on cellular network, continue staying in direct connection mode for retry.</li><li><b>If currently on non-cellular network, switch to cloud proxy mode.</b></li></ul></li></ol><p>When network switches, if network connectivity is detected and currently in direct connection mode, it will directly attempt according to the SDK initialization logic.</p></td>
</tr>
<tr>
<td>Use Cases</td>
<td>When you are in restrictive network environments such as hospitals, government, or company internal networks with intranet restrictions, hoping to use public cloud RTC or L3 services.</td>
<td>When your users are in scenarios with both public network and restrictive networks, and you cannot determine users' network usage conditions, hoping to prioritize using public cloud RTC or L3 services, and use cloud proxy service when public cloud RTC or L3 services are unavailable.</td>
</tr>
</tbody></table>

## Prerequisites

Before using cloud proxy, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated the ZEGO Express SDK in the project and implemented basic audio and video publishing and playing functions. For details, please refer to [Quick Start - Integration](/real-time-video-ios-oc/quick-start/integrating-sdk) and [Quick Start - Implementation Flow](/real-time-video-ios-oc/quick-start/implementing-video-call).


## Usage Steps

### 1 Enable cloud proxy service

Apply to ZEGO technical support to enable the cloud proxy service. After enabling the service, developers will obtain a cloud proxy domain and port information.

### 2 Configure cloud proxy

Call [setCloudProxyConfig](@setCloudProxyConfig) to configure cloud proxy.

<Warning title="Note">


This interface must be called before calling the [createEngineWithProfile](@createEngineWithProfile) interface to create the engine.
</Warning>

- Interface prototype

```objc
/**
 * Set cloud proxy.
 *
 * This interface needs to be called before createEngineWithProfile.
 * After calling this interface, all network requests and sending of Express SDK will be relayed through cloud proxy.
 *
 * @param proxyList Cloud proxy information list, supports setting multiple cloud proxy information.
 * @param token Authentication token. If the customer's authentication method is appsign, this can be empty. Otherwise, token must be filled.
 * @param enable Whether to enable cloud proxy
 */
(void)setCloudProxyConfig:(NSArray<ZegoProxyInfo *> *)proxyList
                    token:(NSString *)token
                   enable:(BOOL)enable;
```

- Call example

```objc
 ZegoProxyInfo* proxy = [ZegoProxyInfo alloc];
// Domain and port, developers fill in according to the relevant information obtained when enabling cloud proxy service
 proxy.hostName = @"xxxxxxxxxxxxx.zego.im";
 proxy.port = 10826;
 NSArray<ZegoProxyInfo *> *inputArray = @[proxy];
 [ZegoExpressEngine setCloudProxyConfig:inputArray token:@"" enable:TRUE];
```

## FAQ

**How to resolve if cloud proxy setting does not take effect?**
- Ensure you have contacted ZEGO technical support to enable the cloud proxy service and obtained valid cloud proxy port and domain.
- Ensure the cloud proxy is correctly set before [createEngineWithProfile](@createEngineWithProfile). Midway modification is not supported.

**Is a local proxy solution provided?**

Yes, for details please refer to [Local Proxy](/real-time-video-ios-oc/communication/local-proxy).

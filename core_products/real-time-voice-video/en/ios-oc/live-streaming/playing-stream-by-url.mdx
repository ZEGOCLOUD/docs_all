---
articleID: 3640
date: "2024-05-06"
---
# Playing Stream by URL

---

## Feature Introduction

When the publishing end uses third-party publishing tools (such as OBS software, network camera IP Camera, etc.) to publish the stream to a CDN, or uses the ZEGO SDK's forward-to-CDN feature to push audio and video content to a third-party CDN, you can directly pass in the URL address to play the stream.

<Note title="Note">

If you need to switch from the CDN playing stream scenario to the co-hosting scenario, please refer to the [Switching from CDN Playing Stream to Co-hosting Scenario](/real-time-video-ios-oc/best-practice/switch-cdn-to-rtc) document.
</Note>



## Prerequisites

Before implementing the URL playing stream feature, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated the ZEGO Express SDK in the project and implemented basic audio and video publishing and playing functions. For details, please refer to [Quick Start - Integration](/real-time-video-ios-oc/quick-start/integrating-sdk) and [Quick Start - Implementation Flow](/real-time-video-ios-oc/quick-start/implementing-video-call).

- You have contacted ZEGO technical support to enable the URL playing stream feature.
- You have published the audio and video stream to a CDN and know the corresponding URL. For details, please refer to [Using CDN for Live Streaming](/real-time-video-ios-oc/live-streaming/using-cdn-for-live-streaming).


## Usage Steps

<a id="ZegoCDNConfig"></a>

### 1 Configure playing stream parameters

To play stream directly through the CDN's URL address, you need to use the [ZegoCDNConfig](@-ZegoCDNConfig) object to fill in the URL parameter. If the corresponding CDN has configured playing stream authentication, you also need to fill in the authentication parameters through the "authParam" field.

import Content from '/core_products/real-time-voice-video/zh/snippets/playing-stream-by-url-note.mdx'

<Content />

```objc
ZegoPlayerConfig *playerConfig = [[ZegoPlayerConfig alloc] init];
ZegoCDNConfig *cdnConfig = [[ZegoCDNConfig alloc] init];
// url is the cdn playing stream address
cdnConfig.url = @"rtmp:\\xxxxxxx";
// If authentication is required, set authentication parameters
cdnConfig.auth = @"xxxx";
playerConfig.cdnConfig = cdnConfig;
```

### 2 Start playing stream

Start playing stream by calling the [startPlayingStream](@startPlayingStream) interface.

When playing stream, if an error occurs, please refer to [Common Error Codes - 1004xxx Playing Stream Related Error Codes](/real-time-video-ios-oc/client-sdk/error-code#1004xxx-playing-stream-related-error-codes).

<Warning title="Note">

- Before playing stream by URL, ensure you have logged in to the room.
- When playing stream by URL, you cannot play stream by directly filling in the stream ID. The actual playing stream content is based on the URL.
- Although the stream ID cannot be used for playing stream at this time, the SDK still uses the stream ID as a unique identifier internally, used in subsequent playing stream related callbacks. Therefore, the stream ID still needs to be globally unique within the entire AppID.
</Warning>

```objc
// Start playing stream, set the remote playing stream rendering view canvas, use SDK default mode for view mode, aspect ratio scaling to fill the entire View
// After filling in the url parameter, the sdk will pull audio and video streams from the url, but still needs to pass a unique streamID to the SDK, the SDK will use this streamID to identify this stream internally
[[ZegoExpressEngine sharedEngine] startPlayingStream:streamID canvas:[ZegoCanvas canvasWithView:self.remoteUserView] config:playerConfig];
```

### 3 Stop playing stream

To stop playing stream, call the [stopPlayingStream](@stopPlayingStream) interface.

```objc
// Stop playing stream
// The streamID passed when stopping playing stream is the streamID passed when playing stream
[[ZegoExpressEngine sharedEngine] stopPlayingStream:@"streamID"];
```

### 4 (Optional) Listen to playing stream related event notifications

<Accordion title="Listen to playing stream related event notifications" defaultOpen="false">
You can listen to the result of playing stream from CDN through [onPlayerStateUpdate](@onPlayerStateUpdate).

<Warning title="Note">

If you are not using ZEGO SDK for publishing, but using third-party publishing tools to publish directly, but using ZEGO SDK for playing stream, in this scenario the publishing end has not used ZEGO SDK to join the room, and the playing end will not receive the [onRoomStreamUpdate](@onRoomStreamUpdate) callback by default. You can use the [Add Room Stream](/real-time-video-server/api-reference/room/add-stream) and [Delete Room Stream](/real-time-video-server/api-reference/room/delete-stream) features to allow the playing end to receive the [onRoomStreamUpdate](@onRoomStreamUpdate) callback.
</Warning>

```objc
// Notification of user playing audio and video stream status
// When the user's playing audio and video stream status changes, this callback will be received. If the network is interrupted and causes playing stream abnormality, the SDK will automatically retry.
- (void)onPlayerStateUpdate:(ZegoPlayerState)state errorCode:(int)errorCode extendedData:(NSDictionary *)extendedData streamID:(NSString *)streamID {
    if (errorCode != 0) {
        NSLog(@"Playing stream status error streamID: %@, errorCode:%d", streamID, errorCode);
    } else {
        switch (state) {
            case ZegoPlayerStatePlaying:
                NSLog(@"Playing stream in progress");
                break;
            case ZegoPlayerStatePlayRequesting:
                NSLog(@"Requesting to play stream");
                break;
            case ZegoPlayerStateNoPlay:
                NSLog(@"Not playing stream");
                break;
        }
    }
}
```
</Accordion>

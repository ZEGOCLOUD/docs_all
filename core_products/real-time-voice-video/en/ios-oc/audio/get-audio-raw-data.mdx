---
articleID: 4306
date: "2024-01-02"
---
# Getting Raw Audio Data

- - -

## Feature Introduction

The SDK provides developers with the function of obtaining raw audio data. The obtained raw audio data format is PCM. Developers can write this data to the local device to implement audio recording.

## Sample Source Code Download

Please refer to [Download Sample Source Code](/real-time-video-ios-oc/quick-start/run-example-code) to get the source code.

For related source code, please check the files in the "/ZegoExpressExample/Examples/AdvancedAudioProcessing/OriginalAudioDataAcquisition" directory.

## Prerequisites

Before getting raw audio data, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zegocloud.com) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated the ZEGO Express SDK in the project and implemented basic audio and video publishing and playing functions. For details, please refer to [Quick Start - Integration](/real-time-video-ios-oc/quick-start/integrating-sdk) and [Quick Start - Implementation Flow](/real-time-video-ios-oc/quick-start/implementing-video-call).



## Usage Steps

### 1 Initialize SDK

Please refer to "Create Engine" in [Quick Start - Implementation Flow](/real-time-video-ios-oc/quick-start/implementing-video-call).

### 2 Enable getting raw audio data function

Developers can call the [startAudioDataObserver ](@startAudioDataObserver) interface to enable audio data callback monitoring. The callback audio data type is [ZegoAudioDataCallbackBitMask](@-ZegoAudioDataCallbackBitMask), including `ZegoAudioDataCallbackBitMaskCaptured`, `ZegoAudioDataCallbackBitMaskPlayback`, `ZegoAudioDataCallbackBitMaskMixed`, and `ZegoAudioDataCallbackBitMaskPlayer`. All four callback types need to be enabled.

```objc
// Bitmask for required audio data types, this example enables all four callbacks
ZegoAudioDataCallbackBitMask bitmask = ZegoAudioDataCallbackBitMaskCaptured | ZegoAudioDataCallbackBitMaskPlayback | ZegoAudioDataCallbackBitMaskMixed | ZegoAudioDataCallbackBitMaskPlayer;

// Required audio data parameters, this example is mono channel, 16 K
ZegoAudioFrameParam *param = [[ZegoAudioFrameParam alloc] init];
param.channel = ZegoAudioChannelMono;
param.sampleRate = ZegoAudioSampleRate16K;

// Enable getting raw audio data function
[[ZegoExpressEngine sharedEngine] startAudioDataObserver:bitmask param:param];
```

<Note title="Notes">


If needed, please refer to [Using Bitmask](https://doc-zh.zego.im/article/8660).
</Note>

### 3 Set callback to get raw audio data and process

Developers can call the [setAudioDataHandler ](@setAudioDataHandler) interface to set additional callbacks for receiving audio data. As needed, you can implement callbacks [onCapturedAudioData](@onCapturedAudioData), [onPlaybackAudioData](@onPlaybackAudioData), [onMixedAudioData](@onMixedAudioData), and [onPlayerAudioData](@onPlayerAudioData), which correspond to the four audio data types in the above [ZegoAudioDataCallbackBitMask](@-ZegoAudioDataCallbackBitMask) respectively.

```objc
// Set audio data callback
[[ZegoExpressEngine sharedEngine] setAudioDataHandler:self];
```

```objc
// Implement the following four callbacks as needed, corresponding to the four options of the above Bitmask

- (void)onCapturedAudioData:(const unsigned char *)data dataLength:(unsigned int)dataLength param:(ZegoAudioFrameParam *)param {
    // Local captured audio data, callback can be received after publishing stream
}

- (void)onPlaybackAudioData:(const unsigned char *)data dataLength:(unsigned int)dataLength param:(ZegoAudioFrameParam *)param {
    // Audio data played by SDK. When the engine is in a non-playing stream state and not using media player to play media files, the callback audio data is silent audio data
}

- (void)onMixedAudioData:(const unsigned char *)data dataLength:(unsigned int)dataLength param:(ZegoAudioFrameParam *)param {
    // Audio data callback after mixing local captured audio and SDK played audio
}

- (void)onPlayerAudioData:(const unsigned char *)data dataLength:(unsigned int)dataLength param:(ZegoAudioFrameParam *)param streamID:(NSString *)streamID {
    // Remote playing stream audio data, callback for each playing stream data after starting playing stream
}
```

### 4 Stop audio data callback monitoring

If you want to stop audio data callback monitoring, you can call the [stopAudioDataObserver ](@stopAudioDataObserver) interface.

```objc
[[ZegoExpressEngine sharedEngine] stopAudioDataObserver];
```

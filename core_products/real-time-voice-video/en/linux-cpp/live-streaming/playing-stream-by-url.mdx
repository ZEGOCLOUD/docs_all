---
articleID: 6862
date: "2024-05-06"
---
# Play Stream by URL

---

## Feature Overview

When the publishing end uses third-party publishing tools (such as OBS software, network camera IPCamera, etc.) to publish streams to CDN, or pushes audio/video screens to third-party CDNs through ZEGO SDK's CDN relay function, you can directly pass in the URL address to play streams.

<Note title="Note">


If you need to switch from the CDN stream playing scenario to the video call scenario, please refer to the [Switch from CDN Stream Playing to Video Call Scenario](/real-time-video-linux-cpp/best-practice/switch-cdn-to-rtc) document.

</Note>



## Prerequisites

Before implementing the URL stream playing function, please ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zego.im) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated ZEGO Express SDK in the project and implemented basic audio and video publishing and playing functions. For details, please refer to [Quick Start - Integration](/real-time-video-linux-cpp/quick-start/integrating-sdk) and [Quick Start - Implementation Flow](/real-time-video-linux-cpp/quick-start/implementing-video-call).

- You have contacted ZEGOCLOUD Technical Support to enable the URL stream playing function.
- You have pushed audio/video streams to CDN and know the corresponding URL. For details, please refer to [Use CDN for Live Streaming](/real-time-video-linux-cpp/live-streaming/using-cdn-for-live-streaming).


## Usage Steps

<a id="ZegoCDNConfig"></a>

### 1 Configure Stream Playing Parameters

To play streams directly through CDN's URL address, you need to use the [ZegoCDNConfig](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~cpp_linux~struct~ZegoCDNConfig) object to fill in the URL parameters. When there is stream playing authentication when playing from CDN, you also need to fill in the authentication parameters through the `authParam` field.


import Content from '/core_products/real-time-voice-video/zh/snippets/playing-stream-by-url-note.mdx'

<Content />



```cpp
// Set CDN parameters
ZegoCDNConfig cdnConfig;
// URL is the CDN stream playing address
cdnConfig.url = "rtmp://xxxxxxxx";
// If authentication is required, set the authentication parameters. If authentication is not required, you can leave it unset (authentication parameters cannot contain the "?" character)
cdnConfig.authParam = "xxx";

ZegoPlayerConfig config;
config.cdnConfig = &cdnConfig;
```

### 2 Start Playing Stream

Start playing stream by calling the [startPlayingStream](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~cpp_linux~class~IZegoExpressEngine#start-playing-stream-1) interface.

When playing stream, if an error occurs, please refer to [Stream Playing Error Codes](/real-time-video-linux-cpp/client-sdk/error-code).

<Warning title="Note">


- Before playing stream by URL, please ensure you have logged in the room.
* When playing stream by URL, you cannot directly play stream by filling in the Stream ID. The actual playing screen is subject to the URL.
* Although the Stream ID cannot be used for stream playing at this time, the SDK internally still uses the Stream ID as the unique identifier for subsequent stream playing related callbacks. Therefore, the Stream ID still needs to be globally unique within the entire AppID.



```cpp
// Start playing stream, set the remote playing rendering view canvas, and use the SDK's default view mode, aspect ratio scaling to fill the entire View
ZegoCanvas canvas((void*)view);

// After filling in the URL parameter, the SDK will pull the audio/video stream from the URL, but you still need to pass a unique streamID to the SDK, which will internally use this streamID to identify the stream
engine->startPlayingStream(streamID, &canvas, config);
```

### 3 Stop Playing Stream

To stop playing stream, call the [stopPlayingStream](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~CPP_linux~class~zego-express-i-zego-express-engine#stop-playing-stream) interface.

```cpp
// Stop playing stream
engine->stopPlayingStream(streamID);
```

### 4 (Optional) Listen to Stream Playing Related Event Notifications

<Accordion title="Listen to Stream Playing Related Event Notifications" defaultOpen="false">
You can listen to the result of stream playing from CDN through [onPlayerStateUpdate](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~CPP_linux~class~zego-express-i-zego-event-handler#on-player-state-update).

<Warning title="Note">


If you are not using ZEGO SDK for publishing, but using third-party publishing tools to publish directly, but using ZEGO SDK for playing, in this scenario the publishing end has not used ZEGO SDK to join the room, and the playing end will not receive the [onRoomStreamUpdate](@onRoomStreamUpdate) callback by default. You can use the [Add Room Stream](/real-time-video-server/api-reference/room/add-stream) and [Delete Room Stream](/real-time-video-server/api-reference/room/delete-stream) functions to let the playing end receive the [onRoomStreamUpdate ](@onRoomStreamUpdate) callback.




```cpp
// Please note, do not call any SDK interfaces in the SDK callback thread, you need to manually switch to another thread, otherwise a deadlock will occur
class MyEventHandler :public IZegoEventHandler
{
    public:
        void onPlayerStateUpdate(const std::string& /*streamID*/, ZegoPlayerState /*state*/, int /*errorCode*/, const std::string& /*extendedData*/) {
            /** After calling the stream playing interface successfully, when the player's state changes, such as when a network interruption causes streaming abnormalities, the SDK will notify through this callback while retrying stream playing */
            /** Not playing state, in this state before playing stream. If a steady exception occurs during the stream playing process, such as incorrect AppID, AppSign, or Token, it will enter the not playing state */
            //ZEGO_PLAYER_STATE_NO_PLAY = 0,

            /** Requesting playing state, after the stream playing operation is executed successfully, it will enter the requesting playing state, usually used for application interface display. If an interruption occurs due to poor network quality, the SDK will internally retry and also return to the requesting playing state */
            //ZEGO_PLAYER_STATE_PLAY_REQUESTING = 1,

            /** Playing state, entering this state indicates that stream playing has succeeded and users can communicate normally */
            //ZEGO_PLAYER_STATE_PLAYING = 2
            //When playing by URL, the stream_id in the callback parameters is the stream ID when calling the stream playing API, used to uniquely identify the current stream playing event.
        }
};
auto handler=std::make_shared<MyEventHandler>();
engine->setEventHandler(handler);
```
</Accordion>

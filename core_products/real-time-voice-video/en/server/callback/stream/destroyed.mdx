---
articleID: 19678
---


# Stream Destroyed Callback

---


<Warning title="Attention">
Stopping Stream Mixing will not trigger this callback. For Stream Mixing related callbacks, please refer to [Stream Mixing Stopped Callback](./../stream-mixing/stopped.mdx).
</Warning>

## Description

When developers need to maintain a live list, when the APP has a Stream closed on the streaming media server, it will make a POST request to the callback URL.

## Callback instructions

- Request method: POSTã€‚

<Note title="Note">


    The callback data format is JSON, you need to decode it with UrlDecode.

</Note>




- Request URL: Please configure the callback URL in the [ZEGOCLOUD console](https://console.zego.im/).
- Transfer protocol: HTTPS/HTTP, HTTPS is recommended.



## Callback parameters


<table>

<tbody><tr>
<th>Common parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
<tr>
<td>event</td>
<td>String</td>
<td>Callback event, this callback returns <code>stream_close</code>.</td>
</tr>
<tr>
<td>appid</td>
<td>String</td>
<td>AppId.</td>
</tr>
<tr>
<td>timestamp</td>
<td>String</td>
<td>Server current time, Unix timestamp.</td>
</tr>
<tr>
<td>nonce</td>
<td>String</td>
<td>Random number.</td>
</tr>
<tr>
<td>signature</td>
<td>String</td>
<td>Verification string, please refer to <a target="_blank" href="/real-time-video-server/callback/receiving-callback">Callback instructions - Verification instructions</a>.</td>
</tr>
<tr>
<th>Business parameters</th>
<th>Type</th>
<th>Description</th>
</tr>
<tr>
<td>room_id</td>
<td>String</td>
<td>Room ID, corresponds to the client's RoomID, has the same meaning as channel_id, not exceeding 127 bytes.</td>
</tr>
<tr>
<td>room_session_id</td>
<td>String</td>
<td>Unique identifier of the Room lifecycle, remains unchanged during the entire lifecycle of the Room.</td>
</tr>
<tr>
<td>user_id</td>
<td>String</td>
<td>User ID, not exceeding 255 bytes.</td>
</tr>
<tr>
<td>user_name</td>
<td>String</td>
<td>User nickname, not exceeding 255 bytes.</td>
</tr>
<tr>
<td>channel_id</td>
<td>String</td>
<td>Channel ID, corresponds to the client's RoomID, not exceeding 127 bytes.</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>Close type.<ul><li>0: Normal close (User calls the SDK's <a href="https://doc-zh.zego.im/real-time-video-android-java/client-sdk/api-reference/class#stoppublishingstream" target="blank">stopPublishingStream</a> interface to stop Publishing stream).</li><li>Non 0 is abnormal close:<ul><li>1: User heartbeat timeout close.</li><li>2: User repeatedly logged in to the same Room, closing the Stream from the previous login session.</li><li>3: Server interface kickout user, closing the Stream created by the user.</li><li>4: tcp disconnect closes Stream (configurable notification time).</li><li>5: Room was cleared and Stream was closed.</li><li>100: Call the server interface <a href="/real-time-video-server/api-reference/room/delete-stream" target="blank">DeleteStream</a> to close Stream.</li></ul></li></ul></td>
</tr>
<tr>
<td>stream_alias</td>
<td>String</td>
<td>Stream name, corresponds to the client's StreamID, not exceeding 255 bytes.</td>
</tr>
<tr>
<td>stream_id</td>
<td>String</td>
<td>Stream ID, corresponds to the client's StreamID, has the same meaning as stream_alias.</td>
</tr>
<tr>
<td>stream_sid</td>
<td>String</td>
<td>Stream server ID, the unique identifier of the Stream, generated by ZEGOCLOUD backend, developers do not need to pay attention.</td>
</tr>
<tr>
<td>stream_seq</td>
<td>String</td>
<td>The seq of the server Stream list change, increments by 1 each time the Stream changes.</td>
</tr>
<tr>
<td>third_define_data</td>
<td>String</td>
<td>Customer-defined data.</td>
</tr>
<tr>
<td>create_time_ms</td>
<td>String</td>
<td>Stream creation time, server current time, Unix timestamp. Unit: milliseconds.</td>
</tr>
<tr>
<td>destroy_timemillis</td>
<td>String</td>
<td>Stream close time, server current time, Unix timestamp. Unit: milliseconds.</td>
</tr>
</tbody></table>

<Note title="Note">

It is recommended to convert some parameters to Int for logical processing. Related fields include `type`, `destroy_timemillis`, `stream_seq`, `create_time_ms`, `room_session_id`.

</Note>



## Data example

```json
{
    "event": "stream_close",
    "appid": "1",
    "timestamp": "1666786067",
    "nonce": "7266888922840654370",
    "signature": "xxx",
    "room_id": "room1",
    "room_session_id": "123456789",
    "user_id": "user1",
    "user_name": "user1_name",
    "channel_id": "0xb-0x1",
    "type": "0",
    "stream_alias": "aaa",
    "stream_id": "stream_id",
    "stream_sid": "s-115205136669740000000000104",
    "stream_seq": "700",
    "third_define_data": "{\"u\":\"S1lxOUxMN2tRZ3lIY0JMSUs3VlMxZz09\"}",
    "create_time_ms": "1666786067353",
    "destroy_timemillis": "1666986067248"
}
```

## Return response

Returning HTTP status code 2XX (e.g. 200) indicates success, other responses indicate failure.


## Callback retry strategy

If ZEGOCLOUD server does not receive a response, or the received HTTP status code is not 2XX (e.g. 200), it will try to retry, **up to 5 retries**. The interval between each retry request and the **previous request** is 2s, 4s, 8s, 16s, 32s respectively. If the 5th retry still fails, no more retries will be made and the callback will be lost.

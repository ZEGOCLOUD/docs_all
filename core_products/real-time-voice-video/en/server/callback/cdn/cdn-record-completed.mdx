---
articleID: 19690
---


# Recording File Generated Callback

---

## Description

When developers need to implement live replay functionality, after enabling background recording, when a stream is recorded on the CDN, the APP will make a POST request to the callback URL.



## Callback instructions

- Request method: POST.

<Note title="Note">


    The callback data format is JSON. You need to perform UrlDecode decoding on it.

</Note>





- Request URL: Please configure the callback URL on the [ZEGOCLOUD Console](https://console.zego.im/).
- Transfer protocol: HTTPS/HTTP. HTTPS is recommended.



## Callback parameters


<table>

<thead>
  <tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>stream_alias</td>
    <td>String</td>
    <td>Stream name, corresponds to the client's StreamID, not exceeding 255 bytes.</td>
  </tr>
  <tr>
    <td>replay_url</td>
    <td>String</td>
    <td>Replay URL, not exceeding 1024 bytes.</td>
  </tr>
  <tr>
    <td>begin_time</td>
    <td>String</td>
    <td>Start time, Unix timestamp.</td>
  </tr>
  <tr>
    <td>end_time</td>
    <td>String</td>
    <td>End time, Unix timestamp.</td>
  </tr>
  <tr>
    <td>timestamp</td>
    <td>String</td>
    <td>Server current time, Unix timestamp.</td>
  </tr>
  <tr>
    <td>nonce</td>
    <td>String</td>
    <td>Random number.</td>
  </tr>
  <tr>
    <td>signature</td>
    <td>String</td>
    <td>Verification string. For details, see <a target="_blank" href="/real-time-video-server/callback/receiving-callback">Callback instructions - Verification instructions</a>.</td>
  </tr>
  <tr>
    <td>appid</td>
    <td>String</td>
    <td>AppId.</td>
  </tr>
  <tr>
    <td>event</td>
    <td>String</td>
    <td>Callback event. This callback returns <code>record</code>.</td>
  </tr>
  <tr>
    <td>extra_params</td>
    <td>String</td>
    <td>Extended field. Different CDN vendors have different extended fields. Please refer to the table below.</td>
  </tr>
</tbody>
</table>

When using CDN services from different vendors, the **extra_params** parameter is as follows:

<table>

<tbody><tr>
<th>CDN vendor</th>
<th><b>extra_params</b> parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
<tr>
<td rowspan="3">Tencent</td>
<td>TaskId</td>
<td>String</td>
<td>Unique identifier of the recording task.</td>
</tr>
<tr>
<td>FileID</td>
<td>String</td>
<td>Unique identifier of the recording file.</td>
</tr>
<tr>
<td>Duration</td>
<td>Float</td>
<td>Recording duration.</td>
</tr>
<tr>
<td rowspan="2">Ws</td>
<td>PersistentId</td>
<td>String</td>
<td>Unique identifier of the recording.</td>
</tr>
<tr>
<td>Duration</td>
<td>Float</td>
<td>Recording duration.</td>
</tr>
<tr>
<td rowspan="3">Huawei</td>
<td>Duration</td>
<td>Float</td>
<td>Duration of the recording file, unit: seconds.</td>
</tr>
<tr>
<td>ObsObject</td>
<td>String</td>
<td>OBS storage path of the recording file.</td>
</tr>
<tr>
<td>FileSize</td>
<td>UInt32</td>
<td>File size, unit: Byte.</td>
</tr>
</tbody></table>



## Data example

```json
{
    "stream_alias": "aaaa",
    "replay_url": "replay_url",
    "begin_time": "1481597358",
    "end_time": "1481597358",
    "timestamp": "1481597358",
    "nonce": "158273",
    "signature": "signature",
    "appid": "1",
    "event": "record",
    "extra_params": "extra_params"
}
```

## Return response


Return HTTP status code 2XX (e.g., 200) indicates success, and other responses indicate failure.


## Callback retry strategy

If the ZEGO server does not receive a response, or the received HTTP status code is not 2XX (e.g., 200), it will attempt to retry, **up to 5 retries**. The interval between each retry request and the **previous request** is 2s, 4s, 8s, 16s, and 32s respectively. If the 5th retry still fails, no more retries will be made, and the callback will be lost.

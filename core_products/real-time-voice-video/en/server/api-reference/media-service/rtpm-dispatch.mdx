---
id: rtpm-dispatch
title: "RTMPDispatchV2"
description: "Call this API to initiate RTMP stream dispatching, supporting both 'pull' and 'push' dispatch modes."
api: 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
info_path: core_products/real-time-voice-video/en/server/api-reference/media-service/open-api-desc
---

<h1 className={"openapi__heading"}>RTMPDispatchV2</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


Call this API to initiate RTMP stream dispatching, supporting both "pull" and "push" dispatch modes.

When you need to perform RTMP stream publishing or playing from ZEGOCLOUD's video cloud service through the RTMP protocol, you can use this API to obtain the RTMP publishing or playing nodes. After the developer passes the Stream ID (StreamId), dispatch mode (Type), client IP (ClientIP), and sequence number (Sequence) from the client, the ZEGOCLOUD media server (RTC service) returns a dispatch result set for the client to publish or play streams.

For example, when performing RTMP stream publishing through third-party publishing tools such as OBS, you need to perform publishing dispatch; when you need a third-party player to pull RTMP streams for playback, you need to perform playing dispatch.

<Warning title="Note">
For first-time use of this API, please contact ZEGOCLOUD Technical Support for configuration.
</Warning>
<Note title="Rate Limit">For the same AppID: 40 times/second</Note>
## Legacy API Usage Instructions

<Accordion title="Using RTMPDispatch to access ZEGOCLOUD server" defaultOpen="false">
<Note title="Note">

The difference between **RTMPDispatchV2 (recommended)** and **RTMPDispatch** is, when accessing the ZEGOCLOUD server:

- Using `RTMPDispatchV2`, the ZEGOCLOUD server returns Data in URL format.
- Using `RTMPDispatch`, the ZEGOCLOUD server returns Data in IP:Port format.

</Note>

Request URL: `https://rtc-api.zego.im/?Action=RTMPDispatch`

Response example:

```json
{
    "Code":0,
    "Message":"ok",
    "RequestId":"5094436160208407316",
    "Data":[
        "81.69.49.115:1935"
    ]
}
```
</Accordion>
<br/>

<Note title="Note">
In the test environment (see the IsTest common parameter description for details), the Stream ID must be prefixed with "zegotest-AppId-". For example, if the Stream ID is "test" and the AppId is "123456789" in the test environment, the Stream ID should be "zegotest-123456789-test".
</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> API prototype parameters\n>\n> https://rtc-api.zego.im?Action=RTMPDispatchV2\n","required":true,"schema":{"type":"string","enum":["RTMPDispatchV2"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"ðŸ’¡Public parameter. Application ID, assigned by ZEGOCLOUD. Get it from the [ZEGOCLOUD Admin Console](https://console.zegocloud.com/).","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"ðŸ’¡Common parameter. A 16-character hexadecimal random string (hex-encoded 8-byte random number). For the generation algorithm, refer to the <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">signature example</a>.","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"ðŸ’¡Common parameter. Current Unix timestamp in seconds. For the generation algorithm, refer to the <a href=\"/real-time-video-server/api-reference/accessing-server-apis#signature-example\">signature example</a>. A maximum deviation of 10 minutes is allowed.","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"ðŸ’¡Common parameter. Signature used to verify the legitimacy of the request. Please refer to the [signature mechanism](/real-time-video-server/api-reference/accessing-server-apis#signature-mechanism) to generate it.","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"ðŸ’¡Public parameter. Signature version number.","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"StreamId","in":"query","required":true,"schema":{"type":"string"},"description":"Stream ID, a string with a maximum length of 256 characters.\n- The Stream ID is defined by you.\n- When publishing streams, it must be globally unique within the entire AppID. If different users publish streams with the same stream name within the same AppID, the later publishing user will fail to publish.\n- Only supports numbers, English characters, '-', and '_'.\n"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Sequence","in":"query","required":true,"schema":{"type":"Int64"},"description":"Request sequence number; only used for request reconciliation. Using a timestamp (millisecond level) is recommended."}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Type","in":"query","required":true,"schema":{"type":"string"},"description":"Dispatch mode:\n- pull: Get the RTMP playing node\n- push: Get the RTMP publishing node\n"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"ClientIP","in":"query","required":false,"schema":{"type":"string"},"description":"Optional. If provided, pass the client IP address, for example: 119.23.242.129.\n\n> **Note**\n>\n> IPv6 format IP addresses are not currently supported.\n"}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>Success</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"number"} qualifierMessage={undefined} schema={{"type":"integer","format":"number","description":"Return code.\nThe following only lists some return codes related to the API business logic. For the complete return codes, please refer to [Global Return Codes](/real-time-video-server/api-reference/return-codes).\n<table>\n  <thead>\n    <tr><th>Return Code</th><th>Description</th><th>Suggested Action</th></tr>\n  </thead>\n  <tbody>\n    <tr><td>1010, 30002</td><td>API call rate too high.</td><td>Please reduce the API request frequency.</td></tr>\n    <tr><td>1001</td><td>Dispatch failed.</td><td>Please contact ZEGOCLOUD Technical Support.</td></tr>\n    <tr><td>1002</td><td>Publishing node is empty.</td><td>Please contact ZEGOCLOUD Technical Support.</td></tr>\n    <tr><td>1003</td><td>Playing node is empty.</td><td>Please contact ZEGOCLOUD Technical Support.</td></tr>\n    <tr><td>1005</td><td>App is not online.</td><td>Please contact ZEGOCLOUD Technical Support.</td></tr>\n    <tr><td>1006</td><td>Invalid parameter.</td><td>Please contact ZEGOCLOUD Technical Support.</td></tr>\n    <tr><td>30003</td><td>Internal error.</td><td>Please contact ZEGOCLOUD Technical Support.</td></tr>\n    <tr><td>30004</td><td>Incorrect isTest parameter.</td><td>Please check if the isTest common parameter is correct.</td></tr>\n    <tr><td>30005</td><td>Invalid AppId.</td><td>Please check if the AppId is correct.</td></tr>\n    <tr><td>30009</td><td>Invalid StreamId, stream name does not conform to specifications.</td><td>Please check if the StreamId conforms to the stream name encoding specifications.</td></tr>\n    <tr><td>30010</td><td>Invalid dispatch action.</td><td>Please check if the Type is correct.</td></tr>\n    <tr><td>30011</td><td>Invalid client IP address.</td><td>Please check if the ClientIP is correct.</td></tr>\n  </tbody>\n</table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Operation result description","example":"ok"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"Request ID","example":"5094436160208407316"}}></SchemaItem><SchemaItem collapsible={false} name={"Data"} required={false} schemaName={"object"} qualifierMessage={undefined} schema={{"type":"object","description":"RTMP publishing or playing node.\n\n> **Note**\n>\n> After obtaining this node, please initiate stream publishing or playing within 2 hours, otherwise the node may be occupied or taken offline. Therefore, it is recommended to call this API each time you perform RTMP stream publishing or playing to obtain the latest node.\n","example":["rtmp://81.69.49.115:1935/1540531164/caodantest"]}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"ok\",\n  \"RequestId\": \"5094436160208407316\",\n  \"Data\": [\n    \"rtmp://81.69.49.115:1935/1540531164/caodantest\"\n  ]\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
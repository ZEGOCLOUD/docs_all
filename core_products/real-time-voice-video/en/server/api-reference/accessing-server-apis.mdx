---
articleID: 19458
---
import Content from '/snippets/Reuse/SigningTheRequestEN.mdx'

# Calling APIs

---

## Usage instructions

ZEGOCLOUD Server API supports HTTPS network request protocol, allowing GET or POST methods. You can call the Server API in the following ways:

- Write code according to the API documentation to access the corresponding API.
- Refer to [How to debug Server API online](./call-api-online.mdx) to quickly debug the corresponding interface on the documentation page.

## Overview of request methods

Server API requests consist of different contents and have a fixed request structure:

- [Access Address](#server-list): The access address of the ZEGOCLOUD server, which varies according to different products and regions.
- [Common Parameters](#common-parameters): Each request must have a series of common parameters.
- [Signature](#signature-mechanism): The signature is also a common parameter and needs to be generated according to the corresponding signature algorithm.
- Request parameters: You need to specify the target operation through the Action parameter, such as Action = StartMix; you also need to specify other parameters of the interface.

After we verify your request based on your signature, we will return the result to you. If the interface call is successful, the return parameters will be displayed; if the call fails, the corresponding error will be displayed. You can analyze and troubleshoot according to the [Global Return Codes](./return-codes.mdx).

<Accordion title="Server API request example" defaultOpen="false">
The following is an example of the request structure of the [`StartMix`](/real-time-video-server/api-reference/stream-mixing/start-mix) (Start Stream Mixing) interface:

```bash
https://rtc-api.zego.im/?Action=StartMix
&AppId=1234567890
&SignatureNonce=15215528852396
&Timestamp=1234567890
&Signature=7a2c0f11145fb760d607a07b54825013
&SignatureVersion=2.0
&IsTest=false
```

Where:
- `https`: Specifies the request communication protocol.
- `rtc-api.zego.im`: Specifies the access address of the ZEGOCLOUD server.
- `Action=StartMix`: Specifies the API to be called.
- Other parameters: common request parameters, which are request parameters required by each interface, including AppId, SignatureNonce, Signature, etc. For details, please refer to [Common Request Parameters](/real-time-video-server/api-reference/accessing-server-apis).


In addition, ZEGO provides sample code in multiple programming languages for developers to refer to according to actual conditions. The following is the Node.js code of the [`StartMix`](/real-time-video-server/api-reference/stream-mixing/start-mix) interface:

```js
const crypto = require('crypto');
const request = require('request');

//Please modify AppId to your appId, appId is number
var appId = ;
//Please modify serverSecret to your serverSecret, serverSecret is string
var serverSecret = "";

//Signature=md5(AppId + SignatureNonce + ServerSecret + Timestamp)
function GenerateSignature(appId, signatureNonce, serverSecret, timeStamp) {
    const hash = crypto.createHash('md5'); //Specified to use the MD5 algorithm in the hash algorithm
    var str = appId + signatureNonce + serverSecret + timeStamp;
    hash.update(str);
    //hash.digest('hex') indicates that the output format is hexadecimal
    return hash.digest('hex');
}

var signatureNonce = crypto.randomBytes(8).toString('hex');
var timeStamp = Math.round(Date.now() / 1000);
var sig = GenerateSignature(appId, signatureNonce, serverSecret, timeStamp);

//The following example mixes the audio and video stream with streamId "stream1" and the audio and video stream with streamId "stream2" to mix out the audio and video stream with streamId "stream3"
var url = `https://rtc-api.zego.im/?Action=StartMix&AppId=${appId}&SignatureNonce=${signatureNonce}&Timestamp=${timeStamp}&Signature=${sig}&SignatureVersion=2.0&IsTest=false`;
var body = {
    'TaskId': '123',
    'Sequence': 123,
    'UserId': '123',
    'MixInput': [
    {
        'StreamId': 'stream1',
        'RectInfo': {
            "Top": 70,
            "Bottom": 160,
            "Left": 100,
            "Right": 260
        },
    },
    {
        'StreamId': 'stream2',
        'RectInfo': {
            "Top": 200,
            "Bottom": 290,
            "Left": 100,
            "Right": 260
        },
    }
    ],
    'MixOutput': [{
        'StreamId': 'stream3',
        'Width': 360,
        'Height': 360,
        'VideoBitrate': 12000,
        'Fps': 15
    }]
}

request({
    url: url,
    method: 'POST',
    json: true,
    headers: {
        'content-type': 'application/json'
    },
    body: body
}, function (error, response, body) {
    console.log(error)
    console.log(response.statusCode)
    if (!error && response.statusCode === 200) {
        console.log(body.Data)
    }
})
```
</Accordion>


## Request structure

### Access address <a id="server-list" />

Developers need to specify the corresponding access address according to the geographic region where their server is located, and send requests to the ZEGOCLOUD server.

<Warning title="Attention">

To ensure the quality of your business service access, please give priority to using the domain name of the geographic region where your server is located as the access address to send requests to the ZEGOCLOUD server.

</Warning>



ZEGO supports request access for the following geographic regions:

<table>

<tbody><tr>
<th>Geographic region</th>
<th>Access address</th>
</tr>
<tr>
<td>China (Shanghai)</td>
<td>`${PRODUCT}`-api-sha.zego.im</td>
</tr>
<tr>
<td>Hong Kong, Macao and Taiwan (Hong Kong)</td>
<td>`${PRODUCT}`-api-hkg.zego.im</td>
</tr>
<tr>
<td>Europe (Frankfurt)</td>
<td>`${PRODUCT}`-api-fra.zego.im</td>
</tr>
<tr>
<td>United States (California)</td>
<td>`${PRODUCT}`-api-lax.zego.im</td>
</tr>
<tr>
<td>Asia Pacific (Mumbai)</td>
<td>`${PRODUCT}`-api-bom.zego.im</td>
</tr>
<tr>
<td>Southeast Asia (Singapore)</td>
<td>`${PRODUCT}`-api-sgp.zego.im</td>
</tr>
<tr>
<td>Unified access address (region not distinguished)</td>
<td>`${PRODUCT}`-api.zego.im</td>
</tr>
</tbody></table>

Where `${PRODUCT}` is the different services of different products provided by ZEGO, corresponding as follows:

| Product | `${PRODUCT}` value | Access address |
|-|-|-|
| <p>Cloud communication service:</p><ul><li>Real-time audio and video</li><li>Real-time voice</li><li>Low-latency live streaming</li></ul> | rtc | rtc-api.zego.im |
| Super whiteboard | <ul><li>whiteboard</li><li>docs</li></ul> | <ul><li>whiteboard-api.zego.im</li><li>docs-api.zego.im</li></ul> |
| <ul><li>Cloud recording</li><li>Data stream recording</li></ul> | cloudrecord | cloudrecord-api.zego.im |


### Communication protocol

All interfaces of the ZEGOCLOUD Server API communicate through HTTPS to provide secure communication services.


### Request method

ZEGOCLOUD Server API supports the following HTTP request methods:

- **GET**
  - All request parameters (including common parameters and business parameters) are uniformly placed in Query.
- **POST**
  - For special complex APIs, business parameters are placed in Body, and common parameters are placed in Query.
  - The parameters in Body can be passed directly in JsonObject format without being serialized into String format.
  - In Headers, set "Content-type" to "application/json".



## Common parameters <a id="common-parameters" />

This section introduces the common parameters used by developers when calling ZEGOCLOUD Server API, including common request parameters and common return parameters.

### Common request parameters

Common request parameters are request parameters that need to be used by every interface.

<table>

  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Required</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>AppId</td>
    <td>Uint32</td>
    <td>Yes</td>
    <td>AppId, the unique credential of the user assigned by ZEGOCLOUD. Can be obtained from the <a target="_blank" href="https://console.zego.im/">ZEGOCLOUD console</a>.</td>
  </tr>
  <tr>
    <td>Signature</td>
    <td>String</td>
    <td>Yes</td>
    <td>Signature, for the generation of the signature, please refer to <a href="#signature-mechanism">Signature mechanism</a>.</td>
  </tr>
  <tr>
    <td>SignatureNonce</td>
    <td>String</td>
    <td>Yes</td>
    <td>16-bit hexadecimal random string (hex encoding of 8-byte random number). For the generation algorithm, please refer to <a href="#signature-example">Signature example</a>.</td>
  </tr>
  <tr>
    <td>SignatureVersion</td>
    <td>String</td>
    <td>Yes</td>
    <td>Signature version number, <b>must be filled in as 2.0</b>.</td>
  </tr>
  <tr>
    <td>Timestamp</td>
    <td>Int64</td>
    <td>Yes</td>
    <td>Current Unix timestamp, unit: seconds. For the generation algorithm, please refer to <a href="#signature-example">Signature example</a>, a maximum error of 10 minutes is allowed.</td>
  </tr>
  <tr>
    <td rowspan="2">IsTest</td>
    <td rowspan="2">String</td>
    <td>Yes (for projects created on or before 2021-11-16)</td>
    <td>
    Whether it is a test environment. Values are as follows:<ul><li>true (case insensitive): Test environment</li><li>false (case insensitive): Production environment (default)</li></ul>
    <Warning title="Attention">
    For projects created in the <a target="_blank" href="https://console.zego.im">ZEGOCLOUD console</a> on or before <b>2021-11-16</b>:<ul><li>Information such as AppId and AppSign applied from the console is in the test environment by default.</li><li>You can set this parameter according to the AppId environment type and business needs.</li></ul>
    </Warning>
    </td>
  </tr>
  <tr>
    <td>No (for projects created after 2021-11-16)</td>
    <td>
    Whether it is a test environment. It defaults to the production environment and can be ignored without filling in.
    <Warning title="Attention">
    For projects created in the <a target="_blank" href="https://console.zego.im">ZEGOCLOUD console</a> after <b>2021-11-16</b>: Information such as AppId and AppSign applied from the console are in the production environment.
    </Warning>
    </td>
  </tr>
</tbody></table>



Request example:

<Warning title="Attention">


- Please do not directly copy the example below for requests.
- `https://${PRODUCT}-api.zego.im/?Action=xxx` needs to be replaced with the request address in the "Interface Prototype" section of each interface documentation.
- The values of each common parameter should be modified according to the actual situation.

</Warning>


<CodeGroup>
```bash title="Get request"
https://${PRODUCT}-api.zego.im/?Action=xxx
&AppId=1234567890
&SignatureNonce=15215528852396
&Timestamp=1234567890
&Signature=Pc5WB8gokVn0xfeu%2FZV%2BiNM1dgI%3D
&SignatureVersion=2.0
&IsTest=false
&<Non-common request parameters>
```

```bash title="Post request"
https://${PRODUCT}-api.zego.im/?Action=xxx
&AppId=1234567890
&SignatureNonce=15215528852396
&Timestamp=1234567890
&Signature=Pc5WB8gokVn0xfeu%2FZV%2BiNM1dgI%3D
&SignatureVersion=2.0
&IsTest=false
```
</CodeGroup>

Developers can enter the URL address on the [Server API Verification](https://doc-zh.zego.im/server-link-checker) page to verify whether the signature information, common parameters, and URL format are legal.

### Common return parameters

The API return result adopts a unified format, and the returned data format is JSON.

Every time the interface is called, regardless of success or failure, common parameters will be returned.

<table>

<thead>
  <tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td>Code</td>
    <td>Number</td>
    <td>Return code.</td>
  </tr>
  <tr>
    <td>Message</td>
    <td>String</td>
    <td>Description of operation result.</td>
  </tr>
  <tr>
    <td>RequestId</td>
    <td>String</td>
    <td>Request ID.</td>
  </tr>
  <tr>
    <td>Data</td>
    <td>-</td>
    <td>Response data.</td>
  </tr>
</tbody>
</table>


Return example:

```
{
    "Code":0,
    "Data":{
        "MessageId":"1_1611647493487_29"
    },
    "Message":"success",
    "RequestId":"2237080460466033406"
}
```


<Content />

## Debug API online

<Card title="Debug API online" href="/real-time-video-server/api-reference/call-api-online" target="_blank">
You can debug the Server API online on the ZEGOCLOUD Server API documentation page, which facilitates developers to quickly test and verify the functions of the API.
</Card>

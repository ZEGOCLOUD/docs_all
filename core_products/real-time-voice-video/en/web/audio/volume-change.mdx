---
articleID: 11937
---
# Volume Change

- - -

## Feature Overview

In karaoke scenarios, it is often necessary to play multiple streams and display which users are speaking. ZEGO provides the ability to identify whether a user is speaking and the volume of their speech (sound wave), which is convenient for developers to display on the UI. For example:

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Android/ZegoLiveRoom/SoundLevel.png" /></Frame>

## Example Source Code Download

Please refer to [Download Example Source Code](/real-time-video-web/quick-start/run-example-code) to get the source code.

For related source code, please check the file "src/Examples/AdvancedAudioProcessing/SoundLevelAndAudioSpectrum".

## Prerequisites

Before listening to volume changes, ensure that:

- You have created a project in the [ZEGOCLOUD Console](https://console.zego.im), and applied for a valid AppID and Server address. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated the ZEGO Express SDK into the project and implemented basic audio and video stream publishing and playing functions. For details, please refer to [Quick Start - Integration](/real-time-video-web/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-web/quick-start/implementing-video-call).


## RTC / L3 Usage Steps

1. Listen to the sound wave callback interface and register the [soundLevelUpdate](@soundLevelUpdate) callback to receive changes in stream volume.

<Note title="Description">


    Sound wave refers to the volume of a stream.

</Note>



    ```js
    zg.on('soundLevelUpdate', (streamList) => {
        streamList.forEach(stream => {
            stream.type == 'push' && $('#soundLevel').html(Math.round(stream.soundLevel) + '');
            console.warn(`${stream.type} ${stream.streamID}, soundLevel: ${stream.soundLevel}`);
        });
    });
    ```


2. Start sound wave monitoring, call the [setSoundLevelDelegate](@setSoundLevelDelegate) interface to start monitoring volume, and set the sound wave callback interval in ms.

    ```javascript
    zg.setSoundLevelDelegate(true, 1000);
    ```

3. Stop sound wave monitoring, call the [setSoundLevelDelegate](@setSoundLevelDelegate) interface to stop monitoring volume.

    ```javascript
    zg.setSoundLevelDelegate(false);
    ```

## Player Plugin Scenario Usage Steps

1. Listen to the player plugin sound wave callback interface and register the [onSoundLevelUpdate](@onSoundLevelUpdate) callback to receive changes in stream volume.

<Warning title="注意">

In the Safari browser, when using MSE (Media Source Extensions) decoding to play audio, you cannot get the sound wave. If you need to get the sound wave, avoid using MSE decoding in the Safari browser.

</Warning>

```js
// player is the player plugin ZegoExpressPlayer instance
player.onSoundLevelUpdate = (level) => {
  // level is the volume of the player
  console.warn("onSoundLevelUpdate",level)
}
```

2. Start sound wave monitoring, call the [enableSoundLevelMonitor](@enableSoundLevelMonitor) interface to start monitoring volume, and set the sound wave callback interval in ms.

```js
player.enableSoundLevelMonitor(true, 1000);
```

3. Stop sound wave monitoring, call the [enableSoundLevelMonitor|_blank](@enableSoundLevelMonitor) interface to stop monitoring volume.

```js
player.enableSoundLevelMonitor(false);
```

## Stream Mixing Scenario Usage Steps

1. When calling [startMixerTask](@startMixerTask), you need to configure stream mixing [ZegoMixStreamConfig](@-ZegoMixStreamConfig), set `enableSoundLevel` to true, and configure `soundLevelID` for [inputList](@inputList). For details, please refer to [Stream Mixing](/real-time-video-web/live-streaming/stream-mixing).
    ```js
    const mixConfig = {
        "taskID": "custom-task",
        "enableSoundLevel": true,
        "inputList": [
            {
                "streamID": streamID1,
                "soundLevelID": soundLevelID1,
                "layout": {
                    "top": 0,
                    "left": 0,
                    "bottom": 200,
                    "right": 200
                }
            },
            {
                "streamID": streamID2,
                "soundLevelID": soundLevelID2,
                "layout": {
                    "top": 200,
                    "left": 200,
                    "bottom": 400,
                    "right": 400
                }
            }
        ],
        "outputList": [
            "custom-mixwebrtc-1"
        ],
        "outputConfig": {
            "outputBitrate": 300,
            "outputFPS": 15,
            "outputWidth": 400,
            "outputHeight": 400
        }
    }
    zg.startMixerTask(mixConfig);
    ```
2. Call the [mixerSoundLevelUpdate](@mixerSoundLevelUpdate) interface to listen to stream mixing volume changes.
    ```js
    zg.on("mixerSoundLevelUpdate", (mixMap, id) => {
        console.warn("mixerSoundLevelUpdate", mixMap, id);
      });
    ```
3. Play the stream based on the mixed streamID. If you need to get the mixed stream volume value, you need to enable SEI. For details, please refer to [Supplemental Enhancement Information (SEI)](/real-time-video-web/communication/sei).

<Warning title="注意">

    The function of playing streams based on mixed streamID is not enabled by default. Please enable it by yourself in the [ZEGOCLOUD Console](https://console.zego.im) before using it (for enabling steps, please refer to [Service Configuration - Stream Mixing](/console/service-configuration/enable-stream-mixing-service)), or contact ZEGO technical support to enable it.

</Warning>



    ```js
    // Play stream
    zg.startPlayingStream(mixStreamID, {
        // Enable parsing SEI
        isSEIStart: true
    }).then(stream => {

    }).catch(err => {

    });
    ```

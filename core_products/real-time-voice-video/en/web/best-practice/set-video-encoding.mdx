---
articleID: 12062
date: "2024-01-02"
---
# Video Encoding Format Selection

- - -

## Overview

ZEGO Express Web SDK uses WebRTC technology to implement real-time audio and video functionality, with video encoding supporting both **H.264** and **VP8** formats. This article introduces the advantages and disadvantages of both encoding formats, and helps developers better understand how to choose the appropriate encoding format based on their business scenarios.


## Compatibility Notes

Before starting to use audio and video services, developers can use the compatibility detection interface [checkSystemRequirements](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~javascript_web~class~ZegoExpressEngine#check-system-requirements) provided by ZEGO Express Web SDK to detect the browser environment and devices, and prompt for related risks.

### Encoding Format Comparison

The comparison of the two encoding formats is as follows:

<table>
  <colgroup>
    <col width="15%"/>
    <col width="40%"/>
    <col width="45%"/>
  </colgroup>
  <tbody><tr>
    <th>Encoding Format</th>
    <th>Advantages</th>
    <th>Disadvantages</th>
  </tr>
  <tr>
    <td>H.264</td>
    <td>Mature ecosystem, supports direct relaying to CDN and direct interoperability with mini-programs.</td>
    <td>Poorer support on mobile browsers, such as WeChat browser, WebView, etc.</td>
  </tr>
  <tr>
    <td>VP8</td>
    <td><ul><li>Google-promoted, performs better than H.264 in Chrome browser, and fully open-source.</li><li>Better compatibility on mobile browsers, such as WeChat browser, WebView, etc.</li></ul></td>
    <td>Poor ecosystem support, cannot directly relay to CDN or directly interoperate with mini-programs.</td>
  </tr>
</tbody></table>


### Browser Compatibility

#### Desktop

<table>
  <colgroup>
  </colgroup>
  <tbody><tr>
    <th>System</th>
    <th>Browser</th>
    <th>H.264</th>
    <th>VP8</th>
  </tr>
  <tr>
    <td>Windows</td>
    <td><ul><li>Chrome</li><li>Edge</li><li>Firefox</li></ul></td>
    <td>✔️</td>
    <td>✔️</td>
  </tr>
  <tr>
    <td>macOS</td>
    <td><ul><li>Chrome</li><li>Safari</li><li>Edge</li><li>Firefox</li></ul></td>
    <td>✔️</td>
    <td>✔️</td>
  </tr>
  <tr>
    <td>ChromeOS</td>
    <td>Chrome</td>
    <td>✔️</td>
    <td>✔️</td>
  </tr>
</tbody></table>

- **Chrome**
    - On all Windows devices using AMD chips and some using Intel chips, when Chrome uses H.264 encoding, the sending bitrate may not reach the set value. Developers are recommended to use VP8 encoding or try disabling hardware acceleration.
    - Chrome 84 on macOS has a defect. When using H.264 format for encoding, WebRTC may experience sudden frame rate drops, causing image stuttering. For details, please refer to the official Google explanation [Issue 1088650](https://bugs.chromium.org/p/chromium/issues/detail?id=1203206&can=2&q=webrtc%20drop%20component%3ABlink%3EWebRTC%3EVideo) and [Issue 12704](https://bugs.chromium.org/p/webrtc/issues/detail?id=12704#c3). Developers are recommended to use VP8 format on Chrome 84 or above on macOS.

- **Safari**

    Safari 12.1 or below only supports H.264 codec.

- **Firefox**

    On Mac devices using Apple M1 chips, Firefox does not support H.264 codec. For details, see [Firefox official explanation](https://bugzilla.mozilla.org/show_bug.cgi?id=1686470).

<br/>

#### Mobile

**Android**

Android supports self-developed WebView or third-party WebView. Different devices and applications implement WebView differently, so ZEGO Express Web SDK's support for different application versions and device hardware also varies. Developers are recommended to perform compatibility detection before use.

<table>
  <colgroup>
    <col width="25%"/>
    <col width="16%"/>
    <col width="30%"/>
    <col width="29%"/>
  </colgroup>
  <tbody><tr>
    <th>Browser</th>
    <th>Function</th>
    <th>H.264</th>
    <th>VP8</th>
  </tr>
  <tr>
    <td>WebView</td>
    <td>Publish/Play stream</td>
    <td>✔️</td>
    <td>✔️</td>
  </tr>
  <tr>
    <td>Chrome Browser</td>
    <td>Publish/Play stream</td>
    <td>✔️</td>
    <td>✔️</td>
  </tr>
</tbody></table>

WebView includes WeChat built-in browser, Enterprise WeChat built-in browser, QQ built-in browser, DingTalk, Toutiao, etc. In these WebViews and Chrome browsers, the usage restrictions regarding browser versions, chip types, and encoding formats are as follows:

<table>
  <colgroup>
    <col width="25%"/>
    <col width="75%"/>
  </colgroup>
<tbody><tr>
<th>Restriction Name</th>
<th>Restriction Description</th>
</tr>
<tr>
<td>Encoding Format</td>
<td>Using H.264 encoding to send video streams may result in a lower bitrate for the sent video stream, unable to reach the expected bitrate.</td>
</tr>
<tr>
<td>Chip</td>
<td>Cannot use H.264 encoding to send video streams on devices equipped with MediaTek chips.</td>
</tr>
<tr>
<td>Browser Version and Chip</td>
<td><ul>
<li>On Android Chrome below version 88, devices equipped with HiSilicon Kirin chips cannot use H.264 encoding to send video streams.</li><li>On Android Chrome below version 81, devices equipped with MediaTek or HiSilicon Kirin chips cannot use H.264 decoding to receive video streams. Since ZEGO Native SDK sends video streams in H.264 encoding by default, if there are stream publishers using ZEGO Native SDK in the room, Web SDK must use Chrome 81 or above to receive H.264 encoded streams on devices equipped with HiSilicon Kirin or MediaTek chips.</li>
<ul></ul></ul></td>
</tr>
</tbody></table>

**iOS**

iOS only supports system WebView, so ZEGO Express Web SDK's support for WebView is only related to the iOS system version.

<table>
  <colgroup>
    <col width="25%"/>
    <col width="16%"/>
    <col width="30%"/>
    <col width="29%"/>
  </colgroup>
  <tbody><tr>
    <th>Browser</th>
    <th>Function</th>
    <th>H.264</th>
    <th>VP8</th>
  </tr>
  <tr>
    <td rowspan="2">WebView (WeChat built-in browser, etc.)</td>
    <td>Publish stream</td>
    <td colspan="2">✔️ (iOS 14.3 or above)</td>
  </tr>
  <tr>
    <td>Play stream</td>
    <td>✔️ (iOS 12.1.4 or above)</td>
    <td>✔️ (iOS 12.2 or above)</td>
  </tr>
  <tr>
    <td>Safari Browser</td>
    <td>Publish/Play stream</td>
    <td>✔️ (iOS 11 or above)</td>
    <td>✔️ (iOS 12.2 or above)</td>
  </tr>
</tbody></table>

When using H.264 encoding format to publish streams on iOS, 1080p or higher resolution video cannot be relayed to CDN.


## Recommended Solutions

Based on the above compatibility notes and ZEGO market user data statistics, devices that do not support VP8 account for a relatively small proportion. VP8 is slightly better than H.264 in terms of browser compatibility. Therefore:

- When the business scenario is primarily Web platform, **developers are recommended to use VP8 encoding format**.
- If the developer's business scenario involves multiple platforms such as Web, iOS, Android, Windows, macOS, etc., and good multi-platform compatibility is desired, **developers are recommended to use H.264 encoding format**.

Specific scenario recommendations are as follows:

<table>
  <colgroup>
  </colgroup>
  <tbody><tr>
    <th>Host Side</th>
    <th>Audience Side</th>
    <th>Recommended Encoding Format</th>
    <th>Advantages</th>
    <th>Disadvantages</th>
    <th>Application Scenarios</th>
  </tr>
  <tr>
    <td rowspan="5">WebRTC</td>
    <td>WebRTC</td>
    <td>VP8</td>
    <td>Best compatibility and quality.</td>
    <td>-</td>
    <td>Bank/Securities Account Opening</td>
  </tr>
  <tr>
    <td rowspan="2">CDN</td>
    <td>H.264</td>
    <td>No transcoding required.</td>
    <td>Some device models do not support H.264 encoding when the host publishes streams.</td>
    <td rowspan="2">Showroom Live Streaming</td>
  </tr>
  <tr>
    <td>VP8</td>
    <td>Better publisher compatibility.</td>
    <td>Requires manual transcoding.</td>
  </tr>
  <tr>
    <td>Mini Program</td>
    <td>H.264</td>
    <td>No transcoding required.</td>
    <td>Some device models do not support H.264 encoding when the host publishes streams.</td>
    <td>Bank/Securities Account Opening</td>
  </tr>
</tbody></table>


<Warning title="Note">

- When playing streams on Web, there is no need to specify the encoding format. The SDK will automatically select the format based on the publishing encoding.
- When Web selects VP8 encoding format and interoperates with Native UDP, Native needs to specify VP8 encoding format (supported by default build).
</Warning>


Regardless of choosing H.264 or VP8, compatibility detection must first be performed on the browser being used. Developers can check browser compatibility through the [checkSystemRequirements](https://doc-zh.zego.im/article/api?doc=Express_Video_SDK_API~javascript_web~class~ZegoExpressEngine#check-system-requirements) interface, which is also a prerequisite for the SDK to automatically select encoding.

<Note title="Description">

Transcoding refers to converting video signals from one format to another. ZEGO services support conversion of audio and video encoding formats, resolution, bitrate, etc. Developers can refer to the [Stream Mixing Transcoding Example Demo](https://zegodev.github.io/zego-express-webrtc-sample/vp8/index.html). For questions, please contact ZEGOCLOUD Technical Support.

</Note>

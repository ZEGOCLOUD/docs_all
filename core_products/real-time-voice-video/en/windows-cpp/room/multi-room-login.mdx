---
articleID: 4800
date: "2024-01-02"
---
# Multi-Room Login

---

## Introduction

The same user can join multiple rooms at the same time, and simultaneously publish streams, play streams, send real-time messages, and receive message callbacks in multiple rooms.

<Note title="Note">
- ZEGO Express SDK has supported this feature since version 2.9.0.
- This feature is not enabled by default. If you need to use it, please contact ZEGOCLOUD Technical Support to enable the relevant permissions.
- After this feature is enabled, it supports joining up to 5 rooms at the same time by default. If you have more requirements, please contact ZEGOCLOUD Technical Support for assistance.
</Note>

### Application Scenarios

This feature can isolate messages and callbacks of multiple rooms, implementing more flexible co-hosting business. ZEGO recommends it for cross-room co-hosting and online education super small class scenarios.

- Cross-room co-hosting

    Host A and Host B conduct cross-room co-hosting. Host A can notify all viewers in room A to log in to Host B's room to play streams, and Host B can also notify all viewers in room B to log in to Host A's room to play streams.


- Super small class

    Teachers enter the large class room to publish streams, students all log in to the large class room to play streams, and simultaneously log in to group rooms to discuss and co-host with students in the same group. Teaching assistants log in to group rooms to maintain classroom order or answer student questions.

## Download Sample Source Code

Please refer to [Download Sample Source Code](/real-time-video-windows-cpp/quick-start/run-example-code) to obtain the source code.

For related source code, please check the files in the "/ZegoExpressExample/Examples/Others/MultipleRooms" directory.

## Prerequisites

Before implementing multi-room functionality, ensure that:

- ZEGO Express SDK (version 2.9.0 and above) has been integrated into the project, and basic real-time audio and video functionality has been implemented. For details, please refer to [Quick Start - Integration](/real-time-video-windows-cpp/quick-start/integrating-sdk) and [Quick Start - Implementation Process](/real-time-video-windows-cpp/quick-start/implementing-video-call).
- A project has been created in the [ZEGOCLOUD Console](https://console.zegocloud.com), and valid AppID and AppSign have been obtained. For details, please refer to "Project Information" in [Console - Project Management](/console/project-info).

- ZEGOCLOUD Technical Support has been contacted to enable the multi-room feature.


## Usage Steps

Taking the same user joining two rooms as an example, the overall implementation process is as follows:

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Common/MultiRoom/MultiRoom_new.png" /></Frame>

1. Before initializing the SDK, set the room mode to multi-room.
2. Initialize the SDK.
3. Join the first room. After successful login, you can publish streams, play streams, send and receive real-time messages in this room.
4. Join the second room. After successful login, you can publish streams, play streams, send and receive real-time messages in this room.
5. Leave the first and second rooms. There is no timing restriction on leaving rooms.

The implementation of specific functions is as follows:


### 1 Set Multi-Room Mode

Must call the [setRoomMode](@setRoomMode) interface before initializing the SDK, and set the room mode to multi-room mode through the [ZegoRoomMode](@-ZegoRoomMode) class, that is, the "mode" value is "ZEGO_ROOM_MODE_MULTI_ROOM".

<Note title="Note">



If multi-room mode is set without enabling the multi-room feature, login room will fail and report an error, returning error code "1002036".
</Note>


```cpp
// Set room mode to multi-room mode
ZegoExpressSDK::setRoomMode(ZegoRoomMode::ZEGO_ROOM_MODE_MULTI_ROOM)
```

### 2 Initialize SDK

Please refer to "Create Engine" in [Quick Start - Implementation Process](/real-time-video-windows-cpp/quick-start/implementing-video-call) for SDK initialization.

### 3 Login Room

Pass in parameters such as room ID (roomID), and call the [loginRoom](@loginRoom) interface to log in to the room.

- In single-room mode, you can only log in to one room at the same time. When calling the [loginRoom](@loginRoom) interface, if you have already logged in to other rooms, you will be prompted that you have logged in to the same room.
- In multi-room mode, you can log in to multiple rooms at the same time, and the logged-in user information must be the same.

```cpp
// Create user
ZegoUser user("userID", "userName");

// Start logging in to room
engine->loginRoom("roomID", user);
```


### 4 Publish Stream

Pass in parameters such as stream ID (streamID) and room ID (roomID), and call the [startPublishingStream](@startPublishingStream) (with "ZegoPublisherConfig" parameter) interface to publish stream in the specified room.

<Warning title="Note">



In multi-room mode, you must use [ZegoPublisherConfig](@-ZegoPublisherConfig) to specify the "roomID" associated with "streamID". After exiting the specified room, the stream publishing operation for that room will be stopped.
</Warning>


```cpp
ZegoPublisherConfig config;
config.roomID = "room1";

// Start publishing stream
engine->startPublishingStream("streamID", config);
```


### 5 Play Stream

Pass in parameters such as stream ID (streamID) and room ID (roomID), and call the [startPlayingStream](@startPlayingStream) (with "ZegoPlayerConfig" parameter) interface to play stream in the specified room.

<Warning title="Note">



In multi-room mode, you must use [ZegoPlayerConfig](https://www.zegocloud.com/docs/article/api?doc=Express_Video_SDK_API~ObjectiveC~class~zego-player-config) to specify the "roomID" associated with "streamID". After exiting the specified room, the stream playing operation for that room will be stopped.
</Warning>

```cpp
ZegoPlayerConfig config;
config.roomID = "room1";

// Play real-time stream
// Fill in Windows window handle
HWND playWND = ...;
ZegoCanvas canvas(playWND);
engine->startPlayingStream("streamID", &canvas, config);
```


### 6 Send/Receive Real-time Messages

The implementation of sending and receiving real-time messages in multi-room and single-room is the same. For details, please refer to [Real-time Messages and Signaling](/real-time-video-windows-cpp/room/messaging-and-signaling).

### 7 Leave Room

Pass in the room ID (roomID), and call the [logoutRoom](@logoutRoom__3) interface to leave the room.

<Note title="Note">

If you want to leave all logged-in rooms at once, you can directly call the [logoutRoom](@logoutRoom__3) interface without "roomID".
</Note>

- Leaving a room in single-room mode will stop all publishing and playing streams at the same time.
- Leaving a room in multi-room mode can only leave the specified room and stop publishing and playing streams for that room.

```cpp
// Leave room
engine->logoutRoom("roomID");
```


## FAQ

<Accordion title="What is the reason for the failure of calling the setRoomMode interface?" defaultOpen="false">

- Whether the [setRoomMode](@setRoomMode) interface was called before initializing the SDK. In this case, error code "1001020" will be reported.
- Whether ZEGOCLOUD Technical Support has been contacted to enable the multi-room feature.
- Whether the correct parameters are passed in.
</Accordion>

<Accordion title="What is the reason for the failure of calling loginRoom, error code is \"1002036\"?" defaultOpen="false">

If multi-room mode is set without enabling the multi-room feature, login room will fail and return error code "1002036".
</Accordion>

<Accordion title="What is the reason for the failure of calling loginRoom, error code is \"1002037\"?" defaultOpen="false">

When the number of rooms logged in at the same time exceeds the maximum number of rooms, error code "1002037" will be returned. Currently, the default maximum is 5 rooms at the same time. If you have more requirements, please contact ZEGOCLOUD Technical Support for extended capabilities.
</Accordion>

<Accordion title="What is the reason for the failure of calling loginRoom, error code is \"1002018\"?" defaultOpen="false">

In multi-room mode, if the logged-in user information passed in is not the same, error code "1002018" will be returned.
</Accordion>

<Accordion title="What is the reason for the failure of calling startPublishingStream, error code is \"1003070\"?" defaultOpen="false">

In multi-room mode, you must call the [startPublishingStream](@startPublishingStream) interface with the "ZegoPublisherConfig" parameter to publish stream, otherwise error code "1003070" will be returned.

</Accordion>

<Accordion title="What is the reason for the failure of calling startPlayingStream, error code is \"1004070\"?" defaultOpen="false">

In multi-room mode, you must call the [startPlayingStream](@startPlayingStream) interface with the "ZegoPlayerConfig" parameter to play stream, otherwise error code "1004070" will be returned.
</Accordion>


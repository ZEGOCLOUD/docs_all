---
articleID: 15193
date: "2024-01-02"
---
# Network Speed Testing

- - -

## Overview

ZEGO provides network speed testing functionality to detect uplink and downlink network speeds before users publish/play streams, and determine what bitrate of audio and video streams is suitable for publishing/playing under the current network environment.


When the uplink speed test results show a high packet loss rate, it is recommended to use methods such as lowering the resolution or lowering the frame rate to reduce the publishing stream bitrate to ensure normal publishing; when the downlink speed test results show a high packet loss rate, it is recommended to use the [Video Advanced - Set Video Encoding Method](/real-time-video-rn/video/set-video-encoding) function provided by the SDK to play low-bitrate streams to ensure normal playing.

When the following situations occur in the developer's business, ZEGO recommends using the SDK's network speed testing function:

- In call scenarios, network quality assessment needs to be performed.

- In education scenarios, pre-class network detection needs to be performed.

- In live streaming scenarios, network connection speed testing needs to be performed.



The basic principle of network speed testing is shown in the following figure:

<Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/Common/ZegoExpressEngine/Network_speed_test.png" /></Frame>

## Prerequisites

Before implementing the network speed testing functionality, ensure:

- You have created a project in the [ZEGOCLOUD Console](https://console.zegocloud.com) and applied for a valid AppID and AppSign. For details, please refer to [Console - Project Information](/console/project-info).
- You have integrated ZEGO Express SDK into the project and implemented basic audio and video streaming functionality. For details, please refer to [Quick Start - Integration](/real-time-video-rn/quick-start/integrating-sdk) and [Quick Start - Implementation](/real-time-video-rn/quick-start/implementing-video-call).


## Usage Steps

### 1 Listen to Speed Test Callbacks

Before starting the speed test, you can set up speed test related callbacks first.

- Under normal speed test conditions, when network speed quality updates, the [networkSpeedTestQualityUpdate](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/interfaces/_zegoexpresseventhandler_.zegoeventlistener.html#networkspeedtestqualityupdate) callback will be triggered.

- When an error occurs during the speed test, the [networkSpeedTestError](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/interfaces/_zegoexpresseventhandler_.zegoeventlistener.html#networkspeedtesterror) callback will be triggered.


```javascript
// Network speed test quality callback
ZegoExpressEngine.instance().on('networkSpeedTestQualityUpdate', (quality, type) {}

// Network speed test error callback
ZegoExpressEngine.instance().on('networkSpeedTestError', (errorCode, type) {}
```

### 2 Start Speed Test

Create an instance of [ZegoNetworkSpeedTestConfig](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/classes/_zegoexpressdefines_.zegonetworkspeedtestconfig.html) network speed test configuration, set whether to perform uplink and downlink speed tests and expected bitrate according to the actual situation, and call the [startNetworkSpeedTest](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/classes/_zegoexpressengine_.zegoexpressengine.html#startnetworkspeedtest) interface to start network speed testing.

<Note title="Note">



After calling the [startNetworkSpeedTest](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/classes/_zegoexpressengine_.zegoexpressengine.html#startnetworkspeedtest) interface to start speed testing, it supports speed testing for 30 seconds by default (if you need to adjust the duration, please contact ZEGOCLOUD Technical Support to modify the dynamic configuration). After the timeout, the speed test will be forcibly ended. If you need to continue speed testing, please call this interface again.

</Note>





```javascript
let config =new ZegoNetworkSpeedTestConfig();

// Perform uplink speed test, specify expected publishing stream bitrate
config.testUplink = true;
config.expectedUplinkBitrate = ZegoExpressEngine.instance().getVideoConfig().bitrate;

// Perform downlink speed test, specify expected playing stream bitrate
config.testDownlink = true;
config.expectedDownlinkBitrate = ZegoExpressEngine.instance().getVideoConfig().bitrate;

// Start speed test, default callback interval is 3 seconds
ZegoExpressEngine.instance().startNetworkSpeedTest(config);

// If you need to set the callback interval, you can refer to the following call (taking 1.5 seconds as an example)
ZegoExpressEngine.instance().startNetworkSpeedTest(config, 1500);
```

The speed test results will be returned in the network speed test quality [ZegoNetworkSpeedTestQuality](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/interfaces/_zegoexpressdefines_.zegonetworkspeedtestquality.html) in [networkSpeedTestQualityUpdate](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/interfaces/_zegoexpresseventhandler_.zegoeventlistener.html#networkspeedtestqualityupdate). By analyzing the parameter values, you can know whether the current network quality is good.

The parameters in [ZegoNetworkSpeedTestQuality](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/interfaces/_zegoexpressdefines_.zegonetworkspeedtestquality.html) are as follows:

<table>

<tbody><tr>
<th>Parameter</th>
<th>Description</th>
<th>Explanation</th>
</tr>
<tr>
<td>connectCost</td>
<td>Time to connect to server, in milliseconds.</td>
<td>If the network connection is disconnected during the speed test, it will automatically reconnect. This variable will be updated accordingly. The smaller the value, the better.</td>
</tr>
<tr>
<td>rtt</td>
<td>Network latency, in milliseconds.</td>
<td>Represents the time consumed between the SDK and the server round trip. The smaller the value, the better.</td>
</tr>
<tr>
<td>packetLostRate</td>
<td>Packet loss rate, in percentage.</td>
<td>The value range is 0.0 - 1.0. For example, 0.5 means that out of every 10 packets sent to the server, 5 may be lost on the way.</td>
</tr>
<tr>
<td>quality</td>
<td>Network quality</td>
<td>Represents the current network quality level. For details, please refer to [ZegoStreamQualityLevel](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/enums/_zegoexpressdefines_.zegostreamqualitylevel.html): <ul><li>Excellent: Quality is excellent</li><li>Good: Quality is good</li><li>Medium: Quality is normal</li><li>Bad: Quality is poor</li><li>Die: Quality is abnormal</li><li>Unknown: Quality is unknown</li></ul></td>
</tr>
</tbody></table>

### 3 Stop Speed Test

Call the [stopNetworkSpeedTest](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/classes/_zegoexpressengine_.zegoexpressengine.html#stopnetworkspeedtest) interface to stop network speed testing.

After stopping the speed test, you will no longer receive [networkSpeedTestQualityUpdate](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/interfaces/_zegoexpresseventhandler_.zegoeventlistener.html#networkspeedtestqualityupdate) or [networkSpeedTestError](https://www.zegocloud.com/docs/unique-api/express-video-sdk/en/javascript_react_native/interfaces/_zegoexpresseventhandler_.zegoeventlistener.html#networkspeedtesterror) callbacks.

```javascript
ZegoExpressEngine.instance().stopNetworkSpeedTest();
```

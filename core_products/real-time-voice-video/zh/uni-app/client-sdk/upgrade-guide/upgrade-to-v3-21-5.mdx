---
date: '2026-01-14'
---
# 3.21.5及以上版本升级指南

---

<Warning title="注意">
如果您当前的 SDK 低于 3.21.5 版本，需要升级到 3.21.5 或以上的 SDK 版本时，请务必阅读本文。此外，建议您参考 [发布日志](../release-notes.mdx) 中两个版本区间的变更说明，检查您的业务相关接口。
</Warning>


本文将介绍 Express SDK 升级至 3.21.5 及以上版本时，为减少平台差异，部分 Web 端接口定义对齐 Native 端所产生的接口参数变化。


## Web 端接口变更

### localDeviceExceptionOccurred

[localDeviceExceptionOccurred](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/javascript_uni-app/interfaces/_zegoexpresseventhandler_.zegoeventlistener.html#localdeviceexceptionoccurred) 修改回调参数格式。

<CodeGroup>
```ts title="3.21.5 及以后的版本"
localDeviceExceptionOccurred(exceptionType: ZegoDeviceExceptionType, deviceType: ZegoDeviceType, deviceID: string):void
```

```ts title="3.21.5 之前的版本"
localDeviceExceptionOccurred(errorCode: number,deviceName: string):void
```
</CodeGroup>

### publisherQualityUpdate 和 playerQualityUpdate


[publisherQualityUpdate](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/javascript_uni-app/interfaces/_zegoexpresseventhandler_.zegoeventlistener.html#publisherqualityupdate) 和 [playerQualityUpdate](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/javascript_uni-app/interfaces/_zegoexpresseventhandler_.zegoeventlistener.html#playerqualityupdate) 修改回调参数。
    
<CodeGroup>
```ts title="3.21.5 及以后的版本"
publisherQualityUpdate(streamID: string, quality: ZegoPublishStreamQuality):void

playerQualityUpdate(streamID: string, quality: ZegoPlayStreamQuality):void
```

```ts title="3.21.5 之前的版本"
publisherQualityUpdate(streamID: string, quality: ZegoPublishStats):void

playerQualityUpdate(streamID: string, quality: ZegoPlayStats):void
```
</CodeGroup>


### addPublishCdnUrl 和 removePublishCdnUrl

[addPublishCdnUrl](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/javascript_uni-app/classes/_zegoexpressengine_.zegoexpressengine.html#addpublishcdnurl)、[removePublishCdnUrl](https://doc-zh.zego.im/unique-api/express-video-sdk/zh/javascript_uni-app/classes/_zegoexpressengine_.zegoexpressengine.html#removepublishcdnurl) 修改参数格式。3.21.5 版本之前 Web 端第一个参数为 targetUrl ，第二个参数为 streamID ；3.21.5 版本之后第一个参数为 streamID ，第二个参数为 targetURL。

<CodeGroup>
```ts title="3.21.5 及以后的版本"
addPublishCdnUrl(streamID: string, targetURL: string):Promise<ZegoPublisherUpdateCdnUrlResult>

removePublishCdnUrl(streamID: string, targetURL: string):Promise<ZegoPublisherUpdateCdnUrlResult>
```

```ts title="3.21.5 之前的版本"
addPublishCdnUrl(targetURL: string, streamID: string):Promise<ZegoPublisherUpdateCdnUrlResult>

removePublishCdnUrl(targetURL: string, streamID: string):Promise<ZegoPublisherUpdateCdnUrlResult>
```
</CodeGroup>



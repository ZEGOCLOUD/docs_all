---
docType: API
---

# IZegoCustomVideoCaptureHandler

## IZegoCustomVideoCaptureHandler

*Declared in `callback/IZegoCustomVideoCaptureHandler.java`*

### 方法
<ParamField
  name="onStart"
  prototype="public  void onStart([ZegoPublishChannel](../../api-reference/enum#zegopublishchannel) channel)"
  desc="自定义视频采集开始的通知。"
  parent_file="Declared in \`callback/IZegoCustomVideoCaptureHandler.java\`"
  parent_name="IZegoCustomVideoCaptureHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| channel | [ZegoPublishChannel](../../api-reference/enum#zegopublishchannel) | 推流通道。 |

**详情**

SDK 通知将要开始采集视频帧，收到该回调后向 SDK 发送的视频帧数据才有效。

<Note title="">
- **业务场景**：直播非摄像头采集的数据。例如本地视频文件播放、屏幕分享、游戏直播等。
- **通知时机**：调用 [startPreview] 或 [startPublishingStream] 成功之后。
- **相关回调**：自定义视频采集结束通知 [onCaptureStop]。
- **相关接口**：可调用 [setCustomVideoCaptureHandler] 设置自定义视频采集回调。
</Note>

<Warning title="">
- **支持版本**：1.1.0 及以上。
- **注意事项**：收到该回调后向 SDK 发送的视频帧数据才有效。
</Warning>
</ParamField>
<ParamField
  name="onStop"
  prototype="public  void onStop([ZegoPublishChannel](../../api-reference/enum#zegopublishchannel) channel)"
  desc="自定义视频采集结束的通知。"
  parent_file="Declared in \`callback/IZegoCustomVideoCaptureHandler.java\`"
  parent_name="IZegoCustomVideoCaptureHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| channel | [ZegoPublishChannel](../../api-reference/enum#zegopublishchannel) | 推流通道。 |

**详情**

SDK 通知将要结束采集视频帧。

<Note title="">
- **业务场景**：直播非摄像头采集的数据。例如本地视频文件播放、屏幕分享、游戏直播等。
- **通知时机**：调用 [stopPreview] 或 [stopPublishingStream] 成功之后。
- **相关回调**：自定义视频采集开始通知 [onCaptureStart]。
- **相关接口**：可调用 [setCustomVideoCaptureHandler] 设置自定义视频采集回调。
</Note>

<Warning title="">
- **支持版本**：1.1.0 及以上。
- **注意事项**：如果开启自定义采集后同时调用 [startPreview] 和 [startPublishingStream] 开启预览和推流，则应该调用 [stopPreview] 和 [stopPublishingStream] 停止预览和推流后才会触发该回调。
</Warning>
</ParamField>
<ParamField
  name="onEncodedDataTrafficControl"
  prototype="public  void onEncodedDataTrafficControl([ZegoTrafficControlInfo](../../api-reference/class#zegotrafficcontrolinfo) trafficControlInfo, [ZegoPublishChannel](../../api-reference/enum#zegopublishchannel) channel)"
  desc="自定义视频采集时检测到网络变化，通知开发者需要做流量控制，根据SDK的推荐参数调整编码配置。"
  parent_file="Declared in \`callback/IZegoCustomVideoCaptureHandler.java\`"
  parent_name="IZegoCustomVideoCaptureHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| trafficControlInfo | [ZegoTrafficControlInfo](../../api-reference/class#zegotrafficcontrolinfo) | 流控参数。 |
| channel | [ZegoPublishChannel](../../api-reference/enum#zegopublishchannel) | 推流通道。 |

**详情**

使用自定义视频采集时，SDK 检测到网络变化，通知开发者需要做流量控制，根据SDK的推荐参数调整编码配置。由于自定义采集传输已编码数据的情况下，SDK 无法得知外部的编码配置，因此流控操作需要开发者自行完成。SDK 会根据当前的网络情况，将视频配置的推荐值通知到开发者，开发者需要自行对编码器配置进行修改，以保证视频传输的流畅性。

<Note title="">
- **业务场景**：直播非摄像头采集的数据。例如本地视频文件播放、屏幕分享、游戏直播等。
- **通知时机**：自定义视频采集过程中发生网络状态变化，需要做流量控制时。
- **相关接口**：可调用 [setCustomVideoCaptureHandler] 设置自定义视频采集回调。
</Note>

<Warning title="">
- **支持版本**：1.14.0 及以上。
- **注意事项**：请不要在此回调中执行耗时操作，比如大文件读写，若需执行耗时操作，请切换线程。
</Warning>
</ParamField>

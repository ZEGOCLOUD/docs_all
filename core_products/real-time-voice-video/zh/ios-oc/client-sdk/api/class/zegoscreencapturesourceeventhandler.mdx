---
docType: API
---

# ZegoScreenCaptureSourceEventHandler

## ZegoScreenCaptureSourceEventHandler

*Declared in `ZegoExpressEventHandler.h`*

### 方法
<ParamField
  name="screenCapture:availableFrame:dataLength:param"
  prototype="- (void)screenCapture:([ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) *)source availableFrame:(const void *)data dataLength:(unsigned int)dataLength param:([ZegoVideoFrameParam](../../api-reference/class#zegovideoframeparam) *)param;"
  desc="屏幕采集数据的回调"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoScreenCaptureSourceEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| source | [ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) * | 回调的屏幕采集源实例。 |
| data | const void * | 屏幕采集图像帧的裸数据（例：RGBA 只需考虑 data[0]，I420 需考虑 data[0,1,2]）。 |
| dataLength | unsigned int | 数据的长度（例：RGBA 只需考虑 dataLength[0]，I420 需考虑 dataLength[0,1,2]）。 |
| param | [ZegoVideoFrameParam](../../api-reference/class#zegovideoframeparam) * | 屏幕采集图像帧参数。 |

**详情**

屏幕采集数据的回调。

<Note title="">
- **通知时机**：屏幕开始采集 [startCapture] 后会触发此回调。
</Note>

<Warning title="">
- **支持版本**：3.1.0 及以上。
- **注意事项**：调用接口 [setEventHandler] 设置后该回调才生效。
</Warning>
</ParamField>
<ParamField
  name="screenCapture:exceptionOccurred"
  prototype="- (void)screenCapture:([ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) *)source exceptionOccurred:([ZegoScreenCaptureSourceExceptionType](../../api-reference/enum#zegoscreencapturesourceexceptiontype))exceptionType;"
  desc="屏幕采集异常通知"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoScreenCaptureSourceEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| source | [ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) * | 回调的屏幕采集源实例。 |
| exceptionType | [ZegoScreenCaptureSourceExceptionType](../../api-reference/enum#zegoscreencapturesourceexceptiontype) | 采集源异常类型。 |

**详情**

屏幕采集错误通知。

<Note title="">
- **通知时机**：屏幕开始采集后产生异常会触发此回调。
</Note>

<Warning title="">
- **支持版本**：3.1.0 及以上。
- **使用限制**：只适用于 Windows/macOS。
- **注意事项**：调用接口 [setEventHandler] 设置后该回调才生效。
</Warning>
</ParamField>
<ParamField
  name="screenCapture:captureType:exceptionOccurred"
  prototype="- (void)screenCapture:([ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) *)source captureType:([ZegoScreenCaptureSourceType](../../api-reference/enum#zegoscreencapturesourcetype))sourceType exceptionOccurred:([ZegoScreenCaptureSourceExceptionType](../../api-reference/enum#zegoscreencapturesourceexceptiontype))exceptionType;"
  desc="屏幕采集采集源异常通知"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoScreenCaptureSourceEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| source | [ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) * | 回调的屏幕采集源实例。 |
| sourceType | [ZegoScreenCaptureSourceType](../../api-reference/enum#zegoscreencapturesourcetype) | 采集源类型。 |
| exceptionType | [ZegoScreenCaptureSourceExceptionType](../../api-reference/enum#zegoscreencapturesourceexceptiontype) | 采集源异常类型。 |

**详情**

屏幕采集采集源异常通知。

<Note title="">
- **通知时机**：屏幕开始采集后产生异常会触发此回调。
</Note>

<Warning title="">
- **支持版本**：3.21.0 及以上。
- **使用限制**：只适用于 Windows/macOS。
- **注意事项**：调用接口 [setEventHandler] 设置后该回调才生效。
</Warning>
</ParamField>
<ParamField
  name="screenCapture:windowState:windowRect"
  prototype="- (void)screenCapture:([ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) *)source windowState:([ZegoScreenCaptureWindowState](../../api-reference/enum#zegoscreencapturewindowstate))windowState windowRect:(CGRect)windowRect;"
  desc="采集目标窗口状态发生改变。"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoScreenCaptureSourceEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| source | [ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) * | 回调的屏幕采集源实例。 |
| windowState | [ZegoScreenCaptureWindowState](../../api-reference/enum#zegoscreencapturewindowstate) | 采集的窗口状态。 |
| windowRect | ZegoRect | 采集的窗口矩形。 |

<Warning title="">
- **支持版本**：3.4.0 及以上。
- **使用限制**：只适用于 Windows/macOS
- **注意事项**：调用接口 [setEventHandler] 设置后该回调才生效。
</Warning>
</ParamField>
<ParamField
  name="screenCapture:rectChanged"
  prototype="- (void)screenCapture:([ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) *)source rectChanged:(CGRect)rect;"
  desc="采集区域发生改变。"
  parent_file="Declared in \`ZegoExpressEventHandler.h\`"
  parent_name="ZegoScreenCaptureSourceEventHandler"
  parent_type="class">
**参数**

| 名称 | 类型 | 描述 |
| --- | --- | --- |
| source | [ZegoScreenCaptureSource](../../api-reference/class#zegoscreencapturesource) * | 回调的屏幕采集源实例。 |
| rect | ZegoRect | 采集的区域矩形。 |

<Warning title="">
- **支持版本**：3.7.0 及以上。
- **使用限制**：只适用于 Windows/macOS
- **注意事项**：调用接口 [setEventHandler] 设置后该回调才生效。
</Warning>
</ParamField>

---
id: start-on-demand-transcoding
title: "TranscodeMedia"
description: "用户进行 CDN 录制时，可以将录制好的媒体文件存放在 CDN 服务器上，并通过本接口对媒体文件进行点播转码，改变源文件的编码格式、分辨率和码率等属性，在不同终端、网络环境中进行播放。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/cdn/open-api-desc
---

<h1 className={"openapi__heading"}>TranscodeMedia</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


用户进行 CDN 录制时，可以将录制好的媒体文件存放在 CDN 服务器上，并通过本接口对媒体文件进行点播转码，改变源文件的编码格式、分辨率和码率等属性，在不同终端、网络环境中进行播放。

<Warning title="注意">
首次使用本接口之前，请确认是否已经开通 CDN 录制服务。若未开通，请前往 [ZEGO 控制台](https://console.zego.im) 自助开通，详情请参考 [控制台 - 服务配置 - CDN](/console/service-configuration/activate-cdn-service)，或联系 ZEGO 技术支持开通，并配置回调地址，媒体文件转码完成后会通过 [点播转码完成回调](/real-time-video-server/callback/cdn/on-demand-transcoding-completed) 通知。
</Warning>

开发者可以通过 [点播转码完成回调](/real-time-video-server/callback/cdn/on-demand-transcoding-completed) 或 [查询媒体文件任务](/real-time-video-server/api-reference/cdn/describe-media-task) 接口，查看转码任务的状态、文件回放地址等详细信息。

<Note title="调用频率限制">同一个 AppID 下所有房间：20 次/秒</Note>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=TranscodeMedia\n","required":true,"schema":{"type":"string","enum":["TranscodeMedia"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#签名机制)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IsTest","in":"query","description":"💡公共参数。是否为测试环境。设为 true 表示使用测试环境。\n2021-11-16 及之前在 ZEGO 控制台 创建的项目默认是测试环境，可根据业务需求设置此参数；而之后创建的项目默认是正式环境。\n> ⚠️注意：测试环境跟正式环境是隔离的，请不要在操作正式环境 appid 时误把该参数标记为 true。2021-11-16 及之后创建的项目建议**不要填写该参数**。\n>\n> 📌是否必填参数：2021-11-16 及之前在 [ZEGO 控制台](https://console.zego.im)创建的项目为**必填**，之后创建的则不是必填。\n","required":false,"schema":{"type":"string","enum":["false","true"],"default":"false"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Vendor","in":"query","required":true,"schema":{"type":"string","enum":["Tencent"]},"description":"<p>CDN 厂商名。</p><p>当前仅支持取值为 Tencent：腾讯云。</p>"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"FileId","in":"query","required":true,"schema":{"type":"string"},"description":"需要转码的源文件 ID，可以通过以下方式获取：\n<ul><li><a href=\"/real-time-video-server/callback/cdn/cdn-record-completed\" target=\"blank\">录制文件生成回调</a> 的参数 FileID，仅 CDN 厂商为 Tencent 时会回调该参数。</li><li><a href=\"/real-time-video-server/callback/cdn/merge-media-completed\" target=\"blank\">媒体文件合并完成回调</a> 的参数 file_id。</li><li><a href=\"/real-time-video-server/api-reference/cdn/search-media\" target=\"blank\">检索媒体信息</a> 的参数 FileId。</li></ul>\n\n> **注意**\n>\n> ZEGO 不会对\"传入的 FileId 文件是否真实存在\"进行验证，请您注意填写正确的 FileId；传入错误的 FileId，响应参数中的 Code 为 1000。\n"}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Resolution","in":"query","required":true,"schema":{"type":"string","enum":["360p","540p","720p"]},"description":"<p>转码后的媒体文件分辨率，有以下取值可选：</p><ul><li>360p</li><li>540p</li><li>720p</li></ul>\n\n> **注意**\n>\n> 如果您需要自定义文件转码参数，请联系 ZEGO 技术支持配置自定义模板。对于常见的转码规格，默认的各分辨率转码模板对应的参数如下：\n> - 360p：封装格式 MP4，视频编码 H.264，码率 400 kbps，帧率25 fps，音频编码 AAC。\n> - 540p：封装格式 MP4，视频编码 H.264，码率 1000 kbps，帧率 25 fps，音频编码 AAC。\n> - 720p：封装格式 MP4，视频编码 H.264，码率 1800 kbps，帧率 25 fps，音频编码 AAC。\n"}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","description":"以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n<table>\n<thead>\n  <tr><th>返回码</th><th>说明</th><th>处理建议</th></tr>\n</thead>\n<tbody>\n  <tr><td>0</td><td>请求成功。</td><td>-</td></tr>\n  <tr><td>2</td><td>输入参数错误。</td><td>-</td></tr>\n  <tr><td>3</td><td>未开通相关权限。</td><td>请联系 ZEGO 技术支持。</td></tr>\n  <tr><td>4</td><td>CDN 类型不匹配。</td><td>请检查参数。</td></tr>\n  <tr><td>5</td><td>配置错误。</td><td>请联系 ZEGO 技术支持。</td></tr>\n  <tr><td>6</td><td>请求过于频繁。</td><td>请稍后重试。</td></tr>\n  <tr><td>7</td><td>鉴权失败。</td><td>请检查鉴权参数是否正确。</td></tr>\n  <tr><td>1000</td><td>请求失败。</td><td>请联系 ZEGO 技术支持。</td></tr>\n  <tr><td>41003</td><td>文件不存在。</td><td>请确认文件格式、文件 ID 等是否正确。</td></tr>\n</tbody>\n</table>\n","example":0}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"操作结果描述。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID，由 ZEGO 服务端返回。","example":"3574501647605445341"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>响应数据。</div><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Tencent</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>腾讯云返回内容（Vendor 为 Tencent 时返回）。</div><SchemaItem collapsible={false} name={"TaskId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"媒体文件转码任务的唯一标识 ID，转码结果可以通过 <a href=\"!Callback_onDemand_transcoding\" target=\"blank\">点播转码完成回调</a> 查看。","example":"1500020831-procedurev2-58ed61fcdbb0f78a0bf15cabd8ae4713tt0"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"唯一请求 ID，由请求参数 Vendor 取值对应的 CDN 厂商（即 Tencent）返回，定位问题时需要提供该次请求的 RequestId。","example":"1413c592-5ad4-404e-bfa1-589c32dbcee8"}}></SchemaItem></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"3574501647605445341\",\n  \"Data\": {\n    \"Tencent\": {\n      \"TaskId\": \"1500020831-procedurev2-58ed61fcdbb0f78a0bf15cabd8ae4713tt0\",\n      \"RequestId\": \"1413c592-5ad4-404e-bfa1-589c32dbcee8\"\n    }\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
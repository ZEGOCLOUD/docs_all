openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact: { name: Real-time Voice/Video API Support, email: support@zegocloud.com }

tags:
  - name: moderation

servers:
  $ref: '../shared-components.yaml#/servers'

paths:
  /:
    post:
      tags: [moderation]
      summary: StopCensorAudioV2
      description: |
        调用本接口结束音频流内容审核。

        <Warning title="注意">
        使用该接口前，请参考 [控制台 - 云市场 - 数美内容审核](/console/cloud-market/shumei-moderation)，按照页面指引，自助开通 `数美内容审核` 相关权限。
        </Warning>
        <Note title="说明">
        使用 POST 请求方法传递参数时：
        - Body 中的参数直接传 JsonObject 格式即可，无需序列化为 String 格式。
        - Headers 中，设置 “Content-type” 为 “application/json”。
        </Note>
        <Note title="调用频率限制">同一个 AppID 下所有房间：100 次/秒</Note>

        以下请求参数列表仅列出了接口请求参数和部分公共参数，完整公共参数列表请参考 [调用方式](./../accessing-server-apis.mdx#公共请求参数) 中的 “公共请求参数”。
      operationId: stop-censor-audio
      parameters:
        - name: Action
          in: query
          required: true
          description: |
            > 接口原型参数
            >
            > https://rtc-api.zego.im?Action=StopCensorAudioV2
          schema: { type: string, enum: [StopCensorAudioV2] }
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: '../shared-components.yaml#/components/parameters/IsTest'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StopCensorAudioRequest'
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StopCensorAudioResponse'

components:
  schemas:
    StopCensorAudioRequest:
      type: object
      required: [TaskId]
      properties:
        TaskId: 
          type: string
          description: 审核任务 ID，可在 [开始音频流审核](/real-time-video-server/api-reference/moderation/start-censor-audio) 任务的响应参数中获取。
          example: "9f58178ba8034902c6028c728bc6f6e4"
    StopCensorAudioResponse:
      type: object
      properties:
        Code: 
          type: integer
          format: int32
          description: |
            返回码。
            以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。
            <table>
              <thead>
                <tr><th>返回码</th><th>说明</th><th>处理建议</th></tr>
              </thead>
              <tbody>
                <tr><td>50006、50007</td><td>HTTP 请求失败。</td><td>请稍后重试（建议 300s），或联系 ZEGO 技术支持。</td></tr>
                <tr><td>50009</td><td>审核失败。</td><td>请稍后重试（建议 300s），或联系 ZEGO 技术支持。</td></tr>
                <tr><td>50117</td><td>配置错误，未开通数美权限。</td><td>请联系 ZEGO 技术支持开通数美相关权限。</td></tr>
              </tbody>
            </table>
          example: 0
        Message: 
          type: string
          description: 操作结果描述
          example: "success"
        RequestId: 
          type: string
          description: 请求 ID
          example: "TestRequestId1635941439344723000"


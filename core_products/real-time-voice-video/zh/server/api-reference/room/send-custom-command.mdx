---
id: send-custom-command
title: "SendCustomCommand"
description: "调用本接口在房间内推送自定义消息，即向同一房间内指定的单个或多个用户发送信令消息。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/open-api-desc
---

<h1 className={"openapi__heading"}>SendCustomCommand</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


调用本接口在房间内推送自定义消息，即向同一房间内指定的单个或多个用户发送信令消息。

客户端接收消息使用 ZEGO Express SDK 回调接口：

| 平台 |ZegoExpress SDK|LiveRoom SDK|
|-|-|-|
|iOS/macOS| onIMRecvCustomCommand | onReceiveCustomCommand |
|Android| onIMRecvCustomCommand | onRecvCustomCommand |
|Windows| onIMRecvCustomCommand |   OnRecvCustomCommand |
|Web| IMRecvCustomCommand | onRecvCustomCommand |

<Note title="调用频率限制">同一个 AppID 下所有房间：100 次/秒（测试环境：10 次/秒）</Note>
<Warning title="注意">
- 在服务端通过某个 FromUserId 发送消息时，使用相同 FromUserId 的客户端不会收到该条消息，即发送方不能接收到自己发送的消息。
- 如果开发者需要让房间内的所有用户都收到消息，调用本接口时，应传入该房间用户之外的 FromUserId。
- 使用的 FromUserId 无需登录该房间，即可直接发送消息。
</Warning>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SendCustomCommand\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SendCustomCommand"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#签名机制)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IsTest","in":"query","description":"💡公共参数。是否为测试环境。设为 true 表示使用测试环境。\n2021-11-16 及之前在 ZEGO 控制台 创建的项目默认是测试环境，可根据业务需求设置此参数；而之后创建的项目默认是正式环境。\n> ⚠️注意：测试环境跟正式环境是隔离的，请不要在操作正式环境 appid 时误把该参数标记为 true。2021-11-16 及之后创建的项目建议**不要填写该参数**。\n>\n> 📌是否必填参数：2021-11-16 及之前在 [ZEGO 控制台](https://console.zego.im)创建的项目为**必填**，之后创建的则不是必填。\n","required":false,"schema":{"type":"string","enum":["false","true"],"default":"false"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"FromUserId","in":"query","description":"发送方用户 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"ToUserId","in":"query","description":"自定义消息目的用户 ID，最大支持 10 个目的用户 ID。\n如果不填写该参数，自定义消息广播给房间内所有用户；如果填写了该参数，自定义消息只推送到目的用户。\n示例：ToUserId[]=user1&ToUserId[]=user2\n","required":false,"schema":{"type":"array","items":{"type":"string"},"minItems":1,"maxItems":10},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"MessageContent","in":"query","description":"自定义消息内容，长度不能超过 1024 个字节。使用时，需对其内容执行 URL 编码（UrlEncode）处理。","required":true,"schema":{"type":"string","maxLength":1024}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>50003</td>\n      <td>查找用户在线信息失败。</td>\n      <td>请确认请求用户 UserId 是否在线。</td>\n    </tr>\n    <tr>\n      <td>50011</td>\n      <td>用户列表长度过长。</td>\n      <td>请检查请求包中的用户个数是否超过限制。</td>\n    </tr>\n    <tr>\n      <td>50012</td>\n      <td>消息长度超过限制。</td>\n      <td>请检查参数长度是否超过限制。</td>\n    </tr>\n    <tr>\n      <td>50013</td>\n      <td>发送自定义消息失败。</td>\n      <td>请重试，或联系 ZEGO 技术支持处理。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":3005402395393320000,"description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>FailUsers</strong><span className={"openapi-schema__name"}> object[]</span></span></summary><div className={"schema-description-container"}><div className={"schema-description"}>处理失败的目标用户 ID 列表。</div><li className={"opening-array-bracket-container"}><div className={"opening-array-bracket"}><span className={"opening-array-bracket_text"}>Array</span><span className={"opening-array-bracket_symbol"}>[</span></div></li><SchemaItem collapsible={false} name={"Uid"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"1111","description":"用户 ID。"}}></SchemaItem><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":50003,"description":"失败的错误码（不在线：50003）。"}}></SchemaItem><li className={"closing-array-bracket-container"}><div className={"closing-array-bracket"}>]</div></li></div></details></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": 3005402395393320000,\n  \"Data\": {\n    \"FailUsers\": [\n      {\n        \"Uid\": \"1111\",\n        \"Code\": 50003\n      }\n    ]\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
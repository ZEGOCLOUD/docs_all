---
id: set-forbid-user-rule
title: "SetForbidUserRule"
description: "设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/forbid-user-rule/open-api-desc
---

<h1 className={"openapi__heading"}>SetForbidUserRule</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


设置用户封禁规则以封禁某些用户。设置成功后，您可以 [查询用户封禁规则](./describe-forbid-user-rules.mdx) 或 [删除用户封禁规则](./del-forbid-user-rule.mdx)。

设置用户封禁规则不会中断用户当前正在进行的推流，仅会对用户的下一次推流请求生效。若需立即封禁用户当前正在进行的推流，需单独使用[设置音视频流封禁规则](../forbid-stream-rule/set-forbid-stream-rule.mdx)，而非用户封禁规则。

<Note title="调用频率限制">同一个 AppID 下所有房间：10 次/秒。</Note>
<Accordion title="参数配置举例" defaultOpen="true">

- 假设需要封禁的用户是 user1，未登录房间 room1：

    - RuleType 取值为 1、DisabledPrivilege[] 取值为 1 时，表示该 IP 地址对应的用户无法登录任何房间。
    - RuleType 取值为 2、DisabledPrivilege[] 取值为 1 时，表示任何用户都无法登录 room1。
    - RuleType 取值为 3、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到任何房间，但无法在任何房间内推流。
    - RuleType 取值为 4、DisabledPrivilege[] 取值为 2 时，表示 user1 可以正常登录到 room1，但无法在 room1 内推流。

- 假设需要封禁的用户是 user1，且已登录房间 room1，无论 RuleType 取值如何：

    - DisabledPrivilege[] 取值为 1 或 1&2 时，user1 仍在 room1 内、但无法正常推流，需要调用 [踢出房间用户](./../kick-out-user.mdx) 接口踢出用户。
    - DisabledPrivilege[] 取值为 2 时，user1 无法在 room1 内推流。
</Accordion>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SetForbidUserRule\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SetForbidUserRule"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#签名机制)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IsTest","in":"query","description":"💡公共参数。是否为测试环境。设为 true 表示使用测试环境。\n2021-11-16 及之前在 ZEGO 控制台 创建的项目默认是测试环境，可根据业务需求设置此参数；而之后创建的项目默认是正式环境。\n> ⚠️注意：测试环境跟正式环境是隔离的，请不要在操作正式环境 appid 时误把该参数标记为 true。2021-11-16 及之后创建的项目建议**不要填写该参数**。\n>\n> 📌是否必填参数：2021-11-16 及之前在 [ZEGO 控制台](https://console.zego.im)创建的项目为**必填**，之后创建的则不是必填。\n","required":false,"schema":{"type":"string","enum":["false","true"],"default":"false"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RuleType","in":"query","description":"封禁规则类型：\n- 1：通过 IP 地址封禁用户，最多可设置 100 条；\n- 2：通过 RoomId 封禁用户，最多可设置 200 条；\n- 3：通过 UserId 封禁用户，最多可设置 200 条；\n- 4：通过 RoomId 和 UserId 封禁用户，最多可设置 200 条。\n\n其中，最多可设置的规则条数，指同时在有效期内的规则条数，不包含已失效的规则。\n\n如果您不需要某些规则，请及时调用 [删除用户封禁规则](./del-forbid-user-rule.mdx) 接口进行清理。\n","required":true,"schema":{"type":"integer","format":"int32","enum":[1,2,3,4]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IP","in":"query","description":"IP 地址。RuleType 为 1 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。RuleType 为 2、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"UserId","in":"query","description":"用户 ID。RuleType 为 3、4 时必填。","required":false,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisabledPrivilege","in":"query","description":"封禁用户所能使用的功能。1：登录。2：推流。","required":true,"schema":{"type":"array","items":{"type":"integer","format":"int32","enum":[1,2]},"minItems":1},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"EffectiveTime","in":"query","description":"封禁规则有效时长，单位：秒，取值范围 1 ～ 86400（1 天）。","required":true,"schema":{"type":"integer","format":"int64","minimum":1,"maximum":86400}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","example":0,"description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>请求成功。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>请求失败。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td>输入参数错误。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td>未开通当前接口的使用权限。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>206</td>\n      <td>App 请求 QPS 过高被限制。</td>\n      <td>降低请求频率，或联系 ZEGO 技术支持提高 QPS 限制阈值。</td>\n    </tr>\n    <tr>\n      <td>50123</td>\n      <td>当前处于有效期内的封禁规则条数超过限制。</td>\n      <td>请减少规则条数。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"success","description":"操作结果描述。"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","example":"TestRequestId1675674022729915000","description":"请求 ID。"}}></SchemaItem><SchemaItem collapsible={true} className={"schemaItem"}><details style={{}} className={"openapi-markdown__details"}><summary style={{}}><span className={"openapi-schema__container"}><strong className={"openapi-schema__property"}>Data</strong><span className={"openapi-schema__name"}> object</span></span></summary><div className={"schema-description-container"}><SchemaItem collapsible={false} name={"ExpireTime"} required={false} schemaName={"int64"} qualifierMessage={undefined} schema={{"type":"integer","format":"int64","example":1704282648,"description":"封禁规则的过期时间，Unix 时间戳，单位：秒。"}}></SchemaItem></div></details></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"TestRequestId1675674022729915000\",\n  \"Data\": {\n    \"ExpireTime\": 1704282648\n  }\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
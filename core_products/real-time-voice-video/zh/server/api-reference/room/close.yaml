openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: Real-time Voice/Video API Support
    email: support@zegocloud.com

tags:
  - name: room

servers:
  $ref: '../shared-components.yaml#/servers'

paths:
  /:
    get:
      tags:
        - room
      summary: CloseRoom
      description: |
        è°ƒç”¨æœ¬æ¥å£å°†æŠŠæˆ¿é—´å†…æ‰€æœ‰ç”¨æˆ·ä»æˆ¿é—´ç§»å‡ºï¼Œå¹¶å…³é—­æˆ¿é—´ã€‚

        å¦‚æœå¼€å‘è€…å·²å‚è€ƒ [å›è°ƒé…ç½®è¯´æ˜](/real-time-video-server/callback/receiving-callback)ï¼Œé…ç½®äº† [é€€å‡ºæˆ¿é—´å›è°ƒ](/real-time-video-server/callback/room/logged-out)ã€[æµå…³é—­å›è°ƒ](/real-time-video-server/callback/stream/destroyed)ï¼ŒæœåŠ¡ç«¯è°ƒç”¨æœ¬æ¥å£æ—¶ï¼š

        - æœåŠ¡ç«¯ä¼šæ”¶åˆ° [é€€å‡ºæˆ¿é—´å›è°ƒ](/real-time-video-server/callback/room/logged-out) é€šçŸ¥ï¼Œå¼€å‘è€…å¯ä»¥äº†è§£ç”¨æˆ·é€€å‡ºæˆ¿é—´çš„æƒ…å†µã€‚
        - åŸæˆ¿é—´å†…çš„æµçš„çŠ¶æ€ä¸ºå…³é—­ï¼ŒæœåŠ¡ç«¯ä¼šæ”¶åˆ° [æµå…³é—­å›è°ƒ](/real-time-video-server/callback/stream/destroyed)ï¼Œå¼€å‘è€…å¯ä»¥çŸ¥æ‚‰æœ‰å…³æˆ¿é—´å†…æµå…³é—­çš„ä¿¡æ¯ã€‚

        æˆ¿é—´å…³é—­åï¼Œå®¢æˆ·ç«¯ç”¨æˆ·ä¼šè¢«è¸¢å‡ºæˆ¿é—´ï¼Œä¼šæ”¶åˆ° ZEGO SDK å›è°ƒæ¥å£ï¼š

        | |ZegoExpress SDK|LiveRoom SDK|
        |-|-|-|
        |iOS/macOS| onRoomStateChanged | onKickout |
        |Android| onRoomStateChanged | onKickout |
        |Windows| onRoomStateChanged | OnKickOut |
        |Web| roomStateChanged | onKickout |

        <Note title="è°ƒç”¨é¢‘ç‡é™åˆ¶">åŒä¸€ä¸ª AppID ä¸‹æ‰€æœ‰æˆ¿é—´ï¼š1 æ¬¡/ç§’ï¼ˆæµ‹è¯•ç¯å¢ƒï¼š1 æ¬¡/ç§’ï¼‰</Note>

      operationId: close
      parameters:
        - name: Action
          in: query
          description: |
            > æ¥å£åŸå‹å‚æ•°
            >
            > https://rtc-api.zego.im?Action=CloseRoom
          required: true
          allowEmptyValue: false
          schema:
            type: string
            enum: [CloseRoom]
          style: form
          explode: true
        # å…¬å…±å‚æ•°
        - $ref: '../shared-components.yaml#/components/parameters/AppId'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: '../shared-components.yaml#/components/parameters/Timestamp'
        - $ref: '../shared-components.yaml#/components/parameters/Signature'
        - $ref: '../shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: '../shared-components.yaml#/components/parameters/IsTest'
        # ä¸šåŠ¡å‚æ•°
        - name: RoomId
          in: query
          description: æˆ¿é—´ IDã€‚
          required: true
          allowEmptyValue: false
          schema:
            type: string
        - name: CustomReason
          in: query
          description: |
            å…³é—­åŸå› ï¼Œæœ€å¤§é•¿åº¦ä¸º 256 å­—èŠ‚ã€‚
            ä½¿ç”¨æ—¶ï¼Œè¯·å¯¹è¯¥å‚æ•°å†…å®¹è¿›è¡Œ UrlEncodeã€‚
          required: false
          allowEmptyValue: false
          schema:
            type: string
        - name: RoomCloseCallback
          in: query
          default: false
          description: |
            æ˜¯å¦äº§ç”Ÿ [æˆ¿é—´å…³é—­å›è°ƒ]()ã€‚
            ç”±äºé€šå¸¸æ˜¯å¼€å‘è€…ä¸»åŠ¨å‘èµ·çš„å…³é—­è¡Œä¸ºï¼Œæ•…ä¸å†å¦è¡Œé€šè¿‡ æˆ¿é—´å…³é—­å›è°ƒ é€šçŸ¥å¼€å‘è€…ã€‚å¦‚æœæ‚¨éœ€è¦é€šè¿‡ æˆ¿é—´å…³é—­å›è°ƒ è¿›è¡Œç»Ÿä¸€çš„é€»è¾‘å¤„ç†ï¼Œå¯è‡ªè¡Œä¿®æ”¹ä¸º trueã€‚
            > **ğŸ“Œ æ³¨æ„**
            >
            > è¯¥å‚æ•°åªå½±å“æ˜¯å¦äº§ç”Ÿ æˆ¿é—´å…³é—­å›è°ƒï¼Œå…¶ä»–åŸå› å¯¼è‡´æˆ¿é—´å…³é—­çš„å›è°ƒé€šçŸ¥ï¼ˆä¾‹å¦‚ [é€€å‡ºæˆ¿é—´å›è°ƒ]()ï¼‰ä¸å—å½±å“ã€‚
          required: false
          schema:
            type: boolean
      responses:
        "200":
          description: æ“ä½œæˆåŠŸ
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CloseRoomResponse'

components:
  schemas:
    CloseRoomResponse:
      type: object
      properties:
        Code:
          type: integer
          format: int32
          description: |
            è¿”å›ç ã€‚ä»¥ä¸‹ä»…åˆ—å‡ºäº†æ¥å£ä¸šåŠ¡é€»è¾‘ç›¸å…³çš„éƒ¨åˆ†è¿”å›ç ï¼Œå®Œæ•´è¿”å›ç è¯·å‚è€ƒ [å…¨å±€è¿”å›ç ](/real-time-video-server/api-reference/return-codes)ã€‚

            <table>
              <thead>
                <tr>
                  <th>è¿”å›ç </th>
                  <th>è¯´æ˜</th>
                  <th>å¤„ç†å»ºè®®</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>5018</td>
                  <td>æˆ¿é—´å·²é”€æ¯æˆ–ä¸å­˜åœ¨ã€‚</td>
                  <td>è¯·ç¡®è®¤è¯·æ±‚æˆ¿é—´ RoomId æ˜¯å¦å­˜åœ¨ã€‚</td>
                </tr>
                <tr>
                  <td>5024</td>
                  <td>æˆ¿é—´ä¸å­˜åœ¨ï¼Œä¸ 104ã€50001 å†…éƒ¨åˆ¤æ–­é€»è¾‘ç›¸åŒã€‚</td>
                  <td>è¯·ç¡®è®¤è¯·æ±‚æˆ¿é—´ RoomId æ˜¯å¦å­˜åœ¨ã€‚</td>
                </tr>
              </tbody>
            </table>
          example: 0
        Message:
          type: string
          description: æ“ä½œç»“æœæè¿°ã€‚
          example: success
        RequestId:
          type: string
          description: è¯·æ±‚ IDã€‚
          example: TestRequestId1642755866616219000


---
id: set-forbid-stream-rule
title: "SetForbidStreamRule"
description: "设置音视频流封禁规则。"
api: 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
info_path: core_products/real-time-voice-video/zh/server/api-reference/room/forbid-stream-rule/open-api-desc
---

<h1 className={"openapi__heading"}>SetForbidStreamRule</h1>

<MethodEndpoint method={"get"} path={"/"}></MethodEndpoint>


设置音视频流封禁规则。

设置成功后，您可以 [查询音视频流封禁规则](./describe-forbid-stream-rules.mdx) 或 [删除音视频流封禁规则](./del-forbid-stream-rule.mdx)。

<Note title="调用频率限制">同一个 AppID 下所有房间：10 次/秒。</Note>
<Warning title="注意">
参数 DisableAudio 和 DisableVideo 的使用：
- 必须至少有一个取值为 1，否则调用本接口会出错。
- 针对同一条流 ID，如果多次调用本接口设置不同的封禁规则（每次调用接口时的 DisableAudio 和 DisableVideo 参数取值不同），则以最后一次调用接口的参数设置为准。
</Warning>

## Request
<details style={{"marginBottom":"1rem"}} className={"openapi-markdown__details"} data-collapsed={false} open={true}><summary style={{}}><h3 className={"openapi-markdown__details-summary-header-params"}>Query Parameters</h3></summary><div><ul><ParamsItem className={"paramsItem"} param={{"name":"Action","in":"query","description":"> 接口原型参数\n>\n> https://rtc-api.zego.im?Action=SetForbidStreamRule\n","required":true,"allowEmptyValue":false,"schema":{"type":"string","enum":["SetForbidStreamRule"]},"style":"form","explode":true}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"AppId","in":"query","description":"💡公共参数。AppId，ZEGO 分配的用户唯一凭证。","required":true,"schema":{"type":"integer","format":"uint32"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureNonce","in":"query","description":"💡公共参数。随机字符串。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Timestamp","in":"query","description":"💡公共参数。Unix 时间戳，单位为秒。最多允许 10 分钟的误差。","required":true,"schema":{"type":"integer","format":"int64"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"Signature","in":"query","description":"💡公共参数。签名，用于验证请求的合法性。请参考[签名机制](/real-time-video-server/api-reference/accessing-server-apis#签名机制)生成。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"SignatureVersion","in":"query","description":"💡公共参数。签名版本号。","required":true,"schema":{"type":"string","default":"2.0","enum":["2.0"]}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"IsTest","in":"query","description":"💡公共参数。是否为测试环境。设为 true 表示使用测试环境。\n2021-11-16 及之前在 ZEGO 控制台 创建的项目默认是测试环境，可根据业务需求设置此参数；而之后创建的项目默认是正式环境。\n> ⚠️注意：测试环境跟正式环境是隔离的，请不要在操作正式环境 appid 时误把该参数标记为 true。2021-11-16 及之后创建的项目建议**不要填写该参数**。\n>\n> 📌是否必填参数：2021-11-16 及之前在 [ZEGO 控制台](https://console.zego.im)创建的项目为**必填**，之后创建的则不是必填。\n","required":false,"schema":{"type":"string","enum":["false","true"],"default":"false"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"RoomId","in":"query","description":"房间 ID。","required":true,"schema":{"type":"string"}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"StreamId","in":"query","description":"流 ID，最大不超过 256 字节。","required":true,"schema":{"type":"string","maxLength":256}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisableAudio","in":"query","description":"是否封禁音频。0：不封禁（默认）；1：封禁。","required":false,"schema":{"type":"integer","format":"int32","enum":[0,1],"default":0}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"DisableVideo","in":"query","description":"是否封禁视频。0：不封禁（默认）；1：封禁。","required":false,"schema":{"type":"integer","format":"int32","enum":[0,1],"default":0}}}></ParamsItem><ParamsItem className={"paramsItem"} param={{"name":"EffectiveTime","in":"query","description":"封禁规则有效时长，单位：秒。默认 21600。范围 1 ～ 86400（超过 24 小时的取值将自动调整为 24 小时）。","required":false,"schema":{"type":"integer","format":"int64","minimum":1,"maximum":86400,"default":21600}}}></ParamsItem></ul></div></details>
<div><div><ApiTabs label={undefined} id={undefined}><TabItem label={"200"} value={"200"}><div>操作成功</div><div><MimeTabs className={"openapi-tabs__mime"} schemaType={"response"}><TabItem label={"application/json"} value={"application/json"}><SchemaTabs className={"openapi-tabs__schema"}><TabItem label={"Schema"} value={"Schema"}><details style={{}} className={"openapi-markdown__details response"} data-collapsed={false} open={true}><summary style={{}} className={"openapi-markdown__details-summary-response"}><strong>Schema</strong></summary><ul className={"response-schema-first-body-node-container"}><SchemaItem collapsible={false} name={"Code"} required={false} schemaName={"int32"} qualifierMessage={undefined} schema={{"type":"integer","format":"int32","description":"返回码。以下仅列出了接口业务逻辑相关的部分返回码，完整返回码请参考 [全局返回码](/real-time-video-server/api-reference/return-codes)。\n\n<table>\n  <thead>\n    <tr>\n      <th>返回码</th>\n      <th>说明</th>\n      <th>处理建议</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <td>0</td>\n      <td>请求成功。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>1</td>\n      <td>请求失败。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>2</td>\n      <td>输入参数错误。</td>\n      <td>-</td>\n    </tr>\n    <tr>\n      <td>9</td>\n      <td>未开通当前接口的使用权限。</td>\n      <td>请联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>123</td>\n      <td>设置流信息失败。</td>\n      <td>请重试，或联系 ZEGO 技术支持处理。</td>\n    </tr>\n    <tr>\n      <td>206</td>\n      <td>App 请求 QPS 过高被限制。</td>\n      <td>降低请求频率，或联系 ZEGO 技术支持提高 QPS 限制阈值。</td>\n    </tr>\n  </tbody>\n</table>\n"}}></SchemaItem><SchemaItem collapsible={false} name={"Message"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"操作结果描述。","example":"success"}}></SchemaItem><SchemaItem collapsible={false} name={"RequestId"} required={false} schemaName={"string"} qualifierMessage={undefined} schema={{"type":"string","description":"请求 ID。","example":"TestRequestId167562222222915000"}}></SchemaItem></ul></details></TabItem><TabItem label={"Example (from schema)"} value={"Example (from schema)"}><ResponseSamples responseExample={"{\n  \"Code\": 0,\n  \"Message\": \"success\",\n  \"RequestId\": \"TestRequestId167562222222915000\"\n}"} language={"json"}></ResponseSamples></TabItem></SchemaTabs></TabItem></MimeTabs></div></TabItem></ApiTabs></div></div>
      
# 跑通示例源码

---

ZEGO 提供了服务端示例源码（Node.js）和客户端示例源码（iOS），通过同时运行这两份示例源码，您可以快速构建应用，完整地体验已开通权限的小游戏效果；您也可以通过阅读示例源码，了解实现小游戏的基础实践。

本文分为两部分：

1. [跑通服务端示例源码（Node.js）](#跑通服务端示例源码nodejs)
2. [跑通客户端示例源码（iOS）](#跑通客户端示例源码ios)

<Warning title="注意">

- 以上源码用于演示产品功能，仅供开发者接入时参考，ZEGO 不负责源码的后续维护。
- 以上示例源码未经严格测试，若开发者计划将源码用于生产环境，请确保发布前进行充分测试，避免发生潜在问题造成损失。
</Warning>

## 跑通服务端示例源码（Node.js）

<Warning title="注意">

为保障数据安全，本服务端示例源码不得用于上线。对于擅自将本服务端源码用于生产环境而造成的一切风险和损失，ZEGO 不负任何责任。
</Warning>

### 准备环境

在运行客户端示例源码（Node.js）前，请确保开发环境满足以下要求：

- 已安装 Node.js。
- Windows 或 macOS 计算机已连接到 Internet。

### 前提条件

- 已在 [ZEGO 控制台](https://console.zego.im) 创建项目，并获取该项目的 AppID 和 ServerSecret，详情请参考 [控制台 - 项目信息](https://doc-zh.zego.im/article/12107)。
- 已联系 ZEGO 商务人员开通小游戏服务。
- 已获取服务端示例源码，详情请参考 [SDK 下载](../download.mdx)。

### 示例源码目录结构

下面目录结构为服务端示例源码的文件结构，本节所涉及的文件路径均为相对于此目录的路径。

```
ZegoMiniGameServerDemo
├── index.js        # 主文件
├── package.json    # 配置文件
└── utils
  ├── config.js    # 填写在 ZEGO 控制台创建的项目的 AppID 和 ServerSecret
  ├── gameToken.js # 服务端生成 Token 
  └── getToken04.js 
```

### 运行示例源码

<Steps>
<Step title="解压服务端源码压缩包 “ZegoMiniGameServerDemo.zip”，获取 “ZegoMiniGameServerDemo”文件夹。">
{}
</Step>
<Step title="修改 “ZegoMiniGameServerDemo/utils/config.js” 文件，在下图红框标识区域填写 “AppID”。">
<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/server_demo_appid.jpeg" /></Frame>
</Step>
<Step title="在同文件中，填写 “ServerSecret“。">
<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/ServerSecret.jpeg" /></Frame>
</Step>
<Step title="进入 “ZegoMiniGameServerDemo”文件夹，在终端执行以下代码，以启动小游戏服务端。">
```bash
# 安装依赖
npm i 
node index.js
```
</Step>
<Step title="执行代码后，即可获得服务端地址，可用作客户端示例源码的后台服务地址。">
服务端示例源码运行后结果如图所示：
<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/server_sourcecodes_address.jpeg" /></Frame>
</Step>
</Steps>


## 跑通客户端示例源码（iOS）

### 准备环境

在运行客户端示例源码（iOS）前，请确保开发环境满足以下要求：

- Xcode 15.0 或以上版本。
- iOS 11.0 或以上版本（推荐使用真机）。
- iOS 设备已经连接到 Internet（推荐使用真机）。
- 已安装 CocoaPods。安装 CocoaPods 的方法以及常见问题可参考 [CocoaPods 常见问题](https://doc-zh.zego.im/faq/CocoaPods_question?product=ExpressVideo&platform=macos#1)。

### 前提条件

- 已在 [ZEGO 控制台](https://console.zego.im) 创建项目，获取项目的 AppID，详情请参考 [控制台 - 项目信息](https://doc-zh.zego.im/article/12107)。
- 已联系 ZEGO 商务人员开通小游戏服务并指定希望体验的小游戏。
- 已跑通服务端示例源码，详情请参考上文 [跑通服务端示例源码（Node.js）](#跑通服务端示例源码nodejs)。
- 已获取客户端示例源码，详情请参考 [SDK 下载](../download.mdx)。


### 示例源码目录结构

下面目录结构为 iOS 端示例源码的文件结构，本节所涉及的文件路径均为相对于此目录的路径。

```tree
.
├── Podfile
├── Podfile.lock
├── ZegoMiniGameEngineDemo
├── ZegoMiniGameEngineDemo.xcodeproj
└── ZegoMiniGameEngineDemo.xcworkspace
```

### 运行示例源码

<Steps>
<Step title="打开 “AppStore”，搜索 “Xcode” 并下载安装。">
<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/iOS/ZegoExpressEngine/Common/appstore-xcode.png" /></Frame>
</Step>
<Step title="解压 iOS 客户端示例源码压缩包获取文件夹 “ZegoMiniGameEngineDemoSrc-iOS”，并使用终端进入该文件夹。">
{}
</Step>
<Step title="执行 `pod repo update` 命令更新本地索引，确保能安装最新版本的 SDK。">
{}
</Step>
<Step title="执行 `pod install` 命令安装 SDK。">
{}
</Step>
<Step title="打开 Xcode，选择左上角的菜单 “File > Open...”，在解压后的示例源码文件夹中，找到 “ZegoMiniGameEngineDemo.xcworkspace” 文件打开。">
<Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/iOS/ZegoExpressEngine/Common/xcode-open-file.png" /></Frame>
</Step>
<Step title="登录 Apple 开发者账号。">
  1. 打开 Xcode，选择左上角的菜单 “Xcode > Preferences...”。
  <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/xcode_preferences.png" /></Frame>

  2. 单击 “Accounts” 选项卡，单击左下角的 “+”，选择添加 “Apple ID”，单击 “Continue”。
  <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/iOS/ZegoExpressEngine/Common/xcode-account.png" /></Frame>

  3. 输入 Apple ID 和 Password 登录。
  <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/iOS/ZegoExpressEngine/Common/xcode-login-apple-id.png" /></Frame>

</Step>
<Step title="修改 Bundle Identifier 和开发者证书。">
  打开 Xcode，单击左侧的 “ZegoMiniGameEngineDemo” 项目。单击 “Signing & Capabilities” 选项卡，修改项目的 Team 和 Bundle Identifier 为自己的相关信息。
  <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/Team_and_BundleID.jpeg" /></Frame>
</Step>
<Step title="修改 “/ZegoMiniGameEngineDemo/KeyCenter.m” 文件，填写 SDK 初始化所需的 “AppID”，并且将 hostUrl 地址修改为跑通服务端源码后获得的地址（如本文 [前提条件](#前提条件-2) 所述）。">
  <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/appid_host.jpeg" /></Frame>
</Step>
<Step title="将 iOS 设备连接到开发电脑，单击 Xcode 上方的的 “Any iOS Device”，在弹出的选项框选择该 iOS 设备（或者模拟器）。">
  <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/device_selection.jpeg" /></Frame>
</Step>
<Step title="单击 Xcode 左上角的 “Build” 按钮编译和运行示例源码，即可体验小游戏。">
  <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/run.jpeg" /></Frame>
</Step>
</Steps>
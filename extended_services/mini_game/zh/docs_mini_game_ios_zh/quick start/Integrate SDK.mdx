# 集成 SDK

- - -

## 准备环境

在开始集成 ZegoMiniGameEngine SDK 前，请确保开发环境满足以下要求：
- Xcode 14.0 或以上版本。
- iOS 11.0 或以上版本（推荐使用真机）。
- iOS 设备已经连接到 Internet（推荐使用真机）。

## 集成 SDK

### （可选）新建项目

<Accordion title="此步骤以如何创建新项目为例，如果是集成到已有项目，可忽略此步。" defaultOpen="false">

1. 启动 Xcode，在 “Welcome to Xcode” 窗口中单击 “Create a new Xcode project” 或选择 “File > New > Project” 菜单。
2. 在出现的表单中，选择 iOS 平台，并在 “Application” 下选择 “App”。

    <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/QuickStart/NewProject_1.png" /></Frame>

3. 填写表单并选取各个选项来配置项目，完成后，单击 “Next”。

    必须提供 “Product Name” 和 “Organization Identifier”，用于创建 App 的唯一标识 “Bundle Identifier”。

    <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/QuickStart/NewProject_2.png" /></Frame>

4. 选择项目存储路径，单击 “Create” 创建项目。

    <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/QuickStart/NewProject_3.png" /></Frame>

</Accordion>


###  导入 ZEGO Express SDK

ZEGO MiniGameEngine SDK 需要与 **ZEGO Express SDK 3.1.1 或以上版本** 搭配使用。如果您的项目已集成相关 SDK，可忽略此步骤，否则，请根据您的项目需求，参考以下任一文完成集成：

- [实时音视频 - 集成 SDK](https://doc-zh.zego.im/article/196)。
- [实时语音 - 集成 SDK](https://doc-zh.zego.im/article/3574)。

###  导入 ZEGO MiniGameEngine SDK

#### 方式一：复制 SDK 文件手动集成


1. 请参考 [SDK 下载](../download.mdx) 文档，下载最新版本的 SDK 并解压。

2. 手动将 SDK 动态库文件 ZegoMiniGameEngine.xcframework 和 ZegoConnection.xcframework 拷贝到开发者的项目目录下。其中，ios-arm64 表示适用于 iOS 平台的 arm64 架构的真机。

3. 打开 Xcode，选择 “File > Add Files to "xxx"（xxx 为项目名）” 菜单，添加 SDK 库文件到项目。

    <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/iOS/ZegoExpressEngine/Common/add-files.png" /></Frame>

4. 选择 “TARGETS > General > Frameworks,Libraries,and Embedded Content” 菜单，添加 ZegoMiniGameEngine.xcframework 和 ZegoConnection.xcframework，将 “Embed” 设置为 “Embed & Sign”。

    <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/embed_and_sign1.png" /></Frame>
5. 如果你的集成的库是 1.5.0 及以上版本，需要在 Podfile 文件中添加依赖库 AFNetworking 和 SSZipArchive。

    ```bash
    pod 'SSZipArchive'
    pod 'AFNetworking', '~> 4.0'
    ```

#### 方式二： 使用 CocoaPods 自动集成

1. 安装 CocoaPods，安装时的常见问题请参考 [CocoaPods 常见问题 - 安装 CocoaPods](https://doc-zh.zego.im/article/13860#1)。

2. 打开终端，进入项目根目录，执行 `pod init` 命令创建 Podfile 文件。

3. 打开 Podfile 文件，在 “target” 下添加 `pod 'ZegoMiniGameEngine'`，需要将 “MyProject” 替换为开发者的 Target 名称。

    <Warning title="注意">

    由于 SDK 为 XCFramework，只有 1.10.0 或以上版本的 CocoaPods 才能集成该 SDK。
    </Warning>

    ```ruby
    target 'MyProject' do
        use_frameworks!
        pod 'ZegoMiniGameEngine'
    end
    ```

4. 执行 `pod repo update` 命令更新本地索引，确保能安装最新版本的 SDK。

5. 执行 `pod install` 命令安装 SDK。

###  （可选）设置权限

如果您需要在项目中实现直播、语聊房等场景，请设置摄像头和麦克风权限。

1. 在 Xcode 中，选择 “TARGETS > Info > Custom iOS Target Properties” 菜单。

    <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/info.jpeg" /></Frame>

2. 单击 “+” 添加按钮，添加摄像头和麦克风权限。

    - `Privacy - Camera Usage Description`

    - `Privacy - Microphone Usage Description`

    <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/add_privacy.jpeg" /></Frame>
    效果如下：
    <Frame width="512" height="auto" caption=""><img src="https://storage.zego.im/sdk-doc/Pics/MiniGames/privacy_example.jpeg" /></Frame>

## 下一步

到此为止，您已成功向您的项目集成了相关 SDK。接下来，您可参考下列文档，了解如何开播弹幕游戏：

- [主播在 PC 端开播弹幕游戏](./Damaku%20Games%20Quick%20Start/Live%20streaming%20games%20on%20PC.mdx)。
- [主播在移动端开播弹幕游戏](./Damaku%20Games%20Quick%20Start/Live%20streaming%20games%20on%20mobile.mdx)。

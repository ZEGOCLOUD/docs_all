# Update the mixed-stream layout
---



## Description

Updates the mixed-stream layout settings at any time during the recording.

## Request method and endpoint

- Request method: POST
- Request endpoint: `https://cloudrecord-api.zego.im/?Action=UpdateLayout`
- Transmission protocol: HTTPS
- Rate limit: 10 requests/second

## Request parameters

Listed below are the parameters specific to this request. For the list of common request parameters, see [Accessing Server APIs - Common parameters](./Accessing%20Server%20APIs.mdx#common-parameters).

<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Required</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>TaskId</td>
    <td>String</td>
    <td>Yes</td>
    <td>Task ID. The value is a 16-byte character string.</td>
  </tr>
  <tr>
    <td>MixMode</td>
    <td>Int</td>
    <td>No</td>
    <td>Layout.<ul><li>1: customized layout. In this layout, <code>MixInputList</code> is required. </li><li>2 (default value): grid layout</li><li>3: horizontal layout</li><li>4: vertical layout</li><li>5: floating layout</li></ul></td>
  </tr>
  <tr>
    <td>MixInputList</td>
    <td>Array of Object</td>
    <td>No</td>
    <td>Customized layout parameters.<br />For details, see <a href="#mix_input_list">MixInputList member parameters</a>.</td>
  </tr>
  <tr>
    <td>MixMaxResolutionStreamId</td>
    <td>String</td>
    <td>No</td>
    <td>Stream ID of the large screen when <code>MixMode</code> is set to 3, 4, or 5.</td>
  </tr>
</tbody></table>

<p id="mix_input_list">Listed below are <code>MixInputList</code> member parameters.</p>
<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Required</th>
    <th>Description</th>
  </tr>
  <tr>
    <td id="StreamId">StreamId</td>
    <td>String</td>
    <td>No</td>
    <td>ID of the stream to be displayed on a screen. If this parameter is not set, the stream will be matched based on its order to enter the room.</td>
  </tr>
  <tr>
    <td>ViewType</td>
    <td>Int</td>
    <td>No</td>
    <td>Type of content to be displayed on a screen.<ul><li>1 (default value): audio and video</li><li>2: whiteboard</li></ul>The value <code>2</code> is valid only when whiteboard recording is enabled. This parameter can be set to <code>2</code> for only one screen. Otherwise, an error will be returned.</td>
  </tr>
  <tr>
    <td>Top</td>
    <td>Int</td>
    <td>Yes</td>
    <td>Y-axis coordinate of the upper left corner of a screen on the canvas. The value ranges from 0 to 1920 and can't exceed the value of <code>Bottom</code> or the canvas height.</td>
  </tr>
  <tr>
    <td>Left</td>
    <td>Int</td>
    <td>Yes</td>
    <td>X-axis coordinate of the upper left corner of a screen on the canvas. The value ranges from 0 to 1920 and can't exceed the value of <code>Right</code> or the canvas width.</td>
  </tr>
  <tr>
    <td>Bottom</td>
    <td>Int</td>
    <td>Yes</td>
    <td>Y-axis coordinate of the lower right corner of a screen on the canvas. The value ranges from 0 to 1920 and can't exceed the canvas height.</td>
  </tr>
  <tr>
    <td>Right</td>
    <td>Int</td>
    <td>Yes</td>
    <td>X-axis coordinate of the lower right corner of a screen on the canvas. The value ranges from 0 to 1920 and can't exceed the canvas width.</td>
  </tr>
  <tr>
    <td>Layer</td>
    <td>Int</td>
    <td>Yes</td>
    <td>Layer priority of a screen. When an overlap occurs between two screens, the one with a larger value of <code>Layer</code> will be displayed on top.</td>
  </tr>
  <tr>
    <td>FillMode</td>
    <td>Int</td>
    <td>No</td>
    <td>Filling mode when the aspect ratio of a video stream is different from that of the screen.<ul><li>1 (default value): cropping. In this mode, the video stream is scaled equally to fully fill in the screen and the content outside the screen will be cropped.</li><li>2: scaling. In this mode, the video screen is scaled equally to fill in the screen and black borders will be filled in along all sides.</li></ul></td>
  </tr>
  <tr id="BackgroundImage">
    <td>BackgroundImage</td>
    <td>String</td>
    <td>No</td>
    <td>URL of the background image of a stream. This parameter is valid only when <a href="#StreamId">StreamId</a> is set.<br />When the specified stream specified for a customized layout does not exist or the streaming is interrupted, the background image specified by this parameter is displayed.<ul><li>We recommend that the resolution of the background image be the same as the output video resolution. If the resolutions are different, the background image will be stretched or compressed to fully fill in the screen.</li><li>The background image can be in JPG or PNG format. The maximum image size is 5 MB. If the background image download fails, the setting will be invalid.</li><li>HTTP and HTTPS URLs are supported.</li></ul></td>
  </tr>
</tbody></table>


## Sample request

The following is a request example of the `UpdateLayout` method:
- Request URL  
```
https://cloudrecord-api.zego.im/?Action=UpdateLayout
&AppId=1234567890
&SignatureNonce=15215528852396
&Timestamp=1234567890
&Signature=7a2c0f11145fb760d607a07b54825013
&SignatureVersion=2.0
```
- Request message body  
```json
{
	"TaskId": "xxxx",
	"MixMode": 1,
	"MixInputList": [
		{
            "StreamId": "xxxx", 
            "ViewType": 1, 
            "Top": 0, 
            "Left": 0, 
            "Bottom": 720, 
            "Right": 540, 
            "Layer": 1
		},
		{
            "StreamId": "", 
            "ViewType": 1, 
            "Top": 0, 
            "Left": 540, 
            "Bottom": 360, 
            "Right": 1080, 
            "Layer": 1
		},
		{
            "StreamId": "", 
            "ViewType": 1, 
            "Top": 360, 
            "Left": 540, 
            "Bottom": 720, 
            "Right": 1080, 
            "Layer": 1
		}
	]
}
```

## Response parameters

<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>Code</td>
    <td>Int64</td>
    <td>Return code.</td>
  </tr>
  <tr>
    <td>Message</td>
    <td>String</td>
    <td>Description of the request execution result.</td>
  </tr>
  <tr>
    <td>RequestId</td>
    <td>String</td>
    <td>Request ID. </td>
  </tr>
</tbody></table>


## Sample response

The following is a response example of the `UpdateLayout` method:
```json
{
    "Code": 0,
    "Message": "succeed",
    "RequestId": "abcd123"
}
```

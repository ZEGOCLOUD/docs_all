# Query recording status
---


## Description

Queries the status of a recording task that started within 3 days before this method is called.

## Request method and endpoint

- Request method: POST
- Request endpoint: `https://cloudrecord-api.zego.im/?Action=DescribeRecordStatus`
- Transmission protocol: HTTPS
- Rate limit: 10 requests/second

## Request parameters

Listed below are the parameters specific to this request. For the list of public request parameters, see [Accessing Server APIs - Public parameters](./Accessing%20Server%20APIs.mdx#public-parameters).

<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Required</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>TaskId</td>
    <td>Int</td>
    <td>Yes</td>
    <td>Task ID. The value is a 16-byte character string.</td>
  </tr>
</tbody></table>


## Sample request

The following is a request example of the `DescribeRecordStatus` method:
- Request URL  
```
https://cloudrecord-api.zego.im/?Action=DescribeRecordStatus
&AppId=1234567890
&SignatureNonce=15215528852396
&Timestamp=1234567890
&Signature=7a2c0f11145fb760d607a07b54825013
&SignatureVersion=2.0
```
- Request message body  
```json
{
	"TaskId": "X3CgNeE4I1qAAABN"
}
```

## Response parameters

<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>Code</td>
    <td>Int64</td>
    <td>Return code.</td>
  </tr>
  <tr>
    <td>Message</td>
    <td>String</td>
    <td>Description of the request execution result.</td>
  </tr>
    <tr>
    <td>RequestId</td>
    <td>String</td>
    <td>Request ID. </td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Object</td>
    <td>Response object.<br />For details, see <a href="#Data">Data member parameters</a>.</td>
  </tr>
</tbody></table>

<p id="Data">Listed below are <code>Data</code> member parameters.</p>
<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>RoomId</td>
    <td>String</td>
    <td>Room ID.</td>
  </tr>
  <tr>
    <td>RecordMode</td>
    <td>Int</td>
    <td>For details, see <a href="./Start Recording.mdx" target="_blank">Start recording</a>.</td>
  </tr>
  <tr>
    <td>StreamType</td>
    <td>Int</td>
    <td>For details, see <a href="./Start Recording.mdx" target="_blank">Start recording</a>.</td>
  </tr>
  <tr>
    <td>RecordBeginTimestamp</td>
    <td>Int64</td>
    <td>Recording start time, in ms. The value is a Unix timestamp.</td>
  </tr>
  <tr>
    <td>RecordEndTimestamp</td>
    <td>Int64</td>
    <td>Recording end time, in ms. The value is a Unix timestamp.</td>
  </tr>
  <tr>
    <td>Status</td>
    <td>Int</td>
    <td>Recording status.<ul><li>1: initialized </li><li>2: ongoing</li><li>3: completed</li><li>4: ended abnormally</li><li>5: paused</li></ul></td>
  </tr>
  <tr>
    <td>RecordFiles</td>
    <td>Array of Object</td>
    <td>File information.<br />For details, see <a href="#record_files">RecordFiles member parameters</a>.<br />If the video snapshotting function is used, this parameter will not be returned.</td>
  </tr>
</tbody></table>


<Warning title="Warning">

For a recording task in completed state, if no streaming is initiated in the room during the recording, no recording file will be generated and the `RecordFiles` parameter will not be returned.

</Warning>

<p id="record_files">Listed below are <code>RecordFiles</code> member parameters.</p>
<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>UserId</td>
    <td>String</td>
    <td>ID of the user who initiates streaming. In mixed-stream recording mode, the value is the same as that of <code>MixOutputStreamId</code>.</td>
  </tr>
  <tr>
    <td>UserName</td>
    <td>String</td>
    <td>Nickname of the user who initiates streaming. In mixed-stream recording mode, the value is the same as that of <code>MixOutputStreamId</code>.</td>
  </tr>
  <tr>
    <td>StreamId</td>
    <td>String</td>
    <td>ID of the recorded stream. In mixed-stream recording mode, the value is the same as that of <code>MixOutputStreamId</code>.</td>
  </tr>
  <tr>
    <td>FileId</td>
    <td>String</td>
    <td>File ID. For details, see the <code>OutputFileRule</code> parameter in <a href="./Start Recording.mdx" target="_blank">Start recording</a>.</td>
  </tr>
  <tr>
    <td>VideoId</td>
    <td>String</td>
    <td>Video ID received after a recording file is successfully uploaded to Alibaba Cloud VOD or Tencent Cloud VOD platform. For Alibaba Cloud VOD, the value maps <code>VideoId</code>. For Tencent Cloud VOD, the value maps <code>FileId</code>.</td>
  </tr>
  <tr>
    <td>FileUrl</td>
    <td>String</td>
    <td>File access URL. This parameter is not returned when the third-party cloud storage platform of Qiniu Cloud or Alibaba Cloud VOD is used.</td>
  </tr>
  <tr>
    <td>OutputFileFormat</td>
    <td>String</td>
    <td>Format of the output recording file. The options are <code>mp4</code>, <code>flv</code>, <code>hls</code>, <code>jpg</code>, and <code>aac</code>.</td>
  </tr>
  <tr>
    <td>FileSize</td>
    <td>Int64</td>
    <td>File size, in bytes.</td>
  </tr>
  <tr>
    <td>Duration</td>
    <td>Int</td>
    <td>Recording duration, in ms.</td>
  </tr>
  <tr>
    <td>ResolutionWidth</td>
    <td>Int</td>
    <td>Resolution width of a video, in pixels.</td>
  </tr>
  <tr>
    <td>ResolutionHeight</td>
    <td>Int</td>
    <td>Resolution height of a video, in pixels.</td>
  </tr>
  <tr>
    <td>MediaTrackType</td>
    <td>Int</td>
     <td>Media type of a recording file.<ul><li>1: audio only</li><li>2: video only</li><li>3: audio and video</li></ul></td>
  </tr>
  <tr>
    <td>BeginTimestamp</td>
    <td>Int64</td>
    <td>Unix timestamp when a new stream signal is received in a room, in ms.</td>
  </tr>
  <tr>
    <td>CustomBeginTimestamp</td>
    <td>Int64</td>
    <td>Customized timestamp. This timestamp is carried in the stream SEI information, and is extracted from SEI through the specified protocol.</td>
  </tr>
  <tr>
    <td>Status</td>
    <td>Int</td>
    <td>File status.<ul><li>1: being recorded</li><li> 2: being uploaded to the specified cloud storage platform</li><li>3: successfully uploaded to the specified cloud storage platform</li><li>4: failed to be uploaded to the specified cloud storage platform but successfully uploaded to ZEGOCLOUD's backup cloud storage platform</li><li>5: failed to be uploaded either to the specified cloud storage platform or ZEGOCLOUD's backup cloud storage platform</li></ul></td>
  </tr>
</tbody></table>

## Sample response

The following is a response example of the `DescribeRecordStatus` method:
```json
{
    "Code": 0,
    "Message": "succeed",
    "RequestId": "abcd123",
    "Data": {
        "RoomId": "xxxx",
        "RecordMode": 2,
        "StreamType": 3,
        "RecordBeginTimestamp": 1601221452099,
        "RecordEndTimestamp": 1601221508795,
        "Status": 3,
        "RecordFiles": [
            {
                "UserId": "my_out",
                "UserName": "my_out",
                "StreamId": "my_out",
                "FileId": "X3CgNeE4I1qAAABN_xxxx_my_out_VA_20200927154419775.mp4",
                "VideoId": "820e50e52e0a490caf44eec8aec527a7",
                "OutputFileFormat": "mp4",
                "FileSize": 432643544,
                "Duration": 33874,
                "ResolutionWidth": 1920,
                "ResolutionHeight": 1080,
                "MediaTrackType": 3,
                "BeginTimestamp": 1601221459830,
                "CustomBeginTimestamp": 0,
                "Status": 3,
                "FileUrl": "https://xxxx.oss-cn-shanghai.aliyuncs.com/record/X3CgNeE4I1qAAABN_xxxx_my_out_VA_20200927154419775.mp4"
            }
        ]
    }
}
```

# Get AccessToken
---
## 1 Description

The access_token is the globally unique credential of the interface, and the access party needs to use it when calling each interface. The access_token is valid for 2 hours, and needs to be refreshed regularly and stored properly.

## 2 Request Method and Endpoint

- Request method: POST/JSON
- Request endpoint:

 | Service Environment | Rate Limit | Endpoint| 
|:----|:----|:----|
| Domestic official environment | 10 times/sec | https://cloudrecord-sh.zego.im/access_token |
| Domestic test environment | 10 times/sec | https://cloudrecord-test.zego.im/access_token |
| Overseas official environment | 10 times/sec | https://cloudrecord-hk.zegocloud.com/access_token |
| Overseas test environment | 10 times/sec | https://cloudrecord-test.zegocloud.com/access_token |

- Transmission protocol: HTTPS


## 3 Request Parameters

| Parameter | Type | Required|Description |
|:----|:----|:----|:----|
| app_id | Int64 | Yes | The AppID assigned by ZEGO to developers, which uniquely identifies an application. |
| seq | Int64 | Yes | The protocol serial number, you can fill in any value. It is recommended that the value be unique for each request, and a timestamp can be used.|
| token | String | Yes | The authentication certificate of ZEGO background service. |
| version | Int | Yes | The protocol version number, which is filled with 1 by default. |

Token generation rule description:

```json
tokenInfo ='{
    "Ver": 1,
    "Hash": "0800fc577294c34e0b28ad2839435945",
    "Nonce": "0123456789ABCDEF",
    "Expired": 1592028898 // Unit: seconds
}'

// Note that JSON must be constructed first, and then converted into a string
token = base64(tokenInfo)
```  

Among them, tokenInfo is a string in JSON format, and the fields in tokenInfo are described as follows:

| Parameter | Type | Description |
|:----|:----|:----|
| ver | Int | Version number, fill in 1 by default. |
| hash | String | hash = md5sum(sprintf("%u%s%s%u", app_id, server_app_secret, nonce, expired)); The final result of md5sum is a 32-byte lowercase hex-encoded string. |
| nonce | String | Random string with a length of 16 bytes. |
| expired | Int64 | Token expiration time, Unix timestamp, unit: second. |

Description of the rules for generating the hash field in tokenInfo:

| Parameter | Type | Description |
|:----|:----|:----|
| app_id | Int64 | App unique identifier. |
| server_app_secret | String | ServerSecret App unique credential key, the length is 16 bytes, please get it from [ZEGO Management Console\|_blank](https://console.zego.im). |

## 4 Request Example

The following is an example of a request for the access_token interface.  

```json
{
    "version": 1,
    "seq": 1,
    "app_id": 0000,
    "token": "TOKEN"
}
```

## 5 Response Parameters

|Parameter|Type|Description|
|:----|:----|:----|
|code|Int|Error code. |
|message|String|Error description. |
|data|Object|token information. |

The data members are as follows:

|Parameter|Type|Description|
|:----|:----|:----|
|access_token|String|The obtained credentials. |
|expires_in|Int64|The valid time of the voucher, in seconds. |

## 6 Response Example

The following is a sample response from the access_token interface.
```json
{
    "code": 0,
    "data": {
        "access_token": "c205dytwQTd4ZlZjSjBLTXY0V3FzYUtBY1Q9ZEo0eGFJcEt3WVBKSlFGeXh5aGZITjJWYnlBcT0",
        "expires_in": 7200
    },
    "message": "success"
}
```

# Query the recording task list

- - -


## Description

Queries the list of ongoing and completed recording tasks.

## Request method and endpoint

- Request method: POST
- Request endpoint: `https://cloudrecord-api.zego.im/?Action=DescribeTasks`
- Transmission protocol: HTTPS
- Rate limit: 10 requests/second

## Request parameters

Listed below are the parameters specific to this request. For the list of common request parameters, see [Accessing Server APIs - Common parameters](./Accessing%20Server%20APIs.mdx#common-parameters).

<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Required</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>Status</td>
    <td>Int</td>
    <td>Yes</td>
    <td><ul><li>2: ongoing recording task</li><li>3: completed recording task</li></ul></td>
  </tr>
  <tr>
    <td>RoomId</td>
    <td>String</td>
    <td>No</td>
    <td>ID of the room whose recording task needs to be queried. If this parameter is not set, recording tasks of all rooms under the AppId will be queried.</td>
  </tr>
  <tr>
    <td>PageOffset</td>
    <td>Int</td>
    <td>No</td>
    <td>Page number when the pagination query mode is used. The value starts from 1. If this parameter is not set or set to 0, the value <code>1</code> is used by default.</td>
  </tr>
  <tr>
    <td>PageSize</td>
    <td>Int</td>
    <td>No</td>
    <td>Number of records on each page when the pagination query mode is used. The value must be greater than 0 and less than or equal to 50. If this parameter is not set, the value <code>50</code> is used by default.</td>
  </tr>
  <tr>
    <td>StartTime</td>
    <td>Int64</td>
    <td>Yes</td>
    <td>Query start time, in ms. The value is a Unix timestamp and can't be earlier than 3 days before the current time.</td>
  </tr>
  <tr>
    <td>EndTime</td>
    <td>Int64</td>
    <td>Yes</td>
    <td>Query end time, in ms. The value is a Unix timestamp and must be later than the time specified by <code>StartTime</code>. The query time range can't exceed 3 days and the method will return only the records found within this time range.</td>
  </tr>
</tbody></table>



## Sample request

The following is a request example of the `DescribeTasks` method:
- Request URL  
```
https://cloudrecord-api.zego.im/?Action=DescribeTasks
&AppId=1234567890
&SignatureNonce=15215528852396
&Timestamp=1234567890
&Signature=7a2c0f11145fb760d607a07b54825013
&SignatureVersion=2.0
```
- Request message body  
```json
{
    "Status":2,
    "RoomId":"1230",
    "StartTime": 1628474401000,
    "EndTime": 1628475402000,
    "PageOffset": 1,
    "PageSize": 50
}
```

## Response parameters

<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>Code</td>
    <td>Int64</td>
    <td>Return code.</td>
  </tr>
  <tr>
    <td>Message</td>
    <td>String</td>
    <td>Description of the request execution result.</td>
  </tr>
    <tr>
    <td>RequestId</td>
    <td>String</td>
    <td>Request ID. </td>
  </tr>
  <tr>
    <td>Data</td>
    <td>Object</td>
    <td>Response object.<br />For details, see <a href="#Data">Data member parameters</a>.</td>
  </tr>
</tbody></table>

<p id="Data">Listed below are <code>Data</code> member parameters.</p>
<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>PageOffset</td>
    <td>Int</td>
    <td>Page number when the pagination query mode is used.</td>
  </tr>
  <tr>
    <td>PageSize</td>
    <td>Int</td>
    <td>Number of records on each page when the pagination query mode is used.</td>
  </tr>
  <tr>
    <td>TotalCount</td>
    <td>Int</td>
    <td>Total number of query results.</td>
  </tr>
  <tr>
    <td>TaskList</td>
    <td>JSON Array</td>
    <td>For details, see <a href="#TaskList">TaskList member parameters</a>.</td>
  </tr>
</tbody></table>

<p id="TaskList">Listed below are <code>TaskList</code> member parameters.</p>
<table>
  
  <tbody><tr>
    <th>Parameter</th>
    <th>Type</th>
    <th>Description</th>
  </tr>
  <tr>
    <td>RecordBeginTimestamp</td>
    <td>Int64</td>
    <td>Recording start timestamp.</td>
  </tr>
  <tr>
    <td>TaskId</td>
    <td>String</td>
    <td>Recording task ID.</td>
  </tr>
  <tr>
    <td>RoomId</td>
    <td>String</td>
    <td>Room ID.</td>
  </tr>
  <tr>
    <td>Status</td>
    <td>Int</td>
    <td>Recording status.<ul><li>1: initialized</li><li>2: ongoing</li><li>3: completed</li><li>4: ended abnormally</li><li>5: paused</li></ul></td>
  </tr>
</tbody></table>


## Sample response

The following is a response example of the `DescribeTasks` method:

```json
{
    "Code": 0,
    "Message": "succeed",
    "RequestId": "abcd123",
    "Data": {
        "PageOffset": 1,
        "PageSize": 50,
        "TotalCount": 3,
        "TaskidList": [
            {
                "RecordBeginTimestamp": 1628565227899,
                "TaskId": "YRHu6-E4IyvEAAAD",
                "RoomId": "1000",
                "Status": 2
            },
            {
                "RecordBeginTimestamp": 1628565226303,
                "TaskId": "YRHu6uE4IyvEAAAC",
                "RoomId": "1000",
                "Status": 2
            },
            {
                "RecordBeginTimestamp": 1628565222498,
                "TaskId": "YRHu5uE4IyvEAAAB",
                "RoomId": "1000",
                "Status": 2
            }
        ]
    }
}
```

openapi: 3.0.0
info:
  title: open-api-desc
  version: 1.0.0
  contact:
    name: ZEGO Support
    email: support@zegocloud.com

servers:
  $ref: './shared-components.yaml#/servers'

paths:
  /:
    post:
      tags:
        - cloud-recording
        - POST
      summary: StopRecord
      description: |
        Call this API to stop cloud recording.

        After successfully calling the StopRecord API, the cloud recording service will exit the recording room and upload the recording files to the configured third-party cloud storage.

        <Note title="Note">Call frequency limit: 50 times/second</Note>
      operationId: stop-record
      parameters:
        - name: Action
          in: query
          description: |
            > API prototype parameter
            >
            > https://cloudrecord-api.zego.im?Action=StopRecord
          required: true
          allowEmptyValue: false
          schema:
            type: string
            enum: [StopRecord]
          style: form
          explode: true
        - $ref: './shared-components.yaml#/components/parameters/AppId'
        - $ref: './shared-components.yaml#/components/parameters/SignatureNonce'
        - $ref: './shared-components.yaml#/components/parameters/Timestamp'
        - $ref: './shared-components.yaml#/components/parameters/SignatureVersion'
        - $ref: './shared-components.yaml#/components/parameters/Signature'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StopRecordRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StopRecordResponse'

components:
  schemas:
    StopRecordRequest:
      type: object
      required: [TaskId]
      properties:
        TaskId:
          type: string
          description: Recording task ID, a fixed-length string of 16 bytes.
          example: "XXXXXXXXXXX"
      example:
        TaskId: "XXXXXXXXXXX"

    StopRecordResponse:
      type: object
      properties:
        Code:
          type: integer
          format: int64
          description: |
            Error code.
          example: 0
        Message:
          type: string
          description: Error description.
          example: "succeed"
        RequestId:
          type: string
          description: Request ID.
          example: "abcd123"
      example:
        Code: 0
        Message: "succeed"
        RequestId: "abcd123"


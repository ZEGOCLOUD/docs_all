---

date: "2023-03-31"
ce-comparison:
  - "macOS Monterey:macOS Monterey"
  - "electron:electron"
  - "应用:application"
  - "摄像头:camera"
  - "设备:device"
  - "crash:crash"
---
import { Title } from './title';
import ArticleMetadata from '../../zh/faq/ArticleMetadata';

<Title>Running electron applications on macOS Monterey (12.2.1) and above versions causes camera and other devices to not work or crash?</Title>

<ArticleMetadata language="en" product="Video Call / Audio Call" platform="Electron" />



---

This is because macOS Monterey (12.2.1) and above versions require actively setting permissions for these devices. Please add the following handling in the electron main process code:

```js
const {systemPreferences} = require('electron')
async function checkDeviceAccessPrivilege()
{
    const cameraAccessPrivilege = systemPreferences.getMediaAccessStatus('camera');
    console.log(
        `checkDeviceAccessPrivilege before apply cameraAccessPrivilege: ${cameraAccessPrivilege}`
    );
    if (cameraAccessPrivilege !== 'granted') {
        await systemPreferences.askForMediaAccess('camera');
    }
    const micAccessPrivilege = systemPreferences.getMediaAccessStatus('microphone');
    console.log(
        `checkDeviceAccessPrivilege before apply micAccessPrivilege: ${micAccessPrivilege}`
    );
    if (micAccessPrivilege !== 'granted') {
        await systemPreferences.askForMediaAccess('microphone');
    }
    const screenAccessPrivilege = systemPreferences.getMediaAccessStatus('screen');
    console.log(
        `checkDeviceAccessPrivilege before apply screenAccessPrivilege: ${screenAccessPrivilege}`
    );
}

if(process.platform == 'darwin')
{
    checkDeviceAccessPrivilege()
}
```



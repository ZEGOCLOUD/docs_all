---

date: "2022-07-13"
ce-comparison:
  - "如何:how"
  - "修改:modify"
  - "音频:audio"
  - "3A:3A"
  - "处理:processing"
  - "配置:configuration"
---
import { Title } from './title';
import ArticleMetadata from '../../zh/faq/ArticleMetadata';

<Title>How to modify the configuration of audio 3A processing?</Title>

<ArticleMetadata language="en" product="Video Call / Audio Call / Live streaming" platform="iOS / Android / macOS / Windows" />


---

During real-time audio and video calls, 3A processing can be performed on audio, which mainly includes AEC (Acoustic Echo Cancelling), AGC (Automatic Gain Control), and ANS (Active Noise Control), to improve call quality and user experience.

- AEC (Echo Cancellation): Filter the collected audio data to reduce echo in the audio.
- AGC (Automatic Gain Control): After enabling this function, the SDK can automatically adjust the microphone volume, adapt to near and far sound pickup, and maintain stable volume.
- ANS (Noise Suppression): Identify and eliminate background noise in the sound. After enabling this function, the human voice can be clearer.

We provide [example source code](https://doc-zh.zego.im/real-time-video-ios-oc/quick-start/run-example-code) for your reference. Please check the files in the "/ZegoExpressExample/Examples/AdvancedAudioProcessing/AECANSAGC" directory in the code.

<Note title="Note">


The following documentation examples (code, API interfaces, documentation links, etc.) are all based on iOS.

</Note>




## Operation Steps

Before using audio 3A processing, please ensure:

- Integrated ZEGO Express SDK in the project and implemented basic real-time audio and video functions. For details, please refer to [Quick Start - Integrate](https://doc-zh.zego.im/real-time-video-ios-oc/quick-start/integrating-sdk) and [Quick Start - Implement Video Call](https://doc-zh.zego.im/real-time-video-ios-oc/quick-start/implementing-video-call).
- Created a project in [ZEGOCLOUD Console](https://console.zegocloud.com/) and applied for a valid AppID and AppSign. For details, please refer to "Project Information" in [Console - Project Management](https://doc-zh.zego.im/console/project-info).

### Set AEC (Echo Cancellation)

<Warning title="Note">


[enableAEC](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-aec), [enableHeadphoneAEC](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-headphone-aec), and [setAECMode](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#set-aec-mode) must be called before [startPublishingStream](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-publishing-stream), [startPlayingStream](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-playing-stream-canvas), [startPreview](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-preview), [createMediaPlayer](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#create-media-player), and [createAudioEffectPlayer](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#create-audio-effect-player) to be effective.


</Warning>



Developers can complete echo cancellation settings according to the following steps:

1. Call the [enableAEC](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-aec) interface to enable echo cancellation. After this function is enabled, the SDK will filter the collected audio data to reduce echo in the audio.

2. (Optional) Developers can call the [enableHeadphoneAEC](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-headphone-aec) interface to set whether to enable echo cancellation when using headphones.

3. After enabling echo cancellation, developers can call the [setAECMode](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#set-aec-mode) interface to set the echo cancellation mode. The SDK supports the following three echo cancellation modes:

|Enum Value|Description|
|-|-|
|ZegoAECModeAggressive| Aggressive echo cancellation, which may significantly affect sound quality, but the echo will be eliminated very cleanly.|
|ZegoAECModeMedium|Moderate echo cancellation, which may slightly affect sound quality, but residual echo will be less.|
|ZegoAECModeSoft|Comfortable echo cancellation, which basically does not affect sound quality, and may sometimes leave a little echo, but will not affect normal listening.|

Taking setting moderate echo cancellation as an example:

```objc
// Enable AEC
[[ZegoExpressEngine sharedEngine] enableAEC:YES];
// Enable AEC when using headphones
[[ZegoExpressEngine sharedEngine] enableHeadphoneAEC:YES];
// Set AEC mode to ZegoAECModeMedium
[[ZegoExpressEngine sharedEngine] setAECMode:ZegoAECModeMedium];
```

### Set AGC (Automatic Gain Control)

<Warning title="Note">


[enableAGC](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-agc) must be called before [startPublishingStream](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-publishing-stream), [startPlayingStream](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-playing-stream-canvas), [startPreview](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-preview), [createMediaPlayer](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#create-media-player), and [createAudioEffectPlayer](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#create-audio-effect-player) to be effective.



</Warning>



Call the [enableAGC](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-agc) interface to enable automatic gain control. After this function is enabled, the SDK can automatically adjust the microphone volume, adapt to near and far sound pickup, and maintain stable volume.

```objc
// Enable AGC
[[ZegoExpressEngine sharedEngine] enableAGC:YES];
```

### Set ANS (Noise Suppression)

<Warning title="Note">


[enableANS](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-ans), [enableTransientANS](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-transient-ans), and [setANSMode](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#set-ans-mode) must be called before [startPublishingStream](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-publishing-stream), [startPlayingStream](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-playing-stream-canvas), [startPreview](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#start-preview), [createMediaPlayer](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#create-media-player), and [createAudioEffectPlayer](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#create-audio-effect-player) to be effective.



</Warning>



Developers can complete noise suppression settings according to the following steps:

1. Call the [enableANS](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-ans) interface to enable noise suppression. After this function is enabled, the human voice can be clearer.

2. (Optional) Developers can call the [enableTransientANS](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#enable-transient-ans) interface to set whether to enable transient noise suppression. Transient noise suppression is used to suppress transient noise such as keyboard tapping and table tapping.

3. After enabling noise suppression, developers can call the [setANSMode](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_ios~class~ZegoExpressEngine#set-ans-mode) interface to set the noise suppression mode. The default value is "ZegoANSModeMedium".

The SDK supports the following three noise suppression modes:

|Enum Value|Description|
|-|-|
|ZegoANSModeAggressive|Aggressive noise suppression, which may significantly damage sound quality, but has a good noise reduction effect.|
|ZegoANSModeMedium|Moderate noise suppression, which may damage some sound quality, but has a good noise reduction effect.|
|ZegoANSModeSoft|Light noise suppression, which basically does not damage sound quality, but will leave some noise.|

Taking setting moderate noise suppression as an example:
```objc
// Enable ANS
[[ZegoExpressEngine sharedEngine] enableANS:YES];
// Enable transient noise suppression
[[ZegoExpressEngine sharedEngine] enableTransientANS:YES];
// Set ANS mode to ZegoANSModeMedium
[[ZegoExpressEngine sharedEngine] setANSMode:ZegoANSModeMedium];
```

## Recommended Configuration

The default and recommended configuration of audio 3A processing in the SDK are as follows:

|Interface Name|Interface Description|Default Configuration|Recommended Configuration
|-|-|-|-|
|enableAEC|Enable/disable echo cancellation |Default is Yes, but will be disabled in call mode.|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|enableHeadphoneAEC|Whether to enable echo cancellation when using headphones|Yes|In ordinary voice chat or game sessions, it is recommended to enable this function. In other cases, it is generally not necessary to enable it.|
|setAECMode|Set echo cancellation mode|ZegoAECModeAggressive (aggressive echo cancellation)|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|enableAGC|Enable/disable automatic gain control|Yes|<ul><li>In ordinary voice chat scenarios, it is recommended to use the default configuration.</li><li>In music radio scenarios, it is recommended not to enable automatic gain control to restore the human voice.</li><li>In education scenarios, such as large classes, small classes, and 1V1, it is recommended to enable automatic gain control.</li></ul>|
|enableANS|Enable/disable noise suppression|Yes|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|
|setANSMode|Set audio noise suppression mode|ZegoANSModeMedium (moderate noise suppression)|In general usage scenarios, it is recommended not to modify this configuration and keep the default.|


## Related Documentation

- [How to handle audio echo issues?](/faq/audio-echo-issue)
- [How to handle audio noise issues?](/faq/audio-noise-issue)



---

date: "2025-09-25"
ce-comparison:
  - "ZIM:ZIM"
  - "SDK:SDK"
  - "中:in"
  - "onRoomAttributesUpdated:onRoomAttributesUpdated"
  - "回调:callback"
  - "与:and"
  - "onRoomAttributesBatchUpdated:onRoomAttributesBatchUpdated"
  - "区别:difference"
  - "是什么:what is"
  - "分别:respectively"
  - "在:in"
  - "什么:what"
  - "情况:situation"
  - "下:under"
  - "触发:trigger"
---
import { Title } from './title';
import ArticleMetadata from '../../zh/faq/ArticleMetadata';

<Title>What is the difference between the onRoomAttributesUpdated callback and the onRoomAttributesBatchUpdated callback in ZIM SDK? When are they triggered respectively?</Title>

<ArticleMetadata language="en" product="In-app chat" platform="iOS / Android / macOS / Windows / Web / Mini Program / Electron / ReactNative / Unity3D" />

- - -

## Callback Differences

Both callbacks are used to receive update notifications for room attributes (key-value). The core difference is whether the operation types included in a single update operation are uniform.

| Callback Name | Trigger Scenario | Parameter Characteristics |
| --- | --- | --- |
| [onRoomAttributesUpdated](https://docs.zegocloud.com/article/api?doc=zim_API~java_android~class~ZIMEventHandler#on-room-attributes-updated) | In a single update, all key-value changes are of the same operation type (all additions/modifications or all deletions) | The ZIMRoomAttributesUpdateInfo carried in the callback has the action field clearly defined as add (add or modify key-value) or delete (delete key-value), containing only the update information of this single operation type |
| [onRoomAttributesBatchUpdated](https://docs.zegocloud.com/article/api?doc=zim_API~java_android~class~ZIMEventHandler#on-room-attributes-batch-updated) | In a single update, both operation types are included (both added/modified key-values and deleted key-values) | The callback carries `List<ZIMRoomAttributesUpdateInfo>`, the list must contain two elements: one update information with action as add, and one with action as delete, corresponding to the specific content of the two operations respectively |

## Recommended Processing Flow

1. Initialize listening: First register both `onRoomAttributesUpdated` and `onRoomAttributesBatchUpdated` callbacks to ensure no update notifications are missed.
2. Full-scale baseline query: Query the full data of room attributes through the `queryRoomAttributes` interface, store the results in memory as the initial baseline value.
3. Incremental update merge:
    - When receiving `onRoomAttributesUpdated`, based on the action (add/delete) in the callback, directly perform the corresponding operation (add/modify or delete key-value) on the full data in memory.
    - When receiving `onRoomAttributesBatchUpdated`, traverse the two [ZIMRoomAttributesUpdateInfo](https://docs.zegocloud.com/article/api?doc=zim_API~java_android~struct~ZIMRoomAttributesUpdateInfo) in the list, merge the memory data according to add and delete actions respectively, and finally keep the memory data consistent with the actual room attributes.



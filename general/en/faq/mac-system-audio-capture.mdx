---

date: "2022-11-15"
ce-comparison:
  - "Mac:Mac"
  - "端:end"
  - "如何:how"
  - "实现:implement"
  - "系统:system"
  - "声卡:sound card"
  - "采集:capture"
---
{/* TODO translate */}
import { Title } from './title';
import ArticleMetadata from '../../zh/faq/ArticleMetadata';

<Title>How to implement system sound card capture on Mac?</Title>

<ArticleMetadata language="en" product="Video Call / Audio Call / Live streaming" platform="macOS" />


---
## Background
On Windows and Mac platforms, ZEGO SDK supports using the [enableMixSystemPlayout](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_macos~class~ZegoExpressEngine#enable-mix-system-playout) interface to capture through the system sound card and mix the sound played by the system into the stream publishing. For example, sound played by a browser, sound played by third-party player software, etc.

## Limitations
Windows supports this feature by default, but Mac requires the use of plugins such as SoundFlower or BlackHole, and has the following limitations:
- MAC Intel chip series: supports SoundFlower and BlackHole plugins.
- MAC M1 chip series: only supports BlackHole plugin.

## Usage
### Installation and Use of Soundflower

<Note title="Note">



Soundflower only supports installation and use on MAC Intel series.

</Note>




1. [Download Soundflower](https://soundflower.en.softonic.com/mac?ex=CORE-1224.1), get the Soundflower-2.0b2.dmg installation file, and double-click to open it.
2. Double-click Soundflower.pkg to start the installation.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/1.png" /></Frame></Frame>

3. (Optional) If you encounter permission issues during installation, you need to select "Security & Privacy" > "Open Anyway" in "System Preferences" and reinstall.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/2.png" /></Frame></Frame>

4. Configure "Audio MIDI Settings".
    1. Use the shortcut key command + space (SpotLight), enter "MIDI" in the search box to search, and enter the "Audio MIDI Settings" interface.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/3.png" /></Frame></Frame>
    2. Create a new multi-output device. In the lower left corner of the audio device interface, select "+" > "Create Multi-Output Device".
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/4.png" /></Frame></Frame>
    3. Select "Built-in Output" as the main device, select 44.1kHz as the sample rate, and check both "Built-in Output" and "Soundflower(2ch)".
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/5.png" /></Frame></Frame>
    4. In the left navigation of the audio device interface, right-click "Multi-Output Device" and select "Use this device for sound output" and "Use this device for alerts and sound effects" respectively to set the system default sound output and alert output.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/6.png" /></Frame></Frame>
    At this time, the "speaker" icon on the built-in output will be displayed on the multi-output device.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/7.png" /></Frame></Frame>

### Installation and Use of BlackHole

<Note title="Note">



BlackHole supports installation and use on MAC Intel series and MAC M1 series.

</Note>




1. [Download BlackHole](https://existential.audio/blackhole/), get the BlackHole2ch.v0.4.0.pkg installation file, and double-click to start the installation.
2. (Optional) If you encounter permission issues during installation, you need to select "Security & Privacy" > "Open Anyway" in "System Preferences" and reinstall.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/8.png" /></Frame></Frame>

3. Configure "Audio MIDI Settings".

    1. Use the shortcut key command + space (SpotLight), enter "MIDI" in the search box to search, and enter the "Audio MIDI Settings" interface.
    2. Create a new multi-output device. In the lower left corner of the audio device interface, select "+" > "Create Multi-Output Device".
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/9.png" /></Frame></Frame>
    3. Select "Built-in Output" as the main device, select 48kHz as the sample rate, and check both "Built-in Output" and "BlackHole 2ch".
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/10_2.png" /></Frame></Frame>
    4. In the left navigation of the audio device interface, right-click "Multi-Output Device" and select "Use this device for sound output" and "Use this device for alerts and sound effects" respectively to set the system default sound output and alert output.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/10.png" /></Frame></Frame>
    At this time, the "speaker" icon on the built-in output will be displayed on the multi-output device.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/11.png" /></Frame></Frame>

### Enable System Sound Card Capture

After completing the installation and configuration of Soundflower or BlackHole, we can capture the sound played by the system while also hearing the local playback sound through speakers or headphones.

Mac can enable sound card capture by calling the SDK interface [enableMixSystemPlayout](https://docs.zegocloud.com/article/api?doc=Express_Video_SDK_API~objective-c_macos~class~ZegoExpressEngine#enable-mix-system-playout) and setting the parameter enable to YES, mixing the sound played by the system into the stream publishing.

### Set the volume of system sound card capture

<Warning title="Note">



After creating a multi-output device and setting the multi-output device as the system default sound output, the Mac keys "F10"/"F11"/"F12" will not be able to adjust the volume, because these 3 keys are only valid when the system default sound output device is a "non-aggregated device".

</Warning>



After using Soundflower or BlackHole, you can set the volume of system sound card capture in the following ways:

- Method 1: Use the SDK interface setMixSystemPlayoutVolume to set the volume of system sound card capture.
- Method 2: In the MIDI interface, separately adjust the input or output volume of Soundflower or BlackHole. Both can reduce the volume captured from the system.
<Frame width="512" height="auto" caption=""><Frame width="512" height="auto" caption=""><img src="https://doc-media.zego.im/sdk-doc/Pics/FAQ/mac_mixsystemOut/12.png" /></Frame></Frame>


